define("metaserver/static/js/dropbox/proto/collections_messages/collections_messages",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/file_info/file_info","metaserver/static/js/dropbox/proto/file_viewer_preview_metadata/preview_metadata","metaserver/static/js/dropbox/proto/file_viewer_preview_metadata/shared_file"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.collections_messages=void 0;const l=(n=o.__importStar(n)).Reader,i=n.Writer,s=n.util,a=n.roots.default||(n.roots.default={});var c;t.default=a,t.collections_messages=a.collections_messages=((c=a.collections_messages||{}).Dimensions=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.height=0,e.prototype.width=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.height&&Object.hasOwnProperty.call(e,"height")&&t.uint32(8).uint64(e.height),null!=e.width&&Object.hasOwnProperty.call(e,"width")&&t.uint32(16).uint64(e.width),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.Dimensions;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.height=e.uint64();break;case 2:n.width=e.uint64();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.Dimensions"},e})(c.Dimensions||{}),c.ItemInfoFilter=(function(){const e={},t=Object.create(e);return t[e[0]="GET_ALL_INFO"]=0,t[e[1]="ORIGINAL_ID_AND_NAME_ONLY"]=1,t})(),c.Item=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}let t;return e.prototype.dimensions=null,e.prototype.noteContent="",e.prototype.linkUrl="",e.prototype.file=null,e.prototype.previewMetadata=null,Object.defineProperty(e.prototype,"item",{get:s.oneOfGetter(t=["noteContent","linkUrl","file"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.noteContent&&Object.hasOwnProperty.call(e,"noteContent")&&t.uint32(10).string(e.noteContent),null!=e.linkUrl&&Object.hasOwnProperty.call(e,"linkUrl")&&t.uint32(18).string(e.linkUrl),null!=e.file&&Object.hasOwnProperty.call(e,"file")&&a.file_info.FileInfo.encode(e.file,t.uint32(42).fork()).ldelim(),null!=e.dimensions&&Object.hasOwnProperty.call(e,"dimensions")&&a.collections_messages.Dimensions.encode(e.dimensions,t.uint32(50).fork()).ldelim(),null!=e.previewMetadata&&Object.hasOwnProperty.call(e,"previewMetadata")&&a.file_viewer_preview_metadata.PreviewMetadata.encode(e.previewMetadata,t.uint32(58).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.Item;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 6:n.dimensions=a.collections_messages.Dimensions.decode(e,e.uint32());break;case 1:n.noteContent=e.string();break;case 2:n.linkUrl=e.string();break;case 5:n.file=a.file_info.FileInfo.decode(e,e.uint32());break;case 7:n.previewMetadata=a.file_viewer_preview_metadata.PreviewMetadata.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.Item"},e})(c.Item||{}),c.OriginalIdAndName=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.id="",e.prototype.name="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.OriginalIdAndName;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.id=e.string();break;case 2:n.name=e.string();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.OriginalIdAndName"},e})(c.OriginalIdAndName||{}),c.CollectionItem=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}let t;return e.prototype.id="",e.prototype.itemInfo=null,e.prototype.originalIdAndName=null,Object.defineProperty(e.prototype,"info",{get:s.oneOfGetter(t=["itemInfo","originalIdAndName"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(74).string(e.id),null!=e.originalIdAndName&&Object.hasOwnProperty.call(e,"originalIdAndName")&&a.collections_messages.OriginalIdAndName.encode(e.originalIdAndName,t.uint32(90).fork()).ldelim(),null!=e.itemInfo&&Object.hasOwnProperty.call(e,"itemInfo")&&a.collections_messages.Item.encode(e.itemInfo,t.uint32(98).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.CollectionItem;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 9:n.id=e.string();break;case 12:n.itemInfo=a.collections_messages.Item.decode(e,e.uint32());break;case 11:n.originalIdAndName=a.collections_messages.OriginalIdAndName.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.CollectionItem"},e})(c.CollectionItem||{}),c.GetCollectionItemsResponse=(function(e){function e(e){if(this.collectionItems=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.collectionItems=s.emptyArray,e.prototype.collectionName="",e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.collectionItems&&e.collectionItems.length)for(let o=0;o<e.collectionItems.length;++o)a.collections_messages.CollectionItem.encode(e.collectionItems[o],t.uint32(10).fork()).ldelim();return null!=e.collectionName&&Object.hasOwnProperty.call(e,"collectionName")&&t.uint32(18).string(e.collectionName),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.GetCollectionItemsResponse;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.collectionItems&&n.collectionItems.length||(n.collectionItems=[]),n.collectionItems.push(a.collections_messages.CollectionItem.decode(e,e.uint32()));break;case 2:n.collectionName=e.string();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.GetCollectionItemsResponse"},e})(c.GetCollectionItemsResponse||{}),c.CollectionType=(function(){const e={},t=Object.create(e);return t[e[0]="MANUAL"]=0,t[e[1]="SEED"]=1,t})(),c.CollectionSharingInfo=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.url="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.url&&Object.hasOwnProperty.call(e,"url")&&t.uint32(10).string(e.url),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.CollectionSharingInfo;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.url=e.string();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.CollectionSharingInfo"},e})(c.CollectionSharingInfo||{}),c.CollectionInfo=(function(e){function e(e){if(this.sampleFiles=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.id="",e.prototype.name="",e.prototype.numOfItems=0,e.prototype.sampleFiles=s.emptyArray,e.prototype.collectionType=0,e.prototype.sharingInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.name&&Object.hasOwnProperty.call(e,"name")&&t.uint32(18).string(e.name),null!=e.numOfItems&&Object.hasOwnProperty.call(e,"numOfItems")&&t.uint32(32).uint32(e.numOfItems),null!=e.sampleFiles&&e.sampleFiles.length)for(let o=0;o<e.sampleFiles.length;++o)a.collections_messages.Item.encode(e.sampleFiles[o],t.uint32(42).fork()).ldelim();return null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(50).string(e.id),null!=e.collectionType&&Object.hasOwnProperty.call(e,"collectionType")&&t.uint32(56).int32(e.collectionType),null!=e.sharingInfo&&Object.hasOwnProperty.call(e,"sharingInfo")&&a.collections_messages.CollectionSharingInfo.encode(e.sharingInfo,t.uint32(66).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.CollectionInfo;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 6:n.id=e.string();break;case 2:n.name=e.string();break;case 4:n.numOfItems=e.uint32();break;case 5:n.sampleFiles&&n.sampleFiles.length||(n.sampleFiles=[]),n.sampleFiles.push(a.collections_messages.Item.decode(e,e.uint32()));break;case 7:n.collectionType=e.int32();break;case 8:n.sharingInfo=a.collections_messages.CollectionSharingInfo.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.CollectionInfo"},e})(c.CollectionInfo||{}),c.CollectionPagePrefetchArgs=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.CollectionPagePrefetchArgs;for(;e.pos<o;){let t=e.uint32();e.skipType(7&t)}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.CollectionPagePrefetchArgs"},e})(c.CollectionPagePrefetchArgs||{}),c.GetCollectionItemsPrefetchArgs=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.collectionId="",e.prototype.itemInfoFilter=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.collectionId&&Object.hasOwnProperty.call(e,"collectionId")&&t.uint32(10).string(e.collectionId),null!=e.itemInfoFilter&&Object.hasOwnProperty.call(e,"itemInfoFilter")&&t.uint32(16).int32(e.itemInfoFilter),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.GetCollectionItemsPrefetchArgs;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.collectionId=e.string();break;case 2:n.itemInfoFilter=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.GetCollectionItemsPrefetchArgs"},e})(c.GetCollectionItemsPrefetchArgs||{}),c.GetAllCollectionsArgs=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.GetAllCollectionsArgs;for(;e.pos<o;){let t=e.uint32();e.skipType(7&t)}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.GetAllCollectionsArgs"},e})(c.GetAllCollectionsArgs||{}),c.GetAllCollectionsResponse=(function(e){function e(e){if(this.collectionInfos=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.collectionInfos=s.emptyArray,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.collectionInfos&&e.collectionInfos.length)for(let o=0;o<e.collectionInfos.length;++o)a.collections_messages.CollectionInfo.encode(e.collectionInfos[o],t.uint32(10).fork()).ldelim();return t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.GetAllCollectionsResponse;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.collectionInfos&&n.collectionInfos.length||(n.collectionInfos=[]),n.collectionInfos.push(a.collections_messages.CollectionInfo.decode(e,e.uint32()));break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.GetAllCollectionsResponse"},e})(c.GetAllCollectionsResponse||{}),c.GetCollectionInfoResponse=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.collectionInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.collectionInfo&&Object.hasOwnProperty.call(e,"collectionInfo")&&a.collections_messages.CollectionInfo.encode(e.collectionInfo,t.uint32(10).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.GetCollectionInfoResponse;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.collectionInfo=a.collections_messages.CollectionInfo.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.GetCollectionInfoResponse"},e})(c.GetCollectionInfoResponse||{}),c.FeatureFlags=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.isManualOrderingEnabled=!1,e.prototype.isCollectionDynamicFacetsEnabled=!1,e.prototype.isCollectionSharingEnabled=!1,e.prototype.isCollectionLinksEnabled=!1,e.prototype.isCollectionSuggestionItemsEnabled=!1,e.prototype.isCollectionSmartThumbnailsEnabled=!1,e.prototype.isDownloadSharedCollectionEnabled=!1,e.prototype.collectionDynamicFacetsVariant="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.isManualOrderingEnabled&&Object.hasOwnProperty.call(e,"isManualOrderingEnabled")&&t.uint32(16).bool(e.isManualOrderingEnabled),null!=e.isCollectionDynamicFacetsEnabled&&Object.hasOwnProperty.call(e,"isCollectionDynamicFacetsEnabled")&&t.uint32(32).bool(e.isCollectionDynamicFacetsEnabled),null!=e.isCollectionSharingEnabled&&Object.hasOwnProperty.call(e,"isCollectionSharingEnabled")&&t.uint32(48).bool(e.isCollectionSharingEnabled),null!=e.isCollectionLinksEnabled&&Object.hasOwnProperty.call(e,"isCollectionLinksEnabled")&&t.uint32(56).bool(e.isCollectionLinksEnabled),null!=e.isCollectionSuggestionItemsEnabled&&Object.hasOwnProperty.call(e,"isCollectionSuggestionItemsEnabled")&&t.uint32(64).bool(e.isCollectionSuggestionItemsEnabled),null!=e.isCollectionSmartThumbnailsEnabled&&Object.hasOwnProperty.call(e,"isCollectionSmartThumbnailsEnabled")&&t.uint32(72).bool(e.isCollectionSmartThumbnailsEnabled),null!=e.isDownloadSharedCollectionEnabled&&Object.hasOwnProperty.call(e,"isDownloadSharedCollectionEnabled")&&t.uint32(80).bool(e.isDownloadSharedCollectionEnabled),null!=e.collectionDynamicFacetsVariant&&Object.hasOwnProperty.call(e,"collectionDynamicFacetsVariant")&&t.uint32(90).string(e.collectionDynamicFacetsVariant),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.FeatureFlags;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 2:n.isManualOrderingEnabled=e.bool();break;case 4:n.isCollectionDynamicFacetsEnabled=e.bool();break;case 6:n.isCollectionSharingEnabled=e.bool();break;case 7:n.isCollectionLinksEnabled=e.bool();break;case 8:n.isCollectionSuggestionItemsEnabled=e.bool();break;case 9:n.isCollectionSmartThumbnailsEnabled=e.bool();break;case 10:n.isDownloadSharedCollectionEnabled=e.bool();break;case 11:n.collectionDynamicFacetsVariant=e.string();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.FeatureFlags"},e})(c.FeatureFlags||{}),c.SharedItem=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.id="",e.prototype.sharedFileInfo=null,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.id&&Object.hasOwnProperty.call(e,"id")&&t.uint32(10).string(e.id),null!=e.sharedFileInfo&&Object.hasOwnProperty.call(e,"sharedFileInfo")&&a.file_viewer_preview_metadata.SharedFile.encode(e.sharedFileInfo,t.uint32(18).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.SharedItem;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.id=e.string();break;case 2:n.sharedFileInfo=a.file_viewer_preview_metadata.SharedFile.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.SharedItem"},e})(c.SharedItem||{}),c.SharedLinkSettings=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.allowDownload=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.allowDownload&&Object.hasOwnProperty.call(e,"allowDownload")&&t.uint32(8).bool(e.allowDownload),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.SharedLinkSettings;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.allowDownload=e.bool();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.SharedLinkSettings"},e})(c.SharedLinkSettings||{}),c.SharedCollectionInfo=(function(e){function e(e){if(this.sharedItems=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.collectionName="",e.prototype.collectionId="",e.prototype.sharedItems=s.emptyArray,e.prototype.collectionSharerName="",e.prototype.linkSettings=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.collectionName&&Object.hasOwnProperty.call(e,"collectionName")&&t.uint32(10).string(e.collectionName),null!=e.collectionId&&Object.hasOwnProperty.call(e,"collectionId")&&t.uint32(18).string(e.collectionId),null!=e.sharedItems&&e.sharedItems.length)for(let o=0;o<e.sharedItems.length;++o)a.collections_messages.SharedItem.encode(e.sharedItems[o],t.uint32(26).fork()).ldelim();return null!=e.collectionSharerName&&Object.hasOwnProperty.call(e,"collectionSharerName")&&t.uint32(34).string(e.collectionSharerName),null!=e.linkSettings&&Object.hasOwnProperty.call(e,"linkSettings")&&a.collections_messages.SharedLinkSettings.encode(e.linkSettings,t.uint32(42).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.SharedCollectionInfo;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.collectionName=e.string();break;case 2:n.collectionId=e.string();break;case 3:n.sharedItems&&n.sharedItems.length||(n.sharedItems=[]),n.sharedItems.push(a.collections_messages.SharedItem.decode(e,e.uint32()));break;case 4:n.collectionSharerName=e.string();break;case 5:n.linkSettings=a.collections_messages.SharedLinkSettings.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.SharedCollectionInfo"},e})(c.SharedCollectionInfo||{}),c.SharedCollectionPropsRequest=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.url="",e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.url&&Object.hasOwnProperty.call(e,"url")&&t.uint32(26).string(e.url),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.SharedCollectionPropsRequest;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 3:n.url=e.string();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.SharedCollectionPropsRequest"},e})(c.SharedCollectionPropsRequest||{}),c.SharedCollectionPropsError=(function(){const e={},t=Object.create(e);return t[e[0]="INVALID_LINK"]=0,t[e[1]="COLLECTION_NOT_ACCESSIBLE"]=1,t})(),c.SharedCollectionPropsResponse=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}let t;return e.prototype.sharedCollectionInfo=null,e.prototype.sharedCollectionError=0,Object.defineProperty(e.prototype,"response",{get:s.oneOfGetter(t=["sharedCollectionInfo","sharedCollectionError"]),set:s.oneOfSetter(t)}),e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.sharedCollectionInfo&&Object.hasOwnProperty.call(e,"sharedCollectionInfo")&&a.collections_messages.SharedCollectionInfo.encode(e.sharedCollectionInfo,t.uint32(10).fork()).ldelim(),null!=e.sharedCollectionError&&Object.hasOwnProperty.call(e,"sharedCollectionError")&&t.uint32(16).int32(e.sharedCollectionError),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.collections_messages.SharedCollectionPropsResponse;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.sharedCollectionInfo=a.collections_messages.SharedCollectionInfo.decode(e,e.uint32());break;case 2:n.sharedCollectionError=e.int32();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/collections_messages.SharedCollectionPropsResponse"},e})(c.SharedCollectionPropsResponse||{}),c)})),define("metaserver/static/js/dropbox/proto/file_info/file_info",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/dropbox/proto/gogoproto/gogo","metaserver/static/js/dropbox/proto/per_node_metadata/api_v2_meta","metaserver/static/js/dropbox/proto/file_viewer_preview_metadata/preview_metadata"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.file_info=void 0;const l=(n=o.__importStar(n)).Reader,i=n.Writer,s=n.util,a=n.roots.default||(n.roots.default={});var c;t.default=a,t.file_info=a.file_info=((c=a.file_info||{}).FileType=(function(){const e={},t=Object.create(e);return t[e[0]="INVALID"]=0,t[e[1]="FILE"]=1,t[e[2]="FOLDER"]=2,t[e[3]="PACKAGE"]=3,t[e[4]="SHARED_FOLDER"]=4,t[e[5]="SANDBOX"]=5,t[e[6]="TEAM_SHARED_FOLDER"]=6,t[e[7]="TEAM_MEMBER_FOLDER"]=7,t[e[8]="VAULT_FOLDER"]=8,t[e[9]="FAMILY_SHARED_FOLDER"]=9,t})(),c.FileLockInfo=(function(e){function e(e){if(e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.isLockholder=!1,e.prototype.lockholderName="",e.prototype.tsLocked=0,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.isLockholder&&Object.hasOwnProperty.call(e,"isLockholder")&&t.uint32(8).bool(e.isLockholder),null!=e.lockholderName&&Object.hasOwnProperty.call(e,"lockholderName")&&t.uint32(18).string(e.lockholderName),null!=e.tsLocked&&Object.hasOwnProperty.call(e,"tsLocked")&&t.uint32(24).int64(e.tsLocked),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.file_info.FileLockInfo;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 1:n.isLockholder=e.bool();break;case 2:n.lockholderName=e.string();break;case 3:n.tsLocked=e.int64();break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/file_info.FileLockInfo"},e})(c.FileLockInfo||{}),c.FileInfo=(function(e){function e(e){if(this.mountAccessPerms=[],this.deprecatedSortKey=[],e)for(let t=Object.keys(e),o=0;o<t.length;++o)null!=e[t[o]]&&(this[t[o]]=e[t[o]])}return e.prototype.directBlockserverLink="",e.prototype.ext="",e.prototype.fileId="",e.prototype.fqPath="",e.prototype.href="",e.prototype.icon="",e.prototype.isCloudDoc=!1,e.prototype.isDir=!1,e.prototype.isInTeamFolderTree=!1,e.prototype.isSymlink=!1,e.prototype.isUnmounted=!1,e.prototype.lastModifiedName="",e.prototype.mountAccessPerms=s.emptyArray,e.prototype.nsId=0,e.prototype.nsPath="",e.prototype.readOnly=!1,e.prototype.revisionId="",e.prototype.sizeBytes=0,e.prototype.sjid=0,e.prototype.deprecatedSortKey=s.emptyArray,e.prototype.targetNs=0,e.prototype.thumbnailUrlTmpl="",e.prototype.ts=0,e.prototype.type=0,e.prototype.sortKey="",e.prototype.hasMountAccessPerms=!1,e.prototype.openToUrl="",e.prototype.isLocked=!1,e.prototype.lockInfo=null,e.prototype.perNodeMetadata=null,e.prototype.isInVaultFolder=!1,e.prototype.hasAutomatedRule=!1,e.prototype.isBackupFolder=!1,e.prototype.modifiedAgo="",e.prototype.agoFromLastActionByUserTs="",e.prototype.preview=null,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.directBlockserverLink&&Object.hasOwnProperty.call(e,"directBlockserverLink")&&t.uint32(18).string(e.directBlockserverLink),null!=e.ext&&Object.hasOwnProperty.call(e,"ext")&&t.uint32(26).string(e.ext),null!=e.fileId&&Object.hasOwnProperty.call(e,"fileId")&&t.uint32(34).string(e.fileId),null!=e.fqPath&&Object.hasOwnProperty.call(e,"fqPath")&&t.uint32(42).string(e.fqPath),null!=e.href&&Object.hasOwnProperty.call(e,"href")&&t.uint32(50).string(e.href),null!=e.icon&&Object.hasOwnProperty.call(e,"icon")&&t.uint32(58).string(e.icon),null!=e.isCloudDoc&&Object.hasOwnProperty.call(e,"isCloudDoc")&&t.uint32(64).bool(e.isCloudDoc),null!=e.isDir&&Object.hasOwnProperty.call(e,"isDir")&&t.uint32(72).bool(e.isDir),null!=e.isInTeamFolderTree&&Object.hasOwnProperty.call(e,"isInTeamFolderTree")&&t.uint32(80).bool(e.isInTeamFolderTree),null!=e.isSymlink&&Object.hasOwnProperty.call(e,"isSymlink")&&t.uint32(88).bool(e.isSymlink),null!=e.isUnmounted&&Object.hasOwnProperty.call(e,"isUnmounted")&&t.uint32(96).bool(e.isUnmounted),null!=e.lastModifiedName&&Object.hasOwnProperty.call(e,"lastModifiedName")&&t.uint32(106).string(e.lastModifiedName),null!=e.mountAccessPerms&&e.mountAccessPerms.length)for(let o=0;o<e.mountAccessPerms.length;++o)t.uint32(114).string(e.mountAccessPerms[o]);if(null!=e.nsId&&Object.hasOwnProperty.call(e,"nsId")&&t.uint32(120).uint64(e.nsId),null!=e.nsPath&&Object.hasOwnProperty.call(e,"nsPath")&&t.uint32(130).string(e.nsPath),null!=e.readOnly&&Object.hasOwnProperty.call(e,"readOnly")&&t.uint32(136).bool(e.readOnly),null!=e.revisionId&&Object.hasOwnProperty.call(e,"revisionId")&&t.uint32(146).string(e.revisionId),null!=e.sizeBytes&&Object.hasOwnProperty.call(e,"sizeBytes")&&t.uint32(152).int64(e.sizeBytes),null!=e.sjid&&Object.hasOwnProperty.call(e,"sjid")&&t.uint32(160).uint64(e.sjid),null!=e.deprecatedSortKey&&e.deprecatedSortKey.length)for(let o=0;o<e.deprecatedSortKey.length;++o)t.uint32(170).string(e.deprecatedSortKey[o]);return null!=e.targetNs&&Object.hasOwnProperty.call(e,"targetNs")&&t.uint32(176).uint64(e.targetNs),null!=e.thumbnailUrlTmpl&&Object.hasOwnProperty.call(e,"thumbnailUrlTmpl")&&t.uint32(186).string(e.thumbnailUrlTmpl),null!=e.ts&&Object.hasOwnProperty.call(e,"ts")&&t.uint32(192).int64(e.ts),null!=e.type&&Object.hasOwnProperty.call(e,"type")&&t.uint32(200).int32(e.type),null!=e.sortKey&&Object.hasOwnProperty.call(e,"sortKey")&&t.uint32(210).string(e.sortKey),null!=e.hasMountAccessPerms&&Object.hasOwnProperty.call(e,"hasMountAccessPerms")&&t.uint32(216).bool(e.hasMountAccessPerms),null!=e.openToUrl&&Object.hasOwnProperty.call(e,"openToUrl")&&t.uint32(226).string(e.openToUrl),null!=e.isLocked&&Object.hasOwnProperty.call(e,"isLocked")&&t.uint32(232).bool(e.isLocked),null!=e.lockInfo&&Object.hasOwnProperty.call(e,"lockInfo")&&a.file_info.FileLockInfo.encode(e.lockInfo,t.uint32(242).fork()).ldelim(),null!=e.perNodeMetadata&&Object.hasOwnProperty.call(e,"perNodeMetadata")&&a.per_node_metadata.PerNodeMetadataEntity.encode(e.perNodeMetadata,t.uint32(250).fork()).ldelim(),null!=e.isInVaultFolder&&Object.hasOwnProperty.call(e,"isInVaultFolder")&&t.uint32(256).bool(e.isInVaultFolder),null!=e.hasAutomatedRule&&Object.hasOwnProperty.call(e,"hasAutomatedRule")&&t.uint32(264).bool(e.hasAutomatedRule),null!=e.isBackupFolder&&Object.hasOwnProperty.call(e,"isBackupFolder")&&t.uint32(272).bool(e.isBackupFolder),null!=e.modifiedAgo&&Object.hasOwnProperty.call(e,"modifiedAgo")&&t.uint32(282).string(e.modifiedAgo),null!=e.agoFromLastActionByUserTs&&Object.hasOwnProperty.call(e,"agoFromLastActionByUserTs")&&t.uint32(290).string(e.agoFromLastActionByUserTs),null!=e.preview&&Object.hasOwnProperty.call(e,"preview")&&a.file_viewer_preview_metadata.PreviewMetadata.encode(e.preview,t.uint32(298).fork()).ldelim(),t},e.decode=function(e,t){e instanceof l||(e=l.create(e));let o=void 0===t?e.len:e.pos+t,n=new a.file_info.FileInfo;for(;e.pos<o;){let t=e.uint32();switch(t>>>3){case 2:n.directBlockserverLink=e.string();break;case 3:n.ext=e.string();break;case 4:n.fileId=e.string();break;case 5:n.fqPath=e.string();break;case 6:n.href=e.string();break;case 7:n.icon=e.string();break;case 8:n.isCloudDoc=e.bool();break;case 9:n.isDir=e.bool();break;case 10:n.isInTeamFolderTree=e.bool();break;case 11:n.isSymlink=e.bool();break;case 12:n.isUnmounted=e.bool();break;case 13:n.lastModifiedName=e.string();break;case 14:n.mountAccessPerms&&n.mountAccessPerms.length||(n.mountAccessPerms=[]),n.mountAccessPerms.push(e.string());break;case 15:n.nsId=e.uint64();break;case 16:n.nsPath=e.string();break;case 17:n.readOnly=e.bool();break;case 18:n.revisionId=e.string();break;case 19:n.sizeBytes=e.int64();break;case 20:n.sjid=e.uint64();break;case 21:n.deprecatedSortKey&&n.deprecatedSortKey.length||(n.deprecatedSortKey=[]),n.deprecatedSortKey.push(e.string());break;case 22:n.targetNs=e.uint64();break;case 23:n.thumbnailUrlTmpl=e.string();break;case 24:n.ts=e.int64();break;case 25:n.type=e.int32();break;case 26:n.sortKey=e.string();break;case 27:n.hasMountAccessPerms=e.bool();break;case 28:n.openToUrl=e.string();break;case 29:n.isLocked=e.bool();break;case 30:n.lockInfo=a.file_info.FileLockInfo.decode(e,e.uint32());break;case 31:n.perNodeMetadata=a.per_node_metadata.PerNodeMetadataEntity.decode(e,e.uint32());break;case 32:n.isInVaultFolder=e.bool();break;case 33:n.hasAutomatedRule=e.bool();break;case 34:n.isBackupFolder=e.bool();break;case 35:n.modifiedAgo=e.string();break;case 36:n.agoFromLastActionByUserTs=e.string();break;case 37:n.preview=a.file_viewer_preview_metadata.PreviewMetadata.decode(e,e.uint32());break;default:e.skipType(7&t)}}return n},e.getTypeUrl=function(){return"type.googleapis.com/file_info.FileInfo"},e})(c.FileInfo||{}),c)})),define("metaserver/static/js/dropbox/proto/gogoproto/gogo",["require","exports","tslib","protobufjs/minimal","metaserver/static/js/google/protobuf/descriptor"],(function(e,t,o,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.gogoproto=void 0;(n=o.__importStar(n)).Reader,n.Writer,n.util;const l=n.roots.default||(n.roots.default={});t.default=l,t.gogoproto=l.gogoproto=l.gogoproto||{}})),define("metaserver/static/js/collections/api",["require","exports","tslib","metaserver/static/js/edison/edison","metaserver/static/js/proto_utils/unpack","metaserver/static/js/dropbox/proto/collections_messages/collections_messages","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/modules/clean/active_user","metaserver/static/js/collections/api_utils"],(function(e,t,o,n,l,i,s,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createShortcut=t.revokeCollectionSharedLink=t.createCollectionSharedLink=t.moveItem=t.getCollectionsFeatureFlags=t.deleteCollections=t.deleteBatch=t.createAndAddToCollection=t.addFilesToCollection=t.renameCollection=t.createCollection=t.saveSeedCollection=t.getCollectionItems=t.getCollections=void 0;const r=e=>new Promise(t=>setTimeout(t,e));function d(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const n=a.mustGetActiveUser(),l=new s.DefaultUserApiV2Client(n).ns("collections"),i=e.result;if("add_bulk_async_job_id"===i[".tag"]){const e=i.add_bulk_async_job_id,n=()=>o.__awaiter(this,void 0,void 0,(function*(){return yield l.rpc("add_bulk_items_check",{async_job_id:e},{})}));let s=yield n();for(;"pending"===s.job_status[".tag"];)yield r(1e3),s=yield n();const{succeeded_items:a,failed_file_identifiers:d}=s.add_bulk_items_result;if("failed"===s.job_status[".tag"]||"other"===s.job_status[".tag"]||0===a.length)throw new Error(t);return{succeededItems:a.map(c.convertCollectionFileFromApiV2ToCollectionItem),failedFileIdentifiers:d.map(c.convertFileIdentifierApiToFileIdentifier)}}if("add_bulk_items_result"===i[".tag"]){const{succeeded_items:e,failed_file_identifiers:t}=i;return{succeededItems:e.map(c.convertCollectionFileFromApiV2ToCollectionItem),failedFileIdentifiers:t.map(c.convertFileIdentifierApiToFileIdentifier)}}throw new Error(t)}))}t.getCollections=function(){return o.__awaiter(this,void 0,void 0,(function*(){let e=void 0;if(window.RUNNING_IN_EDISON){return e=l.unpackProto(yield n.Edison.serviceMethodPrefetch("collections.CollectionsWebInternal","GetAllCollectionsPrefetch"),i.collections_messages.GetAllCollectionsResponse).collectionInfos,e.map(c.convertCollectionInfoFromProtoToCollectionData)}{const e=a.mustGetActiveUser(),t=new s.DefaultUserApiV2Client(e).ns("collections");return(yield t.rpc("get_all_collections",{},{})).collection_infos.map(c.convertCollectionInfoFromApiV2ToCollectionData)}}))},t.getCollectionItems=function(e){return o.__awaiter(this,void 0,void 0,(function*(){return l.unpackProto(yield n.Edison.serviceMethodPrefetch("collections.CollectionsWebInternal","GetCollectionItemsPrefetch",i.collections_messages.GetCollectionItemsPrefetchArgs.create({collectionId:e,itemInfoFilter:i.collections_messages.ItemInfoFilter.GET_ALL_INFO})),i.collections_messages.GetCollectionItemsResponse).collectionItems.map(c.convertCollectionFileFromProtoToCollectionItem)}))},t.saveSeedCollection=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=a.mustGetActiveUser(),o=new s.DefaultUserApiV2Client(t).ns("collections"),n={collection_id:e};yield o.rpc("save_seed",n,{})}))},t.createCollection=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=a.mustGetActiveUser(),o=new s.DefaultUserApiV2Client(t).ns("collections"),n={name:e},l=yield o.rpc("create",n,{}),{id:i,name:c}=l.collection_info;return{id:i,name:c,thumbnails:[],numOfItems:0,type:"manual"}}))},t.renameCollection=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.mustGetActiveUser(),n=new s.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,new_name:t};return yield n.rpc("rename_collection",l,{})}))},t.addFilesToCollection=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.mustGetActiveUser(),n=new s.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,file_identifiers:null==t?void 0:t.map(c.convertFileIdentifierToFileIdentifierApi)};return d(yield n.rpc("add_bulk_items",l,{}),"collections/add_bulk_items")}))},t.createAndAddToCollection=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.mustGetActiveUser(),n=new s.DefaultUserApiV2Client(o).ns("collections"),l={name:e,file_ids:t},i=yield n.rpc("create_and_add_to_collection",l,{}),r=i.create_response.collection_info,u=c.convertCollectionInfoFromApiV2ToCollectionData(r),f=i.add_response;return{collectionData:u,addResult:yield d(f,"collections/create_and_add")}}))},t.deleteBatch=function(e){var t;return o.__awaiter(this,void 0,void 0,(function*(){const n=a.mustGetActiveUser(),l=new s.DefaultUserApiV2Client(n).ns("collections"),i={item_ids:e},c=yield l.rpc("delete_batch",i,{});if("async_delete_job_id"===(null===(t=c.delete_response)||void 0===t?void 0:t[".tag"])){const e=c.delete_response.async_delete_job_id,t=()=>o.__awaiter(this,void 0,void 0,(function*(){return yield l.rpc("delete_batch_check",{async_job_id:e},{})}));let n=yield t();for(;"pending"===n.status[".tag"];)yield r(1e3),n=yield t();if("failed"===n.status[".tag"]||"other"===n.status[".tag"])throw new Error("collections/delete_batch")}}))},t.deleteCollections=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=a.mustGetActiveUser(),o=new s.DefaultUserApiV2Client(t).ns("collections"),n={collection_ids:e},l=yield o.rpc("delete_collections",n,{});if(l.succesful_deletion_ids)return l.succesful_deletion_ids;throw new Error("collections/delete_collections")}))},t.getCollectionsFeatureFlags=function(){return o.__awaiter(this,void 0,void 0,(function*(){return l.unpackProto(yield n.Edison.serviceMethodPrefetch("collections.CollectionsWebInternal","GetCollectionsFeatureFlags"),i.collections_messages.FeatureFlags)}))},t.moveItem=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.mustGetActiveUser(),n=new s.DefaultUserApiV2Client(o).ns("collections"),l={item_ids:[e],place_before_item_id:t};yield n.rpc("move_items",l,{})}))},t.createCollectionSharedLink=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=a.mustGetActiveUser(),o=new s.DefaultUserApiV2Client(t).ns("collections"),n={collection_id:e},{url:l}=yield o.rpc("create_shared_link",n,{});return l}))},t.revokeCollectionSharedLink=function(e){return o.__awaiter(this,void 0,void 0,(function*(){const t=a.mustGetActiveUser(),o=new s.DefaultUserApiV2Client(t).ns("collections"),n={url:e};yield o.rpc("revoke_shared_link",n,{})}))},t.createShortcut=function(e,t){return o.__awaiter(this,void 0,void 0,(function*(){const o=a.mustGetActiveUser(),n=new s.DefaultUserApiV2Client(o).ns("collections"),l={collection_id:e,url:t},i=yield n.rpc("add_link",l,{});return c.convertCollectionFileFromApiV2ToCollectionItem(i.item)}))}})),define("metaserver/static/js/collections/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_EXCLOG_TAGS=t.defaultFeatureFlags=t.MAX_ITEMS_IN_COLLECTION=t.MAX_COLLECTIONS=t.COLLECTIONS_PAGE_BASENAME=void 0,t.COLLECTIONS_PAGE_BASENAME="/collections",t.MAX_COLLECTIONS=100,t.MAX_ITEMS_IN_COLLECTION=100,t.defaultFeatureFlags={isCollectionDynamicFacetsEnabled:!1,isCollectionSharingEnabled:!1,isCollectionSuggestionItemsEnabled:!1,isCollectionLinksEnabled:!1},t.DEFAULT_EXCLOG_TAGS=["collections_client"]})),define("metaserver/static/js/collections/shared/collection_saver_modal/choose_collection_modal",["require","exports","tslib","react","classnames","metaserver/static/js/modules/core/i18n","dig-components/buttons","dig-components/modal","dig-components/icons","dig-components/tooltips","dig-components/icons/src","metaserver/static/js/collections/api","metaserver/static/js/collections/constants","metaserver/static/js/collections/logger","metaserver/static/js/collections/utils/file_identifier","metaserver/static/js/collections/utils/thumbnails","metaserver/static/js/modules/clean/react/snackbar","@reduxjs/toolkit","metaserver/static/js/collections/shared/collection_saver_modal/utils"],(function(e,t,o,n,l,i,s,a,c,r,d,u,f,m,p,g,h,y,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionChooserModal=void 0,n=o.__importDefault(n),l=o.__importDefault(l),u=o.__importStar(u);const b=({message:e})=>n.default.createElement(r.Tooltip,{title:e,placement:"top"},n.default.createElement("div",null,n.default.createElement(c.UIIcon,{src:d.WarningLine})));b.displayName="Warning";const C=({onNewCollectionClick:e,disabled:t})=>n.default.createElement("div",{className:"collection-list-line-loading"},n.default.createElement("div",{className:"collection-list-line-item"},n.default.createElement(s.Button,{variant:"transparent",fullWidth:!1,withIconLeft:n.default.createElement(c.UIIcon,{src:d.AddLine}),onClick:e,disabled:t},i.intl.formatMessage({id:"Calc30",defaultMessage:"New collection"})),t&&n.default.createElement(b,{message:i.intl.formatMessage({id:"H48F9f",defaultMessage:"You have {max} collections, which is the limit."},{max:f.MAX_COLLECTIONS})})));C.displayName="CollectionNewItem";const I=({src:e,disabled:t})=>n.default.createElement(n.default.Fragment,null,e?n.default.createElement("img",{className:l.default("collection-list-line-item-thumbnail",{disabled:t}),src:e,alt:i.intl.formatMessage({id:"birylO",defaultMessage:"preview image of the collection"})}):n.default.createElement(c.UIIcon,{className:"collection-list-line-item-thumbnail",src:d.CollectionLine}));I.displayName="CollectionThumbnail";const k=({collection:e,setSelected:t,selected:o,disabled:s})=>{var a;return n.default.createElement("div",{className:l.default("collection-list-line",{selected:o})},n.default.createElement("button",{className:"collection-list-line-item",onClick:()=>!s&&t({id:e.id,name:e.name})},n.default.createElement("div",{className:"collection-list-line-item-leftside"},n.default.createElement(I,{src:g.getThumbnailUrl(null===(a=e.thumbnails[0])||void 0===a?void 0:a.src,{size:"80x80",sizeMode:1}),disabled:s}),n.default.createElement("div",{className:l.default("collection-list-line-item-name",{disabled:s})},e.name)),s&&n.default.createElement(b,{message:i.intl.formatMessage({id:"ob3drK",defaultMessage:"This collection is full."})})))};k.displayName="CollectionListItem";t.CollectionChooserModal=({fileIds:e,surface:t,changeModalType:l,closeModal:c,collections:r})=>{const[d,g]=n.default.useState({id:"",name:""});return n.default.createElement(n.default.Fragment,null,n.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(a.Modal.Title,null,i.intl.formatMessage({id:"hejWrw",defaultMessage:"Add {count} {count, plural, one{item} other{items}} to..."},{count:e.length}))),n.default.createElement(a.Modal.Body,null,r&&n.default.createElement("div",{className:"collections-list"},n.default.createElement(C,{onNewCollectionClick:l,disabled:r.length>=f.MAX_COLLECTIONS}),null==r?void 0:r.map(t=>n.default.createElement(k,{collection:t,selected:d.id===t.id,setSelected:g,key:t.id,disabled:t.numOfItems+e.length>f.MAX_ITEMS_IN_COLLECTION})))),n.default.createElement(a.Modal.Footer,null,n.default.createElement(s.Button,{variant:"opacity",onClick:c},i.intl.formatMessage({id:"AqQDNW",defaultMessage:"Cancel"})),n.default.createElement(s.Button,{variant:"primary",onClick:()=>o.__awaiter(void 0,void 0,void 0,(function*(){m.logEntryPointAddToCollection(d.id,t,e.length),c();const o=f.COLLECTIONS_PAGE_BASENAME+"/"+d.id,n={actionButtonText:i.intl.formatMessage({id:"lpDj+X",defaultMessage:"View collection"}),onActionClick:()=>_.redirect(o)};h.Snackbar.sync(i.intl.formatMessage({id:"1e2tn/",defaultMessage:"Adding files…"}),!0,"add-collection-items",!0);const l=yield u.addFilesToCollection(d.id,p.mapFileIdsToFileIdentifiers(e));if(y.isRejected(l))return void h.Snackbar.fail(i.intl.formatMessage({id:"Yz6w5b",defaultMessage:"Couldn’t add {count, plural, one{file} other{{count} files}} to {name}. Trying again later should work."},{count:e.length,name:d.name}),"add-collection-items",!0);const{failedFileIdentifiers:s,succeededItems:a}=l;0===s.length&&a.length===e.length?h.Snackbar.complete(i.intl.formatMessage({id:"Cr9kJ3",defaultMessage:"{count, plural, one{File added to {collection_name}.} other{Added {count} files to {collection_name}}}"},{collection_name:d.name,count:e.length}),"add-collection-items",!0,n):h.Snackbar.warn(i.intl.formatMessage({id:"sjxOw9",defaultMessage:"{succeeded, plural, one{File} other{{succeeded} files}} added to {name}. "},{name:d.name,succeeded:a.length})+i.intl.formatMessage({id:"LXwwqp",defaultMessage:"Couldn’t add {failed} {failed, plural, one{file} other{files}}. You can try again later"},{failed:s.length}),"add-collection-items",!0,n)})),disabled:""===d.id,autoFocus:!0},i.intl.formatMessage({id:"R0RyY9",defaultMessage:"Add"}))))},t.CollectionChooserModal.displayName="CollectionChooserModal"})),define("metaserver/static/js/collections/shared/collection_saver_modal/create_and_add_modal",["require","exports","tslib","react","ts-key-enum","metaserver/static/js/modules/core/i18n","dig-components/buttons","dig-components/modal","metaserver/static/js/collections/api","dig-components/text_fields","dig-components/typography","metaserver/static/js/collections/logger","metaserver/static/js/modules/clean/react/snackbar","@reduxjs/toolkit","metaserver/static/js/collections/constants","metaserver/static/js/collections/shared/collection_saver_modal/utils","metaserver/static/js/collections/lib/survey"],(function(e,t,o,n,l,i,s,a,c,r,d,u,f,m,p,g,h){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CollectionCreateAndAddModal=void 0,n=o.__importDefault(n),c=o.__importStar(c);t.CollectionCreateAndAddModal=({fileIds:e,closeModal:t,onBackClick:y,surface:_})=>{const[b,C]=n.default.useState(""),I=n.default.useRef(null),k=n=>o.__awaiter(void 0,void 0,void 0,(function*(){u.logEntryPointNewCollection(_,e.length),t(),f.Snackbar.sync(i.intl.formatMessage({id:"Xu+ZXx",defaultMessage:"Creating collection {name} and adding files…"},{name:n}),!0,"add-collection-items",!0);const o=yield c.createAndAddToCollection(n,e),{addResult:l,collectionData:s}=o,a=p.COLLECTIONS_PAGE_BASENAME+"/"+s.id,r={actionButtonText:"View collection",onActionClick:()=>{h.trackNavigateToNewCollection(),g.redirect(a)}};if(m.isRejected(l))return void f.Snackbar.fail(i.intl.formatMessage({id:"Xlv7wV",defaultMessage:"Couldn’t create {name}, but you can try again later."},{name:n,count:e.length}),"add-collection-items",!0);const{failedFileIdentifiers:d,succeededItems:y}=l;0===d.length&&y.length===e.length?f.Snackbar.complete(i.intl.formatMessage({id:"e7FfwS",defaultMessage:"Created collection {name} and added {count, plural, one{the file} other{files}}..."},{name:n,count:e.length}),"add-collection-items",!0,r):f.Snackbar.warn(i.intl.formatMessage({id:"sjxOw9",defaultMessage:"{succeeded, plural, one{File} other{{succeeded} files}} added to {name}. "},{name:n,succeeded:y.length})+i.intl.formatMessage({id:"LXwwqp",defaultMessage:"Couldn’t add {failed} {failed, plural, one{file} other{files}}. You can try again later"},{failed:d.length}),"add-collection-items",!0,r)}));return n.default.createElement(n.default.Fragment,null,n.default.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},n.default.createElement(a.Modal.Title,null,i.intl.formatMessage({id:"OKqIjj",defaultMessage:"Create a collection"}))),n.default.createElement(a.Modal.Body,null,n.default.createElement("div",{className:"create-and-add-modal-body"},n.default.createElement(d.Text,{isBold:!0,variant:"label",size:"small",className:"create-and-add-modal-input-label"},i.intl.formatMessage({id:"YIRjng",defaultMessage:"Name"})),n.default.createElement(r.TextInput,{ref:I,id:"trigger",onChange:({currentTarget:{value:e}})=>{C(e)},value:b,"aria-label":i.intl.formatMessage({id:"waHocS",defaultMessage:"Enter a name"}),placeholder:i.intl.formatMessage({id:"HA9vtu",defaultMessage:"Enter a name"}),autoComplete:"off",onKeyDown:e=>{e.key===l.Key.Enter&&""!==b&&k(b)}}))),n.default.createElement(a.Modal.Footer,null,n.default.createElement(s.Button,{variant:"opacity",onClick:y,autoFocus:!0},i.intl.formatMessage({id:"8dbMCL",defaultMessage:"Back"})),n.default.createElement(s.Button,{variant:"primary",onClick:()=>k(b),disabled:""===b,autoFocus:!0},i.intl.formatMessage({id:"4aoqDj",defaultMessage:"Create"}))))},t.CollectionCreateAndAddModal.displayName="CollectionCreateAndAddModal"})),define("metaserver/static/js/collections/shared/index",["require","exports","tslib","react","metaserver/static/js/modules/core/i18n","dig-components/modal","metaserver/static/js/components/ui/modal_controller","metaserver/static/js/components/ui/css","metaserver/static/js/collections/shared/collection_saver_modal/choose_collection_modal","metaserver/static/js/collections/shared/collection_saver_modal/create_and_add_modal","metaserver/static/js/collections/api","metaserver/static/js/collections/logger","metaserver/static/js/collections/shared/collection_saver_modal/loading_state_modal"],(function(e,t,o,n,l,i,s,a,c,r,d,u,f){"use strict";var m;Object.defineProperty(t,"__esModule",{value:!0}),t.showCollectionSaverModal=void 0,n=o.__importDefault(n),s=o.__importStar(s),d=o.__importStar(d),(function(e){e[e.SelectCollection=0]="SelectCollection",e[e.CreateAndAdd=1]="CreateAndAdd"})(m||(m={}));const p=({fileIds:e,surface:t})=>{const[a,p]=n.default.useState(!0),[g,h]=n.default.useState(m.SelectCollection),[y,_]=n.default.useState(void 0);n.default.useEffect(()=>{(function(){o.__awaiter(this,void 0,void 0,(function*(){const e=(yield d.getCollections()).filter(e=>"manual"===e.type);_(e)}))})()},[]),n.default.useEffect(()=>{i.Modal.setAppElement(document.getElementById("embedded-app")||document.body)},[]);const b=()=>p(!1);return n.default.createElement(i.Modal,{open:a,onAfterClose:()=>{s.unmountModal(),u.logEntryPointClosed(t)},onAfterOpen:()=>u.logEntryPointLoaded(t),isCentered:!0,withCloseButton:l.intl.formatMessage({id:"AbzPSt",defaultMessage:"Cancel"}),onRequestClose:b},void 0===y&&n.default.createElement(f.CollectionLoadingState,{numOfFiles:e.length}),y&&g===m.SelectCollection&&n.default.createElement(c.CollectionChooserModal,{fileIds:e,surface:t,collections:y,changeModalType:()=>h(m.CreateAndAdd),closeModal:b}),y&&g===m.CreateAndAdd&&n.default.createElement(r.CollectionCreateAndAddModal,{fileIds:e,surface:t,onBackClick:()=>h(m.SelectCollection),closeModal:b}))};p.displayName="CollectionSaverModalNoCss";const g=a.requireCssWithComponent(p,["/static/css/collections/collections_saver_modal-vfl77G5VS.css"]);t.showCollectionSaverModal=function(e){s.mountModal(n.default.createElement(g,Object.assign({},e)))}}));
//# sourceMappingURL=pkg-collections-shared.min.js-vflABhuv4.map