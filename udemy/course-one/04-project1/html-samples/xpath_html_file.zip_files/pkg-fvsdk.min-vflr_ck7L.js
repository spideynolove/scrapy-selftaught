define("typescript/libraries/file-viewer/src/core/logging/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorType=i.UserActionContext=i.UserAction=i.SourceContext=i.EventType=i.SessionEventType=i.SourceAction=i.DeviceType=void 0,(function(e){e.mobile="mobile",e.tablet="tablet",e.desktop="desktop"})(i.DeviceType||(i.DeviceType={})),(function(e){e.Click="click",e.DoubleClick="double_click",e.Visit="visit"})(i.SourceAction||(i.SourceAction={})),(function(e){e.FilePreviewSessionEnded="preview_session_ended",e.FilePreviewAttemptStarted="preview_attempted",e.FilePreviewSupportConfirmed="support_confirmed",e.FilePreviewSupportDenied="support_denied",e.FilePreviewDownloadAttempted="download_attempted",e.FilePreviewDownloadSucceeded="download_succeeded",e.FilePreviewDownloadFailed="download_failed",e.FilePreviewRenderSucceeded="render_succeeded",e.FilePreviewRenderFailed="render_failed",e.LifecycleFailure="lifecycle_failure",e.FilePreviewGetApp="preview_get_app"})(i.SessionEventType||(i.SessionEventType={})),(function(e){e.UserAction="user_action",e.VideoPlaybackRateChanged="playback_rate_changed",e.ExcelSheetDownloadAttempted="excel_sheet_download_attempted",e.ExcelSheetDownloadSucceeded="excel_sheet_download_succeeded",e.ExcelSheetDownloadFailed="excel_sheet_download_failed",e.ExcelSheetRenderSucceeded="excel_sheet_render_succeeded",e.ExcelSheetRenderFailed="excel_sheet_render_failed"})(i.EventType||(i.EventType={})),(function(e){e.Browse="browse",e.Home="home",e.SharedLinkFile="sl_file",e.SharedLinkFolder="sl_folder",e.SharedLinkCollection="sl_collection",e.VersionHistory="version_history",e.FileViewer="file_viewer",e.Desktop="desktop",e.EmbeddedSharedLinkFile="embedded_sl_file",e.ArchiveFile="archive_file",e.Workflow="workflow",e.TrelloPreview="trello_preview",e.FileLocking="file_locking",e.Search="search",e.Recents="recents",e.Starred="starred",e.StandalonePreview="standalone_preview",e.Photos="photos",e.Collections="collections",e.HelloSign="hellosign",e.Commerce="commerce",e.Transfer="transfer",e.Dropin="dropin",e.Backup="backup",e.SharedCollection="shared_collection",e.PdfEditor="pdf_editor",e.CollabBrowse="collab_browse",e.DesktopCommentNotification="desktop_comment_notification",e.DesktopDetailsPaneMenu="desktop_details_pane_menu",e.DesktopPreviewPane="desktop_preview_pane",e.DesktopTray="desktop_tray",e.DesktopTrayPopoverExpand="desktop_tray_popover_expand",e.DesktopTrayContextMenu="desktop_tray_context_menu",e.Unknown="unknown"})(i.SourceContext||(i.SourceContext={})),(function(e){e.AddSuggestedComment="add_suggested_comment",e.AddToDropbox="add_to_dropbox",e.AppDownloadInterstitialClose="app_download_interstitial_close",e.AppDownloadInterstitialContinue="app_download_interstitial_continue",e.AppDownloadInterstitialInstall="app_download_interstitial_install",e.AppDownloadInterstitialView="app_download_interstitial_view",e.ArchiveNavigation="archive_navigation",e.ChangePlaybackPosition="change_playback_position",e.ClickAccountMenu="click_account_menu",e.ClickCustomLogo="click_custom_logo",e.ClickDropboxLogo="click_dropbox_logo",e.ClickNotifications="click_notifications",e.ClickSocialShareButton="click_social_share_button",e.CloseDocSidebar="close_doc_sidebar",e.CloseViewer="close_viewer",e.CloseMobileMenu="close_mobile_menu",e.ConvertToPdf="convert_to_pdf",e.CopyToPaper="copy_to_paper",e.DecompressCloseSnackbar="decompress_close_snackbar",e.DecompressFile="decompress_file",e.DecompressRetry="decompress_retry",e.Dismiss="dismiss",e.Download="download",e.FindInDoc="find_click",e.FlipNext="flip_next",e.FlipPrevious="flip_prev",e.GoToFolder="go_to_folder",e.InlineSearch="inline_search",e.InviteViaEmail="invite_via_email",e.LearnMore="learn_more",e.OpenAddApps="open_add_apps",e.OpenDocSidebar="open_doc_sidebar",e.OpenFullscreenPreview="open_fullscreen_preview",e.OpenInApp="open_in_app",e.OpenInOfficeOnline="open_in_office_online",e.OpenInUnity="open_in_unity",e.OpenInUnityFolder="open_in_unity_folder",e.OpenMobileMenu="open_mobile_menu",e.OpenMoreApps="open_more_apps",e.OpenPrepareForSignature="open_prepare_for_signature",e.OpenVersionHistory="open_version_history",e.OpenWebPreview="open_web_preview",e.OpenWith="open_with",e.OpenWithAppAction="open_with_app_action",e.OpenWithCloudDocEditor="open_with_cloud_doc_editor",e.PageChange="page_change",e.PageDown="page_down",e.PageJump="page_jump",e.PageUp="page_up",e.PresentInZoom="present_in_zoom",e.PreviewFile="preview_file",e.Print="print",e.RemoveLink="remove_link",e.RequestAccess="request_access",e.RequestAccessCancel="request_access_cancel",e.RequestAccessSend="request_access_send",e.Restore="restore",e.SaveToDropbox="save_to_dropbox",e.SaveToDropboxApprove="save_to_dropbox_approve",e.SaveToDropboxCancel="save_to_dropbox_cancel",e.SaveToDropboxPersonal="save_to_dropbox_personal",e.SaveToDropboxWork="save_to_dropbox_work",e.ScrollDown="scroll_down",e.ScrollUp="scroll_up",e.SelectWorkbookContent="select_workbook_content",e.Share="share",e.ShareToAction="share_to_action",e.ShareToSlack="share_to_slack",e.ShareToTrello="share_to_trello",e.SidebarPaneSelected="sidebar_pane_selected",e.SignIn="sign_in",e.SignUp="sign_up",e.SwitchWorkbookTab="switch_workbook_tab",e.ToggleCommentsOff="toggle_comments_off",e.ToggleCommentsOn="toggle_comments_on",e.ToggleFullscreenOff="toggle_fullscreen_off",e.ToggleFullscreenOn="toggle_fullscreen_on",e.ToggleShareRecept="toggle_share_receipt",e.ToggleSidebarOff="toggle_sidebar_off",e.ToggleSidebarOn="toggle_sidebar_on",e.Transfer="transfer",e.VideoPlaybackRateChanged="playback_rate_changed",e.ViewRevisions="view_revisions",e.ZoomIn="zoom_in",e.ZoomToggleOriginalOrFit="zoom_toggle_original_or_fit",e.ZoomOut="zoom_out"})(i.UserAction||(i.UserAction={})),(function(e){e.Default="",e.Toolbar="toolbar",e.DocSidebar="doc_sidebar",e.RightRail="sidebar",e.MouseWheel="mouse_wheel",e.DocReset="doc_reset",e.DocLink="doc_link",e.SurfaceGesture="surface_gesture",e.PreviewError="preview_error",e.TrayButton="tray_button",e.TitleBarMain="title_bar_main",e.Initialization="initialization",e.Keyboard="keyboard",e.PreviewContentMain="preview_content_main",e.WorkbookTabs="workbook_tabs",e.ApprovalStatus="approval_status",e.Snackbar="Snackbar",e.MobileWebFooter="mobile_web_footer",e.MobileWebFooterLoggedOut="mobile_web_footer_logged_out",e.MobileWebMeatball="mobile_web_meatball",e.MobileWebMeatballLoggedOut="mobile_web_meatball_logged_out"})(i.UserActionContext||(i.UserActionContext={})),(function(e){e.LoadError="LOAD_ERROR",e.SupportError="SUPPORT_ERROR",e.ExtensionError="EXTENSION_ERROR",e.NeedFlashError="NEED_FLASH_ERROR",e.FileSizeError="FILE_SIZE_ERROR",e.PasswordProtectedError="PASSWORD_PROTECTED_ERROR",e.PendingUploadError="PENDING_UPLOAD_ERROR",e.EmptyFileError="EMPTY_FILE_ERROR",e.SymLinkError="SYM_LINK_ERROR",e.WatermarkingError="WATERMARKING_ERROR",e.UpsellError="UPSELL_ERROR",e.UnknownError="UNKNOWN_ERROR"})(i.ErrorType||(i.ErrorType={}))})),define("typescript/libraries/file-viewer/src/ui/close_button",["require","exports","tslib","react","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/css/ui.module.css"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CloseButton=void 0,r=t.__importStar(r);i.CloseButton=({className:e,intl:i,onClick:t,isInverse:l=!0})=>r.createElement("span",{className:null!=e?e:o.close},r.createElement(a.IconButton,{onClick:t,variant:"transparent",inverse:l},r.createElement(n.UIIcon,{"aria-label":i.formatMessage({id:"R/Hjn0",defaultMessage:"Close"}),src:s.CloseLine}))),i.CloseButton.displayName="CloseButton",i.CloseButton.displayName="CloseButton"})),define("typescript/libraries/file-viewer/src/plugins/layers",["require","exports","tslib","react","react-dom"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PortalWrapper=i.PortalTargetProvider=void 0,r=t.__importStar(r),a=t.__importDefault(a);class n extends r.Component{constructor(){super(...arguments),this.portalContainer=document.createElement("div"),this.attachPortalContainer=e=>{null!=e?(e.childNodes.forEach(i=>e.removeChild(i)),e.appendChild(this.portalContainer)):null!=this.portalContainer.parentElement&&this.portalContainer.parentElement.removeChild(this.portalContainer)}}render(){const{children:e}=this.props;return r.createElement(r.Fragment,null,r.createElement("div",{ref:this.attachPortalContainer}),e(this.portalContainer))}}i.PortalTargetProvider=n,n.displayName="PortalTargetProvider";class s extends r.PureComponent{render(){const{children:e,element:i}=this.props;return a.default.createPortal(e,i)}}i.PortalWrapper=s,s.displayName="PortalWrapper"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog",["require","exports","tslib","react","dig-components/typography","dig-components/buttons","metaserver/static/js/components/ui/css","react"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.UpsellDialog=void 0,r=t.__importStar(r);const l=({acceptText:e,declineText:i,titleText:t,bodyContent:s,afterAccept:l,afterDecline:c,uxaPrefix:d,redirectUrl:u,acceptLinkProps:p={},"data-testid":v})=>{const[f,g]=o.useState(!1),_=o.useRef(!0);r.useEffect(()=>(_.current=!0,()=>{_.current=!1}));return f?null:r.createElement("div",{className:"upsell-dialog-container","data-testid":v},r.createElement("div",{className:"upsell-dialog"},r.createElement(a.Title,{size:"standard",isBold:!0},t),s,r.createElement("div",{className:"upsell-footer"},r.createElement(n.Button,Object.assign({variant:"outline",href:u,onClick:()=>l(g),"data-uxa-log":`${d}-upsell-dialog-continue`},p),e),r.createElement("div",{className:"upsell-secondary-button"},r.createElement(n.Button,{variant:"transparent",onClick:()=>{g(!0),c&&c()},"data-uxa-log":`${d}-upsell-dialog-dismiss`},i)))))};l.displayName="UnstyledUpsellDialog",i.UpsellDialog=s.requireCssWithComponent(l,["/static/css/file_viewer/upsell_dialog-vfluIgJJw.css"])})),define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api",["require","exports","tslib","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/modules/clean/analytics"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logReplayDialogAction=i.shouldShowReplayDialog=void 0;const n=e=>new r.DefaultUserApiV2Client(e);i.shouldShowReplayDialog=function(e){return t.__awaiter(this,void 0,void 0,(function*(){return yield n(e).ns("reel").rpc("get_replay_preview_entry_point_eligibility",{},{})}))},i.logReplayDialogAction=function(e,i,r){return t.__awaiter(this,void 0,void 0,(function*(){e&&(yield n(e).ns("reel").rpc("log_replay_preview_entry_point_action",{entrypoint_action:{".tag":i}},{})),a.UserActivityLogger.log("web","replay-fvsdk-dialog-"+i,{variant:r})}))}})),define("typescript/libraries/file-viewer/src/core/data/actions",["require","exports"],(function(e,i){"use strict";var t;Object.defineProperty(i,"__esModule",{value:!0}),i.setPreviewLoadingAction=i.reportException=i.setMuted=i.setVolume=i.initializeVolumeAndMuted=i.overrideFloatingToolbar=i.setupGetPlayDurationSeconds=i.toggleVideoFrameSteppers=i.clearVideoRequests=i.requestVideoPause=i.requestVideoSeekRelative=i.requestVideoSeek=i.downloadFile=i.copyToDropbox=i.fetchLinkfileDataResult=i.fetchLinkfileData=i.fetchWaveformDataResult=i.fetchWaveformData=i.fetchMediaMetadataResult=i.fetchMediaMetadata=i.switchWorkbookTab=i.updateAudioVideoPlaybackState=i.redirect=i.openFileURL=i.triggerDynamicRoutingModalCheck=i.updateArchiveExtractAllSnackbarState=i.setupArchiveFileCurrentPath=i.updateArchiveFileCurrentPath=i.fetchArchiveTopLevelDataResult=i.fetchArchiveTopLevelData=i.fetchExcelSheetLayoutDataResult=i.fetchExcelSheetLayoutData=i.hideContentPane=i.setActiveEditPlugin=i.setActiveRightRailPlugin=i.setErroredFile=i.setBootstrappedFile=i.closeViewer=i.openContainingFolder=i.openFullscreenPreview=i.setBrandingInfo=i.setSharedLinkInfo=i.setPreviewMetadata=i.setFileMetadata=i.flipToPreviousFile=i.flipToNextFile=i.openUrl=i.openVersionHistory=i.openWebPreview=i.initializeFileViewer=i.openWithCloudEditor=i.openWith=i.restoreAction=i.shareAction=i.closeRightRail=i.openRightRail=i.initializeDocSidebar=i.initializeRightRail=i.showAuthModal=i.clickDropboxLogo=i.exitFullScreen=i.enterFullScreen=i.print=i.pageUp=i.pageDown=i.setCurrentFilePreview=i.closeDocSidebar=i.openDocSidebar=i.initializeFilePreviewSession=i.initializeNestedArchiveFilePreview=i.initializeFilePreview=i.zoomToggleOriginalOrFit=i.updateDimensions=i.updateFitScaleFactor=i.zoomOut=i.zoomIn=i.resolvePageNavigation=i.pageNavigation=i.updateDocCurrentPageIndex=i.refreshBlobSuccessAction=i.refreshBlobAction=i.fetchPageDataWithMetadataResult=i.fetchPageDataWithMetadata=i.fetchRivieraData=i.excelSheetRenderSucceeded=i.excelSheetRenderFailed=i.Action=void 0,(function(e){e.CloseDocSidebar="@@previews/fileViewerUi/closeDocSidebar",e.CopyToDropbox="@@previews/fileSystem/copyToDropbox",e.DownloadFile="@@previews/fileSystem/downloadFile",e.FetchRivieraData="@@previews/fetchRivieraData",e.FetchPageDataWithMetadata="@@previews/fetchPageDataWithMetadata",e.FetchPageDataWithMetadataResult="@@previews/fetchPageDataWithMetadataResult",e.FetchPhotoMetadataResult="@@previews/fetchPhotoMetadataResult",e.FlipToNextFile="@@previews/navigation/flipToNextFile",e.FlipToPreviousFile="@@previews/navigation/flipToPreviousFile",e.InitializeFilePreview="@@previews/initializeFilePreview",e.InitializeNestedArchiveFilePreview="@@previews/initializeNestedArchiveFilePreview",e.OpenDocSidebar="@@previews/fileViewerUi/openDocSidebar",e.PageDown="@@previews/pageDown",e.PageUp="@@previews/pageUp",e.Print="@@previews/print",e.RefreshBlob="@@previews/refreshBlob",e.RefreshBlobSuccess="@@previews/refreshBlobSuccess",e.SetCurrentFilePreview="@@previews/setCurrentFilePreview",e.UpdateDocCurrentPageIndex="@@previews/updateDocCurrentPageIndex",e.PageNavigation="@@previews/pageNavigation",e.ResolvePageNavigation="@@previews/resolvePageNavigation",e.UpdateFitScaleFactor="@@previews/updateFitScaleFactor",e.ZoomIn="@@previews/zoomIn",e.ZoomToggleOriginalOrFit="@@previews/zoomToggleOriginalOrFit",e.ZoomOut="@@previews/zoomOut",e.UpdateDimensions="@@previews/updateDimensions",e.OpenRightRail="@@previews/openRightRail",e.CloseRightRail="@@previews/closeRightRail",e.InitializeRightRail="@@previews/initializeRightRail",e.InitializeDocSidebar="@@previews/initializeDocSidebar",e.Restore="@@previews/restore",e.Share="@@previews/share",e.OpenWith="@@previews/openWith",e.OpenWithCloudEditor="@@previews/openWithCloudEditor",e.OpenWebPreview="@@previews/openWebPreview",e.OpenVersionHistory="@@previews/openVersionHistory",e.OpenUrl="@@previews/openUrl",e.FetchNativeApps="@@previews/fetchNativeApps",e.InitializeFilePreviewSession="@@previews/initializeFilePreviewSession",e.InitializeFileViewer="@@previews/initializeFileViewer",e.SetFileMetadata="@@previews/setFileMetadata",e.SetPreviewMetadata="@@previews/setPreviewMetadata",e.CloseViewer="@@previews/closeViewer",e.OpenFullscreenPreview="@@previews/openFullscreenPreview",e.OpenContainingFolder="@@previews/openContainingFolder",e.SetBootstrappedFile="@@previews/setBootstrappedFile",e.SetErroredFile="@@previews/setErroredFile",e.SetActiveRightRailPlugin="@@previews/plugins/setActiveRightRailPlugin",e.SetActiveEditPlugin="@@previews/plugins/setActiveEditPlugin",e.HideContentPane="@@previews/plugins/hideContentPane",e.FetchExcelSheetLayoutData="@@previews/fetchExcelSheetLayoutData",e.FetchExcelSheetLayoutDataResult="@@previews/fetchExcelSheetLayoutDataResult",e.SwitchWorkbookTab="@@previews/switchWorkbookTab",e.SetSharedLinkInfo="@@previews/setSharedLinkInfo",e.ExcelSheetRenderFailed="@@previews/excelSheetRenderFailed",e.ExcelSheetRenderSucceeded="@@previews/excelSheetRenderSucceeded",e.EnterFullScreen="@@previews/enterFullscreen",e.ExitFullScreen="@@previews/exitFullscreen",e.ClickDropboxLogo="@@previews/clickDropboxLogo",e.FetchArchiveTopLevelData="@@previews/fetchArchiveTopLevelData",e.FetchArchiveTopLevelDataResult="@@previews/fetchArchiveTopLevelDataResult",e.UpdateArchiveFileCurrentPath="@@previews/updateArchiveFileCurrentPath",e.SetupArchiveFileCurrentPath="@@previews/setupArchiveFileCurrentPath",e.UpdateAudioVideoPlaybackState="@@previews/updateAudioVideoPlaybackState",e.RequestVideoSeek="@@previews/requestVideoSeek",e.RequestVideoSeekRelative="@@previews/requestVideoSeekRelative",e.RequestVideoPause="@@previews/requestVideoPause",e.ClearVideoRequests="@@previews/clearVideoRequests",e.ToggleVideoFrameSteppers="@@previews/toggleVideoFrameSteppers",e.SetupGetPlayDurationSeconds="@@previews/setupGetPlayDurationSeconds",e.UpdateArchiveExtractAllSnackbarState="@@previews/updateArchiveExtractAllSnackbarState",e.ShowAuthModal="@@previews/showAuthModal",e.OpenFileURL="@@previews/openFileURL",e.Redirect="@@previews/redirect",e.FetchMediaMetadata="@@previews/fetchMediaMetadata",e.FetchMediaMetadataResult="@@previews/fetchMediaMetadataResult",e.FetchWaveformData="@@previews/fetchWaveformData",e.FetchWaveformDataResult="@@previews/fetchWaveformDataResult",e.FetchLinkfileData="@@previews/fetchLinkfileData",e.FetchLinkfileDataResult="@@previews/fetchLinkfileDataResult",e.SetToolbarIsHovered="@@previews/setToolbarIsHovered",e.OverrideFloatingToolbar="@@previews/overrideFloatingToolbar",e.InitializeVolumeAndMuted="@@previews/initializeVolumePreference",e.TriggerDynamicRoutingModalCheck="@@previews/triggerDynamicRoutingModalCheck",e.SetVolume="@@previews/setVolume",e.SetMuted="@@previews/setMuted",e.ReportException="@@previews/reportException",e.SetPreviewLoadingAction="@@previews/setPreviewLoadedAction",e.SetBrandingInfo="@@previews/setBrandingInfo"})(t=i.Action||(i.Action={})),i.excelSheetRenderFailed=function(e){return{payload:e,type:t.ExcelSheetRenderFailed}},i.excelSheetRenderSucceeded=function(e){return{payload:e,type:t.ExcelSheetRenderSucceeded}},i.fetchRivieraData=function(e){return{payload:e,type:t.FetchRivieraData}},i.fetchPageDataWithMetadata=function(e){return{payload:e,type:t.FetchPageDataWithMetadata}},i.fetchPageDataWithMetadataResult=function(e,i){return{type:t.FetchPageDataWithMetadataResult,payload:e,error:i}},i.refreshBlobAction=function(e){return{payload:e,type:t.RefreshBlob}},i.refreshBlobSuccessAction=function(e){return{payload:e,type:t.RefreshBlobSuccess}},i.updateDocCurrentPageIndex=function(e){return{type:t.UpdateDocCurrentPageIndex,payload:e}},i.pageNavigation=function(e){return{type:t.PageNavigation,payload:e}},i.resolvePageNavigation=function(e){return{type:t.ResolvePageNavigation,payload:e}},i.zoomIn=function(e){return{type:t.ZoomIn,payload:e}},i.zoomOut=function(e){return{type:t.ZoomOut,payload:e}},i.updateFitScaleFactor=function(e){return{type:t.UpdateFitScaleFactor,payload:e}},i.updateDimensions=function(e){return{type:t.UpdateDimensions,payload:e}},i.zoomToggleOriginalOrFit=function(e){return{type:t.ZoomToggleOriginalOrFit,payload:e}},i.initializeFilePreview=function(e){return{type:t.InitializeFilePreview,payload:e}},i.initializeNestedArchiveFilePreview=function(e){return{type:t.InitializeNestedArchiveFilePreview,payload:e}},i.initializeFilePreviewSession=function(e){return{type:t.InitializeFilePreviewSession,payload:e}},i.openDocSidebar=function(e){return{type:t.OpenDocSidebar,payload:e}},i.closeDocSidebar=function(e){return{type:t.CloseDocSidebar,payload:e}},i.setCurrentFilePreview=function(e){return{type:t.SetCurrentFilePreview,payload:e}},i.pageDown=function(e){return{type:t.PageDown,payload:e}},i.pageUp=function(e){return{type:t.PageUp,payload:e}},i.print=function(e){return{type:t.Print,payload:e}},i.enterFullScreen=function(e){return{type:t.EnterFullScreen,payload:e}},i.exitFullScreen=function(e){return{type:t.ExitFullScreen,payload:e}},i.clickDropboxLogo=function(e){return{type:t.ClickDropboxLogo,payload:e}},i.showAuthModal=function(e){return{type:t.ShowAuthModal,payload:e}},i.initializeRightRail=function(e){return{type:t.InitializeRightRail,payload:e}},i.initializeDocSidebar=function(e){return{type:t.InitializeDocSidebar,payload:e}},i.openRightRail=function(e){return{type:t.OpenRightRail,payload:e}},i.closeRightRail=function(e){return{type:t.CloseRightRail,payload:e}},i.shareAction=function(e){return{type:t.Share,payload:e}},i.restoreAction=function(e){return{type:t.Restore,payload:e}},i.openWith=function(e){return{type:t.OpenWith,payload:e}},i.openWithCloudEditor=function(e){return{type:t.OpenWithCloudEditor,payload:e}},i.initializeFileViewer=function(e){return{type:t.InitializeFileViewer,payload:e}},i.openWebPreview=function(e){return{type:t.OpenWebPreview,payload:e}},i.openVersionHistory=function(e){return{type:t.OpenVersionHistory,payload:e}},i.openUrl=function(e){return{type:t.OpenUrl,payload:e}},i.flipToNextFile=function(e){return{type:t.FlipToNextFile,payload:e}},i.flipToPreviousFile=function(e){return{type:t.FlipToPreviousFile,payload:e}},i.setFileMetadata=function(e){return{type:t.SetFileMetadata,payload:e}},i.setPreviewMetadata=function(e){return{type:t.SetPreviewMetadata,payload:e}},i.setSharedLinkInfo=function(e){return{type:t.SetSharedLinkInfo,payload:e}},i.setBrandingInfo=function(e){return{type:t.SetBrandingInfo,payload:e}},i.openFullscreenPreview=function(e){return{type:t.OpenFullscreenPreview,payload:e}},i.openContainingFolder=function(e){return{type:t.OpenContainingFolder,payload:e}},i.closeViewer=function(e){return{type:t.CloseViewer,payload:e}},i.setBootstrappedFile=function(e){return{type:t.SetBootstrappedFile,payload:e}},i.setErroredFile=function(e){return{type:t.SetErroredFile,payload:e}},i.setActiveRightRailPlugin=function(e){return{type:t.SetActiveRightRailPlugin,payload:e}},i.setActiveEditPlugin=function(e){return{type:t.SetActiveEditPlugin,payload:e}},i.hideContentPane=function(e){return{type:t.HideContentPane,payload:e}},i.fetchExcelSheetLayoutData=function(e){return{type:t.FetchExcelSheetLayoutData,payload:e}},i.fetchExcelSheetLayoutDataResult=function(e,i){return{type:t.FetchExcelSheetLayoutDataResult,payload:e,error:i}},i.fetchArchiveTopLevelData=function(e){return{payload:e,type:t.FetchArchiveTopLevelData}},i.fetchArchiveTopLevelDataResult=function(e,i){return{type:t.FetchArchiveTopLevelDataResult,payload:e,error:i}},i.updateArchiveFileCurrentPath=function(e){return{payload:e,type:t.UpdateArchiveFileCurrentPath}},i.setupArchiveFileCurrentPath=function(e){return{payload:e,type:t.SetupArchiveFileCurrentPath}},i.updateArchiveExtractAllSnackbarState=function(e){return{payload:e,type:t.UpdateArchiveExtractAllSnackbarState}},i.triggerDynamicRoutingModalCheck=function(){return{type:t.TriggerDynamicRoutingModalCheck,payload:{}}},i.openFileURL=function(e){return{payload:e,type:t.OpenFileURL}},i.redirect=function(e){return{payload:e,type:t.Redirect}},i.updateAudioVideoPlaybackState=function(e){return{payload:e,type:t.UpdateAudioVideoPlaybackState}},i.switchWorkbookTab=function(e){return{type:t.SwitchWorkbookTab,payload:e}},i.fetchMediaMetadata=function(e){return{payload:e,type:t.FetchMediaMetadata}},i.fetchMediaMetadataResult=function(e,i){return{type:t.FetchMediaMetadataResult,payload:e,error:i}},i.fetchWaveformData=function(e){return{payload:e,type:t.FetchWaveformData}},i.fetchWaveformDataResult=function(e,i){return{type:t.FetchWaveformDataResult,payload:e,error:i}},i.fetchLinkfileData=function(e){return{payload:e,type:t.FetchLinkfileData}},i.fetchLinkfileDataResult=function(e,i){return{type:t.FetchLinkfileDataResult,payload:e,error:i}},i.copyToDropbox=function(e){return{type:t.CopyToDropbox,payload:e}},i.downloadFile=function(e){return{type:t.DownloadFile,payload:e}},i.requestVideoSeek=function(e){return{type:t.RequestVideoSeek,payload:e}},i.requestVideoSeekRelative=function(e){return{type:t.RequestVideoSeekRelative,payload:e}},i.requestVideoPause=function(){return{type:t.RequestVideoPause,payload:{}}},i.clearVideoRequests=function(){return{type:t.ClearVideoRequests,payload:{}}},i.toggleVideoFrameSteppers=function(e){return{type:t.ToggleVideoFrameSteppers,payload:e}},i.setupGetPlayDurationSeconds=function(e){return{type:t.SetupGetPlayDurationSeconds,payload:e}},i.overrideFloatingToolbar=function(e){return{type:t.OverrideFloatingToolbar,payload:e}},i.initializeVolumeAndMuted=function(e){return{type:t.InitializeVolumeAndMuted,payload:e}},i.setVolume=function(e){return{type:t.SetVolume,payload:e}},i.setMuted=function(e){return{type:t.SetMuted,payload:e}},i.reportException=function(e){return{type:t.ReportException,payload:e}},i.setPreviewLoadingAction=function(e){return{type:t.SetPreviewLoadingAction,payload:e}}})),define("typescript/libraries/file-viewer/src/titlebar/titlebar_logo",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/css/titlebar/titlebar.module.css"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Logo=void 0,r=t.__importDefault(r),l=t.__importStar(l);i.Logo=({baseUrl:e,dispatch:i,previewKey:t,fileViewerId:c,className:d})=>r.default.createElement("a",{href:`//${e}?src=shmodel`,onClick:()=>{i(s.clickDropboxLogo({previewKey:t,fileViewerId:c,sourceContext:o.UserActionContext.TitleBarMain}))},className:`${l.titlebarLogo} ${d}`},r.default.createElement(a.UIIcon,{size:"large",src:n.DropboxLine,"aria-label":"Dropbox"})),i.Logo.displayName="Logo",i.Logo.displayName="Logo"})),define("typescript/libraries/file-viewer/src/titlebar/truncate",["require","exports","tslib","grapheme-splitter"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.measureRenderedTextLen=i.recalcText=i.truncateStringByLength=i.truncateStringByRenderWidth=void 0,r=t.__importDefault(r);function a(e,i,t=""){const r=Math.floor(i/2),a=e.slice(0,r);return t&&a.push(t),a.push(...e.slice(e.length-r,e.length)),{newGraphemes:a,newStr:a.join("")}}const n=new r.default;function s(e,i=""){const t=n.splitGraphemes(e);return a(t,t.length,i).newStr}function o(e,i,t){let r=t(e);const s=n.splitGraphemes(e);if(r<i||s.length<=2)return e;const o=Math.floor(i/r*s.length);let{newGraphemes:l,newStr:c}=a(s,o);for(r=t(c);r>i;)({newGraphemes:l,newStr:c}=a(l,l.length-1)),r=t(c);return c}i.truncateStringByRenderWidth=function(e,i,t){const r=t(e),s=n.splitGraphemes(e);if(r<=i||s.length<=2)return e;let o,l=Math.floor(i/r*s.length);do{({newStr:o}=a(s,l,"…")),l--}while(t(o)>i&&l>1);return o},i.truncateStringByLength=function(e,i){const t=n.splitGraphemes(e),{length:r}=t;return r<=Math.max(i,2)?e:a(t,i,"…").newStr},i.recalcText=function(e,i,t){const r=i-80;if(r>0){const i=e.substring(e.lastIndexOf(".")||e.length,e.length)||"",a=e.substring(0,e.length-i.length),n=r-t(`…${i}`);if(n<0){const i=o(e,r,t);return i!==e?s(i,"…"):e}{const r=o(a,n,t);return r!==a?`${s(r,"…")}${i}`:e}}return""},i.measureRenderedTextLen=function(e,i){if(!i)return 0;if("function"!=typeof i.getComputedTextLength)return 0;i.textContent=e;const t=i.getComputedTextLength();return i.textContent="",t}})),define("typescript/libraries/file-viewer/src/titlebar/truncated_title",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/titlebar/truncated_title.module.css","spectrum/tooltip/index","typescript/libraries/file-viewer/src/titlebar/truncate"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TruncatedTitle=void 0,r=t.__importStar(r),a=t.__importStar(a);class o extends r.PureComponent{constructor(){super(...arguments),this.truncateTextEl=null,this.textRef=e=>this.truncateTextEl=e,this.state={truncatedFileName:""}}recalcText(e,i){return s.recalcText(e,i,e=>s.measureRenderedTextLen(e,this.truncateTextEl))}componentDidMount(){this.setState({truncatedFileName:this.recalcText(this.props.fileName,this.props.width)})}UNSAFE_componentWillReceiveProps(e){this.props.fileName===e.fileName&&this.props.width===e.width||this.setState({truncatedFileName:this.recalcText(e.fileName,e.width)})}render(){const{filePath:e}=this.props;return r.createElement("div",{className:a.truncatedTitle},r.createElement("svg",{className:a.truncateUtil},r.createElement("text",{x:0,y:50,ref:this.textRef})),r.createElement(n.Tooltip,{positionOffset:8,positioning:"below",tooltipContent:e},r.createElement("h1",null,this.state.truncatedFileName)))}}i.TruncatedTitle=o,o.displayName="TruncatedTitle"})),define("typescript/libraries/file-viewer/src/css/titlebar/titlebar.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/titlebar/titlebar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.mobileDownload=i.inverse=i.titlebarTitle=i.titlebarIcon=i.titlebarLogo=i.titlebar=void 0,i.titlebar="_titlebar_vcqhr_5",i.titlebarLogo="_titlebarLogo_vcqhr_16",i.titlebarIcon="_titlebarIcon_vcqhr_20",i.titlebarTitle="_titlebarTitle_vcqhr_27",i.inverse="_inverse_vcqhr_35",i.mobileDownload="_mobileDownload_vcqhr_39";i.default={titlebar:"_titlebar_vcqhr_5",titlebarLogo:"_titlebarLogo_vcqhr_16",titlebarIcon:"_titlebarIcon_vcqhr_20",titlebarTitle:"_titlebarTitle_vcqhr_27",inverse:"_inverse_vcqhr_35",mobileDownload:"_mobileDownload_vcqhr_39"}})),define("typescript/libraries/file-viewer/src/css/titlebar/truncated_title.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/titlebar/truncated_title.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.truncateUtil=i.truncatedTitle=void 0,i.truncatedTitle="_truncatedTitle_15sfr_1",i.truncateUtil="_truncateUtil_15sfr_17";i.default={truncatedTitle:"_truncatedTitle_15sfr_1",truncateUtil:"_truncateUtil_15sfr_17"}})),define("metaserver/static/js/modules/clean/react/file_viewer/container",["require","exports","tslib","react","metaserver/static/js/modules/clean/history","metaserver/static/js/cloud_docs/types","metaserver/static/js/open_in_app/actions","metaserver/static/js/modules/clean/sharing/async_share_modal_util","metaserver/static/js/modules/clean/react/snackbar_manager","metaserver/static/js/modules/clean/react/snackbar","metaserver/static/js/modules/clean/viewer","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/modules/clean/react/extensions/data/store","metaserver/static/js/modules/clean/integrations/zoom_share_dialog/async_modal","metaserver/static/js/modules/core/browser","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/modules/clean/react/file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/core/config","metaserver/static/js/auth/login_or_register/types","metaserver/static/js/modules/constants/python","metaserver/static/js/action_bar/file_actions/portable/save_as_copy/save_as_copy","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/modules/clean/sharing/clean/util/link_util/parser","metaserver/static/js/modules/clean/react/error_boundary","metaserver/static/js/modules/core/exception","metaserver/static/js/modules/clean/react/previews/constants","metaserver/static/js/modules/clean/sync_everything/constants","metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/modules/clean/user_survey/user_survey"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F,O,T,A,x){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewerContainerTestOnly=i.FileViewerContainer=void 0,r=t.__importDefault(r),a=t.__importDefault(a),f=t.__importStar(f),E=t.__importStar(E);const D=({children:e})=>{const i=r.default.useRef(null),t=r.default.useRef(null);return r.default.useEffect(()=>{c.Snackbar.manager=c.Snackbar.manager?c.Snackbar.manager:i.current},[]),r.default.createElement("div",{ref:t},e,r.default.createElement(l.SnackbarManager,{ref:i,getParentElement:()=>t.current,useDigSnackbars:!0}))};D.displayName="SnackbarManagerContainer";const k=(e,i)=>{i&&p.initializeStore(i,[e])},M=({file:i,userId:l,shareModalVariant:c,shareEmail:p,openImmediatelyInApp:I,onCloseUrl:C,redirectOnClose:M,isEmbedded:L,brandingInfo:j,encryptionOptions:R,sharedLinkInfo:N,shareToken:V,sharePermission:U,authModalKind:B,copyLinkButtonOOBPreviewsVariant:K,shareModalOnEditPreviewsVariant:z,fileViewOrigin:H,appDownloadInterstitialDismissed:W,initialPreviewSourceAction:q,initialPreviewSourceContext:G,hidePageChrome:Z,showCloudDocPreview:$})=>{const Q=r.default.useMemo(()=>{const e=d.Viewer.get_viewer();return l?e.get_user_by_id(l):e.work_user||e.personal_user},[l]),{openInHelloSignSrc:X,urlSourceContext:Y,copyToDropbox:J,presentInZoom:ee,isCapture:ie}=r.default.useMemo(()=>{var e,i;const t=new URLSearchParams(window.location.search);return{openInHelloSignSrc:null!==(e=t.get("hellosign"))&&void 0!==e?e:void 0,urlSourceContext:null!==(i=t.get("context"))&&void 0!==i?i:F.PreviewSourceContext.Unknown,presentInZoom:!!t.get("zoom"),isCapture:!!t.get("capture"),copyToDropbox:t.has("copy_to_dropbox")}},[]),te=G||Y,[re,ae]=r.default.useState(i);r.default.useEffect(()=>{u.log_js_modules_application_code_start(),A.PreviewsEventLogger.mark(A.PreviewsTimingEvents.CONTAINER_CODE_START),k(i,Q)},[]);const ne=r.default.useMemo(()=>{if(C)return e=>{const{path:i,qargs:t}=a.default.deconstruct_url(C);M?"fileDeleted"===e?f.redirect(i):f.redirect(C):a.default.push_state(i,t)}},[C,M]),se=r.default.useCallback((e,i)=>{if(e.revision_id===re.revision_id&&S.isBrowseFile(re))if(i){const e=Object.assign(Object.assign({},re),{file_id:i.file_id,revision_id:i.revision_id,fq_path:i.fq_path});ae(e),k(e,Q)}else null==ne||ne("fileDeleted")},[re,ne,Q]);r.default.useEffect(()=>{if(te===F.PreviewSourceContext.PdfEditor&&x.UserSurvey.trackEvent("save_pdf_editor","previews"),J&&i&&Q&&V){const i=new URL(window.location.href);y.portableSaveAsCopy({fileName:S.getFilename(re),user:Q,shareToken:V},{onNetworkRequest:()=>{new Promise((i,t)=>{e(["metaserver/static/js/action_bar/file_actions/portable/save_as_copy/snackbars"],i,t)}).then(t.__importStar).then(({saveCopySnackBarInProgress:e})=>{e(P.PREVIEWS_SNACKBAR_ID)})}}),i.searchParams.delete("copy_to_dropbox"),window.history.replaceState(i.href,"",i.href)}if(p||c&&c!==n.ShareModalVariant.closed&&Q?new Promise((i,t)=>{e(["metaserver/static/js/browse/models"],i,t)}).then(t.__importStar).then(({File:e})=>{const t=p?p.split(","):[];o.asyncShowPrefilledShareModal({user:Q,sharePrefillEmails:t,content:new e(i)})}):B!==b.LoginOrRegisterKind.IMMEDIATE||Q||ie?ee&&Q&&v.asyncShowModal(Q.id,i.file_id,"file-viewer-modal-overlay","desktop"):m.showAuthModal({mode:w.AuthMode.REGISTER,kind:w.LoginOrRegisterKind.IMMEDIATE,encryptionOptions:R,loggingExtra:{source:"file_preview_initial_load"}}),I){const e=i;s.openImmediately(e.open_in_app_data)}f.get_uri().getQuery().sync_from_docsend&&_.showDocSendSnackbar(Q)},[]);const oe=void 0!==Q&&H===h.FileViewOriginType.SHARE_PAGE&&!L,le=H===h.FileViewOriginType.SHARED_LINK_PAGE&&!L,ce=H===h.FileViewOriginType.PAPER&&L,de=te===F.PreviewSourceContext.FileLocking,ue=E.parseLink(window.location.href),pe=oe||le||ce?r.default.createElement(D,null,r.default.createElement(T.FileViewer,{closeFile:ne,file:i,previewContentOnly:Z,showCloudDocPreview:$,sharedLinkInfo:N,sharePermission:U,shareToken:V,brandingInfo:j,user:Q,encryptionOptions:R,previewSurface:oe?g.SDKPreviewSurface.INBAND_SHARE:ce?g.SDKPreviewSurface.SHARED_LINK_EMBED:g.SDKPreviewSurface.SHARED_LINK,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!W,authModalKind:B,copyLinkButtonOOBPreviewsVariant:K,shareModalOnEditPreviewsVariant:z,parsedSharedCopyLink:ue,usePreloadedMetadata:!0,initialSourceAction:q,fileViewOrigin:H,sourceContext:te})):r.default.createElement(D,null,r.default.createElement(T.FileViewer,{closeFile:ne,file:i,previewContentOnly:Z,showCloudDocPreview:$,user:Q,brandingInfo:j,encryptionOptions:R,previewSurface:O.isBackupBrowse()?g.SDKPreviewSurface.BACKUP:de?g.SDKPreviewSurface.FILE_LOCKING:g.SDKPreviewSurface.STANDALONE_PREVIEW,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!W,authModalKind:B,onFileChanged:se,fileViewOrigin:H,usePreloadedMetadata:!0,sourceContext:te}));return X&&((i,r,a)=>{new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/integrations/hellosign_deep_integration/launcher"],i,t)}).then(t.__importStar).then(({getLauncher:e})=>{const t=e();return t.init({entryPoint:"file_preview_side_bar",file:i,user:r,source:a}),t}).then(e=>(e.launch(),e))})(re,Q,X),L?r.default.createElement("div",{className:"embedded"},pe):pe};i.FileViewerContainerTestOnly=M,M.displayName="FileViewerContainer";i.FileViewerContainer=e=>r.default.createElement(I.ErrorBoundary,{onCatch:e=>C.reportException({err:e,tags:["file-viewer-container"],severity:"critical"})},r.default.createElement(M,Object.assign({},e)))})),define("typescript/libraries/file-viewer/src/core/constants",["require","exports","typescript/libraries/file-viewer/src/core/data/models"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.THRESHOLD_TEXT_SECOND_BATCH=i.TEXT_FIRST_BATCH_SIZE=i.DEFAULT_SUPPORTED_PREVIEW_TYPES=i.DEFAULT_EXCEL_SCALE_FACTOR=i.ZOOM_PERCENT_DELTA=i.DOC_ZOOM_MULTIPLIER=i.MIN_DOC_SCALE_FACTOR=i.MAX_DOC_SCALE_FACTOR=i.IMG_ZOOM_MULTIPLIER=i.MIN_IMG_SCALE_FACTOR=i.MAX_IMG_SCALE_FACTOR=void 0,i.MAX_IMG_SCALE_FACTOR=16,i.MIN_IMG_SCALE_FACTOR=.01,i.IMG_ZOOM_MULTIPLIER=1.25,i.MAX_DOC_SCALE_FACTOR=10,i.MIN_DOC_SCALE_FACTOR=.1,i.DOC_ZOOM_MULTIPLIER=1.1,i.ZOOM_PERCENT_DELTA=.05,i.DEFAULT_EXCEL_SCALE_FACTOR=.5,i.DEFAULT_SUPPORTED_PREVIEW_TYPES=[t.PreviewType.CloudDoc,t.PreviewType.Image,t.PreviewType.SsrDoc,t.PreviewType.Video,t.PreviewType.Audio,t.PreviewType.Archive,t.PreviewType.Excel,t.PreviewType.HTML,t.PreviewType.RawHTML,t.PreviewType.Linkfile],i.TEXT_FIRST_BATCH_SIZE=10,i.THRESHOLD_TEXT_SECOND_BATCH=7})),define("typescript/libraries/file-viewer/src/core/data/preview_key",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getSubpath=i.getPreviewKeyForNestedArchiveFile=i.getPreviewKey=i.isNestedArchiveFilePreviewKey=void 0,i.isNestedArchiveFilePreviewKey=function(e){const i="NestedArchiveFile"===e.type?e:null;return Boolean(i)},i.getPreviewKey=function(e,i,t,r){return{type:"File",_fileId:e,_nsId:i,_sjId:t,_url:r,serialized:(e?`fileId:[${e}]`:"")+(i?`nsId:[${i}]`:"")+(t?`sjId:[${t}]`:"")+(r?`url:[${r}]`:"")}},i.getPreviewKeyForNestedArchiveFile=function(e,i){return{type:"NestedArchiveFile",rootFileId:e,subpath:i,serialized:`rootFileId:[${e}]subpath:[${i}]`}},i.getSubpath=function(e){let i="";return e.length&&(i+=`/${e.join("/")}`),`${i}`}})),define("typescript/libraries/file-viewer/src/css/sidebar.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/sidebar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.openWithCloudRow=i.openWithCloudEditorIcon=i.openWithCloudCollapsed=i.downloadCollapsed=i.signInCollapsed=i.shareCollapsed=i.openWithCollapsed=i.openIcon=i.share=i.toggleButton=i.openWith=i.isOpen=i.icon=void 0,i.icon="_icon_1q6gn_5",i.isOpen="_isOpen_1q6gn_16",i.openWith="_openWith_1q6gn_21",i.toggleButton="_toggleButton_1q6gn_26",i.share="_share_1q6gn_37",i.openIcon="_openIcon_1q6gn_42",i.openWithCollapsed="_openWithCollapsed_1q6gn_46",i.shareCollapsed="_shareCollapsed_1q6gn_47",i.signInCollapsed="_signInCollapsed_1q6gn_48",i.downloadCollapsed="_downloadCollapsed_1q6gn_52",i.openWithCloudCollapsed="_openWithCloudCollapsed_1q6gn_53",i.openWithCloudEditorIcon="_openWithCloudEditorIcon_1q6gn_67",i.openWithCloudRow="_openWithCloudRow_1q6gn_73";i.default={icon:"_icon_1q6gn_5",isOpen:"_isOpen_1q6gn_16",openWith:"_openWith_1q6gn_21",toggleButton:"_toggleButton_1q6gn_26",share:"_share_1q6gn_37",openIcon:"_openIcon_1q6gn_42",openWithCollapsed:"_openWithCollapsed_1q6gn_46",shareCollapsed:"_shareCollapsed_1q6gn_47",signInCollapsed:"_signInCollapsed_1q6gn_48",downloadCollapsed:"_downloadCollapsed_1q6gn_52",openWithCloudCollapsed:"_openWithCloudCollapsed_1q6gn_53",openWithCloudEditorIcon:"_openWithCloudEditorIcon_1q6gn_67",openWithCloudRow:"_openWithCloudRow_1q6gn_73"}})),define("typescript/libraries/file-viewer/src/core/data/selectors",["require","exports","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/data/models"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getVolumeState=i.getToolbarHoverState=i.getFetchingUser=i.getCurrentUser=i.getFilePreviewSessionId=i.getFileContentMetadata=i.getVideoRequests=i.getHasBeenFlipped=i.getIsFullScreen=i.getPrintUrl=i.isRightRailOpen=i.isPreviewZoomed=i.getCurrentScaleFactorFromFilePreviewUi=i.getFileViewerUi=i.getCurrentFilePreviewUI=i.getFilePreviewUi=i.getFileMetadata=i.getCurrentFileMetadata=i.getCloudDocEditorUrl=i.getCurrentRivieraData=i.getRivieraDataFromSlice=i.getRivieraData=i.getArchiveFilesFetchedPreviewMetadata=i.getArchiveFilesPreviewMetadata=i.getPreviewMetadata=i.getCurrentFilePreviewUiData=i.getFilePreviewUiData=i.getCurrentPreviewKey=i.getCurrentFile=i.getLoadableCurrentUser=void 0;const s={state:"pending"},o=a.memoizeOne(t.makeFulfilledLoadableData);function l(e,i){return e.currentFileInfo[i]}function c(e,i){return l(e,i).previewKey}function d(e,i){return r.isNestedArchiveFilePreviewKey(i)?u(e.archiveFiles,i):e.previewData[i.serialized]}function u(e,i){const t=e[i.rootFileId];if(t)return t[i.subpath]}function p(e,i){return e.rivieraData[i.serialized]}function v(e,i,t){return e.filePreviewUi[i][t.serialized]}function f(e,i){var s;const o=l(e,i),c=o.previewKey,u=v(e,i,c),f=d(e,c);if(a.resolvePreviewType(f)===n.PreviewType.Archive&&!r.isNestedArchiveFilePreviewKey(c)){const a=p(e,c);if("loaded"===(null===(s=null==a?void 0:a.rootEntry)||void 0===s?void 0:s.state)&&u&&u.currentPath){const{entry:n}=t.getArchiveEntryAtPath(a.rootEntry.data,u.currentPath,i,c);if(!n.isDir){return v(e,i,r.getPreviewKeyForNestedArchiveFile(o.file_id,r.getSubpath(u.currentPath)))}}}return u}function g(e,i){return e.fileViewerUi[i]}i.getLoadableCurrentUser=function(e){return e.fetchingUser?s:o(e.currentUser)},i.getCurrentFile=l,i.getCurrentPreviewKey=c,i.getFilePreviewUiData=function(e,i){return e[i.serialized]},i.getCurrentFilePreviewUiData=function(e,i,t){var r;return null===(r=e.filePreviewUi[i])||void 0===r?void 0:r[t.serialized]},i.getPreviewMetadata=d,i.getArchiveFilesPreviewMetadata=u,i.getArchiveFilesFetchedPreviewMetadata=function(e,i){return!!e[i]},i.getRivieraData=p,i.getRivieraDataFromSlice=function(e,i){return e[i.serialized]},i.getCurrentRivieraData=function(e,i){return e.rivieraData[c(e,i).serialized]},i.getCloudDocEditorUrl=function(e,i){return e.cloudDocsData[i]},i.getCurrentFileMetadata=function(e,i){return e.fileMetadata[c(e,i).serialized]},i.getFileMetadata=function(e,i){return e.fileMetadata[i.serialized]},i.getFilePreviewUi=v,i.getCurrentFilePreviewUI=f,i.getFileViewerUi=g,i.getCurrentScaleFactorFromFilePreviewUi=function(e){return e.zoomScaleFactor||e.fitScaleFactor},i.isPreviewZoomed=function(e,i){const r=f(e,i);if(!r)return!1;const a=t.filterZoomableFilePreviewUi(r);if(null==a)return!1;const{zoomScaleFactor:n,fitScaleFactor:s}=a;return!!n&&n>s},i.isRightRailOpen=function(e,i){return!!e.fileViewerUi[i]&&e.fileViewerUi[i].isRightRailOpen},i.getPrintUrl=function(e,i){var t,r;const a=d(e,c(e,i));if(!a)return"";const{content:n}=a;return"image"===(null==n?void 0:n[".tag"])?null!==(t=null==n?void 0:n.full_size_src)&&void 0!==t?t:"":"ssr_doc"===(null==n?void 0:n[".tag"])&&null!==(r=null==n?void 0:n.autoprint_url)&&void 0!==r?r:""},i.getIsFullScreen=function(e,i){var t;const r=g(e,i);return null!==(t=null==r?void 0:r.isFullScreen)&&void 0!==t&&t},i.getHasBeenFlipped=function(e,i){var t;const r=g(e,i);return null!==(t=null==r?void 0:r.hasBeenFlipped)&&void 0!==t&&t},i.getVideoRequests=function(e){return e.videoRequests},i.getFileContentMetadata=function(e,i){return e.fileContentMetadata[i.serialized]},i.getFilePreviewSessionId=function(e,i){return i?e.loggingSession[i].file_preview_session_id:void 0},i.getCurrentUser=function(e){return e.currentUser},i.getFetchingUser=function(e){return e.fetchingUser},i.getToolbarHoverState=function(e){return e.toolbar},i.getVolumeState=function(e){return e.volume}})),define("typescript/libraries/file-viewer/src/core/data/utils",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getArchiveEntryAtPath=i.filterDimensionsFilePreviewUiState=i.filterArchiveFilePreviewUiState=i.filterZoomableFilePreviewUi=i.filterAudioVideoFilePreviewUiState=i.filterDocFilePreviewUiState=i.isExcelApiV2MetadataContent=i.isDocPreviewRivieraData=i.isArchivePreviewRivieraData=i.isExcelPreviewRivieraData=i.makePendingLoadableData=i.makeFulfilledLoadableData=i.makeRejectedLoadableData=void 0;i.makeRejectedLoadableData=e=>({state:"errored",error:e});i.makeFulfilledLoadableData=e=>({state:"loaded",data:e});i.makePendingLoadableData=()=>({state:"pending"}),i.isExcelPreviewRivieraData=function(e){return null!=e&&"sheets"in e},i.isArchivePreviewRivieraData=function(e){return Boolean(null!=e&&"rootEntry"in e?e:null)},i.isDocPreviewRivieraData=function(e){return null!=e&&"metadata"in e&&"pages"in e},i.isExcelApiV2MetadataContent=function(e){return void 0!==e&&"excel"===e[".tag"]},i.filterDocFilePreviewUiState=function(e){return e&&"currentPageIndex"in e?e:null},i.filterAudioVideoFilePreviewUiState=function(e){return"currentTimestamp"in e?e:null},i.filterZoomableFilePreviewUi=function(e){return"fitScaleFactor"in e?e:null},i.filterArchiveFilePreviewUiState=function(e){return"extractAllSnackbarState"in e?e:null},i.filterDimensionsFilePreviewUiState=function(e){return e&&"dimensions"in e&&e.dimensions?e:null},i.getArchiveEntryAtPath=function(e,i,r,a,n){var s;let o=null,l=e;const c=[];for(const e of i){const i=null===(s=l.children)||void 0===s?void 0:s.find(i=>i.name===e);if(!i)return n&&n(t.updateArchiveFileCurrentPath({currentPath:c,fileViewerId:r,previewKey:a})),{entry:l,parent:o};o=l,l=i,c.push(e)}return{entry:l,parent:o}}})),define("typescript/libraries/file-viewer/src/core/utils/functions",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/core/constants","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/utils/support"],(function(e,i,t,r,a,n,s,o,l){"use strict";function c(e,i){return e===i&&(0!==e||1/e==1/i)||e!=e&&i!=i}function d(e,i,t){const r=o.getFileExtension(e),n=t.other_size_limits[r];if(n)return n;switch(i){case a.PreviewType.Archive:return t.archive_size_limit;case a.PreviewType.HTML:case a.PreviewType.Text:return t.text_size_limit;case a.PreviewType.Linkfile:return t.linkfile_size_limit;case a.PreviewType.Excel:return t.excel_size_limit}return 0}Object.defineProperty(i,"__esModule",{value:!0}),i.useDebugRerender=i.calculatePageRange=i.mapMetadataToFile=i.fileSizeSupported=i.getFileSizeLimit=i.canPreviewInPreviewDoc=i.memoizeOne=i.shallowEqual=i.isPreviewTypeSupported=i.resolvePreviewType=void 0,r=t.__importStar(r),Object.defineProperty(i,"resolvePreviewType",{enumerable:!0,get:function(){return l.resolvePreviewType}}),Object.defineProperty(i,"isPreviewTypeSupported",{enumerable:!0,get:function(){return l.isPreviewTypeSupported}}),i.shallowEqual=function(e,i){if(c(e,i))return!0;if("object"!=typeof e||null===e||"object"!=typeof i||null===i)return!1;const t=Object.keys(e),r=Object.keys(i);if(t.length!==r.length)return!1;for(let r=0;r<t.length;r++)if(!Object.prototype.hasOwnProperty.call(i,t[r])||!c(e[t[r]],i[t[r]]))return!1;return!0},i.memoizeOne=function(e){let i,t,r=!1;return a=>r&&i===a?t:(t=e(a),i=a,r=!0,t)},i.canPreviewInPreviewDoc=function(e){return[a.PreviewType.CloudDoc,a.PreviewType.SsrDoc].includes(n.resolvePreviewType(e))},i.getFileSizeLimit=d,i.fileSizeSupported=function(e,i,t,r){if(!isFinite(i))return!0;const a=d(e,t,r);return!a||i<=a};i.mapMetadataToFile=function(e,i=!1){if(e)return{uniqueKey:e.file_id,title:e.file_name,isFolder:i,extension:o.getFileExtension(e.file_name).replace(/\./,"")}},i.calculatePageRange=function(e,i=!1){let t,r;if(!i||e>35){t=50*Math.floor(e/50),t+50-e<15&&(t+=50),r=t+50}else e<=s.TEXT_FIRST_BATCH_SIZE-s.THRESHOLD_TEXT_SECOND_BATCH?(t=0,r=s.TEXT_FIRST_BATCH_SIZE):(t=s.TEXT_FIRST_BATCH_SIZE,r=50);return[t,r]};i.useDebugRerender=(e,i)=>{const t=r.useRef(null),a=r.useRef(0);if(t.current){const r=t.current,n=a.current,s=Object.keys(e),o=Object.keys(r),l=[...new Set([...s,...o])];for(const t of l){const a=e[t],s=r[t];a!==s&&console.log(`${i} rerender ${n}: key: ${t} old: ${s}, new: ${a}`)}}t.current=e,a.current++}})),define("typescript/libraries/file-viewer/src/core/utils/support",["require","exports","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/core/constants"],(function(e,i,t,r){"use strict";function a(e){if(!e||!e.content)return t.PreviewType.Error;switch(e.content[".tag"]){case"archive":return t.PreviewType.Archive;case"audio":return t.PreviewType.Audio;case"cloud_doc":return t.PreviewType.CloudDoc;case"excel":return t.PreviewType.Excel;case"html":return t.PreviewType.HTML;case"image":return t.PreviewType.Image;case"linkfile":return t.PreviewType.Linkfile;case"raw_html":return t.PreviewType.RawHTML;case"restricted":return t.PreviewType.Restricted;case"ssr_doc":return t.PreviewType.SsrDoc;case"video":return t.PreviewType.Video;default:return t.PreviewType.Other}}Object.defineProperty(i,"__esModule",{value:!0}),i.isPreviewTypeSupported=i.resolvePreviewType=void 0,i.resolvePreviewType=a,i.isPreviewTypeSupported=function(e,i){const t=a(e);return r.DEFAULT_SUPPORTED_PREVIEW_TYPES.concat(i).includes(t)}})),define("typescript/libraries/file-viewer/src/plugins/header",["require","exports","tslib","react","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/plugins/types"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PluginHeader=void 0,r=t.__importStar(r),i.PluginHeader=r.memo(({pluginProps:e,activePluginInstance:i,header:t})=>{const[s,o]=r.useState(!1);if(a.useFileViewerContext().featureConfig.preview_content_only)return null;if(i&&n.isRightRailPlugin(i)&&i.rightRailUI){const{rightRailUI:{Header:t}}=i;if(t)return s||o(!0),r.createElement(t,Object.assign({},e))}if(t&&!s){const e=t;return r.createElement(e,{onHide:()=>o(!0)})}return null}),i.PluginHeader.displayName="PluginHeader"})),define("typescript/libraries/file-viewer/src/plugins/types",["require","exports","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/models"],(function(e,i,t,r){"use strict";function a(e){return"editUI"in e?e:null}function n(e){return"fullscreenLayer"in e?e:null}Object.defineProperty(i,"__esModule",{value:!0}),i.isSnackbarManagerPlugin=i.isToolbarPlugin=i.isEditPluginFullscreenInstance=i.parseFullscreenEditPlugin=i.isEditPluginOverlayInstance=i.parseEditOverlayPlugin=i.isTitleBarPlugin=i.isActionBarPlugin=i.parseActionBarPlugin=i.isRightRailPlugin=i.parseRightRailPlugin=i.PreviewType=i.UserActionContext=void 0,Object.defineProperty(i,"UserActionContext",{enumerable:!0,get:function(){return t.UserActionContext}}),Object.defineProperty(i,"PreviewType",{enumerable:!0,get:function(){return r.PreviewType}}),i.parseRightRailPlugin=function(e){return"rightRailUI"in e?e:null},i.isRightRailPlugin=function(e){return!!e&&"rightRailUI"in e},i.parseActionBarPlugin=function(e){return"actionDefinitions"in e?e:null},i.isActionBarPlugin=function(e){return"actionDefinitions"in e},i.isTitleBarPlugin=function(e){return"titleBarUI"in e},i.parseEditOverlayPlugin=a,i.isEditPluginOverlayInstance=function(e){return!!e&&!!a(e)},i.parseFullscreenEditPlugin=n,i.isEditPluginFullscreenInstance=function(e){return!!e&&!!n(e)},i.isToolbarPlugin=function(e){return"toolbarUI"in e},i.isSnackbarManagerPlugin=function(e){return"isSnackbarVisible"in e}})),define("typescript/libraries/file-viewer/src/plugins/selectors/active_plugin",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t){"use strict";function r(e,i){return e.plugins[i].runtimeDisabledPlugins}function a(e,i){const t=e.plugins[i];if(null==t)return;const{activeRightRailPluginId:a}=t,n=r(e,i);return a&&n.includes(a)?void 0:a}function n(e,i){const t=e.plugins[i];if(null==t)return;const{activeEditPluginId:a}=t,n=r(e,i);return a&&n.includes(a)?void 0:a}function s(e,i){const r=n(e,i);return r||(t.isRightRailOpen(e,i)?a(e,i):void 0)}Object.defineProperty(i,"__esModule",{value:!0}),i.getToolBarOverride=i.getSelectedHideContentPanePluginId=i.isPluginEditMode=i.getActivePluginId=i.getSelectedEditPluginId=i.getSelectedRightRailPluginId=i.getRuntimeDisabledPlugins=void 0,i.getRuntimeDisabledPlugins=r,i.getSelectedRightRailPluginId=a,i.getSelectedEditPluginId=n,i.getActivePluginId=s,i.isPluginEditMode=function(e,i){return!!n(e,i)},i.getSelectedHideContentPanePluginId=function(e,i){const t=e.plugins[i];if(null==t)return;const{hideContentPanePluginId:a}=t,n=r(e,i);return a&&n.includes(a)?void 0:a},i.getToolBarOverride=function(e,i){if(e.toolbar.override){const t=s(e,i);if(e.toolbar.overridePluginId===t)return e.toolbar.override}}})),define("typescript/libraries/file-viewer/src/core/utils/browser_detection",["require","exports"],(function(e,i){"use strict";function t(e=navigator.userAgent){const i=(function(e){const i=e.toLowerCase(),t=/(ipad)/.exec(i)||/(edge)[ \/]([\w.]+)/.exec(i)||/(edg)[ \/]([\w.]+)/.exec(i)||/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||/(trident).*? rv:([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],r=i.match(/version\/([\d.]+)/i);let a=null!=r?t[1]:null;return"webkit"===a&&(a=null!=r?r[1]:null),{browser:t[1]||"",version:a||t[2]||"0",userAgent:e}})(e);return"trident"===i.browser&&(i.browser="msie"),i}Object.defineProperty(i,"__esModule",{value:!0}),i.is_mobile_or_tablet=i.is_tablet=i.is_android=i.is_supported_mobile_browser=i.iphone=i.edge=i.safari=i.ipad=i.ipod=i.get_browser_info=void 0,i.get_browser_info=t;const r=t();function a(e=navigator.userAgent){const t=(e||"").toLowerCase();return i.ipod||i.iphone||-1!==t.indexOf("tizen")||-1!==t.indexOf("android")&&-1!==t.indexOf("mobile")||-1!==t.indexOf("bb10")||-1!==t.indexOf("netfront")||/windows phone|opera mini|blackberry|nokia/.test(t)||-1!==t.indexOf("firefox")&&-1!==t.indexOf("mobile")||-1!==t.indexOf("googlebot-mobile")||-1!==t.indexOf("iemobile")||-1!==t.indexOf("opera mobi")||/ucweb|ucbrowser/.test(t)||-1!==t.indexOf("microsoft office mobile")}function n(e=navigator.userAgent){const i=(e||"").toLowerCase();return-1!==i.indexOf("android")||-1!==i.indexOf("silk")}function s(e=navigator.userAgent){return i.ipad||n(e)&&!a(e)}i.ipod=Boolean(/(ipod)/.exec(navigator.userAgent.toLowerCase())),i.ipad="ipad"===r.browser||void 0,i.safari=!("webkit"!==r.browser&&!Boolean(i.ipad))||void 0,i.edge="edge"===r.browser||"edg"===r.browser,i.iphone=Boolean(/(iphone)/.exec(navigator.userAgent.toLowerCase())),i.is_supported_mobile_browser=a,i.is_android=n,i.is_tablet=s,i.is_mobile_or_tablet=function(e=navigator.userAgent){return a(e)||s(e)}})),define("typescript/libraries/file-viewer/src/hooks/selectors",["require","exports","react-redux","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useCurrentFileMetadata=i.useCurrentFileInfo=void 0;i.useCurrentFileInfo=e=>t.useSelector(i=>r.getCurrentFile(i,e));i.useCurrentFileMetadata=e=>t.useSelector(i=>r.getFileMetadata(i,e))})),define("typescript/libraries/file-viewer/src/hooks/useStabilizedCallback",["require","exports","react"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useStabilizedCallback=void 0;i.useStabilizedCallback=e=>{const i=t.useRef(e);return i.current=e,t.useRef((...e)=>(0,i.current)(...e)).current}})),define("typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover",["require","exports","react","react-redux","lodash","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useShowAndStayOnHover=void 0;i.useShowAndStayOnHover=function(){const e=r.useDispatch(),i=r.useSelector(o.getToolbarHoverState),l=n.useStabilizedCallback(i=>e({type:s.Action.SetToolbarIsHovered,payload:i})),[c,d]=t.useState(!0),u=t.useRef(),p=n.useStabilizedCallback(e=>{const i=e.currentTarget.getBoundingClientRect();0===i.left&&0===i.top||l({isHovered:!0})}),v=n.useStabilizedCallback(()=>{l({isHovered:!1})}),f=n.useStabilizedCallback(()=>{i.isHovered?(u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(f,3e3)):(u.current=void 0,d(!1))});return t.useEffect(()=>{const e=a.throttle(()=>{d(!0),u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(f,3e3)},1e3,{leading:!0,trailing:!1});return u.current&&window.clearTimeout(u.current),u.current=window.setTimeout(f,3e3),window.addEventListener("mousemove",e),window.addEventListener("focusin",e),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("focusin",e)}},[f]),t.useEffect(()=>()=>{u.current&&(window.clearTimeout(u.current),u.current=void 0)},[]),{elementProps:{onMouseLeave:v,onBlur:v,onMouseEnter:p,onFocus:p},isShown:c}}})),define("typescript/libraries/file-viewer/src/css/header.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/header.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.authButtons=i.floatingHeader=i.headerContainer=void 0,i.headerContainer="_headerContainer_q32w0_1",i.floatingHeader="_floatingHeader_q32w0_9",i.authButtons="_authButtons_q32w0_21";i.default={headerContainer:"_headerContainer_q32w0_1",floatingHeader:"_floatingHeader_q32w0_9",authButtons:"_authButtons_q32w0_21"}})),define("typescript/libraries/file-viewer/src/preview_error/preview_error",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/preview-error.module.css","typescript/libraries/file-viewer/src/css/header.module.css","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/open_with_native/open_with_button","react-intl","typescript/libraries/file-viewer/src/sidebar/download_dropdown","typescript/libraries/file-viewer/src/preview_archive/archive_snack_bar","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/core/i18n","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/header","react-redux","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewBootstrapError=i.PreviewRenderError=i.PreviewErrorBase=i.TestOnlyErrorPage=i.UserOffline=i.FileUploading=i.FileTooLarge=i.NoExtension=i.DataFetchFailure=i.Unavailable=i.ArchiveFilePasswordProtected=i.PasswordProtected=i.ArchiveFileUnavailable=i.ArchiveNestedFiletypeNotSupported=i.FiletypeNotSupported=i.ErrorContent=void 0,r=t.__importStar(r),a=t.__importStar(a);const S=(e,i)=>{const a=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{[i]:t}=yield e();return{default:t}}))),n=()=>r.createElement(r.Suspense,{fallback:null},r.createElement(a,null));return n.displayName=`Async${i}`,n},P=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/look-view"],i,t)}).then(t.__importStar),"LookViewSpot"),E=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/traffic-duck-crossing"],i,t)}).then(t.__importStar),"TrafficDuckCrossingSpot"),I=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/team-ants"],i,t)}).then(t.__importStar),"TeamAntsSpot"),C=S(()=>new Promise((i,t)=>{e(["metaserver/static/js/dig-illustrations/spot/passcode-lock"],i,t)}).then(t.__importStar),"PasscodeLockSpot"),F=c.defineMessage({id:"f0donV",defaultMessage:"Couldn't preview this file"});i.ErrorContent=({title:e,message:i,illustration:t,children:n})=>r.createElement("article",{className:a.container},r.createElement("div",{className:a.illustrationContainer},t),r.createElement("header",{className:a.header},r.createElement("h1",null,e)),i?r.createElement("p",{className:a.message},i):null,n),i.ErrorContent.displayName="ErrorContent",i.ErrorContent.displayName="ErrorContent";const O=({fileConfig:e,intl:i,dispatch:t,fileViewerId:n,previewKey:s,extractConfig:o={canExtract:!1}})=>{var c,u,p,v,f,g;const _=h.useSelector(e=>y.getCurrentFile(e,n)).file_id;return(null===(c=null==e?void 0:e.download_button)||void 0===c?void 0:c.enable_download_button)&&_?r.createElement(d.DownloadDropdown,{intl:i,dispatch:t,fileViewerId:n,fileId:_,previewKey:s,copyTargets:null!==(p=null===(u=null==e?void 0:e.download_button)||void 0===u?void 0:u.copy_targets)&&void 0!==p?p:[],canDownload:null!==(f=null===(v=null==e?void 0:e.download_button)||void 0===v?void 0:v.can_download)&&void 0!==f&&f,useTextButton:!0,useOutlineButton:!0,extractConfig:o}):(null===(g=null==e?void 0:e.download_button)||void 0===g?void 0:g.enable_open_with_button)?r.createElement(l.OpenWithButton,{dispatch:t,intl:i,fileViewerId:n,className:a.ctaSecondary}):null};O.displayName="DownloadOrOpenWithButton",O.displayName="DownloadOrOpenWithButton";i.FiletypeNotSupported=({fileViewerId:e,fileMetadata:t,previewKey:n,intl:l,dispatch:c,extractConfig:d,fileConfig:u})=>r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:l.formatMessage({id:"73IpwD",defaultMessage:"{extension} files can’t currently be previewed."},{extension:m.getFileExtension(t?t.file_name:"")}),fileName:t?t.file_name:""},r.createElement(O,{previewKey:n,fileViewerId:e,intl:l,dispatch:c,extractConfig:d,fileConfig:u}),(null==u?void 0:u.enable_view_on_dropbox_button)?r.createElement("div",{className:a.ctaLink},r.createElement(s.Button,{variant:"transparent",onClick:()=>c(v.openWebPreview({fileViewerId:e,previewKey:n,sourceContext:o.UserActionContext.PreviewError}))},l.formatMessage({id:"qLPMn5",defaultMessage:"View on dropbox.com"}))):null),i.FiletypeNotSupported.displayName="FiletypeNotSupported",i.FiletypeNotSupported.displayName="FiletypeNotSupported";i.ArchiveNestedFiletypeNotSupported=({fileName:e,fileSize:t,intl:a})=>{const n=m.getFileExtension(e),s=n?a.formatMessage({id:"x+ecOm",defaultMessage:"{extension} files can’t be previewed from an archive file."},{extension:n}):a.formatMessage({id:"SQjtty",defaultMessage:"This file cannot be previewed. Please check to see if your file extension is correct."});return r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:s,fileName:e,message:a.formatMessage({id:"WF66bN",defaultMessage:"{filename} · {filesize}"},{filename:e,filesize:g.formatBytes(t,a)})})},i.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported",i.ArchiveNestedFiletypeNotSupported.displayName="ArchiveNestedFiletypeNotSupported";i.ArchiveFileUnavailable=({fileName:e,fileSize:t,intl:a})=>{const n=a.formatMessage(F);return r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:n,fileName:e,message:a.formatMessage({id:"WF66bN",defaultMessage:"{filename} · {filesize}"},{filename:e,filesize:g.formatBytes(t,a)})})},i.ArchiveFileUnavailable.displayName="ArchiveFileUnavailable",i.ArchiveFileUnavailable.displayName="ArchiveFileUnavailable";i.PasswordProtected=({fileName:e,intl:t})=>r.createElement(i.ErrorContent,{illustration:r.createElement(C,null),title:t.formatMessage({id:"tzyBCT",defaultMessage:"This {extension} file is password-protected"},{extension:m.getFileExtension(e)}),fileName:e}),i.PasswordProtected.displayName="PasswordProtected",i.PasswordProtected.displayName="PasswordProtected";i.ArchiveFilePasswordProtected=({fileName:e,intl:t})=>r.createElement(i.ErrorContent,{illustration:r.createElement(C,null),title:t.formatMessage({id:"eO6mPw",defaultMessage:"Can't preview items inside password protected {extension} files."},{extension:m.getFileExtension(e)}),fileName:e}),i.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected",i.ArchiveFilePasswordProtected.displayName="ArchiveFilePasswordProtected";i.Unavailable=({fileMetadata:e,previewKey:t,fileConfig:a,intl:n,fileViewerId:s,dispatch:o,extractConfig:l})=>{var c;const d=n.formatMessage(F),u=null!==(c=null==e?void 0:e.file_name)&&void 0!==c?c:"";return r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:d,fileName:u},r.createElement(O,{previewKey:t,fileViewerId:s,intl:n,dispatch:o,extractConfig:l,fileConfig:a}))},i.Unavailable.displayName="Unavailable",i.Unavailable.displayName="Unavailable";i.DataFetchFailure=({fileMetadata:e,intl:t})=>{let a,n;return e?(a=t.formatMessage({id:"ejp+g5",defaultMessage:"{extension} files are supported but something went wrong."},{extension:m.getFileExtension(e.file_name)}),n=e.file_name):(a=t.formatMessage({id:"0ljH1z",defaultMessage:"This file cannot be previewed"}),n=""),r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:a,fileName:n})},i.DataFetchFailure.displayName="DataFetchFailure",i.DataFetchFailure.displayName="DataFetchFailure";i.NoExtension=({fileMetadata:e,intl:t,dispatch:a,fileViewerId:n,previewKey:s,extractConfig:o,fileConfig:l})=>r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:t.formatMessage({id:"vbytsy",defaultMessage:"Files without extensions cannot be previewed"}),fileName:e?e.file_name:""},r.createElement(O,{previewKey:s,fileViewerId:n,intl:t,dispatch:a,extractConfig:o,fileConfig:l})),i.NoExtension.displayName="NoExtension",i.NoExtension.displayName="NoExtension";i.FileTooLarge=({fileMetadata:e,previewKey:t,previewMetadata:a,intl:n,dispatch:s,fileViewerId:o,config:l,fileConfig:c,extractConfig:d={canExtract:!1}})=>r.createElement(i.ErrorContent,{illustration:r.createElement(I,null),title:n.formatMessage({id:"Jap7oN",defaultMessage:"This file is too big to preview"}),message:n.formatMessage({id:"CaboZW",defaultMessage:"The maximum size for {extension} files is {size}"},{extension:e?m.getFileExtension(e.file_name):"",size:g.formatBytes(_.getFileSizeLimit(e?e.file_name:"",_.resolvePreviewType(a),l),n)}),fileName:e?e.file_name:""},r.createElement(O,{previewKey:t,fileViewerId:o,intl:n,dispatch:s,extractConfig:d,fileConfig:c})),i.FileTooLarge.displayName="FileTooLarge",i.FileTooLarge.displayName="FileTooLarge";i.FileUploading=({fileMetadata:e,intl:t,dispatch:a,fileViewerId:n,previewKey:s,extractConfig:o,fileConfig:l})=>r.createElement(i.ErrorContent,{illustration:r.createElement(E,null),title:t.formatMessage({id:"fz7GLr",defaultMessage:"File is uploading"}),fileName:e?e.file_name:""},r.createElement(O,{previewKey:s,fileViewerId:n,intl:t,dispatch:a,extractConfig:o,fileConfig:l})),i.FileUploading.displayName="FileUploading",i.FileUploading.displayName="FileUploading";i.UserOffline=({dispatch:e,fileMetadata:t,fileViewerId:a,intl:n,previewKey:s,extractConfig:o,fileConfig:l})=>r.createElement(i.ErrorContent,{illustration:r.createElement(P,null),title:n.formatMessage({id:"jZUA7r",defaultMessage:"This file cannot be previewed because you are offline"}),fileName:t?t.file_name:""},r.createElement(O,{previewKey:s,fileViewerId:a,intl:n,dispatch:e,extractConfig:o,fileConfig:l})),i.UserOffline.displayName="UserOffline",i.UserOffline.displayName="UserOffline";const T=e=>{switch(e.error.type){case f.FVErrorCode.UnsupportedPreviewType:return r.createElement(i.FiletypeNotSupported,Object.assign({},e));case f.FVErrorCode.NoExtension:return r.createElement(i.NoExtension,Object.assign({},e));case f.FVErrorCode.FileTooLarge:return r.createElement(i.FileTooLarge,Object.assign({},e));case f.FVErrorCode.PasswordProtected:return r.createElement(i.PasswordProtected,{intl:e.intl,fileName:e.fileMetadata?e.fileMetadata.file_name:""});case f.FVErrorCode.FileUploading:return r.createElement(i.FileUploading,Object.assign({},e));case f.FVErrorCode.UserOffline:return r.createElement(i.UserOffline,Object.assign({},e));case f.FVErrorCode.RivieraDataFetchFailure:case f.FVErrorCode.PreviewsDataApiFailure:case f.FVErrorCode.MalformedPreviewsDataApiResponse:case f.FVErrorCode.MalformedRivieraData:return r.createElement(i.DataFetchFailure,Object.assign({},e));case f.FVErrorCode.Unknown:case f.FVErrorCode.FileSwitched:case f.FVErrorCode.InvalidFileInfo:case f.FVErrorCode.InvalidLoggingOrder:case f.FVErrorCode.InvalidLoggingSession:case f.FVErrorCode.MissingContentMetadata:return r.createElement(i.Unavailable,Object.assign({},e))}};i.TestOnlyErrorPage=T,T.displayName="ErrorPage",T.displayName="ErrorPage";i.PreviewErrorBase=e=>{var i;const{extractConfig:t,fileMetadata:a,intl:s,previewKey:o,fileViewerId:l,dispatch:c,rootArchiveFileInformation:d,fileViewerUiData:v,filePreviewUiData:f,toolbarPlugins:g,snackbarManagerPluginInstance:_,pluginProps:m,activePluginInstance:h,header:y,onComponentRendered:S,onInteractive:P}=e;r.useEffect(()=>{S(),P()},[P,S]);const E=(null==t?void 0:t.canExtract)&&a?r.createElement(u.ArchiveSnackBar,{filePreviewUiData:t.filePreviewUiData,intl:s,previewKey:o,fileViewerId:l,dispatch:c}):null,I=null===(i=a)||void 0===i?void 0:i.fileConfig;return r.createElement("div",{className:n.headerContainer},m&&r.createElement(b.PluginHeader,{pluginProps:m,activePluginInstance:h||void 0,header:y}),E,r.createElement(T,Object.assign({},e,{fileConfig:I})),r.createElement(p.ConfigurableToolbar,{rootArchiveFileInformation:d,filePreviewUi:f,fileViewerUi:v,previewType:w.PreviewType.Error,plugins:g,snackbarManagerPluginInstance:_}))},i.PreviewErrorBase.displayName="PreviewErrorBase";i.PreviewRenderError=e=>r.createElement(i.PreviewErrorBase,Object.assign({onComponentRendered:e.onRenderFailed},e)),i.PreviewRenderError.displayName="PreviewRenderError";i.PreviewBootstrapError=e=>r.createElement(i.PreviewErrorBase,Object.assign({onComponentRendered:e.onSetPreviewLoaded},e)),i.PreviewBootstrapError.displayName="PreviewBootstrapError",i.PreviewRenderError.displayName="PreviewRenderError",i.PreviewBootstrapError.displayName="PreviewBootstrapError",i.PreviewErrorBase.displayName="PreviewErrorBase"})),define("typescript/libraries/file-viewer/src/preview_doc/sidebar",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/css/doc-sidebar.module.css","lodash","typescript/libraries/file-viewer/src/core/utils/functions","dig-components/progress_indicators"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Sidebar=i.InternalSidebarItem=i.SIDEBAR_WIDTH=void 0,r=t.__importStar(r),a=t.__importDefault(a),n=t.__importStar(n),i.SIDEBAR_WIDTH=parseInt(n.sidebarWidth,10);const c=parseInt(n.thumbnailWidth,10),d=parseInt(n.border,10),u=c-2*d;class p extends r.Component{constructor(){super(...arguments),this.state={error:!1,loaded:!1},this.handleLoad=e=>{this.setState({loaded:!0})},this.handleError=e=>{this.setState({error:!0})}}componentDidUpdate(e){!0===this.props.isSidebarFocused&&!0===this.props.isSelected&&!0!==e.isSelected&&this.ref&&this.ref.focus()}render(){const{isSelected:e,onClick:i,index:t,css:n,intl:s,thumbnailUrl:o,aspectRatio:c,isVisible:p,isEditMode:v,isSidebarFocused:f,top:g}=this.props,{error:_,loaded:m}=this.state,w=t+1,b=s.formatMessage({id:"HL27OJ",defaultMessage:"Page {index}"},{index:w});return r.createElement("li",{"data-index":t,style:{transform:`translateY(${g}px`}},r.createElement("a",{href:"#",onClick:e=>{e.preventDefault(),i(t)},tabIndex:-1,"aria-current":e?"page":void 0,"aria-label":b,ref:e=>null!=e&&(this.ref=e)},r.createElement("div",{className:a.default(n.thumbnail,{[n.selected]:e,[n.isUnfocusedInEditMode]:v&&!f}),style:{height:u*c+2*d}},!p||(_||m)&&o?void 0:r.createElement(l.Spinner,{className:n.loader,size:"xsmall"}),p&&o&&!_?r.createElement("img",{src:o,onLoad:this.handleLoad,onError:this.handleError,alt:""}):void 0),r.createElement("span",{"aria-hidden":!0},w)))}}i.InternalSidebarItem=p,p.displayName="InternalSidebarItem";class v extends r.Component{constructor(){super(...arguments),this.containerHeight=0,this.state={startPage:0,endPage:0,startPageNoBuffer:0,endPageNoBuffer:0,pagesScrollTop:[],totalPagesHeight:0},this.handleScrollTo=s.throttle(e=>{this.nav&&(this.nav.scrollTop=this.state.pagesScrollTop[e])},50,{leading:!1,trailing:!0}),this.handleScrollTopChange=()=>{this.ol&&this.setStateForStartAndEndPage(this.state.pagesScrollTop)},this.throttledHandleScrollTopChange=s.throttle(()=>this.handleScrollTopChange(),50,{leading:!0})}computeScrollTops(){const{pages:e}=this.props;if(0==e.length)return[];const i=[16];let t=16;for(let r=0;r<e.length-1;++r){const a=e[r].dimension,n=u*a[1]/a[0]+2*d+16+20;i.push(t+n),t+=n}const r=e[e.length-1].dimension,a=t+(u*r[1]/r[0]+2*d)+32;return this.state.totalPagesHeight=a,this.setState({pagesScrollTop:i,totalPagesHeight:a}),i}scrollToItemIfNeeded(e){const{startPageNoBuffer:i,endPageNoBuffer:t}=this.state,{pages:r}=this.props;e<0||e>=r.length||!this.nav||(e<i||e>=t)&&this.handleScrollTo(e)}setStateForStartAndEndPage(e){const[i,t]=[s.sortedIndex(e,this.nav.scrollTop),s.sortedIndex(e,this.nav.scrollTop+this.nav.offsetHeight)];this.setState({startPageNoBuffer:i,endPageNoBuffer:t,startPage:Math.max(0,i-10),endPage:Math.min(this.props.pages.length-1,t+10)})}shouldComponentUpdate(e,i){const r=this.props,{pages:a}=r,n=t.__rest(r,["pages"]),{pages:s}=e,l=t.__rest(e,["pages"]);return!o.shallowEqual(n,l)||!o.shallowEqual(this.state,i)||!(function(e,i){return e.length===i.length&&!e.find((e,t)=>e.thumbnailUrl!==i[t].thumbnailUrl)})(a,s)}componentDidMount(){const e=this.computeScrollTops();this.setStateForStartAndEndPage(e),this.containerHeight=this.nav.offsetHeight}componentDidUpdate(e){this.nav&&this.nav.offsetHeight!==this.containerHeight&&(this.setStateForStartAndEndPage(this.state.pagesScrollTop),this.containerHeight=this.nav.offsetHeight),(this.props.currentPageIndex!==e.currentPageIndex||this.props.isOpened&&!e.isOpened)&&this.scrollToItemIfNeeded(this.props.currentPageIndex)}render(){const{currentPageIndex:e,isFocused:i,onBlur:t,onFocus:s,pages:o,intl:l,style:c,isOpened:d,isEditMode:u}=this.props,{startPage:v,endPage:f,totalPagesHeight:g}=this.state,_=o.slice(v,f+1).map((t,a)=>{const s=a+v;return r.createElement(p,{key:s,isSelected:e===s,onClick:this.props.onPageChange,index:s,intl:l,thumbnailUrl:t.thumbnailUrl,css:n,isVisible:!0,aspectRatio:t.dimension[1]/t.dimension[0],isSidebarFocused:!0===i,isEditMode:u,top:this.state.pagesScrollTop[s]})}),m={height:g,display:d?"initial":"none"};return r.createElement("div",{className:a.default(n.container,n.containerBorder,{[n.focused]:i,[n.open]:d,[n.isEditMode]:u}),"aria-label":l.formatMessage({id:"HzLiwF",defaultMessage:"Document Sidebar"}),style:c,ref:e=>{this.nav=e},onScroll:this.throttledHandleScrollTopChange},r.createElement("ol",{"aria-label":l.formatMessage({id:"J/2gSB",defaultMessage:"Page list"}),ref:e=>this.ol=e,tabIndex:d?0:-1,onFocus:s,onBlur:t,style:m},_))}}i.Sidebar=v,v.defaultProps={currentPageIndex:0,pages:[],onPageChange:function(){}},v.displayName="Sidebar"})),define("typescript/libraries/file-viewer/src/open_with_native/open_with_button",["require","exports","tslib","classnames","react","dig-components/buttons","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/css/sidebar.module.css","react-redux","typescript/libraries/file-viewer/src/core/data/selectors","dig-components/icons/src","dig-components/icons","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OpenWithButton=i.UnconnectedOpenWithButton=void 0,r=t.__importDefault(r),a=t.__importStar(a),o=t.__importStar(o);i.UnconnectedOpenWithButton=({dispatch:e,intl:i,previewKey:t,fileViewerId:l,className:c="",sourceContext:v=s.UserActionContext.RightRail})=>{if(!t)return null;const f=a.createElement(u.UIIcon,{src:d.OpenLine});return a.createElement(n.Button,{size:"standard",onClick:()=>e(p.openWith({fileViewerId:l,previewKey:t,sourceContext:v})),variant:"outline",className:r.default(o.openWith,c),withIconLeft:f},i.formatMessage({id:"tB7wey",defaultMessage:"Open"}))},i.UnconnectedOpenWithButton.displayName="UnconnectedOpenWithButton",i.OpenWithButton=l.connect((function(e,i){const{fileViewerId:t}=i;return{previewKey:c.getCurrentPreviewKey(e,t)}}))(i.UnconnectedOpenWithButton)})),define("typescript/libraries/file-viewer/src/toolbar/configuration",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/plugins/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.showFindInDocument=i.noToolbarShown=i.getToolbarConfigByPreviewType=i.getToolbarConfigForEditMode=i.baseToolbarConfig=void 0,i.baseToolbarConfig={docSidebar:!1,fileCounter:!1,fileFlipping:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!1,findInDocument:!1};i.getToolbarConfigForEditMode=e=>{switch(e){case r.PreviewType.SsrDoc:case r.PreviewType.CloudDoc:return{docSidebar:!0,fullscreen:!1,pageNavigation:!0,print:!1,zooming:!0,fileCounter:!1,fileFlipping:!1,findInDocument:!1};case r.PreviewType.Image:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!0,fileCounter:!1,fileFlipping:!1,findInDocument:!1};default:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,zooming:!1,fileCounter:!1,fileFlipping:!1,findInDocument:!1}}};i.getToolbarConfigByPreviewType=(e,t,a)=>{const n=((e,t)=>{var a;return{docSidebar:e.enable_navigation_bar,fileCounter:e.enable_toolbar_file_counter&&e.file_flipping,fileFlipping:e.file_flipping,fullscreen:e.enable_fullscreen,pageNavigation:null===(a=e.preview_types[r.PreviewType.SsrDoc])||void 0===a?void 0:a.showPageNavigation,print:(null==t?void 0:t.enable_print)||!1,findInDocument:i.showFindInDocument(e)}})(t,a),s=(e=>{switch(e){case r.PreviewType.SsrDoc:return{docSidebar:!0,fullscreen:!0,pageNavigation:!0,print:!0,zooming:!0,findInDocument:!0};case r.PreviewType.CloudDoc:return{docSidebar:!0,fullscreen:!0,pageNavigation:!0,print:!0,zooming:!0,findInDocument:!1};case r.PreviewType.Image:return{docSidebar:!1,fullscreen:!0,pageNavigation:!1,print:!0,zooming:!0,findInDocument:!1};case r.PreviewType.HTML:return{docSidebar:!1,fullscreen:!0,print:!0,findInDocument:!1};case r.PreviewType.RawHTML:return{docSidebar:!1,fullscreen:!0,print:!1,findInDocument:!1};case r.PreviewType.Excel:return{docSidebar:!1,fullscreen:!0,print:!0,zooming:!0,pageNavigation:!1,findInDocument:!1};default:return{docSidebar:!1,fullscreen:!1,pageNavigation:!1,print:!1,findInDocument:!1}}})(e);let o=i.baseToolbarConfig;for(const e in i.baseToolbarConfig){const i=e;i in n&&i in s?o=Object.assign(Object.assign({},o),{[i]:n[i]&&s[i]}):i in n&&!(i in s)?o=Object.assign(Object.assign({},o),{[i]:n[i]}):i in s&&!(i in n)&&(o=Object.assign(Object.assign({},o),{[i]:s[i]}))}return o};i.noToolbarShown=(e,i)=>e===t.ResponsiveSize.MOBILE||i.mobile_web||i.force_no_toolbar;i.showFindInDocument=e=>"P2"===e.fvsdk_find_text_phase})),define("typescript/libraries/file-viewer/src/toolbar/snackbar_listener",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useIsSnackbarOpen=void 0,r=t.__importStar(r);i.useIsSnackbarOpen=e=>{const[i,t]=r.useState(e);return r.useEffect(()=>{const e=()=>{t(!0)},i=()=>{t(!1)};return document.addEventListener("snackbar_shown",e),document.addEventListener("snackbar_hidden",i),()=>{document.removeEventListener("snackbar_shown",e),document.removeEventListener("snackbar_hidden",i)}},[]),i}})),define("typescript/libraries/file-viewer/src/toolbar/toolbar",["require","exports","tslib","react","react-intl","react-redux","classnames","dig-components/truncate","dig-components/typography","typescript/libraries/file-viewer/src/css/toolbar.module.css","typescript/libraries/file-viewer/src/css/preview-archive.module.css","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons","typescript/libraries/file-viewer/src/toolbar/toolbar_buttons","typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover","typescript/libraries/file-viewer/src/toolbar/snackbar_listener","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/preview_archive/breadcrumbs","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/toolbar/toolbar_file_counter","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ConfigurableToolbar=void 0,r=t.__importDefault(r),s=t.__importDefault(s),c=t.__importStar(c),d=t.__importStar(d),h=t.__importStar(h);const C=r.default.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{VideoControlRow:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/toolbar/toolbar_video_controls"],i,t)}).then(t.__importStar);return{default:i}}))),F=e=>{var{isShown:i,isVideo:a,showInverse:n,children:o,className:l}=e,d=t.__rest(e,["isShown","isVideo","showInverse","children","className"]);return r.default.createElement("div",Object.assign({},d,{className:s.default(c.toolbar,l,{[c.hidden]:!i,[c.toolbarAudioVideo]:a,[c.normal]:!n}),role:"toolbar"}),o)};F.displayName="Toolbar",F.displayName="Toolbar";const O=e=>{var{children:i,isDocSidebarOpen:a}=e,n=t.__rest(e,["children","isDocSidebarOpen"]);return r.default.createElement("div",Object.assign({className:s.default(c.toolbarHolder,{[c.withSidebar]:a})},n),i)};O.displayName="ToolbarHolder";const T=({className:e,children:i})=>r.default.createElement("div",{className:s.default(c.toolbarSection,e)},i);T.displayName="ToolbarSection",T.displayName="ToolbarSection";const A=({className:e,children:i})=>r.default.createElement("div",{className:s.default(c.toolbarRow,e)},i);A.displayName="ToolbarRow",A.displayName="ToolbarRow";i.ConfigurableToolbar=({onPrint:e,previewType:i,fileRivieraData:t,filePreviewUi:s,fileViewerUi:x,rootArchiveFileInformation:D,player:k,onSelectVideoQuality:M,showDocSidebar:L,previewMetadata:j,activePluginInstance:R,plugins:N,snackbarManagerPluginInstance:V,forceUseInverseColorsOnFullscreen:U,onFindInDoc:B})=>{var K,z,H;const W=n.useDispatch(),q=a.useIntl(),{featureConfig:G,fileViewerId:Z}=I.useFileViewerContext(),{responsiveSize:$,rendererWidth:Q}=P.useFileViewerRenderContext(),{previewKey:X}=E.useCurrentFileInfo(Z),Y=E.useCurrentFileMetadata(X),J=null==Y?void 0:Y.fileConfig,{isShown:ee,elementProps:ie}=g.useShowAndStayOnHover(),te=n.useSelector(e=>w.isPluginEditMode(e,Z)),re=_.useIsSnackbarOpen(!!(null==V?void 0:V.isSnackbarVisible())),ae=n.useSelector(e=>w.getToolBarOverride(e,Z)),ne="hidden"===ae,se=(ee||"shown"===ae)&&!ne&&!re,oe=null==x?void 0:x.isDocSidebarOpen,le=x.isFullScreen,ce=s&&((null===(K=p.filterZoomableFilePreviewUi(s))||void 0===K?void 0:K.zoomScaleFactor)||(null===(z=p.filterZoomableFilePreviewUi(s))||void 0===z?void 0:z.fitScaleFactor))||void 0,de=s&&(null===(H=p.filterZoomableFilePreviewUi(s))||void 0===H?void 0:H.fitScaleFactor)||void 0,ue=te?u.getToolbarConfigForEditMode(i):u.getToolbarConfigByPreviewType(i,G,J),pe=!le&&ue.docSidebar,ve=pe||ue.fullscreen||ue.pageNavigation||ue.print||ue.zooming&&null!=ce,fe=null==N?void 0:N.star,ge=null==N?void 0:N.imageCropRotate,_e=Q<=450&&pe&&ue.fullscreen&&ue.pageNavigation&&ue.print&&ue.zooming&&null!=ce,me=pe&&!_e,we=U||!le,be={intl:q,fileViewerId:Z,previewKey:X,showInverse:we};if(u.noToolbarShown($,G))return null;const he=s.currentPath,ye=(null==D?void 0:D.fileName)||(null==Y?void 0:Y.file_name),Se=ye?D&&Array.isArray(he)?r.default.createElement("div",{className:d.titlebarV2Breadcrumbs},r.default.createElement(l.Text,{color:we?"standard":"faint",isBold:!0,inverse:we},r.default.createElement(b.ArchiveFileBreadcrumbs,{archiveName:ye,currentPath:he,fileViewerId:Z,previewKey:D.previewKey,dispatch:W,showInverse:we}))):r.default.createElement(o.Truncate,{className:c.toolbarFilename,location:h.safari?1:.5,tooltipControlProps:{placement:"top"}},ye):null;return r.default.createElement(r.default.Fragment,null,ue.fileFlipping&&r.default.createElement(v.FlipButtons,{isShown:!ne,fileViewerId:Z,previewKey:X,intl:q,fileCollectionContext:null==Y?void 0:Y.file_collection_context,showInverse:we}),r.default.createElement(O,{isDocSidebarOpen:oe&&pe&&!!L},r.default.createElement(F,Object.assign({isShown:se,isVideo:!!k,showInverse:we},ie),ue.fileCounter?r.default.createElement(A,{className:c.toolbarFilenameRow},r.default.createElement(T,{className:c.toolbarFilenameSection},Se,fe&&r.default.createElement(fe,{className:c.toolbarStar})),r.default.createElement(T,{className:c.toolbarCounterSection},r.default.createElement(y.ToolbarFileCounter,{intl:q,fileCollectionContext:null==Y?void 0:Y.file_collection_context}))):r.default.createElement(A,{className:c.toolbarFilenameRow},Se,fe&&r.default.createElement(fe,{className:c.toolbarStar})),k?r.default.createElement(C,{player:k,onSelectVideoQuality:M,previewKey:X,fileViewerUi:x,fileViewerId:Z,previewMetadata:j,activePluginInstance:m.isRightRailPlugin(R)?R:void 0,intl:q,showInverse:we,isShown:se,showFastforwardRewind:"ON"===G.fvsdk_fastforward_rewind}):(ve||i===m.PreviewType.Loading)&&r.default.createElement(A,null,r.default.createElement(T,null,ue.zooming&&null!=ce&&r.default.createElement(r.default.Fragment,null,r.default.createElement(f.ZoomOutButton,Object.assign({scaleFactor:ce},be)),r.default.createElement(f.ZoomToFitButton,Object.assign({scaleFactor:ce,fittedScaleFactor:de},be)),r.default.createElement(f.ZoomInButton,Object.assign({scaleFactor:ce},be))),ue.fullscreen&&r.default.createElement(f.FullScreenButton,Object.assign({isFullScreen:le},be))),ge&&r.default.createElement(T,null,r.default.createElement(ge,null)),r.default.createElement(T,null,ue.pageNavigation&&r.default.createElement(f.PageNavigationControls,Object.assign({filePreviewUi:s,fileRivieraData:t},be)),_e?r.default.createElement(f.OverflowMenu,{intl:q},r.default.createElement(f.SidebarToggleButton,Object.assign({isSidebarOpen:oe,disabled:!!Q&&!S.shouldShowDocSidebar(Q,i),isInMenu:!0},be)),ue.findInDocument&&r.default.createElement(f.FindInDocumentButton,Object.assign({onFindInDoc:B,isMenuItem:!0},be)),r.default.createElement(f.PrintButton,Object.assign({previewType:i,onPrint:e},be,{isMenuItem:!0}))):me&&r.default.createElement(f.SidebarToggleButton,Object.assign({isSidebarOpen:oe,disabled:!!Q&&!S.shouldShowDocSidebar(Q,i),isInMenu:!1},be))),r.default.createElement(T,null,ue.findInDocument&&!_e&&r.default.createElement(f.FindInDocumentButton,Object.assign({onFindInDoc:B,isMenuItem:!1},be)),ue.print&&!_e&&r.default.createElement(f.PrintButton,Object.assign({previewType:i,onPrint:e},be,{isMenuItem:!1})))))))},i.ConfigurableToolbar.displayName="ConfigurableToolbar",i.ConfigurableToolbar.displayName="ConfigurableToolbar"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_buttons",["require","exports","tslib","react","react-redux","dig-components/tooltips","dig-components/typography","dig-components/buttons","dig-components/icons","dig-components/icons/src","dig-components/menu","typescript/libraries/file-viewer/src/css/toolbar.module.css","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OverflowMenu=i.FindInDocumentButton=i.PrintButton=i.SidebarToggleButton=i.PageNavigationControls=i.FullScreenButton=i.ZoomToFitButton=i.ZoomInButton=i.ZoomOutButton=i.ToolbarButton=void 0,r=t.__importStar(r),u=t.__importStar(u);i.ToolbarButton=({tooltipText:e,onClick:i,icon:t,disabled:a,inverseTooltip:s,closeTooltipOnClick:c=!1})=>r.createElement(n.Tooltip,{placement:"top",title:e,inverse:s,shouldCloseOnClick:c},r.createElement(o.IconButton,{variant:"transparent","aria-label":e,disabled:a,onClick:i,inverse:!0},r.createElement(l.UIIcon,{src:t}))),i.ToolbarButton.displayName="ToolbarButton",i.ToolbarButton.displayName="ToolbarButton";i.ZoomOutButton=({scaleFactor:e,intl:t,fileViewerId:n,previewKey:s,showInverse:o})=>{const l=a.useDispatch(),d=r.useCallback(()=>l(v.zoomOut({fileViewerId:n,previewKey:s,sourceContext:p.UserActionContext.Toolbar})),[n,s,l]);return r.createElement(i.ToolbarButton,{tooltipText:t.formatMessage({id:"QCtVKy",defaultMessage:"Zoom out"}),disabled:e<=.1,onClick:d,icon:c.ZoomOutLine,inverseTooltip:!o})},i.ZoomOutButton.displayName="ZoomOutButton",i.ZoomOutButton.displayName="ZoomOutButton";i.ZoomInButton=({scaleFactor:e,intl:t,fileViewerId:n,previewKey:s,showInverse:o})=>{const l=a.useDispatch(),d=g.useStabilizedCallback(()=>{l(v.zoomIn({fileViewerId:n,previewKey:s,sourceContext:p.UserActionContext.Toolbar}))});return r.createElement(i.ToolbarButton,{tooltipText:t.formatMessage({id:"sMy5PN",defaultMessage:"Zoom in"}),disabled:e>=10,onClick:d,icon:c.ZoomInLine,inverseTooltip:!o})},i.ZoomInButton.displayName="ZoomInButton",i.ZoomInButton.displayName="ZoomInButton";i.ZoomToFitButton=({scaleFactor:e,fittedScaleFactor:i,intl:t,fileViewerId:l,previewKey:c,showInverse:d})=>{const f=a.useDispatch(),_=g.useStabilizedCallback(()=>{f(v.zoomToggleOriginalOrFit({fileViewerId:l,previewKey:c,sourceContext:p.UserActionContext.Toolbar}))}),m=i&&e===i?t.formatMessage({id:"0AbCS6",defaultMessage:"View actual size"}):t.formatMessage({id:"OgNBqT",defaultMessage:"Zoom to fit"});return r.createElement(n.Tooltip,{placement:"top",title:m,inverse:!d},r.createElement(o.Button,{variant:"transparent","aria-label":m,className:u.toolbarZoomToFit,onClick:_,hasNoUnderline:!0,inverse:d},r.createElement(s.Text,{color:d?"faint":"standard",inverse:d},e?t.formatNumber(e,{style:"percent",maximumFractionDigits:0}):"")))},i.ZoomToFitButton.displayName="ZoomToFitButton",i.ZoomToFitButton.displayName="ZoomToFitButton";i.FullScreenButton=({intl:e,isFullScreen:t,fileViewerId:n,previewKey:s,showInverse:o})=>{const l=a.useDispatch(),d=g.useStabilizedCallback(()=>{const e={fileViewerId:n,previewKey:s,sourceContext:p.UserActionContext.Toolbar};l(t?v.exitFullScreen(e):v.enterFullScreen(e))});return r.createElement(i.ToolbarButton,{tooltipText:t?e.formatMessage({id:"1pq/ot",defaultMessage:"Exit fullscreen"}):e.formatMessage({id:"lQfB6H",defaultMessage:"Fullscreen"}),closeTooltipOnClick:!0,onClick:d,icon:t?c.FullscreenExitLine:c.FullscreenLine,disabled:!1,inverseTooltip:!o})},i.FullScreenButton.displayName="FullScreenButton",i.FullScreenButton.displayName="FullScreenButton";i.PageNavigationControls=({intl:e,previewKey:t,fileViewerId:n,fileRivieraData:o,filePreviewUi:l,showInverse:d})=>{var _,m,w;const b=a.useDispatch(),h={fileViewerId:n,previewKey:t,sourceContext:p.UserActionContext.Toolbar},y=null!==(m=null===(_=f.filterDocFilePreviewUiState(l))||void 0===_?void 0:_.currentPageIndex)&&void 0!==m?m:0,S=g.useStabilizedCallback(()=>{b(v.pageNavigation(Object.assign({pageIndex:y-1},h)))}),P=g.useStabilizedCallback(()=>{b(v.pageNavigation(Object.assign({pageIndex:y+1},h)))}),E=f.isDocPreviewRivieraData(o)?null===(w=o.metadata)||void 0===w?void 0:w.page_count:void 0;if(null==y||null==E)return null;const I=y+1,C="".padEnd((""+E).length-(""+I).length,"0");return r.createElement(r.Fragment,null,r.createElement(i.ToolbarButton,{disabled:y<1,onClick:S,tooltipText:e.formatMessage({id:"sago3n",defaultMessage:"Page up"}),icon:c.ChevronUpLine,inverseTooltip:!d}),r.createElement(s.Text,{color:d?"faint":"standard",className:u.pageDisplay,inverse:d},r.createElement("span",{className:u.pageDisplayPadding},C),e.formatMessage({id:"t6aTtx",defaultMessage:"{currentPage, number} of {totalPages, number}"},{currentPage:I,totalPages:E})),r.createElement(i.ToolbarButton,{disabled:y>=E-1,onClick:P,tooltipText:e.formatMessage({id:"5Nekbe",defaultMessage:"Page down"}),icon:c.ChevronDownLine,inverseTooltip:!d}))},i.PageNavigationControls.displayName="PageNavigationControls",i.PageNavigationControls.displayName="PageNavigationControls";i.SidebarToggleButton=({isSidebarOpen:e,previewKey:t,fileViewerId:n,intl:s,disabled:o,isInMenu:u,showInverse:f})=>{const _=a.useDispatch(),m=g.useStabilizedCallback(()=>{_(e?v.closeDocSidebar({fileViewerId:n,previewKey:t,sourceContext:p.UserActionContext.Toolbar}):v.openDocSidebar({fileViewerId:n,previewKey:t,sourceContext:p.UserActionContext.Toolbar}))}),w=e?s.formatMessage({id:"ttmV3r",defaultMessage:"Hide sidebar"}):s.formatMessage({id:"NIm51y",defaultMessage:"Show sidebar"}),b=e?c.SidebarHideLine:c.SidebarShowLine;return u?r.createElement(d.Menu.ActionItem,{onClick:m,disabled:o,preferComposition:!0},r.createElement(d.Menu.RowAccessory,null,r.createElement(l.UIIcon,{src:b})),r.createElement(d.Menu.RowTitle,null,w)):r.createElement(i.ToolbarButton,{key:`sidebar-${e}`,tooltipText:w,onClick:m,icon:b,disabled:o,inverseTooltip:!f})},i.SidebarToggleButton.displayName="SidebarToggleButton",i.SidebarToggleButton.displayName="SidebarToggleButton";i.PrintButton=({intl:e,onPrint:t,previewType:n,fileViewerId:s,previewKey:o,isMenuItem:u,showInverse:f})=>{const _=a.useDispatch(),m=g.useStabilizedCallback(()=>{null==t||t(),_(v.print({fileViewerId:s,previewKey:o,previewType:n,sourceContext:p.UserActionContext.Toolbar}))}),w=e.formatMessage({id:"tBZioS",defaultMessage:"Print"});return u?r.createElement(d.Menu.ActionItem,{onClick:m,preferComposition:!0},r.createElement(d.Menu.RowAccessory,null,r.createElement(l.UIIcon,{src:c.PrintLine})),r.createElement(d.Menu.RowTitle,null,w)):r.createElement(i.ToolbarButton,{tooltipText:w,onClick:m,disabled:!1,icon:c.PrintLine,inverseTooltip:!f})},i.PrintButton.displayName="PrintButton",i.PrintButton.displayName="PrintButton";i.FindInDocumentButton=({intl:e,onFindInDoc:t,isMenuItem:a,showInverse:n})=>{const s=e.formatMessage({id:"M/F/hG",defaultMessage:"Find in document"});return a?r.createElement(d.Menu.ActionItem,{onClick:()=>null==t?void 0:t(),preferComposition:!0},r.createElement(d.Menu.RowAccessory,null,r.createElement(l.UIIcon,{src:c.SearchLine})),r.createElement(d.Menu.RowTitle,null,s)):r.createElement(i.ToolbarButton,{tooltipText:s,onClick:()=>null==t?void 0:t(),disabled:!1,icon:c.SearchLine,inverseTooltip:!n,closeTooltipOnClick:!0})},i.FindInDocumentButton.displayName="FindInDocumentButton",i.FindInDocumentButton.displayName="FindInDocument";i.OverflowMenu=({intl:e,children:i})=>r.createElement(d.Menu.Wrapper,{closeOnSelection:!1},({getContentProps:t,getTriggerProps:a})=>{const s=e.formatMessage({id:"En+hlM",defaultMessage:"More actions"});return r.createElement("div",null,r.createElement(n.Tooltip,{placement:"top",title:s},r.createElement("span",null,r.createElement(o.IconButton,Object.assign({variant:"transparent"},a(),{inverse:!0}),r.createElement(l.UIIcon,{src:c.MoreHorizontalLine})))),r.createElement(d.Menu.Content,Object.assign({},t()),r.createElement(d.Menu.Segment,null,i)))}),i.OverflowMenu.displayName="OverflowMenu"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons",["require","exports","tslib","react","react-redux","classnames","dig-components/icons","dig-components/icons/src","dig-components/tooltips","dig-components/buttons","typescript/libraries/file-viewer/src/css/toolbar.module.css","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/toolbar/useShowAndStayOnHover","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FlipButtons=i.filterValidFileFlippingContext=void 0,r=t.__importDefault(r),n=t.__importDefault(n),d=t.__importStar(d);i.filterValidFileFlippingContext=e=>void 0!==e&&e.parent_files_count>=0?e:void 0;i.FlipButtons=({fileViewerId:e,previewKey:t,isShown:s,intl:l,fileCollectionContext:c,showInverse:v})=>{const _=a.useDispatch(),m={fileViewerId:e,previewKey:t,sourceContext:p.UserActionContext.Toolbar},w=f.useStabilizedCallback(()=>{_(u.flipToNextFile(m))}),b=f.useStabilizedCallback(()=>{_(u.flipToPreviousFile(m))}),h=l.formatMessage({id:"5h/4QP",defaultMessage:"Next"}),y=l.formatMessage({id:"XlDsZ8",defaultMessage:"Previous"}),S=i.filterValidFileFlippingContext(c);if(void 0===S)return null;const P=0===S.file_index,E=S.file_index===S.parent_files_count-1;return r.default.createElement(r.default.Fragment,null,r.default.createElement(g,{tooltip:y,onClick:b,className:n.default(d.toolbarFlipperLeft,{[d.hidden]:!s,[d.isFullScreen]:!v}),icon:o.ChevronLeftLine,isDisabled:P,showInverse:!v}),r.default.createElement(g,{tooltip:h,onClick:w,className:n.default(d.toolbarFlipperRight,{[d.hidden]:!s,[d.isFullScreen]:!v,[d.windowsScrollBar]:window.navigator.platform.match(/win/gi)}),icon:o.ChevronRightLine,isDisabled:E,showInverse:!v}))},i.FlipButtons.displayName="FlipButtons",i.FlipButtons.displayName="FlipButtons";const g=({className:e,tooltip:i,onClick:t,icon:a,isDisabled:o,showInverse:u})=>{const{elementProps:p,isShown:f}=v.useShowAndStayOnHover();return r.default.createElement("div",{className:n.default(d.toolbarFlipper,e,{[d.hidden]:!f})},r.default.createElement(l.Tooltip,{title:i,openDelay:500,shouldCloseOnClick:!0,inverse:!u},r.default.createElement(c.IconButton,Object.assign({variant:"filled",size:"large",onClick:t,"aria-label":i,disabled:o},p),r.default.createElement(s.UIIcon,{src:a}))))};g.displayName="FlipButton",g.displayName="FlipButton"})),define("typescript/libraries/file-viewer/src/toolbar/toolbar_file_counter",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/toolbar/toolbar_flip_buttons"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ToolbarFileCounter=void 0,r=t.__importStar(r);const s=a.defineMessage({id:"nomoau",defaultMessage:"{file_number} of {file_count}"}),o=a.defineMessage({id:"LI56s4",defaultMessage:"{file_number} of many"});i.ToolbarFileCounter=({fileCollectionContext:e,intl:i})=>{const t=n.filterValidFileFlippingContext(e);if(void 0===t||t.parent_files_count>99999)return null;const a=t.file_index+1,l=t.parent_files_count,c=t.parent_files_count<1e3?i.formatMessage(s,{file_number:a,file_count:l}):i.formatMessage(o,{file_number:a});return r.createElement("span",null,c)},i.ToolbarFileCounter.displayName="ToolbarFileCounter"})),define("typescript/libraries/file-viewer/src/css/toolbar.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/toolbar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.rightButtonContainer=i.leftButtonContainer=i.timeLine=i.thumbnailImage=i.thumbnailLoadError=i.thumbnailTime=i.commentIconHolder=i.thumbnailHolderComment=i.thumbnailWrapper=i.thumbnailHolder=i.commentMarker=i.commentMarkersContainer=i.videoQualityLevel=i.toolbarVolumeMenu=i.toolbarVolumeRow=i.toolbarVolumeInput=i.toolbarTimeDisplay=i.hidden=i.pageDisplayPadding=i.pageDisplay=i.toolbarStar=i.toolbarFilename=i.toolbarCounterSection=i.toolbarFilenameSection=i.toolbarFilenameRow=i.toolbarZoomToFit=i.windowsScrollBar=i.toolbarFlipperRight=i.toolbarFlipperLeft=i.isFullScreen=i.regularButton=i.toolbarFlipper=i.toolbarSection=i.toolbarVideoControlsRow=i.toolbarAudioVideo=i.toolbarRow=i.normal=i.playbackSpeedMenu=i.toolbar=i.withSidebar=i.toolbarHolder=i.toolbarVerticalPadding=i.toolbarRowHeight=void 0,i.toolbarRowHeight="40px",i.toolbarVerticalPadding="24px",i.toolbarHolder="_toolbar-holder_buyx8_11",i.withSidebar="_withSidebar_buyx8_23",i.toolbar="_toolbar_buyx8_11",i.playbackSpeedMenu="_playbackSpeedMenu_buyx8_41",i.normal="_normal_buyx8_45",i.toolbarRow="_toolbar-row_buyx8_52",i.toolbarAudioVideo="_toolbar-audio-video_buyx8_61",i.toolbarVideoControlsRow="_toolbar-video-controls-row_buyx8_64",i.toolbarSection="_toolbar-section_buyx8_73",i.toolbarFlipper="_toolbar-flipper_buyx8_95",i.regularButton="_regular-button_buyx8_110",i.isFullScreen="_isFullScreen_buyx8_115",i.toolbarFlipperLeft="_toolbar-flipper-left_buyx8_120",i.toolbarFlipperRight="_toolbar-flipper-right_buyx8_124",i.windowsScrollBar="_windowsScrollBar_buyx8_128",i.toolbarZoomToFit="_toolbar-zoom-to-fit_buyx8_132",i.toolbarFilenameRow="_toolbar-filename-row_buyx8_171",i.toolbarFilenameSection="_toolbar-filename-section_buyx8_175",i.toolbarCounterSection="_toolbar-counter-section_buyx8_180",i.toolbarFilename="_toolbar-filename_buyx8_171",i.toolbarStar="_toolbar-star_buyx8_194",i.pageDisplay="_page-display_buyx8_200",i.pageDisplayPadding="_page-display-padding_buyx8_204",i.hidden="_hidden_buyx8_209",i.toolbarTimeDisplay="_toolbar-time-display_buyx8_219",i.toolbarVolumeInput="_toolbar-volume-input_buyx8_224",i.toolbarVolumeRow="_toolbar-volume-row_buyx8_320",i.toolbarVolumeMenu="_toolbar-volume-menu_buyx8_329",i.videoQualityLevel="_video-quality-level_buyx8_336",i.commentMarkersContainer="_comment-markers-container_buyx8_340",i.commentMarker="_comment-marker_buyx8_340",i.thumbnailHolder="_thumbnail-holder_buyx8_356",i.thumbnailWrapper="_thumbnail-wrapper_buyx8_364",i.thumbnailHolderComment="_thumbnail-holder-comment_buyx8_364",i.commentIconHolder="_comment-icon-holder_buyx8_370",i.thumbnailTime="_thumbnail-time_buyx8_381",i.thumbnailLoadError="_thumbnail-load-error_buyx8_469",i.thumbnailImage="_thumbnail-image_buyx8_478",i.timeLine="_time-line_buyx8_501",i.leftButtonContainer="_left-button-container_buyx8_537",i.rightButtonContainer="_right-button-container_buyx8_538";i.default={toolbarRowHeight:"40px",toolbarVerticalPadding:"24px",toolbarHolder:"_toolbar-holder_buyx8_11",withSidebar:"_withSidebar_buyx8_23",toolbar:"_toolbar_buyx8_11",playbackSpeedMenu:"_playbackSpeedMenu_buyx8_41",normal:"_normal_buyx8_45",toolbarRow:"_toolbar-row_buyx8_52",toolbarAudioVideo:"_toolbar-audio-video_buyx8_61",toolbarVideoControlsRow:"_toolbar-video-controls-row_buyx8_64",toolbarSection:"_toolbar-section_buyx8_73",toolbarFlipper:"_toolbar-flipper_buyx8_95",regularButton:"_regular-button_buyx8_110",isFullScreen:"_isFullScreen_buyx8_115",toolbarFlipperLeft:"_toolbar-flipper-left_buyx8_120",toolbarFlipperRight:"_toolbar-flipper-right_buyx8_124",windowsScrollBar:"_windowsScrollBar_buyx8_128",toolbarZoomToFit:"_toolbar-zoom-to-fit_buyx8_132",toolbarFilenameRow:"_toolbar-filename-row_buyx8_171",toolbarFilenameSection:"_toolbar-filename-section_buyx8_175",toolbarCounterSection:"_toolbar-counter-section_buyx8_180",toolbarFilename:"_toolbar-filename_buyx8_171",toolbarStar:"_toolbar-star_buyx8_194",pageDisplay:"_page-display_buyx8_200",pageDisplayPadding:"_page-display-padding_buyx8_204",hidden:"_hidden_buyx8_209",toolbarTimeDisplay:"_toolbar-time-display_buyx8_219",toolbarVolumeInput:"_toolbar-volume-input_buyx8_224",toolbarVolumeRow:"_toolbar-volume-row_buyx8_320",toolbarVolumeMenu:"_toolbar-volume-menu_buyx8_329",videoQualityLevel:"_video-quality-level_buyx8_336",commentMarkersContainer:"_comment-markers-container_buyx8_340",commentMarker:"_comment-marker_buyx8_340",thumbnailHolder:"_thumbnail-holder_buyx8_356",thumbnailWrapper:"_thumbnail-wrapper_buyx8_364",thumbnailHolderComment:"_thumbnail-holder-comment_buyx8_364",commentIconHolder:"_comment-icon-holder_buyx8_370",thumbnailTime:"_thumbnail-time_buyx8_381",thumbnailLoadError:"_thumbnail-load-error_buyx8_469",thumbnailImage:"_thumbnail-image_buyx8_478",timeLine:"_time-line_buyx8_501",leftButtonContainer:"_left-button-container_buyx8_537",rightButtonContainer:"_right-button-container_buyx8_538"}})),define("typescript/libraries/file-viewer/src/preview_archive/breadcrumbs",["require","exports","tslib","dig-components/breadcrumb","react","typescript/libraries/file-viewer/src/css/preview-archive.module.css","typescript/libraries/file-viewer/src/core/data/actions","classnames"],(function(e,i,t,r,a,n,s,o){"use strict";function l(e,i,t,r){return()=>{r(s.updateArchiveFileCurrentPath({currentPath:e,fileViewerId:i,previewKey:t,isDir:!0}))}}Object.defineProperty(i,"__esModule",{value:!0}),i.ArchiveFileBreadcrumbs=void 0,a=t.__importStar(a),n=t.__importStar(n),o=t.__importDefault(o),i.ArchiveFileBreadcrumbs=a.memo(e=>{const{archiveName:i,currentPath:t,fileViewerId:s,previewKey:c,dispatch:d,isMobile:u,showInverse:p=!1}=e,v=a.useCallback(l([],s,c,d),[s,c.serialized]),f=o.default(n.truncateText,{[n.breadCrumbText]:!u,[n.normal]:!p,[n.inverse]:p});return a.createElement(r.Breadcrumb,{isRootOverflow:!1,alwaysShowRoot:!0,size:u?"small":"standard",className:n.archiveFileBreadcrumb},a.createElement(r.Breadcrumb.Link,{href:v,isCurrentPath:0===t.length},a.createElement("div",{className:f},i)),t.map((e,i)=>{const n=l(t.slice(0,i+1),s,c,d);return a.createElement(r.Breadcrumb.Link,{href:n,isCurrentPath:i===t.length-1,key:`${i}-${e}`},a.createElement("div",{className:f},e))}))}),i.ArchiveFileBreadcrumbs.displayName="ArchiveFileBreadcrumbs"})),define("typescript/libraries/file-viewer/src/css/preview-archive.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/preview-archive.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.truncateText=i.normal=i.inverse=i.breadCrumbText=i.titlebarV2Breadcrumbs=i.snackBar=i.extractAllButtonBar=i.archiveFileBreadcrumb=i.loadingScreen=i.folderTable=i.emptyFolder=void 0,i.emptyFolder="_emptyFolder_18jw7_1",i.folderTable="_folderTable_18jw7_9",i.loadingScreen="_loadingScreen_18jw7_20",i.archiveFileBreadcrumb="_archiveFileBreadcrumb_18jw7_25",i.extractAllButtonBar="_extractAllButtonBar_18jw7_31",i.snackBar="_snackBar_18jw7_35",i.titlebarV2Breadcrumbs="_titlebarV2Breadcrumbs_18jw7_54",i.breadCrumbText="_breadCrumbText_18jw7_54",i.inverse="_inverse_18jw7_59",i.normal="_normal_18jw7_63",i.truncateText="_truncateText_18jw7_72";i.default={emptyFolder:"_emptyFolder_18jw7_1",folderTable:"_folderTable_18jw7_9",loadingScreen:"_loadingScreen_18jw7_20",archiveFileBreadcrumb:"_archiveFileBreadcrumb_18jw7_25",extractAllButtonBar:"_extractAllButtonBar_18jw7_31",snackBar:"_snackBar_18jw7_35",titlebarV2Breadcrumbs:"_titlebarV2Breadcrumbs_18jw7_54",breadCrumbText:"_breadCrumbText_18jw7_54",inverse:"_inverse_18jw7_59",normal:"_normal_18jw7_63",truncateText:"_truncateText_18jw7_72"}})),define("typescript/libraries/file-viewer/src/css/mobile_web.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/mobile_web.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.metadataText=i.meatballSeparator=i.imageContainer=i.fileIconContainer=i.footer=i.actionRow=i.actions=i.fileName=i.metadata=i.meatballMenuDismiss=i.signInButton=i.meatballMenuContainer=i.meatballMenuOverlay=i.rightButtonsContainer=i.saveToDropboxLogo=i.abTestButton=i.footerContainer=i.mobileFooterHeight=void 0,i.mobileFooterHeight="72px",i.footerContainer="_footerContainer_1wx3r_9",i.abTestButton="_abTestButton_1wx3r_20",i.saveToDropboxLogo="_saveToDropboxLogo_1wx3r_24",i.rightButtonsContainer="_rightButtonsContainer_1wx3r_28",i.meatballMenuOverlay="_meatballMenuOverlay_1wx3r_33",i.meatballMenuContainer="_meatballMenuContainer_1wx3r_42",i.signInButton="_signInButton_1wx3r_53",i.meatballMenuDismiss="_meatballMenuDismiss_1wx3r_67",i.metadata="_metadata_1wx3r_74",i.fileName="_fileName_1wx3r_80",i.actions="_actions_1wx3r_84",i.actionRow="_actionRow_1wx3r_87",i.footer="_footer_1wx3r_9",i.fileIconContainer="_fileIconContainer_1wx3r_121",i.imageContainer="_imageContainer_1wx3r_128",i.meatballSeparator="_meatballSeparator_1wx3r_143",i.metadataText="_metadataText_1wx3r_151";i.default={mobileFooterHeight:"72px",footerContainer:"_footerContainer_1wx3r_9",abTestButton:"_abTestButton_1wx3r_20",saveToDropboxLogo:"_saveToDropboxLogo_1wx3r_24",rightButtonsContainer:"_rightButtonsContainer_1wx3r_28",meatballMenuOverlay:"_meatballMenuOverlay_1wx3r_33",meatballMenuContainer:"_meatballMenuContainer_1wx3r_42",signInButton:"_signInButton_1wx3r_53",meatballMenuDismiss:"_meatballMenuDismiss_1wx3r_67",metadata:"_metadata_1wx3r_74",fileName:"_fileName_1wx3r_80",actions:"_actions_1wx3r_84",actionRow:"_actionRow_1wx3r_87",footer:"_footer_1wx3r_9",fileIconContainer:"_fileIconContainer_1wx3r_121",imageContainer:"_imageContainer_1wx3r_128",meatballSeparator:"_meatballSeparator_1wx3r_143",metadataText:"_metadataText_1wx3r_151"}})),define("typescript/libraries/file-viewer/src/loading_helpers",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.preloadImage=void 0,i.preloadImage=function(e,i){return new Promise((t,r)=>{const a=Date.now(),n=new Image;n.onload=()=>{t({started:a,completed:Date.now()})},n.onerror=()=>{r({started:a,failed:Date.now()})},i&&(i.srcset&&(n.srcset=i.srcset),i.sizes&&(n.sizes=i.sizes)),n.src=e})}})),define("metaserver/static/js/growth/user_action/trackers/signatures_actionbar_dropdown_tracker",["require","exports","metaserver/static/js/growth/user_action/tracker"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SignaturesActionbarDropdownTracker=i.SignaturesActionbarDropdownProjectTag=i.SignaturesActionbarDropdownActions=void 0,(function(e){e.VIEW_TOOLTIP="view_tooltip"})(i.SignaturesActionbarDropdownActions||(i.SignaturesActionbarDropdownActions={})),i.SignaturesActionbarDropdownProjectTag="signatures_actionbar_dropdown";class r extends t.GrowthUserActionTracker{constructor(){super(...arguments),this.project=i.SignaturesActionbarDropdownProjectTag}}i.SignaturesActionbarDropdownTracker=r})),define("metaserver/static/js/shared_link_folder/app",["require","exports","tslib","lodash","react","redux","react-redux","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/loggers/folder_preview_logger","metaserver/static/js/open_in_app/actions","metaserver/static/js/previews/constants","metaserver/static/js/modules/clean/react/file_viewer/data/actions","metaserver/static/js/modules/clean/react/file_viewer/data/selectors","metaserver/static/js/modules/clean/react/file_viewer/location_utils","metaserver/static/js/location/with_location","metaserver/static/js/modules/clean/react/file_viewer/url_utils","metaserver/static/js/modules/clean/react/previews/constants","metaserver/static/js/shared_link_folder/data/actions","metaserver/static/js/shared_link_folder/data/store","metaserver/static/js/shared_link_folder/page","metaserver/static/js/modules/clean/viewer","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/modules/constants/python","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/modules/core/persistence/storage","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/core/langpack","react-intl","metaserver/static/js/modules/core/i18n","metaserver/static/js/shared_link_folder/utils","metaserver/static/js/shared_link_folder/data/selectors","metaserver/static/js/modules/clean/csrf","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/clean/sharing/clean/util/link_util/parser","metaserver/static/js/modules/clean/react/error_boundary","metaserver/static/js/modules/core/exception","metaserver/static/js/modules/clean/react/snackbar","metaserver/static/js/modules/clean/react/snackbar_manager","metaserver/static/js/async/loadable","metaserver/static/js/modules/clean/react/file_viewer/async_controller","metaserver/static/js/edison/ui/spa_product_name"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F,O,T,A,x,D,k,M,L,j,R,N,V,U){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SharedLinkFolderApp=i._SharedLinkFolderApp=i.AsyncFileCollectionViewer=void 0,r=t.__importStar(r),a=t.__importDefault(a),P=t.__importStar(P),C=t.__importStar(C),k=t.__importStar(k),i.AsyncFileCollectionViewer=N.Loadable({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/react/file_viewer/collection_viewer"],i,t)}).then(t.__importStar).then(({FileCollectionViewer:e})=>e)});const B=e=>({label:e.filename,href:e.href}),K=({children:e})=>{const i=a.default.useRef(null),t=a.default.useRef(null);return a.default.useEffect(()=>{j.Snackbar.manager=j.Snackbar.manager?j.Snackbar.manager:i.current},[]),a.default.createElement("div",{ref:t},e,a.default.createElement(R.SnackbarManager,{ref:i,getParentElement:()=>t.current,useDigSnackbars:!0}))};function z(){let e=P.get_timer();return e.timeToInteractive()&&(e=P.get_timer("shared_link_folder_ajax"),e.initialize({requireTTI:!0,requireTTV:!0,url:"shared_link_folder_ajax"})),e}K.displayName="SnackbarManagerContainer";class H extends a.default.PureComponent{constructor(i){var r;super(i),this.startPreviewFileTiming=()=>{V.startPreviewAjaxTimer("shared_folder_previews"),U.startNavigation(),U.setSpaProductName("shared_folder_previews")},this.handleOpenFile=e=>{e.preview_type&&e.preview_type===d.PreviewType.CloudDoc&&!o.isShortcut(e)?D.open_tab(e.href):this.previewDataPromise?this.previewDataPromise.then(()=>{this.startPreviewFileTiming(),g.openFile(e)}):(this.startPreviewFileTiming(),g.openFile(e))},this.handleOpenFolder=e=>{this.previewDataPromise?this.previewDataPromise.then(()=>T.openFolder(e)):T.openFolder(e)};const a=h.Viewer.get_viewer(),n=a.work_user||a.personal_user,{folderShareToken:s,folderData:c}=i,u=T.getSecureHashOrSubPath(s);this.state={folderHierarchyMap:{[u]:c?[c]:[]},pageYOffset:0,previewSourceAction:_.PreviewSourceAction.Visit,user:n},this.folderPreviewSession=l.createSession({subfolder_nav_tracking:i.subfolderNavTracking,folder_id:null===(r=i.folder)||void 0===r?void 0:r.folder.folder_id}),this.webTimer=z(),this.webTimer.waitForTTI().then(()=>t.__awaiter(this,void 0,void 0,(function*(){yield new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/react/file_viewer/collection_viewer"],i,t)}).then(t.__importStar)}))),this.rlkey=s.rlkey}UNSAFE_componentWillMount(){this.webTimer.applicationStart();const{openImmediatelyInApp:e}=this.props;if(e)return this.openImmediatelyInApp()}UNSAFE_componentWillReceiveProps(e){var i,t;!this.props.viewingFilename&&e.viewingFilename&&this.setState({pageYOffset:window.pageYOffset}),this.props.viewingFilename!==e.viewingFilename&&this.setState({previewSourceAction:_.PreviewSourceAction.Click});const r=e.folder?e.folder.folder.ns_id:void 0,a=T.getFolderShareTokenWithRlkey(e.folderShareToken,this.rlkey),n=T.getSecureHashOrSubPath(a),s=T.getFolderShareTokenWithRlkey(this.props.folderShareToken,this.rlkey);n!==T.getSecureHashOrSubPath(s)?(this.webTimer=z(),this.webTimer.restart(),this.folderPreviewSession=l.createSession({source_action:_.PreviewSourceAction.Click,subfolder_nav_tracking:e.subfolderNavTracking,has_cached_data:e.folder&&!!e.folder.entries.length,ns_id:r,folder_id:null===(i=e.folder)||void 0===i?void 0:i.folder.folder_id}),this.props.onFolderLoad(a,this.webTimer)):this.props.viewingFilename&&!e.viewingFilename&&(this.folderPreviewSession=l.createSession({source_action:_.PreviewSourceAction.FileViewerExit,subfolder_nav_tracking:e.subfolderNavTracking,has_cached_data:!0,ns_id:r,folder_id:null===(t=e.folder)||void 0===t?void 0:t.folder.folder_id})),e.folder&&e.folder.folder&&T.setPageTitle(e.folder.folder.filename)}componentDidMount(){return t.__awaiter(this,void 0,void 0,(function*(){const{file:e,onFolderPrefetch:i}=this.props,t=T.getFolderShareTokenWithRlkey(this.props.folderShareToken,this.rlkey);t&&(this.previewDataPromise=i(t,e)),yield y.waitForTTI();const a=yield this.readFolderHierarchy();this.setState((e,i)=>{const t=T.getFolderShareTokenWithRlkey(i.folderShareToken,this.rlkey),n=T.getSecureHashOrSubPath(t);return{folderHierarchyMap:r.get(a,n)?a:e.folderHierarchyMap}})}))}componentDidUpdate(e){const{viewingFilename:i}=this.props,{pageYOffset:t}=this.state;i!==e.viewingFilename&&(i||window.scrollTo(0,t));const r=T.getFolderShareTokenWithRlkey(e.folderShareToken,this.rlkey),a=T.getSecureHashOrSubPath(r),n=T.getFolderShareTokenWithRlkey(this.props.folderShareToken,this.rlkey),s=T.getSecureHashOrSubPath(n);a!==s&&(this.setState((e,i)=>{if(!i.folder||!T.shouldUpdateFolderHierarchy(e.folderHierarchyMap,r,n)){const{folderHierarchyMap:i}=e;return{folderHierarchyMap:i}}const{folder:t}=i.folder;return{folderHierarchyMap:Object.assign(Object.assign({},e.folderHierarchyMap),{[s]:[...e.folderHierarchyMap[a]||{},t]})}},this.writeFolderHierarchy),T.removeRlkeyFromURL())}getUserStorageKey(){return t.__awaiter(this,void 0,void 0,(function*(){const i=yield new Promise((i,t)=>{e(["sjcl"],i,t)}).then(t.__importStar),r=i.hash.sha256.hash(x.readCsrfToken()||"");return i.codec.base64.fromBits(r)}))}writeFolderHierarchy(){return t.__awaiter(this,void 0,void 0,(function*(){E.SessionStorage.set("shared_folder_hierarchy",{[yield this.getUserStorageKey()]:this.state.folderHierarchyMap})}))}readFolderHierarchy(){return t.__awaiter(this,void 0,void 0,(function*(){return r.get(E.SessionStorage.get("shared_folder_hierarchy"),yield this.getUserStorageKey())}))}openImmediatelyInApp(){const{folder:e}=this.props;if(e)try{e.folder.open_in_app_data&&c.openImmediately(e.folder.open_in_app_data)}catch(e){}}render(){const{accountMenuOptions:e,appDownloadInterstitialDismissed:t,brandingInfo:n,file:s,files:o,fileViewOrigin:l,fileViewTarget:c,folder:d,onAppDownloadInterstitialDismissed:u,outOfQuota:p,showSyncCoachmark:v,subfolders:f,viewingFilename:m,encryptionOptions:w,inCopyLinkButtonOOBPreviews:h,inShareModalOnEditPreviews:y,isPromptOnSharingPage:P,folderPreviewPostDownloadModalVariant:E,eflOverquotaVariant:I,policyAllowMount:C,policyAllowRequestAccess:F,addSavePreviewsVariant:O,saveToDropboxRenamingLocationVariant:A}=this.props,{folderHierarchyMap:x,user:D,previewSourceAction:M}=this.state,L=k.parseLink(window.location.href),j=r.get(x,T.getSecureHashOrSubPath(T.getFolderShareTokenWithRlkey(this.props.folderShareToken,this.rlkey)),[]).map(B);if(m&&s){let e=[],t=[],r=[],d=[];return Array.isArray(o)&&o.length?o.forEach(i=>{t.push(i.shareToken),r.push(i.sharedLinkInfo),e.push(i.sharePermission),d.push(i.file)}):(d=[s.file],e=[s.sharePermission],t=[s.shareToken],r=[s.sharedLinkInfo]),a.default.createElement(i.AsyncFileCollectionViewer,{brandingInfo:n,canClose:!0,className:"no-background",file:s.file,files:d,fileViewOrigin:l,fileViewTarget:c,fileViewAction:S.FileViewActionType.CLICK,initialPreviewSourceContext:_.PreviewSourceContext.SharedLinkFolder,initialPreviewSourceAction:M,skipOuterRouting:!0,sharedLinkInfos:r,sharePermissions:e,shareTokens:t,titleBarCloseUrl:g.getCurrentFolderHref(),onCloseViewer:g.closeFile,user:D,encryptionOptions:w,usePreloadedMetadata:!D,ajaxTimerName:"shared_folder_previews"})}if(!d)return null;const{shareToken:R,sharedLinkInfo:N,folder:V,sharePermission:U,hasMore:z,takedownRequestType:H}=d,W={files:Array.isArray(o)?o.map(e=>e.file):[],folders:Array.isArray(f)?f.map(e=>e.folder):[]};return V.folder_id&&(this.folderPreviewSession.extra.folder_id=V.folder_id),a.default.createElement(K,null,a.default.createElement(b.SharedLinkFolderPage,{accountMenuOptions:e,appDownloadInterstitialDismissed:t,brandingInfo:n,breadcrumbs:j,contents:W,folder:V,folderPreviewSession:this.folderPreviewSession,folderSharePermission:U,folderShareToken:R,folderSharedLinkInfo:N,hasMore:z,onAppDownloadInterstitialDismissed:u,onFileOpen:this.handleOpenFile,onFolderOpen:this.handleOpenFolder,outOfQuota:p,showSyncCoachmark:v,takedownRequestType:H,user:D,webTimer:this.webTimer,encryptionOptions:w,inCopyLinkButtonOOBPreviews:h,inShareModalOnEditPreviews:y,parsedSharedCopyLink:L,subfolderNavTracking:this.props.subfolderNavTracking,isPromptOnSharingPage:P,folderPreviewPostDownloadModalVariant:E,eflOverquotaVariant:I,policyAllowMount:C,policyAllowRequestAccess:F,addSavePreviewsVariant:O,saveToDropboxRenamingLocationVariant:A}))}}i._SharedLinkFolderApp=H,H.defaultProps={subfolderNavTracking:!1},H.displayName="SharedLinkFolderApp";const W=s.connect((function(e,i){let t=p.getAppDownloadInterstitial(e);void 0===t&&(t=i.appDownloadInterstitialDismissed);const{viewingFilename:r}=i,a=A.getFolderShareTokenWithState(e,i.folderShareToken),n=T.getSecureHashOrSubPath(a);return{appDownloadInterstitialDismissed:t,file:A.getSharedFilePackageByFilenameForFolderPath(e,n,r||""),folder:A.getFolderByPath(e,n),files:A.getSharedFilePackagesForFolderPath(e,n),subfolders:A.getSubfoldersForFolderPath(e,n)}}),(function(e){return n.bindActionCreators({onAppDownloadInterstitialDismissed:u.dismissAppDownloadInterstitial,onFolderLoad:m.fetchFolder,onFolderPrefetch:m.prefetchFolder},e)}))(H),q=f.withLocation(W,e=>({folderShareToken:T.getFolderShareTokenFromLocation(e),viewingFilename:v.getFilenameFromLocation(e),subfolderNavTracking:"subfolder_nav_tracking"in e.query}));class G extends a.default.Component{constructor(e){super(e),this.store=w.getStoreForSharedLinkFolder();const i=T.getFolderShareTokenWithRlkey(this.props.folderShareToken,this.store.rlkey);w.hydrateStore(this.store,{initialFolder:this.props.folderData,initialPreview:this.props.preview,folderSharedLinkInfo:this.props.folderSharedLinkInfo,folderSharePermission:this.props.folderSharePermission,folderShareToken:i})}render(){return a.default.createElement(F.IntlProvider,{defaultLocale:"en-US",locale:O.localeToBcp47LangTag(I.USER_LOCALE),messages:C},a.default.createElement(s.Provider,{store:this.store},a.default.createElement(q,Object.assign({},this.props))))}}G.displayName="SharedLinkFolderAppWithProvider";i.SharedLinkFolderApp=e=>a.default.createElement(M.ErrorBoundary,{onCatch:e=>L.reportException({err:e,tags:["file-viewer-shared-folder"],severity:"critical"})},a.default.createElement(G,Object.assign({},e)))})),define("metaserver/static/js/modules/clean/react/file_viewer/collection_viewer",["require","exports","tslib","lodash","react","react-redux","metaserver/static/js/file_store/utils","metaserver/static/js/previews/data/selectors","metaserver/static/js/modules/clean/react/file_viewer/data/actions","metaserver/static/js/modules/clean/react/file_viewer/data/store","metaserver/static/js/modules/clean/integrations/zoom_share_dialog/async_modal","metaserver/static/js/modules/core/uri","metaserver/static/js/modules/clean/history","metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/modules/constants/python","metaserver/static/js/modules/clean/react/previews/constants","metaserver/static/js/modules/clean/sync_everything/constants","metaserver/static/js/metrics/index","metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util","typescript/libraries/file-viewer/src/skeleton/preview_skeleton","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/edison/ui/spa_product_name","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileCollectionViewer=i._FileCollectionViewer=void 0,r=t.__importStar(r),a=t.__importDefault(a),p=t.__importDefault(p);const I=c.getStoreForFileViewer(),C=w.getMetricsReporter();function F({file:e,files:i,sharedLinkInfos:t,sharePermissions:a,shareTokens:n,oldIndex:o}){const l=i.filter(e=>!e.is_dir),{newFile:c,newIndex:d}=(function(e,i,t){const a=s.getFileRevisionId(e);let n=r.find(i,e=>s.getFileRevisionId(e)===a);if(!n){const t=e.file_id;n=r.find(i,e=>e.file_id===t)}if(!n&&i.length>0&&void 0!==t){let e=t;return t>=i.length&&(e=i.length>1?i.length-1:0),{newFile:i[e],files:i,newIndex:e}}n||(n=e);const o=i.indexOf(n);return-1===o?{newFile:n,files:[n],newIndex:0}:{newFile:n,files:i,newIndex:o}})(e,l,o);return{collection:{file:c,files:l,sharedLinkInfos:t,sharePermissions:a,shareTokens:n},currentIndex:d}}class O extends a.default.Component{constructor(e){super(e),this.hasFlipped=!1,this.updateFileViewer=()=>{const{file:e}=this.props;this.openFile(e)},this.onFileChanged=(e,i)=>{const t=this.state.collection.files[this.state.currentIndex];if(e.revision_id===t.revision_id&&s.isBrowseFile(t))if(i){const e=Object.assign(Object.assign({},t),{file_id:i.file_id,revision_id:i.revision_id,fq_path:i.fq_path}),r=this.state.collection.files.map((i,t)=>t===this.state.currentIndex?e:i);this.setState({collection:Object.assign(Object.assign({},this.state.collection),{files:r})})}else this.closeViewer()},this.handleFlipNext=r.throttle(()=>{const{collection:e,currentIndex:i}=this.state;this.props.onFlipNext&&this.props.onFlipNext();const t=i+1===e.files.length?0:i+1;this.hasFlipped=!0,this.switchFile(t)},100),this.handleFlipPrevious=r.throttle(()=>{const{collection:e,currentIndex:i}=this.state;this.props.onFlipPrevious&&this.props.onFlipPrevious();const t=0===i?e.files.length-1:i-1;this.hasFlipped=!0,this.switchFile(t)},100),this.switchFile=e=>{const{collection:i}=this.state,t=i.files[e];this.setState({currentIndex:e},()=>{this.updatePreviewUrl(t),this.openFile(t)})},this.closeViewer=()=>{const{onCloseViewer:e}=this.props;e&&e(),l.closeFile()},this.state=F(e),E.PreviewsEventLogger.mark(E.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START)}UNSAFE_componentWillMount(){this.updateFileViewer()}componentDidMount(){const{shouldPresentInZoom:e,user:i,file:t}=this.props;this.setupPreviewUrl(t),i&&e&&d.asyncShowModal(i.id,t.file_id,"file-viewer-modal-overlay"),E.PreviewsEventLogger.mark(E.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT)}UNSAFE_componentWillReceiveProps(e){if((function(e,i){const{file:t,files:r,sharedLinkInfos:a,sharePermissions:n,shareTokens:s}=e;return t!==i.file||r!==i.files||a!==i.sharedLinkInfos||n!==i.sharePermissions||s!==i.shareTokens})(this.props,e)){const i=this.state.currentIndex,t=this.hasFlipped?this.state.collection.files[i]:e.file,r=F(Object.assign(Object.assign({},e),{file:t,oldIndex:i})),a=r.collection.file,n=i!==r.currentIndex,s=t.file_id!==a.file_id,o="fq_path"in t&&"fq_path"in a&&t.fq_path!==a.fq_path;this.setState(r,()=>{(n||s||o)&&(this.updatePreviewUrl(a),this.openFile(a))})}}componentWillUnmount(){const{closeFile:e,onClose:i}=this.props;e(),i&&i(),this.teardownPreviewUrl()}openFile(e){this.props.openFile(e)}setupPreviewUrl(e){this.props.skipOuterRouting||this.setPreviewUrl(e)}updatePreviewUrl(e){this.setPreviewUrl(e,!1),P.setSpaProductName("preview_file_flip")}teardownPreviewUrl(){this.props.skipOuterRouting||this.setPreviewUrl(null)}setPreviewUrl(e,i=!0){if(this.props.disableRouting)return;const t=u.URI.parse(p.default.get_url()),r=u.URI.encode_parts(t.getPath());let a=t.removeQuery("select").removeQuery("page");if(null==e)a=a.removeQuery("preview");else{const i=s.getFilename(e);a=a.updateQuery({preview:i})}const n=a.getQuery();i?p.default.push_state(r,n,{immediatelyRestoreState:!1}):p.default.replace_state(r,n)}renderSDKSurface(){const{fileViewOrigin:e,hidePageChrome:i,transparentBackground:t,forceNoToolbar:n,user:o,browseContext:l,browseExceptions:c,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,brandingInfo:P,initialPreviewSourceContext:E,shouldFocusApproval:I,shouldFocusComment:F,activeCommentThreadId:O,appDownloadInterstitialDismissed:T,containerId:A,usePreloadedMetadata:x,isInsideBackup:D,previewApiDataMap:k,ajaxTimerName:M}=this.props,{collection:L,currentIndex:j}=this.state,R=r.get(L.sharedLinkInfos,j),N=r.get(L.sharePermissions,j),V=r.get(L.shareTokens,j),U=r.get(L.files,j),B=null==o||!o.id||b.getRightRailIsCollapsed(null==o?void 0:o.id),K=null==o||!o.id||b.getDocSidebarIsCollapsed(null==o?void 0:o.id),z=L.files.map(e=>{var i;const t=s.getFileRevisionId(e);return null===(i=k[t])||void 0===i?void 0:i.data}),H=s.getFilename(U),W=y.fileViewerFeatureExperiments.newQuipsDocs;let q=null!=E?E:_.PreviewSourceContext.Unknown;const G=a.default.createElement(h.Skeleton,{isRightRailCollapsed:B,docSidebarCollapsed:K,canShowSsrDocs:W,preview:U.preview,fileName:H,metricsReporter:C,logPerformanceMark:!0});switch(e){case g.FileViewOriginType.BROWSE:case g.FileViewOriginType.VERSION_HISTORY:case g.FileViewOriginType.HOME:case g.FileViewOriginType.HELLOSIGN:case g.FileViewOriginType.PHOTOS:case g.FileViewOriginType.STARRED:case g.FileViewOriginType.RECENTS:case g.FileViewOriginType.SEARCH:case g.FileViewOriginType.COLLECTIONS:if(!o)throw new Error("User is required to browse files");let r;switch(e){case g.FileViewOriginType.VERSION_HISTORY:r=f.SDKPreviewSurface.VERSION_HISTORY;break;case g.FileViewOriginType.HOME:r=f.SDKPreviewSurface.HOME;break;case g.FileViewOriginType.HELLOSIGN:r=f.SDKPreviewSurface.HELLOSIGN;break;case g.FileViewOriginType.STARRED:r=f.SDKPreviewSurface.STARRED;break;case g.FileViewOriginType.RECENTS:r=f.SDKPreviewSurface.RECENTS;break;case g.FileViewOriginType.SEARCH:r=f.SDKPreviewSurface.SEARCH;break;case g.FileViewOriginType.PHOTOS:r=f.SDKPreviewSurface.PHOTOS;break;case g.FileViewOriginType.COLLECTIONS:r=f.SDKPreviewSurface.COLLECTIONS;break;default:r=f.SDKPreviewSurface.BROWSE}return(D||m.isBackupBrowse())&&(r=f.SDKPreviewSurface.BACKUP,q=_.PreviewSourceContext.Backup),a.default.createElement(a.default.Fragment,null,!S.is_supported_mobile_browser()&&G,a.default.createElement(v.FileViewer,{file:U,fileIndex:j,previewCollection:z,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:V,brandingInfo:P,user:o,onFileChanged:this.onFileChanged,closeFile:this.closeViewer,previewSurface:r,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,browseContext:l,browseExceptions:c,previewContentOnly:i,canShowFileFlippers:r===f.SDKPreviewSurface.SEARCH||r===f.SDKPreviewSurface.BROWSE||r===f.SDKPreviewSurface.COLLECTIONS||r===f.SDKPreviewSurface.PHOTOS,shouldFocusApproval:I,shouldFocusComment:F,activeCommentThreadId:O,hideOpenInAppInterstitial:!!T,fileViewOrigin:e,usePreloadedMetadata:x,sourceContext:q,ajaxTimerName:M}));case g.FileViewOriginType.SHARED_LINK_PAGE:if(!R||!N||!V)throw new Error("Missing required data to view");return a.default.createElement(a.default.Fragment,null,!S.is_supported_mobile_browser()&&G,a.default.createElement(v.FileViewer,{file:U,fileIndex:j,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:V,brandingInfo:P,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.SHARED_LINK,user:o,canShowFileFlippers:E===_.PreviewSourceContext.SharedLinkFolder||E===_.PreviewSourceContext.SharedLinkCollection,previewContentOnly:i,hideOpenInAppInterstitial:!!T,usePreloadedMetadata:x,initialSourceAction:this.props.initialPreviewSourceAction,onFullscreenChange:p,fileViewOrigin:e,sourceContext:q,ajaxTimerName:M}));case g.FileViewOriginType.SHARED_CONTENT_LINK_PAGE:if(!R||!N||!V)throw new Error("Missing required data to view");return a.default.createElement(a.default.Fragment,null,!S.is_supported_mobile_browser()&&G,a.default.createElement(v.FileViewer,{file:U,fileIndex:j,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:V,brandingInfo:P,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.SHARED_CONTENT_LINK,user:o,canShowFileFlippers:!0,previewContentOnly:i,hideOpenInAppInterstitial:!!T,usePreloadedMetadata:x||!o,initialSourceAction:this.props.initialPreviewSourceAction,onFullscreenChange:p,fileViewOrigin:e,sourceContext:q,ajaxTimerName:M}));case g.FileViewOriginType.COMMERCE:case g.FileViewOriginType.TRANSFER:return a.default.createElement(v.FileViewer,{file:U,fileIndex:j,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:V,brandingInfo:P,closeFile:this.closeViewer,previewSurface:e===g.FileViewOriginType.COMMERCE?f.SDKPreviewSurface.COMMERCE:f.SDKPreviewSurface.TRANSFER,user:o,canShowFileFlippers:!1,previewContentOnly:i,transparentBackground:t,forceNoToolbar:n,hideOpenInAppInterstitial:!!T,containerId:A,usePreloadedMetadata:x,initialSourceAction:this.props.initialPreviewSourceAction,onPreviewSessionInitialized:this.props.onPreviewSessionInitialized,onFullscreenChange:p,fileViewOrigin:e,sourceContext:q,ajaxTimerName:M});case g.FileViewOriginType.SHARED_COLLECTION:return a.default.createElement(v.FileViewer,{file:U,fileIndex:j,previewCollection:z,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,user:o,onFileChanged:this.onFileChanged,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.SHARED_COLLECTION,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,previewContentOnly:i,canShowFileFlippers:!0,hideOpenInAppInterstitial:!!T,fileViewOrigin:e,usePreloadedMetadata:x,sourceContext:q,ajaxTimerName:M});default:return w.getMetricsReporter().createStats({ns:"web_previews",name:"unkown_preview_origin"},{origin:`${e}`}),a.default.createElement(v.FileViewer,{file:U,fileIndex:j,fileCount:L.files.length,flipToNextFile:this.handleFlipNext,flipToPreviousFile:this.handleFlipPrevious,sharedLinkInfo:R,sharePermission:N,shareToken:V,brandingInfo:P,user:o,closeFile:this.closeViewer,previewSurface:f.SDKPreviewSurface.UNKNOWN,canRestoreRevision:d,onRestoreRevision:u,onFullscreenChange:p,previewContentOnly:i,canShowFileFlippers:!1,hideOpenInAppInterstitial:!!T,fileViewOrigin:e,sourceContext:q,ajaxTimerName:M})}}render(){return a.default.createElement("div",null,this.renderSDKSurface())}}i._FileCollectionViewer=O,O.displayName="_FileCollectionViewer";const T=n.connect((e,i)=>({previewApiDataMap:o.getApiDataForFiles(e,i.files)}),{closeFile:l.closeFile,openFile:l.openFile})(O);class A extends a.default.Component{render(){return a.default.createElement(n.Provider,{store:I},a.default.createElement(T,Object.assign({},this.props)))}}i.FileCollectionViewer=A,A.displayName="FileCollectionViewerWithProvider"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/restore_plugin",["require","exports","tslib","react","dig-components/icons/src","dig-components/icons","metaserver/static/js/modules/core/i18n","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeRestoreActionLoader=void 0,r=t.__importDefault(r);i.makeRestoreActionLoader=(e,i,t)=>({actionDefinitions:()=>{if(!i||!t)return{};const d=o.makePluginActionDefinition({label:s.intl.formatMessage(l.RESTORE_ACTION_STRING),icon:r.default.createElement(n.UIIcon,{src:a.RewindLine}),id:c.RESTORE_ACTION_PLUGIN_ID,action:()=>{i&&t&&(e.logUserAction("restore","overflow_menu"),i())},primary:!0});return{atTopLevelIfSpace:[d],alwaysInOverflow:[[d]]}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/starred_plugin",["require","exports","tslib","react","react-redux","dig-components/menu","dig-components/icons","metaserver/static/js/file_viewer/sdk_file_viewer/hooks","metaserver/static/js/starred/redux/store","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeStarredActionLoader=void 0,r=t.__importDefault(r);const d=e=>{const{message:i,iconSrc:t,handleClick:a,handleKeyPress:l}=o.useStarControl(e);return r.default.createElement(n.Menu.ActionItem,{onClick:a,onKeyPress:l,withLeftAccessory:r.default.createElement(s.UIIcon,{src:t})},i)};d.displayName="StarOverflowItem",d.displayName="StarOverflowItem";const u=e=>{const i=l.getStoreForStarred();return r.default.createElement(a.Provider,{store:i},r.default.createElement(d,Object.assign({},e)))};u.displayName="StarOverflowItemWithProvider";i.makeStarredActionLoader=(e,i,t)=>({actionDefinitions:()=>{const{file:a}=e();if(!o.isStarringEnabled(a))return{};return{alwaysInOverflow:[[{overflowItem:r.default.createElement(u,{getActiveFile:e,user:i,onToggle:()=>{t.logUserAction("star","overflow_menu")}}),id:c.STARRED_ACTION_PLUGIN_ID}]]}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/unzip_plugin",["require","exports","tslib","react","dig-components/icons","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/file_store/utils","metaserver/static/js/flows/conversions/actions/unzip","metaserver/static/js/flows/conversions/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeUnzipActionLoader=void 0,r=t.__importDefault(r);i.makeUnzipActionLoader=(e,i,t)=>({actionDefinitions:()=>{const{file:d,sharePermission:u,shareToken:p}=e();return i&&!s.isArchiveFile(d)&&l.canConvertFile(d,u)&&o.UnzipAction.selector([d])?{atTopLevelIfSpace:[n.makePluginActionDefinition({label:o.UnzipAction.actionText,icon:r.default.createElement(a.UIIcon,{src:o.UnzipAction.actionIcon}),id:c.UNZIP_ACTION_PLUGIN_ID,action:()=>{t.logUserAction("decompress_file","title_bar_button"),o.UnzipAction.convert([d],i,{shareToken:p,source:"preview"})}})]}:{}}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils",["require","exports","metaserver/static/js/modules/clean/filetypes"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getType=i.isCloudDoc=i.isPnmSuppressMoveSelected=i.isPnmLinkNodeSelected=i.isInsideVaultFolder=i.isLiveFile=i.PREVIEWS_SNACKBAR_ID=void 0,i.PREVIEWS_SNACKBAR_ID="preview-action";i.isLiveFile=e=>!("isDeleted"in e&&"is_unmounted"in e)||!e.isDeleted&&!e.is_unmounted;i.isInsideVaultFolder=e=>"is_in_vault_folder"in e&&e.is_in_vault_folder;i.isPnmLinkNodeSelected=e=>{var i;return"per_node_metadata"in e&&!!(null===(i=e.per_node_metadata)||void 0===i?void 0:i.link_node)};i.isPnmSuppressMoveSelected=e=>{var i;return"per_node_metadata"in e&&!!(null===(i=e.per_node_metadata)||void 0===i?void 0:i.suppress_move)};i.isCloudDoc=e=>"is_cloud_doc"in e&&e.is_cloud_doc;i.getType=e=>"type"in e?e.type:t.FileTypes.FILE})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin",["require","exports","tslib","react","metaserver/static/js/modules/clean/stormcrow/gating_factory","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin.module.css","dig-components/icons","dig-components/tooltips","dig-components/typography","dig-components/menu","dig-components/buttons","dig-components/icons/src","metaserver/static/js/modules/clean/analytics","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/integrations/hellosign_deep_integration/self_sign_plugin","metaserver/static/js/modules/clean/integrations/hellosign_deep_integration/send_file_viewer_plugin","metaserver/static/js/api_v2/user_client","metaserver/static/js/growth/user_action/trackers/signatures_actionbar_dropdown_tracker","metaserver/static/js/file_store/utils","metaserver/static/js/cloud_docs/constants","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logExposure=i.makeSignaturesDropdown=i.SignaturesMenu=void 0,r=t.__importDefault(r),n=t.__importDefault(n);let y=!1;function S({file:e,user:i,logUserAction:a,selfSignVariant:w,sendForSignatureNamingVariant:b,hideIcons:S}){y||(p.ProEventsLogger.log(`${h.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID.toLowerCase()}_shown`),y=!0);const[P,E]=r.default.useState(!1);r.default.useEffect(()=>{e&&i&&(function(e){return t.__awaiter(this,void 0,void 0,(function*(){try{return!(yield(new _.UserApiV2Client).ns("growth").rpc("performed_user_action",{project:"signatures_actionbar_dropdown",action:"view_tooltip"},{subjectUserId:e})).has_performed}catch(e){return!1}}))})(i.id).then(e=>E(e))},[i,e]);const[I,C]=r.default.useState(0),F=()=>{C(Date.now()),p.ProEventsLogger.log(`${h.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID.toLowerCase()}_tooltip_displayed`)},O=()=>{let e=0;I&&(e=(Date.now()-I)/1e3),p.ProEventsLogger.log(`${h.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID.toLowerCase()}_tooltip_dismissed`,{displayDurationSeconds:e}),new m.SignaturesActionbarDropdownTracker(i.id).track(m.SignaturesActionbarDropdownActions.VIEW_TOOLTIP),E(!1)},T=r.default.createElement(s.UIIcon,{src:u.SignatureLine,role:"presentation"}),A=r.default.useCallback(e=>{null==e||e.handler()},[]);return r.default.createElement(c.Menu.Wrapper,{shouldPropagateClickOutsideMouseEvents:!0,onSelection:A},({getContentProps:t,getTriggerProps:s,triggerRef:u})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(d.Button,Object.assign({},s(),{variant:"opacity",withDropdownIcon:!0,withIconLeft:S?null:T,"data-uxa-log":"signatures_actionbar_button"}),v.intl.formatMessage({id:"sKlWAb",defaultMessage:"Add signatures"})),r.default.createElement(o.Tooltip.Control,{variant:"rich",shouldReturnFocus:!0,open:P,triggerRef:u,auto:!0,placement:"right",onDisplayed:F},r.default.createElement(l.Title,{size:"standard",inverse:!0},v.intl.formatMessage({id:"/2eIuX",defaultMessage:"Dropbox offers signatures!"})),r.default.createElement(l.Text,{tagName:"p",color:"standard",inverse:!0},v.intl.formatMessage({id:"j68fj5",defaultMessage:"Send this document for signature or sign it yourself"})),r.default.createElement("div",{className:n.default.stepActions},r.default.createElement(d.Button,{variant:"outline",inverse:!0,onClick:O},v.intl.formatMessage({id:"ceQjcp",defaultMessage:"Got it"})))),r.default.createElement(c.Menu.Content,Object.assign({},t()),r.default.createElement(c.Menu.Segment,null,g.getOverflowItem(e,i,a,b,"file_preview_actionbar_dropdown","file_preview_actionbar_dropdown","send_signatures_on_actionbar_dropdown"),f.getOverflowItem(e,i,a,w,"file_preview_actionbar_dropdown","file_preview_actionbar_dropdown","self_sign_on_actionbar_dropdown")))))}i.SignaturesMenu=S;i.makeSignaturesDropdown=(e,i,t,a,n,s)=>({actionDefinitions:()=>{return o=e(),{atTopLevelIfSpace:[{renderButton:e=>{const l=o.file;return(function(e){return!(!(e=null==e?void 0:e.toLowerCase())||"off"===e||"control"===e)})(a)&&b.isHellosignFileByExtension(w.getExtension(l))?r.default.createElement(S,{file:l,user:i,sendForSignatureNamingVariant:s,logUserAction:t.logUserAction,selfSignVariant:n,hideIcons:e}):null},id:h.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID,placement:"RightOfCategoryButtons"}]};var o}}),i.logExposure=function(e){a.getGatingClientSingleton().logExposure({stormcrowVariantInfo:{feature:"bt_signatures_actionbar_dropdown",variant:e}})}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin.module.css",["require","exports","css!metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.stepActions=void 0,i.stepActions="_step-actions_2ed05_1";i.default={stepActions:"_step-actions_2ed05_1"}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/app_download_interstitial",["require","exports","tslib","react","metaserver/static/js/bug_reporting/routing","metaserver/static/js/modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial","metaserver/static/js/modules/clean/react/file_viewer/constants","metaserver/static/js/modules/clean/analytics","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/file_store/utils","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/open_in_app/ui/banner","typescript/libraries/file-viewer/src/file_viewer/context_provider"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.OpenInAppHeader=i.FvsdkAppDownloadInterstitial=void 0,r=t.__importDefault(r),d=t.__importStar(d);i.FvsdkAppDownloadInterstitial=e=>{const{file:i,sharedLinkInfo:t,onDismiss:d,openInAppData:u,fileViewerSessionId:p,filePreviewSessionId:v,onAppDownload:f,logUserAction:g,fileViewOrigin:_}=e,m=c.getFilename(i),w=r.default.useCallback(e=>{o.MobileFilePreviewLogger.log(e,p,v,i.ns_id,i.sjid,{context:s.UserActionContext.AppDownloadInterstitial,location:"file_viewer",origin:_}),null==g||g(e,s.UserActionContext.AppDownloadInterstitial)},[i,v,p,g,_]);r.default.useEffect(()=>{l.mark_time_to_interactive(),w(s.UserAction.AppDownloadInterstitialView)},[]);const b=r.default.useCallback(()=>{d(),w(s.UserAction.AppDownloadInterstitialContinue)},[d,w]),h=r.default.useCallback(()=>{d(),w(s.UserAction.AppDownloadInterstitialClose)},[d]),y=r.default.useCallback(()=>{w(s.UserAction.AppDownloadInterstitialInstall),null==f||f()},[d,f]);return r.default.createElement(a.RegisterComponentWithBugReporter,{componentId:"web.previews",componentName:"File Preview"},r.default.createElement("div",{"aria-label":m},r.default.createElement(n.AppDownloadInterstitial,{fileOrFolderName:m,open_in_app_data:u,onContinue:b,onAppDownload:y,ownerName:t.ownerName,ownerTeamName:t.ownerTeamName,onClose:h})))},i.FvsdkAppDownloadInterstitial.displayName="FvsdkAppDownloadInterstitial";i.OpenInAppHeader=e=>{const{onHide:i,user:t,activePreviewFile:a}=e,n=v.useFileViewerContext(),o=r.default.useCallback(()=>{n.pluginContext.logUserAction(s.UserAction.OpenInApp,s.UserActionContext.OpenInAppBanner)},[]);if(!d.is_mobile_or_tablet()&&(d.iOS||d.is_android()))return null;const{file:l,shareToken:c,sharePermission:f}=a,g=u.getOpenInAppUrls(l,c,f,t);if(g){const e=!(l&&c&&f);return r.default.createElement("div",{style:{width:"100%"}},r.default.createElement(p.OpenInAppBanner,{urls:g,onClick:o,onClose:i,isMountedFile:e}))}return null},i.OpenInAppHeader.displayName="OpenInAppHeader",i.OpenInAppHeader.displayName="OpenInAppHeader"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/lazy_components",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LazyMobileHeader=i.MobileHeader=i.LazyMobileFooter=i.MobileFooter=void 0,r=t.__importStar(r),i.MobileFooter=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{MobileFooter:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/mobile_web/footer"],i,t)}).then(t.__importStar);return{default:i}})));i.LazyMobileFooter=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(i.MobileFooter,Object.assign({},e))),i.LazyMobileFooter.displayName="LazyMobileFooter",i.MobileHeader=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{MobileHeader:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/mobile_web/header"],i,t)}).then(t.__importStar);return{default:i}})));i.LazyMobileHeader=e=>r.createElement(r.Suspense,{fallback:null},r.createElement(i.MobileHeader,Object.assign({},e))),i.LazyMobileHeader.displayName="LazyMobileHeader"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/async_plugin_loaders",["require","exports","tslib","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeSignaturesDropdownLoader=i.makeStarToolbarButtonLoader=i.makeRestoreActionLoader=i.makeVersionHistoryActionLoader=i.makeUnzipActionLoader=i.makeDocsendAnalyticsAddOnLoader=i.makeStarredActionLoader=i.makeAddToCollectionActionLoader=i.makeTransferActionLoader=i.makeCreateVersionLoader=i.makeRequestApprovalLoader=i.makeOpenInDesktopActionLoader=i.makeRenameActionLoader=i.makeWaterMarkingActionPluginLoader=i.makeOpenDropdownActionLoader=i.makeMoveActionLoader=i.makeDeleteActionLoader=i.makeDownloadActionLoader=i.makeCopyActionLoader=void 0;i.makeCopyActionLoader=(i,a,n,s)=>({pluginId:r.COPY_ACTION_PLUGIN_ID,load:(r,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeCopyPlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/copy_plugin"],i,t)}).then(t.__importStar);return r(i,a,o,n,s)}))});i.makeDownloadActionLoader=(i,a,n,s,o,l,c)=>({pluginId:r.DOWNLOAD_ACTION_PLUGIN_ID,load:(r,d)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeDownloadPlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/download_plugin"],i,t)}).then(t.__importStar);return r(i,a,d,n,s,o,l,c)}))});i.makeDeleteActionLoader=(i,a,n)=>({pluginId:r.DELETE_ACTION_PLUGIN_ID,load:(r,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeDeletePlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/delete_plugin"],i,t)}).then(t.__importStar);return r(i,a,s,n)}))});i.makeMoveActionLoader=(i,a,n,s,o)=>({pluginId:r.MOVE_ACTION_PLUGIN_ID,load:(r,l)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeMovePlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/move_plugin"],i,t)}).then(t.__importStar);return r(i,a,l,n,s,o)}))});i.makeOpenDropdownActionLoader=(i,a)=>({pluginId:r.OPEN_DROPDOWN_ACTION_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeOpenDropdownAction:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_dropdown_plugin"],i,t)}).then(t.__importStar);return r(i,a,n)}))});i.makeWaterMarkingActionPluginLoader=i=>({pluginId:r.WATERMARKING_ACTION_PLUGIN_ID,load:(r,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeWaterMarkingActionPlugin:n}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/watermarking/edit_plugin/action_plugin"],i,t)}).then(t.__importStar);return n(i,r,a)}))});i.makeRenameActionLoader=(i,a,n)=>({pluginId:r.RENAME_ACTION_PLUGIN_ID,load:(r,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeRenamePlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/rename_plugin"],i,t)}).then(t.__importStar);return r(i,a,s,n)}))});i.makeOpenInDesktopActionLoader=(i,a,n)=>({pluginId:r.OPEN_IN_DESKTOP_ACTION_PLUGIN_ID,load:(r,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeOpenInDesktopPlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_in_desktop_plugin"],i,t)}).then(t.__importStar);return r(i,a,s,n)}))});i.makeRequestApprovalLoader=(i,n,s)=>({pluginId:r.REQUEST_APPROVAL_ACTION_PLUGIN_ID,load:(r,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{RequestApprovalPlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/flows/approval/request_approval_plugin"],i,t)}).then(t.__importStar);return new r(o,n,i,e=>a.SDKPreviewSurfaceToPapType(s,e))}))});i.makeCreateVersionLoader=(i,n,s)=>({pluginId:r.CREATE_VERSION_ACTION_PLUGIN_ID,load:(r,o)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{CreateVersionPlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/flows/version/create_version_plugin"],i,t)}).then(t.__importStar);return new r(o,n,i,e=>a.SDKPreviewSurfaceToPapType(s,e))}))});i.makeTransferActionLoader=i=>({pluginId:r.TRANSFER_ACTION_PLUGIN_ID,load:(r,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){const[{makeTransferPlugin:r},{getStore:n},{getFeatureFlags:s}]=yield Promise.all([new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/transfer_plugin"],i,t)}).then(t.__importStar),new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/react/extensions/data/store"],i,t)}).then(t.__importStar),new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/react/extensions/data/selectors"],i,t)}).then(t.__importStar)]),o="ON"===s(n().getState()).fileTransfersAppAction;return r(i,a,o)}))});i.makeAddToCollectionActionLoader=(i,a)=>({pluginId:r.ADD_TO_COLLECTION_ACTION_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeAddToCollectionActionLoader:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/add_to_collection_plugin"],i,t)}).then(t.__importStar);return r(i,a)}))});i.makeStarredActionLoader=(i,a)=>({pluginId:r.STARRED_ACTION_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeStarredActionLoader:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/starred_plugin"],i,t)}).then(t.__importStar);return r(i,a,n)}))});i.makeDocsendAnalyticsAddOnLoader=(i,a,n)=>({pluginId:r.DOCSEND_ANALYTICS_ADD_ON_ACTION_PLUGIN_ID,load:(r,s)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeAnalyticsAddOn:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/docsend_analytics_add_on_plugin"],i,t)}).then(t.__importStar);return r(i,a,n)}))});i.makeUnzipActionLoader=(i,a)=>({pluginId:r.UNZIP_ACTION_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeUnzipActionLoader:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/unzip_plugin"],i,t)}).then(t.__importStar);return r(i,a,n)}))});i.makeVersionHistoryActionLoader=(i,a)=>({pluginId:r.VERSION_HISTORY_ACTION_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeVersionHistoryActionLoader:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/version_history_plugin"],i,t)}).then(t.__importStar);return r(i,a,n)}))});i.makeRestoreActionLoader=(i,a)=>({pluginId:r.RESTORE_ACTION_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeRestoreActionLoader:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/restore_plugin"],i,t)}).then(t.__importStar);return r(n,i,a)}))});i.makeStarToolbarButtonLoader=(i,a)=>({pluginId:r.STAR_TOOLBAR_PLUGIN_ID,load:(r,n)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeStarToolbarButtonLoader:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/star_plugin"],i,t)}).then(t.__importStar);return new(r(i,a))}))});i.makeSignaturesDropdownLoader=(i,a,n,s,o)=>({pluginId:r.SIGNATURES_ACTIONBAR_DROPDOWN_PLUGIN_ID,load:(r,l)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{logExposure:r,makeSignaturesDropdown:c}=yield new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/signatures_dropdown_plugin"],i,t)}).then(t.__importStar);return r(n),c(i,a,l,n,s,o)}))})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/cloud_docs",["require","exports","spectrum-sharing/utils/sharing_constants","metaserver/static/js/cloud_docs/shared_components/routing","metaserver/static/js/file_store/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeCloudDocsClient=void 0,i.makeCloudDocsClient=function(e,i,n){const s=!!n&&n.linkType===t.SharedLinkType.Shmodel;return{triggerDynamicRoutingModalCheck:()=>{const t=i();t.file.file_id&&!s&&r.maybeShowDynamicRoutingModal(e,t.file,a.getExtension(t.file))}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/comments",["require","exports","typescript/libraries/file-viewer/src/comments2/plugin/loader/lazy","metaserver/static/js/comments2/client_builder","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeComments2MetaserverLoader=void 0,i.makeComments2MetaserverLoader=function(e){return t.makeLoader(r.makeComments2Client(e),{comments2UsabilityRevamp:a.fileViewerFeatureExperiments.comments2UsabilityRevamp,showApproval:!!e&&a.fileViewerFlowExperiments.approvalFlowByUserId[e.id],approvalVariant:e?a.fileViewerFlowExperiments.approvalFlowVariantByUserId[e.id]:"",approvalCopyVariant:e?a.fileViewerFlowExperiments.approvalCopyVariantByUserId[e.id]:"",dragSectionAnnotationEnabled:a.fileViewerFeatureExperiments.dragSectionAnnotation})}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FVSDK_MOUNT_POINT=void 0,i.FVSDK_MOUNT_POINT="fvsdk-mount-point"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/download_utils",["require","exports","tslib","react","metaserver/static/js/auth/login_or_register/types","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/core/config","metaserver/static/js/action_bar/file_actions/portable/save_as_copy/save_as_copy","metaserver/static/js/file_store/utils","metaserver/static/js/action_bar/file_actions/portable/save_as_copy/snackbars","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/action_bar/file_actions/portable/download","metaserver/static/js/components/ui/modal","metaserver/static/js/modules/core/persistence/storage","metaserver/static/js/share_download/ui/util"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.downloadActiveFile=i.saveToDropbox=void 0,r=t.__importDefault(r),i.saveToDropbox=function(e,i,t,r,a){if(r)if(t)i("save_to_dropbox"),o.portableSaveAsCopy({fileName:l.getFilename(e),user:t,shareToken:r},{onNetworkRequest:()=>{c.saveCopySnackBarInProgress(d.PREVIEWS_SNACKBAR_ID),i("save_to_dropbox_approve")},onModalClose:()=>{i("save_to_dropbox_cancel")}});else{const e=new URL(window.location.href);e.searchParams.set("copy_to_dropbox","true"),window.history.replaceState(e.href,"",e.href),n.showAuthModal({mode:s.AuthMode.REGISTER,sharedLinkUrl:e.href,kind:s.LoginOrRegisterKind.DOWNLOAD,encryptionOptions:a,loggingExtra:{source:"save_to_dropbox"}})}},i.downloadActiveFile=function(i,n,s,o,c,d){if(o!==a.LoginOrRegisterKind.DOWNLOAD||v.LocalStorage.get("has_seen_download_signup_modal"))u.downloadSingleFile({href:i.href,source:"PREVIEWS",isFswm:l.isSharedFile(i)}),n||f.showPostDownloadSignInModal({encryptionOptions:s,logUserAction:c,isFolder:!1,shareToken:d,link_url:i.href});else{const i=()=>{v.LocalStorage.set("has_seen_download_signup_modal",!0)},n=()=>{v.LocalStorage.set("has_seen_download_signup_modal",!0)};new Promise((i,t)=>{e(["metaserver/static/js/auth/login_or_register/modal"],i,t)}).then(t.__importStar).then(({LoginOrRegisterModal:e})=>{p.Modal.showInstance(r.default.createElement(e,{downloadAction:a.DownloadAction.DIRECT_DOWNLOAD,id:"shared-link-download-signup-modal",initialMode:a.Mode.REGISTER,kind:o,onAuthenticateSuccess:i,onCancel:n,signup_tag:"shmodel_download_register",encryptionOptions:s,loggingExtra:{source:"download_button"}}))})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/feature_config",["require","exports","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/plugins/types","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/modules/core/browser_detection"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getFeatureConfig=void 0;const o=(e,i)=>{const t="ms_view_embed"===i?{embed_support:"ms_view_embed"}:{embed_support:"unsupported"};let r;switch(e){case"OFF":case"CONTROL":r={support:"excel1"};break;case"P0":r={support:"excel2",phase:0};break;case"P1":r={support:"excel2",phase:1};break;case"P2":r={support:"excel2",phase:2};break;case"P3":r={support:"excel2",phase:3};break;case"P4":r={support:"excel2",phase:4};break;default:r={support:"excel1"}}return Object.assign(Object.assign({},r),t)};i.getFeatureConfig=(e,i,l,c,d,u,p)=>{const v=e===t.SDKPreviewSurface.BROWSE;return{html_support:!0,excel_support:o(n.fileViewerFeatureExperiments.fvsdkExcel2Phase,n.fileViewerFeatureExperiments.fvsdkExcelMsEmbedPhase),annotations:v,ax_annotations:n.fileViewerFeatureExperiments.fvsdkAxAnnotations,enable_fullscreen:!0,enable_toolbar_file_counter:n.fileViewerFeatureExperiments.fvsdkToolbarFileCounter,file_flipping:i,keyboard_shortcuts:!0,titlebar_logo_config:{show_logo:!0,base_url:"www.dropbox.com"},preview_types:{[a.PreviewType.SsrDoc]:Object.assign(Object.assign({},r.DEFAULT_CONFIG.preview_types[a.PreviewType.SsrDoc]),{showPageNavigation:!0})},mobile_web:s.is_supported_mobile_browser(),preview_content_only:l,transparent_background:c,force_no_toolbar:d,show_cloud_doc_preview:u,partial_prewarm_allowed:n.fileViewerFeatureExperiments.partialPrewarmAllowed,enable_fvsdk_dynamic_actions:n.fileViewerFeatureExperiments.enableFvsdkDynamicActions,comments2_usability_revamp:n.fileViewerFeatureExperiments.comments2UsabilityRevamp,fvsdk_use_native_lazy_loading:n.fileViewerFeatureExperiments.fvsdkUseNativeLazyLoading,fvsdk_excel_ms_embed_phase:n.fileViewerFeatureExperiments.fvsdkExcelMsEmbedPhase,bt_self_sign_entry_point:n.fileViewerFeatureExperiments.btSelfSignEntryPoint,tags_section_variant:n.fileViewerFeatureExperiments.tagsSectionVariant,preload_collection_previews:n.fileViewerFeatureExperiments.preloadCollectionPreviews,drag_section_annotation:n.fileViewerFeatureExperiments.dragSectionAnnotation,fvsdk_find_text_phase:n.fileViewerFeatureExperiments.fvsdkFindTextPhase,new_quips_docs:n.fileViewerFeatureExperiments.newQuipsDocs,fvsdk_fastforward_rewind:n.fileViewerFeatureExperiments.fvsdkFastforwardRewind,img_size_optimization:n.fileViewerFeatureExperiments.imgSizeOptimization}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/file_system",["require","exports","metaserver/static/js/share_download/ui/util","metaserver/static/js/file_viewer/sdk_file_viewer/download_utils"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFileSystemClient=void 0,i.makeFileSystemClient=function(e,i,{allowCopyToDropbox:a,shareToken:n,encryptionOptions:s,sharePermission:o,authModalKind:l}){return{copyToDropbox:!a||o&&!t.isDownloadAllowed(o)?()=>{}:({logModalConfirm:t,logModalCancel:a})=>{const{file:o}=i();r.saveToDropbox(o,e=>{"save_to_dropbox_approve"===e?t():"save_to_dropbox_cancel"===e&&a()},e,n,s)},downloadFile:()=>{const{file:t}=i();r.downloadActiveFile(t,e,s,l,void 0,n)}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/file_viewer",["require","exports","tslib","react","metaserver/static/js/common/rendering","classnames","react-redux","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/api_v2/noauth_client","metaserver/static/js/file_store/utils","metaserver/static/js/components/ui/css","metaserver/static/js/modules/clean/react/extensions/data/selectors","metaserver/static/js/modules/clean/react/extensions/data/helpers","metaserver/static/js/file_viewer/sdk_file_viewer/async_plugin_loaders","metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/crop_rotate_plugin","metaserver/static/js/file_viewer/sdk_file_viewer/comments","metaserver/static/js/browse/models","metaserver/static/js/file_viewer/sdk_file_viewer/file_system","metaserver/static/js/file_viewer/sdk_file_viewer/full_screen","metaserver/static/js/file_viewer/sdk_file_viewer/print","metaserver/static/js/file_viewer/sdk_file_viewer/navigation","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/file_viewer/sdk_file_viewer/pass","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/core/browser","metaserver/static/js/flows/version/experiments","typescript/libraries/file-viewer/src/core/data/riviera/api","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/video","metaserver/static/js/file_viewer/sdk_file_viewer/url","metaserver/static/js/file_viewer/sdk_file_viewer/cloud_docs","metaserver/static/js/file_viewer/sdk_file_viewer/constants","typescript/libraries/file-viewer/src/info_blade/types","metaserver/static/js/pass/plugin/loader","typescript/libraries/file-viewer/src/info_blade/loader","metaserver/static/js/file_viewer/sdk_file_viewer/preview_logger","metaserver/static/js/file_viewer/sdk_file_viewer/feature_config","metaserver/static/js/share_download/ui/util","metaserver/static/js/modules/clean/react/extensions/cloud_docs_compat","typescript/libraries/file-viewer/src/file_activity_blade/loader","metaserver/static/js/file_viewer/sdk_file_viewer/preferences","metaserver/static/js/modules/clean/react/previews/sharing_plugin/loader","metaserver/static/js/branding/branding_modal_controller","typescript/libraries/file-viewer/src/watermarking/edit_plugin/loader","metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog_manager","metaserver/static/js/integrations/ui/pdf_editor/plugin/loader","metaserver/static/js/photo-editor/plugin/loader","keymaster","metaserver/static/js/loggers/device_type","metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/snackbar_manager_plugin","metaserver/static/js/modules/clean/browse_uri_interface","metaserver/static/js/modules/clean/react/previews/constants","metaserver/static/js/modules/core/dom","metaserver/static/js/modules/clean/user_survey/user_survey","metaserver/static/js/modules/clean/react/file_viewer/toggle_browse_elements_util","metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/async_replay_dialog","metaserver/static/js/flows/approval/api","metaserver/static/js/modules/clean/sharing/ui_util","metaserver/static/js/file_viewer/sdk_file_viewer/report_exception","metaserver/static/js/file_viewer/sdk_file_viewer/app_download_interstitial","metaserver/static/js/comments2/util","metaserver/static/js/file_viewer/sdk_file_viewer/app_download_interstitial","typescript/libraries/file-viewer/src/comments2/plugin/types","typescript/libraries/file-viewer/src/core/constants","metaserver/static/js/modules/clean/react/snackbar","metaserver/static/js/modules/clean/react/snackbar_manager","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/clean/uuid/uuid","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/modules/clean/react/extensions/data/store","metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/flows/version/async_components","typescript/libraries/file-viewer/src/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","typescript/libraries/file-viewer/src/file_viewer/components","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/flows/conversions/async_conversion_plugin","metaserver/static/js/modules/clean/integrations/hellosign_deep_integration/async_send_file_viewer_plugin","metaserver/static/js/modules/clean/integrations/hellosign_deep_integration/async_self_sign_plugin","metaserver/static/js/file_viewer/sdk_file_viewer/lazy_components"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F,O,T,A,x,D,k,M,L,j,R,N,V,U,B,K,z,H,W,q,G,Z,$,Q,X,Y,J,ee,ie,te,re,ae,ne,se,oe,le,ce,de,ue,pe,ve,fe,ge,_e,me,we,be,he,ye,Se,Pe,Ee,Ie,Ce,Fe){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewer=i._FileViewer=i.isWatermarkingEnabled=void 0,r=t.__importDefault(r),n=t.__importDefault(n),P=t.__importStar(P),I=t.__importStar(I),Z=t.__importDefault(Z),J=t.__importStar(J);i.isWatermarkingEnabled=e=>!(!e||!ge.fileViewerConfiguration.watermarkingByUserId[e.id]);const Oe=r.default.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{TagsSectionPreview:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/tagging/components/section/tags_section_preview"],i,t)}).then(t.__importStar);return{default:i}}))),Te=(n,s,d,u,p,O,D,k,N,V,z,W,Z,J,ie,te,se,oe,le=!1,ce=!1,de=!1,ue=!0,pe=!1,fe,_e,me,Se,Pe,Fe,Te,Ae,xe,De)=>{var ke;const Me=D?()=>{D(),y.isAudioPreview(s().file)?ee.UserSurvey.trackEvent("audio_preview_viewed","previews"):y.isVideoPreview(s().file)&&ee.UserSurvey.trackEvent("video_preview_viewed","previews")}:void 0;let Le={};const je=V?new o.DefaultUserApiV2Client(V):new l.NoAuthApiV2Client,Re=R.getFeatureConfig(n,pe,le,ce,de,ue,V),Ne=e=>y.showAuthModal(Object.assign(Object.assign({},e),{encryptionOptions:oe})),Ve=B.makePreferencesClient(V);ve.is_supported_mobile_browser()||ee.UserSurvey.trackEvent("preview_viewed","previews");const Ue=s().file;c.isSharedFile(Ue)&&setTimeout(()=>{ae.trackReceiverUserLeapEvent(ae.ReceiverUserLeapEvent.VIEWED_SHARED_FILE)},5e3);const Be=c.isBrowseFile(s().file)&&i.isWatermarkingEnabled(V);switch(Ue.preview&&he.maybePreloadFile(Ue.preview),n){case y.SDKPreviewSurface.BROWSE:case y.SDKPreviewSurface.HOME:case y.SDKPreviewSurface.HELLOSIGN:case y.SDKPreviewSurface.SEARCH:case y.SDKPreviewSurface.RECENTS:case y.SDKPreviewSurface.STARRED:case y.SDKPreviewSurface.STANDALONE_PREVIEW:case y.SDKPreviewSurface.PHOTOS:case y.SDKPreviewSurface.COLLECTIONS:case y.SDKPreviewSurface.FILE_LOCKING:case y.SDKPreviewSurface.BACKUP:if(!V)throw new Error("Must be logged in to browse");Le={presenceBeaconIOClient:S.getPresenceBeaconIOClient(V,s),fileSystemClient:m.makeFileSystemClient(V,s,{allowCopyToDropbox:!1,shareToken:d,encryptionOptions:oe,authModalKind:_e}),fullScreenClient:w.makeFullScreenClient(ie),printClient:b.makePrintClient(),navigationClient:h.makeBrowseNavigationClient(V,s,Me,W,Z,J),urlClient:A.makeUrlClient(V),preferencesClient:Ve};break;case y.SDKPreviewSurface.VERSION_HISTORY:if(!V)throw Error("user required for version history");Le={presenceBeaconIOClient:S.getPresenceBeaconIOClient(V,s),fileSystemClient:void 0,fullScreenClient:w.makeFullScreenClient(ie),printClient:b.makePrintClient(),navigationClient:h.makeVersionHistoryNavigationClient(V,s,Me,W,Z,J),urlClient:A.makeUrlClient(V),preferencesClient:Ve};break;case y.SDKPreviewSurface.SHARED_LINK:Le={fullScreenClient:w.makeFullScreenClient(ie),printClient:b.makePrintClient(),navigationClient:h.makeInbandShareNavigationClient(Me,W,Z,J,Ne),urlClient:A.makeUrlClient(V),fileSystemClient:m.makeFileSystemClient(V,s,{allowCopyToDropbox:!0,shareToken:d,encryptionOptions:oe,sharePermission:O,authModalKind:_e}),presenceBeaconIOClient:S.getPresenceBeaconIOClient(V,s),preferencesClient:Ve};break;case y.SDKPreviewSurface.SHARED_LINK_EMBED:case y.SDKPreviewSurface.COMMERCE:case y.SDKPreviewSurface.TRANSFER:Le={fullScreenClient:w.makeFullScreenClient(ie),printClient:b.makePrintClient(),urlClient:A.makeUrlClient(V),fileSystemClient:m.makeFileSystemClient(V,s,{allowCopyToDropbox:!0,shareToken:d,encryptionOptions:oe,sharePermission:O,authModalKind:_e})};break;case y.SDKPreviewSurface.SHARED_COLLECTION:Le={fullScreenClient:w.makeFullScreenClient(ie),printClient:b.makePrintClient(),urlClient:A.makeUrlClient(V),fileSystemClient:m.makeFileSystemClient(V,s,{allowCopyToDropbox:!0,shareToken:d,encryptionOptions:oe,sharePermission:O,authModalKind:_e}),navigationClient:h.makeSharedCollectionNavigationClient(D,W,Z),preferencesClient:{rightRail:{setCollapsedState:()=>{},getCollapsedState:()=>!0,setBladeState:()=>{},getBladeState:()=>{}}}};break;case y.SDKPreviewSurface.SHARED_CONTENT_LINK:case y.SDKPreviewSurface.INBAND_SHARE:Le={presenceBeaconIOClient:S.getPresenceBeaconIOClient(V,s),fileSystemClient:m.makeFileSystemClient(V,s,{allowCopyToDropbox:!0,shareToken:d,encryptionOptions:oe,sharePermission:O,authModalKind:_e}),fullScreenClient:w.makeFullScreenClient(ie),printClient:b.makePrintClient(),navigationClient:h.makeInbandShareNavigationClient(Me,W,Z,J),urlClient:A.makeUrlClient(V),preferencesClient:Ve}}const Ke={logTTI:()=>(e=>{const i=P.get_timer(e);i.markTimeToInteractive(),e&&i.end()})(De),logTTV:P.mark_time_to_view,logVideo:(e,i)=>{switch(j.logVideo(e,i),e){case T.VideoPreviewEvent.TimeToLoad:y.isAudioPreview(s().file)?(i.video_duration_seconds&&ee.UserSurvey.addAttribute("audioPreviewLength",y.bucketLengthForUserSurvey(i.video_duration_seconds)),ee.UserSurvey.addAttribute("audioPreviewType",c.getExtension(s().file)),ee.UserSurvey.addAttribute("isAudioPreviewFinished","false")):(i.video_duration_seconds&&ee.UserSurvey.addAttribute("videoPreviewLength",y.bucketLengthForUserSurvey(i.video_duration_seconds)),ee.UserSurvey.addAttribute("videoPreviewType",c.getExtension(s().file)),ee.UserSurvey.addAttribute("isVideoPreviewFinished","false"),ee.UserSurvey.addAttribute("videoPreviewResolution","auto"));break;case T.VideoPreviewEvent.ChangeVideoQuality:if(i.extra){const e="new_video_quality",t=i.extra[e];t&&ee.UserSurvey.addAttribute("videoPreviewResolution",t)}break;case T.VideoPreviewEvent.MediaEnded:y.isAudioPreview(s().file)?(ee.UserSurvey.addAttribute("isAudioPreviewFinished","true"),ee.UserSurvey.trackEvent("audio_preview_viewed","previews")):(ee.UserSurvey.addAttribute("isVideoPreviewFinished","true"),ee.UserSurvey.trackEvent("video_preview_viewed","previews"))}},log:j.logEvent,logDuration:j.logDuration},ze={batteries:{intl:E.intl,coreIOClients:{apiv2ClientBase:je,rivieraIOClient:new F.WebRivieraIOClient},logger:Ke,optionalIOClients:Object.assign(Object.assign({},Le),{showAuthModal:Ne,cloudDocsClient:V?x.makeCloudDocsClient(V,s,d):void 0,reportExceptionClient:ne.makeReportExceptionClient()})},callbacks:{onRenderSucceeded:()=>{y.cleanupPrerenderPreview(),ge.fileViewerFeatureExperiments.preloadCollectionPreviews&&z&&he.maybePreloadFiles(z,p),ve.is_supported_mobile_browser()&&(ee.UserSurvey.trackEvent("mobile_web_preview_viewed","previews"),n===y.SDKPreviewSurface.SHARED_LINK&&ee.UserSurvey.trackEvent("mobile_web_receiver_preview_viewed","previews")),y.isExcelPreview(s().file)&&(ee.UserSurvey.addAttribute("fvsdk_excel2_phase",ge.fileViewerFeatureExperiments.fvsdkExcel2Phase),ee.UserSurvey.trackEvent("excel_preview_viewed","previews"))},onPreviewSessionInitialized:e=>{te&&te(e)}},initData:{accountId:V?V.account_id:void 0,deviceType:$.getDeviceType()},featureConfig:Re,platformConfig:{osModifierKey:ve.mac?"metaKey":"ctrlKey"},fileViewerId:xe},He=[],We=ge.fileViewerFeatureExperiments.tagsSectionVariant,qe=We&&"ON"===We;We&&"OFF"!==We&&new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/stormcrow/stormcrow_exposure_logger"],i,t)}).then(t.__importStar).then(({StormcrowExposureLogger:e})=>{(new e).logExposure("tags_in_previews",We)});const Ge=n!==y.SDKPreviewSurface.BACKUP&&n!==y.SDKPreviewSurface.SHARED_COLLECTION,Ze=n!==y.SDKPreviewSurface.BACKUP&&n!==y.SDKPreviewSurface.SHARED_COLLECTION;He.push(L.makeInfoBladePluginLoader(V?String(V.id):void 0,se,V&&"MULTI_APPROVER"===ge.fileViewerFlowExperiments.approvalFlowVariantByUserId[V.id]?e=>re.getFileApprovalStatus(V.id,e):void 0,qe?()=>{const e=s().file;return qe&&V&&c.isBrowseFile(e)&&e.ns_path?r.default.createElement(a.LazySuspense,{fallback:null},r.default.createElement(Oe,{files:[_.File.fromAnyFileObject(e)],user:V})):null}:void 0,()=>{const e=s().file;if(V&&C.isVersioningMVPEnabled(ge.fileViewerFlowExperiments.versioningFlowVariantByUserId[V.id])){const i=e=>ye.SDKPreviewSurfaceToPapType(n,e);return r.default.createElement(be.AsyncChangeLogSection,{fileId:e.file_id,user:V,getPreviewSurface:i})}return null}),Ge?g.makeComments2MetaserverLoader(V):void 0,V&&Ze?U.makeFileActivityPluginLoader(V,null===(ke=Le.navigationClient)||void 0===ke?void 0:ke.openVersionHistory):void 0,Be?H.makeWatermarkLoader(Ke,({fqPath:e,overwrite:i})=>{i&&n===y.SDKPreviewSurface.BROWSE||(e&&V?I.replace_location(X.preview_uri_for_fq_path(V,e,{context:Y.PreviewSourceContext.Workflow})):I.reload())}):void 0);const $e=V&&"MULTI_APPROVER"===ge.fileViewerFlowExperiments.approvalFlowVariantByUserId[V.id]&&ge.fileViewerFlowExperiments.flowsApprovalInShareModalEnabled&&we.isLiveFile(s().file)&&!we.isCloudDoc(s().file);if(He.push(M.makePASSMetaserverLoader(s,n,V),n!==y.SDKPreviewSurface.BACKUP&&n!==y.SDKPreviewSurface.SHARED_COLLECTION?K.makeShareMetaserverLoader(s,n,V,Fe,Te,Ae,void 0,$e):void 0,v.makeDownloadActionLoader(s,n,V,d,O,oe,_e)),He.push(Q.snackbarManagerLoader),V){const e=v.makeOpenDropdownActionLoader(s,V),i=v.makeMoveActionLoader(s,V,null==k?void 0:k.currentFQPath,N),t=v.makeCopyActionLoader(s,V,null==k?void 0:k.currentFQPath,N),r=ge.fileViewerFeatureExperiments.btSelfSignEntryPoint,a=ge.fileViewerFeatureExperiments.docsendAnalyticsAddOn,o="v1"===a.toLowerCase()||"v2"===a.toLowerCase()||"control"===a.toLowerCase(),l="V1"===r||"V2"===r||"CONTROL"===r,c=v.makeAddToCollectionActionLoader(s,V),d=v.makeStarredActionLoader(s,V),p=v.makeRenameActionLoader(s,V),g=v.makeDeleteActionLoader(s,V),_=o?v.makeDocsendAnalyticsAddOnLoader(s,V,a):void 0,m=v.makeSignaturesDropdownLoader(s,V,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown,r,ge.fileViewerFeatureExperiments.btSendForSignatureNaming),w=v.makeWaterMarkingActionPluginLoader(s),b=v.makeOpenInDesktopActionLoader(s,V,k),h=v.makeUnzipActionLoader(s,V),S=v.makeVersionHistoryActionLoader(s,V),P=Ee.makeFileConversionsLoader(s,V),E=Ie.makeSendForSignatureLoader(s,V,ge.fileViewerFeatureExperiments.btSendForSignatureNaming,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown),I=l?Ce.makeSelfSignLoader(s,V,r,ge.fileViewerFeatureExperiments.btSignaturesActionbarDropdown):void 0,C=v.makeRestoreActionLoader(J,fe),F=v.makeStarToolbarButtonLoader(s,V),O=v.makeRequestApprovalLoader(s,V,n),T=v.makeCreateVersionLoader(s,V,n),A=y.isFvsdkCropRotateEnabled()?f.makeCropRotateButtonsLoader(V,s,Pe):void 0,x=q.makePdfEditorPluginLoader(s,V,u,n),D=G.makePhotoEditorPluginLoader(s,V,Pe),M="MULTI_APPROVER"===ge.fileViewerFlowExperiments.approvalFlowVariantByUserId[V.id],L="MVP"===ge.fileViewerFlowExperiments.versioningFlowVariantByUserId[V.id]&&n===y.SDKPreviewSurface.BROWSE,j=Re.enable_fvsdk_dynamic_actions?[v.makeMoveActionLoader(s,V,null==k?void 0:k.currentFQPath,N,Pe),t,v.makeRenameActionLoader(s,V,Pe),v.makeDeleteActionLoader(s,V,Pe)]:[];switch(n){case y.SDKPreviewSurface.BROWSE:He.push(e,m,i,t,p,g,Be?w:void 0,y.isFvsdkPdfEditorEnabled()?x:void 0,c,d,S,b,h,P,E,I,_,F,A,M?O:void 0,L?T:void 0,y.isFvsdkPhotoEditorEnabled()?D:void 0);break;case y.SDKPreviewSurface.SEARCH:He.push(e,...j,Be?w:void 0,y.isFvsdkPdfEditorEnabled()?x:void 0,c,d,S,h,P,E,I,_,m,F,A,M?O:void 0,L?T:void 0,y.isFvsdkPhotoEditorEnabled()?D:void 0);break;case y.SDKPreviewSurface.STANDALONE_PREVIEW:case y.SDKPreviewSurface.FILE_LOCKING:He.push(e,...j,Be?w:void 0,y.isFvsdkPdfEditorEnabled()?x:void 0,d,S,h,P,E,I,_,m,C,F,A,M?O:void 0,L?T:void 0,y.isFvsdkPhotoEditorEnabled()?D:void 0);break;case y.SDKPreviewSurface.RECENTS:case y.SDKPreviewSurface.STARRED:case y.SDKPreviewSurface.HOME:He.push(e,...j,Be?w:void 0,y.isFvsdkPdfEditorEnabled()?x:void 0,d,S,h,P,E,I,_,m,C,F,A,M?O:void 0,L?T:void 0,y.isFvsdkPhotoEditorEnabled()?D:void 0);break;case y.SDKPreviewSurface.INBAND_SHARE:case y.SDKPreviewSurface.SHARED_CONTENT_LINK:case y.SDKPreviewSurface.SHARED_LINK:case y.SDKPreviewSurface.HELLOSIGN:case y.SDKPreviewSurface.PHOTOS:He.push(e,Be?w:void 0,y.isFvsdkPdfEditorEnabled()?x:void 0,d,S,h,P,E,I,_,m,C,F,A,M?O:void 0,L?T:void 0,y.isFvsdkPhotoEditorEnabled()?D:void 0);break;case y.SDKPreviewSurface.VERSION_HISTORY:He.push(C);break;case y.SDKPreviewSurface.COLLECTIONS:He.push(e,S,E,I,_,m,M?O:void 0,L?T:void 0);break;case y.SDKPreviewSurface.SHARED_LINK_EMBED:case y.SDKPreviewSurface.COMMERCE:case y.SDKPreviewSurface.TRANSFER:case y.SDKPreviewSurface.SHARED_COLLECTION:case y.SDKPreviewSurface.UNKNOWN:break;case y.SDKPreviewSurface.BACKUP:He.push(e,S,b,v.makeTransferActionLoader(s));break;default:(e=>{throw new Error})()}}return Object.assign(Object.assign({},ze),{plugins:He})};i._FileViewer=i=>{const{file:a,sharedLinkInfo:o,sharePermission:l,shareToken:d,brandingInfo:v,user:f,previewSurface:g,encryptionOptions:_,closeFile:m,flipToNextFile:w,flipToPreviousFile:h,previewCollection:S,fileIndex:P=0,fileCount:I=1,previewContentOnly:C=!1,transparentBackground:F=!1,forceNoToolbar:T=!1,showCloudDocPreview:A=!0,onPreviewSessionInitialized:x,onRestoreRevision:M,onFullscreenChange:L,canRestoreRevision:j,canShowFileFlippers:R,authModalKind:U,containerId:B,usePreloadedMetadata:K,onFileChanged:H,fileViewerId:G,sourceContext:$,ajaxTimerName:Q}=i,X=(({file:e,initialSourceAction:i})=>{const t=r.default.useRef(i===Y.PreviewSourceAction.Visit?O.SourceAction.Visit:O.SourceAction.Click),a=r.default.useRef();return r.default.useEffect(()=>{a.current=e},[e]),void 0!==a.current&&e!==a.current&&(t.current=O.SourceAction.Click),t.current})(i),ee={file:a,sharedLinkInfo:o,sharePermission:l,shareToken:d,encryptionOptions:_},re=r.default.useRef(ee),ae=r.default.createRef(),ne=r.default.useCallback(()=>re.current,[]),se=s.useSelector(e=>u.getOpenActionsForFile(e,a),s.shallowEqual),fe=r.default.useMemo(()=>p.partitionActions(se).cloudEditors,[se]),_e=r.default.useMemo(()=>B&&document.getElementById(B)||void 0,[B]),[we,be]=r.default.useState(!1),he=i.previewSurface===y.SDKPreviewSurface.BROWSE?i.browseContext:void 0,ye=i.previewSurface===y.SDKPreviewSurface.BROWSE?i.browseExceptions:void 0,Pe=i.previewSurface===y.SDKPreviewSurface.BROWSE?i.shouldFocusApproval:void 0,Ee=i.previewSurface===y.SDKPreviewSurface.BROWSE?i.shouldFocusComment:void 0,Ie="activeCommentThreadId"in i&&i.activeCommentThreadId?i.activeCommentThreadId:void 0,Ce=ge.fileViewerFeatureExperiments.comments2UsabilityRevamp&&f?me.getRightRailBlade(f.id):void 0,Oe=i.previewSurface===y.SDKPreviewSurface.SHARED_LINK||i.previewSurface===y.SDKPreviewSurface.SHARED_CONTENT_LINK?i.copyLinkButtonOOBPreviewsVariant:void 0;Oe&&"OFF"!==Oe&&new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/stormcrow/stormcrow_exposure_logger"],i,t)}).then(t.__importStar).then(({StormcrowExposureLogger:e})=>{(new e).logExposure("sharing_copy_link_button_oob_previews",Oe)});const Ae=i.previewSurface===y.SDKPreviewSurface.SHARED_LINK||i.previewSurface===y.SDKPreviewSurface.SHARED_CONTENT_LINK||i.previewSurface===y.SDKPreviewSurface.INBAND_SHARE?i.shareModalOnEditPreviewsVariant:void 0,xe=i.previewSurface===y.SDKPreviewSurface.SHARED_LINK||i.previewSurface===y.SDKPreviewSurface.SHARED_CONTENT_LINK||i.previewSurface===y.SDKPreviewSurface.INBAND_SHARE?i.parsedSharedCopyLink:void 0,De=r.default.useMemo(()=>Te(g,ne,d,be,P,l,m,he,ye,f,S,w,h,M,L,x,v,_,C,F,T,A,R,j,U,0,0,H,Oe,Ae,xe,G,Q),[f,g]),ke=r.default.useRef(null),Me=r.default.useMemo(()=>{var e;const i=null===(e=re.current)||void 0===e?void 0:e.file,t=i&&c.isBrowseFile(i)&&c.isBrowseFile(a)&&i.file_id===a.file_id&&i.fq_path===a.fq_path;if(ke.current&&(we||t))return ke.current;re.current={file:a,sharedLinkInfo:o,sharePermission:l,shareToken:d,encryptionOptions:_};const r=((e,i,t,r,a,n,s,o,l,d)=>{const u=t.map(e=>({displayName:e.description,editorName:"cloud_editor"===e.handler[".tag"]?V.cloudEditorNameToParams(e.handler.editor_name):"",iconUrl:e.icon.url}));if(c.isSharedFile(i)){const e=n?N.getToDropboxOptions(n,s,i,o):[];return{cloud_open_with_buttons:u,download_button:{enable_download_button:!r,enable_open_with_button:!r,can_download:!!n&&N.isDownloadAllowed(n),copy_targets:e.map(({text:e,role:i,isDisabled:t})=>({isDisabled:t,role:i,text:e}))},enable_pass:!!n&&n.canViewMetadataRoles.length>0,enable_print:b.canPrint(n),enable_share_button:!1,enable_open_button:!1,enable_restore_button:l,enable_view_on_dropbox_button:!1}}return{cloud_open_with_buttons:u,download_button:{enable_download_button:!r,enable_open_with_button:!r,can_download:!0,copy_targets:[]},enable_pass:!0,enable_print:!0,enable_share_button:e!==y.SDKPreviewSurface.VERSION_HISTORY,enable_open_button:e!==y.SDKPreviewSurface.VERSION_HISTORY,enable_restore_button:l,enable_view_on_dropbox_button:!1}})(g,a,fe,C,0,l,d,_,!!j);return((e,i,t,r,a,n,s,o,l,d,u,p,v)=>{const f=oe.parseActiveCommentFromUrl(),g=q.getPdfEditorFromUrl();return{fileInfo:{file_id:e.file_id,sj_id:e.sjid,ns_id:e.ns_id,url:null==o?void 0:o.url},fileMetadata:{file_id:e.file_id,file_name:c.getFilename(e),file_path:c.isBrowseFile(e)?e.fq_path:void 0,file_last_modified_date:e.ts?new Date(1e3*e.ts).toISOString():void 0,file_collection_context:{file_index:t,parent_files_count:r}},previewMetadata:e.preview,fileConfig:i,fileSize:e.bytes,supportedPreviewTypes:[...de.DEFAULT_SUPPORTED_PREVIEW_TYPES,...y.INBAND_SUPPORTED_TYPES],sharedLinkInfo:o&&Object.assign(Object.assign({},o),{hasPublicAudienceOrVisibility:!!o.hasPublicAudienceOrVisibility}),sourceSession:{source_action:n,source_context:a,page_start_ts:performance.timing.navigationStart,was_flipped:s},pluginParams:{shouldFocusApproval:l,shouldFocusComment:d,threadId:u,commentId:f},defaultRightRailPlugin:l||d||u||f?ce.COMMENTS_PLUGIN_ID:p||k.INFO_BLADE_PLUGIN_ID,activeEditPlugin:g?q.PDF_EDITOR_PLUGIN_ID:void 0,brandingInfo:v}})(a,r,P,I,$,X,!1,o,Pe,Ee,Ie,Ce,v)},[a]);ke.current=Me,r.default.useEffect(()=>{if(g!==y.SDKPreviewSurface.VERSION_HISTORY)return ie.hideElementsBehindFileViewer(),ie.showElementsBehindFileViewer},[]),r.default.useEffect(()=>{const e=document.title;return()=>{document.title=e}},[]);const Le=c.getFilename(a);r.default.useEffect(()=>{document.title=Le},[Le]),r.default.useEffect(()=>{const e=ue.Snackbar.manager;ue.Snackbar.manager=ae.current;const i=Z.default.getScope();return Z.default.setScope("fvsdk_scope"),J.scroll_lock_document(),()=>{J.scroll_unlock_document(),Z.default.setScope(i),ue.Snackbar.manager=e}},[]);const je=r.default.useRef(null),Re=r.default.useCallback(e=>{je.current=e;const i=["dragenter","dragover","dragleave","drop"],t=e=>{e.stopPropagation(),e.preventDefault()};for(const r of i)null==e||e.addEventListener(r,t)},[]),Ne=r.default.useMemo(()=>({onHide:e})=>r.default.createElement(le.OpenInAppHeader,{activePreviewFile:ee,user:f,onHide:e}),[a,f]),Ve=g===y.SDKPreviewSurface.SHARED_LINK||g===y.SDKPreviewSurface.SHARED_CONTENT_LINK||g===y.SDKPreviewSurface.SHARED_COLLECTION,Ue=r.default.useMemo(()=>{if(ve.is_supported_mobile_browser())return r.default.createElement(Fe.LazyMobileFooter,{user:f,isSharedLink:Ve,activePreviewFile:ee,authModalKind:U})},[f,ee]),Be=r.default.useMemo(()=>{if(ve.is_supported_mobile_browser())return r.default.createElement(Fe.LazyMobileHeader,{user:f,isSharedLink:Ve,activePreviewFile:ee,authModalKind:U,browseContext:he,onFileChanged:H})},[f,ee]);return r.default.createElement("div",{ref:Re,className:n.default("fvsdk-container",{"fvsdk-embed-viewport":!!_e})},r.default.createElement(pe.SnackbarManager,{ref:ae,getParentElement:()=>je.current,useDigSnackbars:!0}),r.default.createElement(z.BrandingModalController,{brandingInfo:v,sharedLinkInfo:o,closeButtonText:E.intl.formatMessage({id:"D/tUrq",defaultMessage:"View file"})}),r.default.createElement(Se.FileViewer,Object.assign({},De,{className:D.FVSDK_MOUNT_POINT,id:D.FVSDK_MOUNT_POINT,viewport:_e,initializeOpts:Me,header:Ne,mobileFooter:Ue,mobileHeader:Be})),r.default.createElement(W.UpsellDialogManager,{file:a,user:f}),r.default.createElement(te.AsyncReplayDialog,{file:a,user:f}))},i._FileViewer.displayName="_FileViewer",i._FileViewer.displayName="_FileViewer";const Ae=e=>{const t=r.default.useMemo(()=>fe.UUID.v4({allowInsecure:!0}),[]),a=r.default.useMemo(()=>fe.UUID.v4({allowInsecure:!0}),[]),[n,s]=r.default.useState(!1),o=r.default.useCallback(()=>{s(!0)},[s]);return"open_in_app_data"in e.file&&e.file.open_in_app_data&&!n&&!e.hideOpenInAppInterstitial?r.default.createElement(se.FvsdkAppDownloadInterstitial,{file:e.file,filePreviewSessionId:t,fileViewerSessionId:a,onDismiss:o,openInAppData:e.file.open_in_app_data,sharedLinkInfo:e.sharedLinkInfo,fileViewOrigin:e.fileViewOrigin}):r.default.createElement(i._FileViewer,Object.assign({},e,{fileViewerId:a}))};Ae.displayName="FileViewerWithInterstitial";const xe=_e.getStore(),De=e=>(Pe.PreviewsEventLogger.mark(Pe.PreviewsTimingEvents.SDK_FILE_VIEWER_CODE_START),r.default.createElement(s.Provider,{store:xe},r.default.createElement(Ae,Object.assign({},e))));De.displayName="FileViewerWithProvider",De.displayName="FileViewerWithProvider";const ke=d.requireCssWithComponent(De,["/static/js/typescript/libraries/file-viewer/src/index.web-vflPY-XqF.css","/static/js/typescript/libraries/comments2/src/index-vfluL38WI.css","/static/css/dig-components/index.web-vflkNfl3z.css","/static/css/preview/sdk_file_viewer-vflpeOsUB.css","/static/js/typescript/component_libraries/files_components/src/index.web-vflGYEIVv.css","/static/js/dig-experimental/index.web-vfl_m6TBk.css","/static/js/typescript/component_libraries/retrieval-components/src/index.web-vfl0j56rY.css","/static/js/typescript/component_libraries/flows/src/index.web-vfliwZLKp.css","/static/js/typescript/component_libraries/photos/src/index.web-vfluQfdZI.css","/static/css/dig-illustrations/index.web-vflIWl-Ta.css","/static/css/spectrum/index.web-vfliw9181.css","/static/css/font_paper_atlas_grotesk-vflEbKJso.css"]);i.FileViewer=ke,ke.displayName="FileViewer"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/full_screen",["require","exports","metaserver/static/js/file_viewer/sdk_file_viewer/full_screen_helpers"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFullScreenClient=void 0,i.makeFullScreenClient=function(e){return{enterFullScreen:(i,r)=>{r||t.enterFullScreen({onExitFunction:i}),e&&e(!0)},exitFullScreen:i=>{i||t.exitFullScreenWithoutCallback(),null==e||e(!1)}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/navigation",["require","exports","metaserver/static/js/cloud_docs/types","metaserver/static/js/modules/clean/react/extensions/cloud_docs_compat","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/previews/util"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeSharedCollectionNavigationClient=i.makeVersionHistoryNavigationClient=i.makeBrowseNavigationClient=i.makeInbandShareNavigationClient=void 0,i.makeInbandShareNavigationClient=function(e,i,n,s,o){return{openWithCloudEditor:(e,i,n)=>{const s=t.UserActionSourceType.WEB_PREVIEW,o=r.cloudEditorNameToParams(n);a.openWithCloudEditor({fileId:e},i,o,!1,s)},closeViewer:e?()=>{e()}:void 0,flipToNextFile:i,showAuthModal:o,flipToPreviousFile:n,restorePreviousVersion:s}},i.makeBrowseNavigationClient=function(e,i,t,r,a,s){return{closeViewer:t?()=>{t()}:void 0,openVersionHistory:()=>{const t=i();n.redirectToVersionHistory(t.file,e)},flipToNextFile:r,flipToPreviousFile:a,restorePreviousVersion:s}},i.makeVersionHistoryNavigationClient=function(e,i,t,r,a,n){return{closeViewer:t?()=>{t()}:void 0,flipToNextFile:r,flipToPreviousFile:a,restorePreviousVersion:n}},i.makeSharedCollectionNavigationClient=function(e,i,t){return{closeViewer:e?()=>{e()}:void 0,flipToNextFile:i,flipToPreviousFile:t}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/preferences",["require","exports","metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePreferencesClient=void 0,i.makePreferencesClient=function(e){return e?(function(e){return{rightRail:{setCollapsedState:({isCollapsed:i})=>{t.setRightRailIsCollapsed(e.id,i)},getCollapsedState:()=>t.getRightRailIsCollapsed(e.id),setBladeState:({bladeId:i})=>{t.setRightRailBlade(e.id,i)},getBladeState:()=>t.getRightRailBlade(e.id)},docSidebar:{setCollapsedState:({isCollapsed:i})=>{t.setDocSidebarIsCollapsed(e.id,i)},getCollapsedState:()=>t.getDocSidebarIsCollapsed(e.id)},video:{getVolumeState:()=>t.getVolumeState(e.id),setVolumeState:i=>t.setVolumeState(e.id,i),getMutedState:()=>t.getMutedState(e.id),setMuteState:i=>t.setMutedState(e.id,i)}}})(e):{rightRail:{setCollapsedState:()=>{},getCollapsedState:()=>!0,setBladeState:()=>{},getBladeState:()=>{}},docSidebar:{setCollapsedState:({})=>{},getCollapsedState:()=>!0}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/preview_logger",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/perf_tools/web_timing_utils","metaserver/static/js/metrics/index","typescript/libraries/file-viewer/src/core/logging/constants","apex-metrics/index","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/edison/edison"],(function(e,i,t,r,a,n,s,o,l,c,d){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.logDuration=i.logVideo=i.logEvent=void 0,r=t.__importStar(r),l=t.__importStar(l);const u=[s.SessionEventType.FilePreviewSupportConfirmed,s.SessionEventType.FilePreviewSupportDenied,s.SessionEventType.FilePreviewDownloadAttempted,s.SessionEventType.FilePreviewDownloadSucceeded,s.SessionEventType.FilePreviewDownloadFailed,s.SessionEventType.FilePreviewRenderSucceeded,s.SessionEventType.FilePreviewRenderFailed,s.SessionEventType.FilePreviewSessionEnded],p=e=>Object.assign(Object.assign(Object.assign({device_type:e.device_type},e.extra.source_context&&{source_context:e.extra.source_context}),e.extra.preview_type&&{preview_type:e.extra.preview_type}),e.extra.action&&{action:e.extra.action}),v=(e,t)=>{n.getMetricsReporter().createStats({ns:"web_previews",name:e},Object.assign(Object.assign({},p(t)),{deployment:l.YAPS_DEPLOYMENT})).record(1),u.includes(e)&&((e,i)=>{const t=i.extra.file_preview_timeline?JSON.parse(i.extra.file_preview_timeline):{};if(s.SessionEventType.FilePreviewAttemptStarted in t&&e in t){const r=t[e]-t[s.SessionEventType.FilePreviewAttemptStarted];r>0&&n.getMetricsReporter().createStats({ns:"web_previews",name:"time_from_attempt_ms"},Object.assign(Object.assign({},p(i)),{event_name:e,deployment:l.YAPS_DEPLOYMENT})).recordDuration(r,o.TimeUnit.MILLISECONDS)}})(e,t),((e,t)=>{if(e===s.SessionEventType.FilePreviewAttemptStarted&&t.extra.source_action===s.SourceAction.Visit&&window.performance){const e=Date.now()-window.performance.timing.navigationStart;e>0&&i.logDuration({eventName:"time_to_preview_attempt_from_load_ms",durationInMs:e,session:t})}})(e,t)};i.logEvent=(e,i)=>{const t=i.extra.file_preview_timeline?JSON.stringify(Object.assign({},...Object.entries(JSON.parse(i.extra.file_preview_timeline)).map(([e,i])=>({[e+"_ts"]:i})))):void 0,a={preconnect_headers:d.Edison.initialized()?d.Edison.isPreviewsPreconnectEnabled().toString():"false"},n={device_type:i.device_type,event_name:e,extra:JSON.stringify(Object.assign(Object.assign(Object.assign({},a),i.extra),{request_id:c.REQUEST_ID})),file_viewer_session_id:i.file_viewer_session_id,file_preview_session_id:i.file_preview_session_id,file_ns_id:i.ns_id,file_sjid:i.sj_id,file_preview_timeline:t,file_preview_size:i.file_preview_size};r.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:n}),v(e,i)};i.logVideo=(e,i)=>{const{file_preview_session_id:t,video_format:n,video_duration_seconds:s,video_truncated:o,ns_id:l,sj_id:c,extra:d}=i,u={event_name:e,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:t,video_format:n,video_duration_seconds:s,video_truncated:o,ns_id:l,sj_id:c,extra:JSON.stringify(d)};r.SilentBackgroundBeaconRequest({url:"/log/video_preview",data:u})};i.logDuration=({eventName:e,durationInMs:i,session:t,tags:s={},shouldLogToHive:l})=>{if(n.getMetricsReporter().createStats({ns:"web_previews",name:e},Object.assign(Object.assign({},s),t&&p(t))).recordDuration(i,o.TimeUnit.MILLISECONDS),l){const n={event_name:e,duration:i.toString(),preconnect_headers:d.Edison.initialized()?d.Edison.isPreviewsPreconnectEnabled().toString():"false"};if(t){const e={event_name:"user_timing",device_type:t.device_type,client_timestamp_ms:a.WebTimingUtil.getNow(),file_preview_session_id:t.file_preview_session_id,file_viewer_session_id:t.file_viewer_session_id,file_preview_size:t.file_preview_size,file_ns_id:t.ns_id,file_sjid:t.sj_id,extra:JSON.stringify(Object.assign(Object.assign({},t.extra),n))};r.SilentBackgroundBeaconRequest({url:"/log/file_preview",data:e})}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/print",["require","exports","tslib","typescript/libraries/file-viewer/src/plugins/types","metaserver/static/js/modules/clean/referrer_cleansing_redirect","metaserver/static/js/modules/core/i18n"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.canPrint=i.makePrintClient=void 0,a=t.__importStar(a),i.makePrintClient=function(){return{print:(e,i)=>{var t;i===r.PreviewType.SsrDoc?(t=e,a.safe_open_tab_and_redirect(t)):i===r.PreviewType.Image&&(function(e){const i=window.open("about:blank");if(!i)throw new Error(n.intl.formatMessage({id:"X9xK6f",defaultMessage:"Could not open new window"}));window.setTimeout(()=>{const t=i.document.createElement("style");t.innerHTML="\n      @page { margin: 0;}\n      img { max-width: 100%; max-height: 100%}\n    ",i.document.head.appendChild(t);const r=i.document.createElement("img");r.src=e,r.onload=()=>{i.print()},r.onerror=()=>{i.close()},i.document.body.appendChild(r)},50)})(e)}}},i.canPrint=function(e){return!(e&&e.canPrintRoles&&0===e.canPrintRoles.length)}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,i,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return i[t]}})}:function(e,i,t,r){void 0===r&&(r=t),e[r]=i[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(i,e,t);return __setModuleDefault(i,e),i};define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/async_replay_dialog",["require","exports","metaserver/static/js/async/loadable"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AsyncReplayDialog=void 0,i.AsyncReplayDialog=t.Loadable({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog"],i,t)}).then(__importStar).then(({ReplayDialog:e})=>e)})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/modules/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog","metaserver/static/js/file_viewer/sdk_file_viewer/replay_prompt/replay_dialog_api","metaserver/static/js/file_store/utils","metaserver/static/js/browse/constants","metaserver/static/js/campaigns/campaign_events_api"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ReplayDialog=void 0,r=t.__importStar(r);const p=({user:e,file:i})=>{const[s,p]=r.useState(!1),[v,f]=r.useState(void 0);r.useEffect(()=>{t.__awaiter(void 0,void 0,void 0,(function*(){var t;if(e&&i&&c.isBrowseFile(i)&&("VIDEO"===d.ExtensionCategories[c.getExtension(i)]||"AUDIO"===d.ExtensionCategories[c.getExtension(i)])){const i=yield l.shouldShowReplayDialog(e);p(!!i.show_entrypoint&&i.show_entrypoint),(null===(t=i.campaign_context)||void 0===t?void 0:t.campaign_impression_id)&&f(u.createMegaphoneCampaignImpressionContext(i.campaign_context.campaign_impression_id,i.campaign_context.campaign_id?`${i.campaign_context.campaign_id}`:void 0,i.campaign_context.campaign_variant_id?`${i.campaign_context.campaign_variant_id}`:void 0))}}))},[]),r.useEffect(()=>{e&&s&&(l.logReplayDialogAction(e,"impression",0),v&&u.logCampaignImpression(v))},[s]);const g=i?`https://replay.dropbox.com/project/creating/${i.file_id}?creationSource=dropbox_previews_prompt`:"https://replay.dropbox.com/?login=true";return s?r.createElement(o.UpsellDialog,{afterAccept:()=>{e&&l.logReplayDialogAction(e,"acknowledgement",0),v&&u.logCampaignClick(v)},afterDecline:()=>{e&&l.logReplayDialogAction(e,"dismissal",0),v&&u.logCampaignDismissed(v)},uxaPrefix:"replay-fvsdk-prompt",titleText:i&&c.isBrowseFile(i)&&"AUDIO"===d.ExtensionCategories[c.getExtension(i)]?n.intl.formatMessage({id:"7iOXVy",defaultMessage:"Make audio production with remote teams easier"}):n.intl.formatMessage({id:"vL51vF",defaultMessage:"Fast-track video reviews with Dropbox Replay, now in beta"}),bodyContent:(()=>{const e=i&&c.isBrowseFile(i)&&"AUDIO"===d.ExtensionCategories[c.getExtension(i)]?r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},n.intl.formatMessage({id:"o8puBZ",defaultMessage:"Try Dropbox Replay, an easier way to collaborate on audio:"})):r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"p",isBold:!0},n.intl.formatMessage({id:"abiqtR",defaultMessage:"Streamline your approval process:"}));return r.createElement(r.Fragment,null,e,r.createElement(a.Text,{className:"replay-dialog-subtext",tagName:"div"},r.createElement("ul",{className:"replay-dialog-list",style:{paddingInlineStart:"20px"}},i&&c.isBrowseFile(i)&&"AUDIO"===d.ExtensionCategories[c.getExtension(i)]?r.createElement(r.Fragment,null,r.createElement("li",null,n.intl.formatMessage({id:"nV0yPL",defaultMessage:"Provide time-code accurate comments on audio tracks"})),r.createElement("li",null,n.intl.formatMessage({id:"FkLJx9",defaultMessage:"Collect feedback from multiple collaborators in one place"})),r.createElement("li",null,n.intl.formatMessage({id:"lWK8l2",defaultMessage:"Streamline the approval process"}))," "):r.createElement(r.Fragment,null,r.createElement("li",null,n.intl.formatMessage({id:"CNEbQT",defaultMessage:"Share video with HD-quality playback"})),r.createElement("li",null,n.intl.formatMessage({id:"TgIEQQ",defaultMessage:"See frame-accurate comments in one place"})),r.createElement("li",null,n.intl.formatMessage({id:"7NNqco",defaultMessage:"Seamlessly connect tools like Adobe Premiere Pro"}))))))})(),acceptText:n.intl.formatMessage({id:"lwBIQ/",defaultMessage:"Open with Replay"}),declineText:n.intl.formatMessage({id:"t97mKK",defaultMessage:"Not now"}),redirectUrl:g}):null};p.displayName="UnstyledReplayDialog",i.ReplayDialog=s.requireCssWithComponent(p,["/static/css/file_viewer/upsell_dialog-vfluIgJJw.css"])})),define("metaserver/static/js/file_viewer/sdk_file_viewer/report_exception",["require","exports","tslib","metaserver/static/js/modules/core/exception"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeReportExceptionClient=void 0,r=t.__importStar(r),i.makeReportExceptionClient=function(){return{reportException:(e,i,t)=>r.reportException({err:e,severity:t?"critical":"non-critical",tags:["file-viewer",i]})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/snackbar_manager_plugin",["require","exports","metaserver/static/js/modules/clean/react/snackbar"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.snackbarManagerLoader=i.SNACKBAR_MANAGER_PLUGIN_ID=void 0,i.SNACKBAR_MANAGER_PLUGIN_ID="SNACKBAR_MANAGER",i.snackbarManagerLoader={pluginId:i.SNACKBAR_MANAGER_PLUGIN_ID,load:(e,i)=>Promise.resolve({isSnackbarVisible:()=>{var e;return!!(null===(e=t.Snackbar.manager)||void 0===e?void 0:e.state.displayedSnackbar)},lifecycle:{}})}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/star_plugin",["require","exports","tslib","react","react-redux","dig-components/buttons","dig-components/tooltips","dig-components/icons","metaserver/static/js/file_viewer/sdk_file_viewer/hooks","metaserver/static/js/starred/redux/store"],(function(e,i,t,r,a,n,s,o,l,c){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeStarToolbarButtonLoader=void 0,r=t.__importDefault(r);const d=e=>{var{className:i}=e,a=t.__rest(e,["className"]);const{message:c,iconSrc:d,handleClick:u}=l.useStarControl(a),{file:p}=a.getActiveFile();return l.isStarringEnabled(p)?r.default.createElement(s.Tooltip,{title:c,shouldCloseOnClick:!0},r.default.createElement(n.IconButton,{variant:"transparent",onClick:u,className:i,"aria-label":c,inverse:!0},r.default.createElement(o.UIIcon,{src:d}))):null};d.displayName="_StarButton";const u=e=>{const i=c.getStoreForStarred();return r.default.createElement(a.Provider,{store:i},r.default.createElement(d,Object.assign({},e)))};u.displayName="StarButton",u.displayName="StarButton";i.makeStarToolbarButtonLoader=(e,i)=>class{constructor(){this.identifier="star",this.lifecycle={},this.toolbarUI=({className:t})=>r.default.createElement(u,{getActiveFile:e,user:i,className:t})}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/toolbar_plugins/crop_rotate_plugin",["require","exports","tslib","metaserver/static/js/photos/ui/preview_crop_and_rotate/show-crop-rotate-plugin","metaserver/static/js/file_store/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeCropRotateButtonsLoader=void 0;i.makeCropRotateButtonsLoader=(i,n,s)=>({pluginId:"CROP_ROTATE_BUTTON",isEnabled:()=>{const{file:e,sharePermission:i}=n(),t=a.getExtension(e);return r.showCropRotatePlugin(t,e,i)},load:(r,a)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{loadCropRotatePlugin:r}=yield new Promise((i,t)=>{e(["metaserver/static/js/photos/ui/preview_crop_and_rotate/crop_rotate_exports"],i,t)}).then(t.__importStar);return r("CROP_ROTATE_BUTTON",i,a,n,s)}))})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog_manager",["require","exports","tslib","react","metaserver/static/js/components/ui/css","metaserver/static/js/file_viewer/sdk_file_viewer/upsell/use_show_upsell_dialogs","metaserver/static/js/async/loadable"],(function(e,i,t,r,a,n,s){"use strict";var o;Object.defineProperty(i,"__esModule",{value:!0}),i.UpsellDialogManager=void 0,r=t.__importStar(r),(function(e){e[e.professionalEsign=0]="professionalEsign",e[e.docsend=1]="docsend"})(o||(o={}));const l=({user:e,file:i})=>{const{proEsign:{showUpsell:t,campaignContext:a,proEsignSpaceCopy:s,stormcrowVariant:l},docsend:{showUpsell:u,campaignContext:p}}=n.useShowUpsellDialogs(null==e?void 0:e.id,i);let v=void 0;return t?v=o.professionalEsign:u&&(v=o.docsend),r.createElement(r.Fragment,null,v===o.docsend&&r.createElement(d,{user:e,campaignContext:p}),v===o.professionalEsign&&r.createElement(c,{user:e,file:i,campaignContext:a,proEsignSpaceCopy:s,stormcrowVariant:l}))};l.displayName="UnstyledUpsellDialogManager",i.UpsellDialogManager=a.requireCssWithComponent(l,["/static/css/file_viewer/upsell_dialog-vfluIgJJw.css"]);const c=s.Loadable({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/upsell/esign_upsell_dialog"],i,t)}).then(t.__importStar).then(({EsignUpsellDialog:e})=>e)}),d=s.Loadable({loader:()=>new Promise((i,t)=>{e(["metaserver/static/js/file_viewer/sdk_file_viewer/upsell/docsend_upsell_dialog"],i,t)}).then(t.__importStar).then(({DocsendUpsellDialog:e})=>e)})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog_user_actions_tracker",["require","exports","metaserver/static/js/growth/user_action/tracker"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DocsendUpsellUserActionTracker=i.DocsendUpsellUserAction=i.EsignUpsellUserActionTracker=i.EsignUpsellUserAction=void 0,(function(e){e.DISMISS="dismiss",e.SHOW="show"})(i.EsignUpsellUserAction||(i.EsignUpsellUserAction={}));class r extends t.GrowthUserActionTracker{constructor(){super(...arguments),this.project="pg_sdk_file_viewer_esign_upsell"}}i.EsignUpsellUserActionTracker=r,(function(e){e.SHOW="show"})(i.DocsendUpsellUserAction||(i.DocsendUpsellUserAction={}));class a extends t.GrowthUserActionTracker{constructor(){super(...arguments),this.project="pg_sdk_file_viewer_docsend_upsell"}}i.DocsendUpsellUserActionTracker=a})),define("metaserver/static/js/file_viewer/sdk_file_viewer/upsell/use_show_upsell_dialogs",["require","exports","tslib","react","metaserver/static/js/api_v2/user_client","metaserver/static/js/file_viewer/sdk_file_viewer/upsell/upsell_dialog_user_actions_tracker","metaserver/static/js/campaigns/campaign_events_api"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.trackDismissAction=i.useShowUpsellDialogs=i.initialState=void 0,i.initialState={proEsign:{showUpsell:!1,stormcrowVariant:"OFF",productPlanType:"UNKNOWN",campaignContext:void 0,proEsignSpaceCopy:""},docsend:{showUpsell:!1,stormcrowVariant:"OFF",campaignContext:void 0}};const o=["pdf","doc","docx"],l=["pdf","docx","doc","pptx","ppt","xlsx","xls","key"];function c(e,i){var t,r,a,n,s,o;switch(i.type){case"showProEsignCampaign":return Object.assign(Object.assign({},e),{proEsign:Object.assign(Object.assign({},e.proEsign),{showUpsell:!0,stormcrowVariant:null===(t=i.proEsignPayload)||void 0===t?void 0:t.stormcrowVariant,productPlanType:null===(r=i.proEsignPayload)||void 0===r?void 0:r.productPlanType,campaignContext:null===(a=i.proEsignPayload)||void 0===a?void 0:a.campaignContext,proEsignSpaceCopy:null===(n=i.proEsignPayload)||void 0===n?void 0:n.proEsignSpaceCopy})});case"showDocsendUpsellCampaign":return Object.assign(Object.assign({},e),{docsend:Object.assign(Object.assign({},e.docsend),{showUpsell:!0,stormcrowVariant:null===(s=i.docsendPayload)||void 0===s?void 0:s.stormcrowVariant,campaignContext:null===(o=i.docsendPayload)||void 0===o?void 0:o.campaignContext})});default:return e}}i.useShowUpsellDialogs=function(e,t){const[n,u]=r.useReducer(c,i.initialState);return r.useEffect(()=>{let i=!0;if(void 0!==e&&void 0!==t){if(!t.ext)return;const r=t.ext.slice(1);Promise.all([o.includes(r)?d((new a.UserApiV2Client).ns("growth_bundling").rpc("show_pro_esign_upsell",{sjid:t.sjid,ns_id:t.ns_id,file_ext:t.ext.slice(1),surface:"sdk_file_viewer"},{subjectUserId:e})):Promise.resolve(),l.includes(r)?d((new a.UserApiV2Client).ns("growth_bundling").rpc("show_docsend_upsell",{sjid:t.sjid,ns_id:t.ns_id,file_ext:t.ext.slice(1)},{subjectUserId:e})):Promise.resolve()]).then(([e,t])=>{var r,a,n;const o=e&&e.value,l=t&&t.value;i&&(o&&o.show_campaign&&u({type:"showProEsignCampaign",proEsignPayload:{showUpsell:!0,stormcrowVariant:o.variant||"",productPlanType:o.product_plan_type||"",campaignContext:void 0!==(null===(r=o.campaign_context)||void 0===r?void 0:r.campaign_impression_id)?s.createMegaphoneCampaignImpressionContext(o.campaign_context.campaign_impression_id,o.campaign_context.campaign_id,o.campaign_context.campaign_variant_id):void 0,proEsignSpaceCopy:(null===(a=o.rcs_copy)||void 0===a?void 0:a.pro_esign_space)||""}}),l&&l.show_campaign&&u({type:"showDocsendUpsellCampaign",docsendPayload:{showUpsell:!0,stormcrowVariant:l.variant||"",campaignContext:void 0!==(null===(n=l.campaign_context)||void 0===n?void 0:n.campaign_impression_id)?s.createMegaphoneCampaignImpressionContext(l.campaign_context.campaign_impression_id,l.campaign_context.campaign_id,l.campaign_context.campaign_variant_id):void 0}}))})}return()=>{i=!1}},[e,t]),n};function d(e){return t.__awaiter(this,void 0,void 0,(function*(){try{return{value:yield e,failed:!1}}catch(e){return{failed:!0}}}))}i.trackDismissAction=e=>{if(!e)return;new n.EsignUpsellUserActionTracker(e).track(n.EsignUpsellUserAction.DISMISS)}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/url",["require","exports","tslib","metaserver/static/js/modules/clean/history","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/core/uri","metaserver/static/js/modules/clean/browse_uri_interface","metaserver/static/js/modules/clean/referrer_cleansing_redirect"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeUrlClient=void 0,r=t.__importDefault(r),a=t.__importStar(a),o=t.__importStar(o),i.makeUrlClient=function(e){return{getQueryStringParameter(e){const i=a.get_uri().getQuery();return e in i?i[e]:null},setQueryStringParameter(e,i){const t=r.default.get_uri();null!==i?t.updateQuery(e,i):t.removeQuery(e),r.default.push_state(t.getPath(),t.getQuery())},onQueryStringParameterChange(e,i){const t=`/${a.get_uri().getPath().split("/")[1]}`;r.default.add_callback(t,(t,r)=>{let a=null;if(e in r){const i=r[e];a=i instanceof Array?i.length?i[0]:null:null!=i?i:null}i(e,a)},!0)},openFile(i){const t=s.get_browse_root(e)+n.URI.encode_parts(i);a.replace_location(t)},redirect(e,i){i?o.safe_open_tab_and_redirect(e):o.redirect(e)}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/add_to_collection_plugin",["require","exports","tslib","react","metaserver/static/js/modules/core/i18n","dig-components/icons","metaserver/static/js/action_bar/file_actions/portable/utils","dig-components/icons/src","metaserver/static/js/file_viewer/sdk_file_viewer/experiments","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeAddToCollectionActionLoader=void 0,r=t.__importDefault(r);i.makeAddToCollectionActionLoader=(i,p)=>({actionDefinitions:()=>{const{file:p}=i();return c.isLiveFile(p)&&l.fileViewerFeatureExperiments.enableAddToCollection?{alwaysInOverflow:[[s.makePluginActionDefinition({label:a.intl.formatMessage(d.ADD_TO_COLLECTION_STRING),icon:r.default.createElement(n.UIIcon,{src:o.AddToCollectionLine}),id:u.ADD_TO_COLLECTION_ACTION_PLUGIN_ID,action:()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{showCollectionSaverModal:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/collections/shared/index"],i,t)}).then(t.__importStar);i({fileIds:[p.file_id],surface:"preview"})}))})]]}:{}}})}));__createBinding=this&&this.__createBinding||(Object.create?function(e,i,t,r){void 0===r&&(r=t),Object.defineProperty(e,r,{enumerable:!0,get:function(){return i[t]}})}:function(e,i,t,r){void 0===r&&(r=t),e[r]=i[t]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,i){Object.defineProperty(e,"default",{enumerable:!0,value:i})}:function(e,i){e.default=i}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var i={};if(null!=e)for(var t in e)"default"!==t&&Object.prototype.hasOwnProperty.call(e,t)&&__createBinding(i,e,t);return __setModuleDefault(i,e),i};define("metaserver/static/js/modules/clean/react/file_viewer/share_helpers",["require","exports","metaserver/static/js/file_store/utils"],(function(e,i,t){"use strict";function r(e,i,r){const a={filename:t.getFilename(e),isFolder:!1,nsId:e.ns_id,origin:r,sjid:e.sjid,url:i||void 0,fqPath:""};return t.isBrowseFile(e)&&(a.fqPath=e.fq_path),null!=e.file_id&&(a.fileId=e.file_id),a}Object.defineProperty(i,"__esModule",{value:!0}),i.share=i.getDataForContentInfo=void 0,i.getDataForContentInfo=r,i.share=function(i,t,a,n,s={}){new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/sharing/share_modal_util"],i,t)}).then(__importStar).then(e=>{const o=r(i,a,n);e.showShareModal(t,o,s)})}})),define("metaserver/static/js/integrations/ui/pdf_editor/plugin/loader",["require","exports","tslib","metaserver/static/js/modules/clean/history","metaserver/static/js/integrations/ui/pdf_editor/plugin/show_plugin_util","metaserver/static/js/file_viewer/sdk_file_viewer/experiments"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPdfEditorFromUrl=i.makePdfEditorPluginLoader=i.PDF_EDITOR_PLUGIN_ID=void 0,r=t.__importDefault(r),i.PDF_EDITOR_PLUGIN_ID="pdf_edit_plugin",i.makePdfEditorPluginLoader=function(r,o,l,c){return{pluginId:i.PDF_EDITOR_PLUGIN_ID,isEnabled:()=>{const{file:e,sharePermission:i}=r();return a.showEditPlugin(e,i)},load:(i,a)=>t.__awaiter(this,void 0,void 0,(function*(){const{PdfEditorPluginBase:d,generateNonceSubdomain:u}=yield new Promise((i,t)=>{e(["metaserver/static/js/integrations/ui/pdf_editor/plugin/plugin_entry"],i,t)}).then(t.__importStar),p=yield u();if(n.fileViewerFlowExperiments.approvalPdfEditingToastByUserId[o.id]){const{showPdfEditingToast:i}=yield new Promise((i,t)=>{e(["metaserver/static/js/flows/approval/pdf_editing_toast"],i,t)}).then(t.__importStar);i(o,r().file,c,a)}return new d(i,a,p,r,o,l,s)}))}},i.getPdfEditorFromUrl=function(){return"1"===r.default.get_uri().getQuery().edit};const s=e=>{e.logUserAction("open_with_pdf_editor","title_bar_main")}})),define("metaserver/static/js/pass/plugin/loader",["require","exports","tslib","react","metaserver/static/js/file_viewer_sidebar/widgets/seen_states","metaserver/static/js/size_class/constants","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePASSMetaserverLoader=void 0,r=t.__importDefault(r);i.makePASSMetaserverLoader=(e,i,t)=>({pluginId:"PASS",load:o=>Promise.resolve(new class{constructor(){this.identifier="PASS",this.lifecycle={},this.titleBarUI={Component:()=>{if(i===s.SDKPreviewSurface.VERSION_HISTORY)return null;const o=e(),l=n.SizeClass.Medium;return r.default.createElement(a.AsyncSeenStatesProviderWrapper,{user:t||null,file:o.file,source:"fileViewer",sharedLinkInfo:o.sharedLinkInfo,sizeClass:l,isSeenStatesEnabled:!0,isViewMetadataDisabled:!1,soloAccessText:!0},r.default.createElement(a.AsyncSeenStateFacepileConsumer,{isCollapsed:!1}))}}}})})})),define("metaserver/static/js/photo-editor/plugin/loader",["require","exports","tslib","metaserver/static/js/photo-editor/plugin/show-edit-plugin"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePhotoEditorPluginLoader=i.PHOTO_EDITOR_PLUGIN_ID=void 0,i.PHOTO_EDITOR_PLUGIN_ID="photo_edit_plugin",i.makePhotoEditorPluginLoader=function(a,n,s){return{pluginId:i.PHOTO_EDITOR_PLUGIN_ID,isEnabled:()=>{const{file:e}=a();return r.showEditPlugin(e)},load:(i,r)=>t.__awaiter(this,void 0,void 0,(function*(){const{PhotoEditorPluginBase:o}=yield new Promise((i,t)=>{e(["metaserver/static/js/photo-editor/plugin/plugin"],i,t)}).then(t.__importStar);return new o(i,r,a,n,(...e)=>null==s?void 0:s(...e))}))}}})),define("metaserver/static/js/photo-editor/plugin/show-edit-plugin",["require","exports","metaserver/static/js/file_store/utils","metaserver/static/js/modules/core/browser_detection"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.showEditPlugin=i.VALID_PHOTO_FILE_EXTENSIONS=void 0,i.VALID_PHOTO_FILE_EXTENSIONS=new Set(["jpg","jpeg","png"]),i.showEditPlugin=function(e){return!(!e||!i.VALID_PHOTO_FILE_EXTENSIONS.has(t.getExtension(e))||r.is_mobile_or_tablet(navigator.userAgent))}})),define("metaserver/static/js/photos/ui/preview_crop_and_rotate/show-crop-rotate-plugin",["require","exports","metaserver/static/js/modules/core/browser_detection","typescript/component_libraries/photos/src/preview-photo-editor/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.showCropRotatePlugin=void 0;i.showCropRotatePlugin=(e,i,a)=>!!i&&((!a||0!==a.canDownloadRoles.length)&&((!i||-1!==r.imageTypeAllowed.indexOf(e))&&!t.is_mobile_or_tablet(navigator.userAgent)))})),define("typescript/component_libraries/photos/src/preview-photo-editor/types",["require","exports"],(function(e,i){"use strict";var t,r;Object.defineProperty(i,"__esModule",{value:!0}),i.getMimeTypeByExt=i.imageTypeAllowed=i.ImageExtension=i.ImageMimeTypes=void 0,(t=i.ImageMimeTypes||(i.ImageMimeTypes={})).JPEG="image/jpeg",t.PNG="image/png",(r=i.ImageExtension||(i.ImageExtension={})).JPEG="jpeg",r.JPG="jpg",r.PNG="png",i.imageTypeAllowed=[i.ImageExtension.JPEG,i.ImageExtension.JPG,i.ImageExtension.PNG];i.getMimeTypeByExt=e=>{switch(e){case i.ImageExtension.JPEG:case i.ImageExtension.JPG:return i.ImageMimeTypes.JPEG;case i.ImageExtension.PNG:return i.ImageMimeTypes.PNG}}})),define("metaserver/static/js/modules/clean/react/previews/sharing_plugin/copy_file_link_button",["require","exports","tslib","react","metaserver/static/js/modules/clean/analytics","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/clean/sharing/views/share_modal_evolution/utils/logging","spectrum-sharing/utils/sharing_constants","spectrum-sharing/utils/logging","metaserver/static/js/modules/clean/react/previews/sharing_plugin/copy_link_button","metaserver/static/js/modules/clean/sharing/clean/util/link_util/parser"],(function(e,i,t,r,a,n,s,o,l,c,d){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CopyFileLinkButton=void 0,r=t.__importDefault(r);const u=(e,i,t,r,l)=>{const c=o.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE,u=n.get_browser_info(),p=Object.assign(Object.assign({},t&&s.buildExtraFromLinkMetadata(t)),{file_id:i}),v=l.doesContainShmodelLink?a.ShareTibEventLogger.get_shmodel_extra_for_logging(void 0,d.getCleanedSharingUrl(l)):a.ShareTibEventLogger.get_scl_extra_for_logging(void 0,d.getCleanedSharingUrl(l)),f=Object.assign(Object.assign(Object.assign({},p),{browser:u.browser,browser_version:u.version,created_new_link:!1}),v);r?a.ShareTibEventLogger.log(r,e,c,f):a.ShareTibEventLogger.log_unauth(e,c,f)};i.CopyFileLinkButton=e=>{var{file_id:i,link_metadata:a}=e,n=t.__rest(e,["file_id","link_metadata"]);return r.default.createElement(c.CopyLinkButton,Object.assign({},n,{logSuccess:()=>{var e;return u(l.TiburonEventName.CopySharedLink,i,a,null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.id,n.parsedLink)},logFailure:()=>{var e;return u(l.TiburonEventName.CopySharedLinkFailure,i,a,null===(e=null==n?void 0:n.user)||void 0===e?void 0:e.id,n.parsedLink)}}))},i.CopyFileLinkButton.displayName="CopyFileLinkButton"})),define("typescript/libraries/file-viewer/src/app",["require","exports","tslib","react","classnames","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/css/app.module.css","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/renderer","react-intl","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","dig-components/layer","dig-components/progress_indicators","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/titlebar/title_bar","typescript/libraries/file-viewer/src/sidebar/right_rail","typescript/libraries/file-viewer/src/utils","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/sidebar/edit_plugin_sidebar","typescript/libraries/file-viewer/src/preview_error/error_boundary","typescript/libraries/file-viewer/src/plugins/edit_fullscreen_plugin_action","typescript/libraries/file-viewer/src/css/preview-core.module.css","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/core/utils/sizing_utils","react-redux","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/logging/timing","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/render_context","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","ts-keycode-enum","typescript/libraries/file-viewer/src/keyboard/keyboard_provider","typescript/libraries/file-viewer/src/preview_error/preview_error"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F,O,T,A,x,D,k,M,L,j,R,N,V,U,B,K){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.AppWithProvider=i.App=void 0,r=t.__importStar(r),a=t.__importDefault(a),l=t.__importStar(l),I=t.__importStar(I);const z=r.memo(e=>{const{id:i,previewKey:t,isFileFlippingEnabled:a,isPreviewZoomed:n,enableFullscreen:o,dispatch:l,fileIndex:c,collectionFileCount:d}=e,u=o?N.getKeyboardBinding({callback:()=>l(s.enterFullScreen({previewKey:t,fileViewerId:i,sourceContext:p.UserActionContext.Keyboard})),keyCode:U.Key.F}):[],v=N.getKeyboardBinding({keyCode:U.Key.Escape,callback:()=>{l(s.closeViewer({previewKey:t,fileViewerId:i,sourceContext:p.UserActionContext.Keyboard}))}});if(!a)return r.createElement(V.KeyboardBindingConnector,{keyboardBindings:u});const f=N.getFileFlippingBindings({dispatch:l,previewKey:t,fileViewerId:i,requireCommandKey:n,fileIndex:c,collectionFileCount:d});return r.createElement(V.KeyboardBindingConnector,{keyboardBindings:[...f,...u,...v]})});z.displayName="AppKeyboardBindings";i.App=e=>{var i;const{activePluginInstance:t,config:n,fileViewerUiData:o,dispatch:u,fileInfo:v,fileMetadata:f,filePreviewUiData:_,id:m,intl:E,previewMetadata:T,rivieraData:j,loggingSession:{file_preview_session_id:N},loggingSession:V,pluginQueryBus:U,shouldShowSidebar:B,shouldShowTitlebar:H,isPluginEditMode:W,viewport:q,pluginProps:G,rightRailPluginInstances:Z,pluginNavigation:$,sharedLinkInfo:Q,archiveFiles:X,fullFilePreviewUi:Y,fullRivieraData:J,isFullScreen:ee,hasBeenFlipped:ie,account:te,isPreviewZoomed:re,pluginInstances:ae,onMount:ne,onDestroy:se,onTtiMarked:oe,callbacks:le,rootInfo:ce,enabledEditPluginFullscreenActionDefinitions:de,isPreviewLoading:ue,header:pe,mobileFooter:ve,mobileHeader:fe,brandingInfo:ge}=e,_e=!!D.useSelector(e=>k.getSelectedHideContentPanePluginId(e,m)),me=r.useCallback(()=>u(s.setPreviewLoadingAction({isPreviewLoading:!1})),[u]),we=r.useCallback(()=>{u(C.logSessionEvent({event:c.SessionEventType.FilePreviewRenderSucceeded,fileViewerId:m,previewSessionId:N})),me(),(null==le?void 0:le.onRenderSucceeded)&&le.onRenderSucceeded()},[le,m,N,u,me]),be=r.useCallback(()=>{u(C.logSessionEvent({event:c.SessionEventType.FilePreviewRenderFailed,fileViewerId:m,previewSessionId:N})),me()},[me,m,N,u]),{onLogTTI:he,onLogTTV:ye}=M.useTimingLogging(m),Se=r.useCallback(()=>{he(),null==oe||oe()},[he,oe]);r.useEffect(()=>{L.PreviewsEventLogger.mark(L.PreviewsTimingEvents.FVSDK_APP_MOUNT)},[]),r.useEffect(()=>{ne&&ne();const e=document.getSelection();return e&&e.removeAllRanges(),()=>{se&&se()}},[se,ne]);const{previewKey:Pe,bootstrap:Ee}=v,Ie=n.mobile_web,Ce=null!==(i=null==f?void 0:f.file_name)&&void 0!==i?i:"",Fe=n.transparent_background,Oe=n.preview_content_only,Te=Object.values(ae),Ae=h.extractToolbarComponents(Te),xe=h.extractSnackbarManagerFromPlugins(ae),De=r.useMemo(()=>h.extractActionDefinitionsFromPlugins(Te),[Pe]),ke=h.extractActionsFromPlugins(De,de),Me=t&&p.isEditPluginOverlayInstance(t),Le=r.useMemo(()=>h.extractTitlebarComponentsFromPlugins(Te),[Te]);if(t&&p.isEditPluginFullscreenInstance(t)){if(G){const e=t.fullscreenLayer;return r.createElement("div",{className:l.editPluginFullscreenContainer},r.createElement(e,Object.assign({},G)))}return null}return r.createElement(r.Fragment,null,r.createElement(d.Preview,{className:a.default(l.containerV2,{[l.transparentBackground]:Fe}),intl:E,viewport:q},({width:i,height:s})=>{var c,C,D;const k=h.calcResponsiveSize(i),M=x.calcContentWidth(i,!!Me||o.isRightRailOpen,B&&!ee&&!Oe,Ie),L=x.calcContentHeight(s,!ee&&H&&!Oe),N=(null===(c=null==T?void 0:T.content)||void 0===c?void 0:c[".tag"])===p.PreviewType.Archive?{canExtract:!0,rootInfo:ce,filePreviewUiData:_}:{canExtract:!1},q=H&&!Oe&&(Ie?fe:r.createElement(w.TitleBar,{actions:ke,components:Le})),ae=F.resolvePreviewType(T),ne=Oe&&(ae===p.PreviewType.Audio||ae===p.PreviewType.Video),se=r.createElement("div",{className:a.default(l.loadingSpinnerWrapper,{[I.isFullScreen]:ee})},r.createElement(g.Spinner,{"aria-valuetext":E.formatMessage({id:"zqXonC",defaultMessage:"Your preview is loading"}),"aria-label":"preview-loading-spinner",inverse:ee||W}),!n.force_no_toolbar&&!ne&&r.createElement(y.ConfigurableToolbar,{previewType:p.PreviewType.Loading,filePreviewUi:_,fileViewerUi:o,plugins:Ae,snackbarManagerPluginInstance:xe})),oe=!W&&!A.is_supported_mobile_browser()&&O.isEligibleToShowSkeletonPreview(null==T?void 0:T.content)&&!ie,le=x.shouldShowDocSidebar(i,ae)&&e.config.enable_navigation_bar&&e.fileViewerUiData.isDocSidebarOpen,de=ae===p.PreviewType.SsrDoc||ae===p.PreviewType.CloudDoc,he=oe&&j&&r.createElement(O.SkeletonViewport,{width:M,height:L,docSidebarCollapsed:!le,canShowSsrDocs:e.config.new_quips_docs,previewContent:null==T?void 0:T.content,docMetadata:de?j.metadata:void 0,fileName:Ce}),Fe={fileViewerId:m,width:M,height:L,onRenderSucceeded:we,onRenderFailed:be,intl:E,dispatch:u,onInteractive:Se,onViewable:ye,config:n,filePreviewUiData:_,fileMetadata:f,fileInfo:v,previewMetadata:T,data:void 0,fileViewerUiData:o,activePluginInstance:t,pluginProps:G,pluginQueryBus:U,extractConfig:N,sharedLinkInfo:Q,previewKey:Pe,archiveFiles:X,fullFilePreviewUi:Y,fullRivieraData:J,loggingSession:V,account:te,fileConfig:null==f?void 0:f.fileConfig,toolbarPlugins:Ae,snackbarManagerPluginInstance:xe,responsiveSize:k,header:pe,onSetPreviewLoaded:me,brandingInfo:ge},Te=(()=>{switch(Ee.state){case"initializing":return null;case"ready":return r.createElement(d.PreviewRenderer,Object.assign({rivieraData:j},Fe));case"errored":return r.createElement(K.PreviewBootstrapError,Object.assign({error:Ee.error},Fe))}})(),De=r.createElement(r.Fragment,null,r.createElement("div",{className:a.default(l.contentWrapper,{[l.editMode]:W,[l.contentContainerHide]:!(ue||_e)}),style:{width:M}},ue?oe?he:se:null),r.createElement("div",{className:a.default(l.contentWrapper,{[l.editMode]:W,[l.contentContainerHide]:ue||_e}),style:{width:M}},r.createElement(P.ErrorBoundary,Object.assign({},e,{activePluginInstance:t,previewKey:v.previewKey,key:Pe.serialized,fileViewerId:m,rivieraData:void 0,data:void 0,onRenderSucceeded:we,fileConfig:null==f?void 0:f.fileConfig,onRenderFailed:be,width:M,height:L,onInteractive:Se,onSetPreviewLoaded:me}),Te)));let je;Oe||Ie||(je=t&&p.isEditPluginOverlayInstance(t)?r.createElement(S.EditPluginSidebar,{fileViewerId:m,pluginNavigation:$,pluginQueryBus:U,plugin:t}):r.createElement(b.PreviewRightRail,{previewKey:Pe,fileName:Ce,fileViewerId:m,intl:E,pluginInstances:Z,pluginNavigation:$,pluginQueryBus:U,height:L}));const Re=r.createElement(z,{id:m,previewKey:Pe,enableFullscreen:n.enable_fullscreen,isFileFlippingEnabled:null!=f&&!!f.file_collection_context&&!Me&&!_e,isPreviewZoomed:re,dispatch:u,fileIndex:(null===(C=null==f?void 0:f.file_collection_context)||void 0===C?void 0:C.file_index)||0,collectionFileCount:(null===(D=null==f?void 0:f.file_collection_context)||void 0===D?void 0:D.parent_files_count)||0});return r.createElement(R.FileViewerRenderContextProvider,{value:{width:i,height:s,rendererWidth:M,rendererHeight:L,responsiveSize:k}},r.createElement("div",{style:ee?{display:"none"}:{}},q),r.createElement("div",{className:l.contentContainer},De,r.createElement("div",{style:ee?{display:"none"}:{}},je),Re),Oe?null:r.createElement("div",{style:ee?{display:"none"}:{}},ve))}))},i.App.displayName="App";const H=n.connect((function(e,i){const{config:t,id:r,pluginNavigation:a,pluginQueryBus:n,rightRailPluginInstances:s}=i,l=o.getCurrentFile(e,r),c=l.previewKey,d=o.getPreviewMetadata(e,c),u=v.getActivePluginId(e,r);let f;if(null==u)f=null;else{const e=i.pluginInstances[u];f=e&&(p.parseEditOverlayPlugin(e)||p.parseFullscreenEditPlugin(e)||p.parseRightRailPlugin(e))}const g=_.makePluginProps(e,r,m.getPluginData(e,{fileViewerId:r,navigation:a}),n),w=v.getRuntimeDisabledPlugins(e,r),b=o.getIsFullScreen(e,r),h=Object.keys(s).length>0,y=t.show_titlebar&&!p.isEditPluginOverlayInstance(f),S=E.getEditPluginFullscreenActionDefinitions(i.pluginInstances,w,c,r),P=o.getHasBeenFlipped(e,r);return{account:o.getLoadableCurrentUser(e),activePluginInstance:f,fileViewerUiData:e.fileViewerUi[r]||{},fileInfo:l,fileMetadata:e.fileMetadata[c.serialized],filePreviewUiData:(e.filePreviewUi[r]||{})[c.serialized]||{},isPreviewZoomed:o.isPreviewZoomed(e,r),loggingSession:e.loggingSession[r],pluginProps:g,previewMetadata:d,rivieraData:e.rivieraData[c.serialized],sharedLinkInfo:e.sharedLinkInfo[c.serialized],shouldShowSidebar:h,shouldShowTitlebar:y,isPluginEditMode:T.isPluginEditMode(e,r),unstable_runtimeDisabledPluginsUsedOnlyToTriggerUpdate:w,rootInfo:e.rootInfo,archiveFiles:e.archiveFiles,fullFilePreviewUi:e.filePreviewUi[r]||{},fullRivieraData:e.rivieraData||{},isFullScreen:b,hasBeenFlipped:P,enabledEditPluginFullscreenActionDefinitions:S,isPreviewLoading:e.isPreviewLoading,brandingInfo:e.brandingInfo[c.serialized]}}),(function(e){return{dispatch:e}}))(i.App);i.AppWithProvider=e=>{const{store:i,intl:a,osModifierKey:s,batteries:o,platformConfig:l,pluginContext:c}=e,d=t.__rest(e,["store","intl","osModifierKey","batteries","platformConfig","pluginContext"]),{id:p,config:v,canCloseViewer:g}=e,_=r.useMemo(()=>({batteries:o,fileViewerId:p,featureConfig:v,platformConfig:l,pluginContext:c,canCloseViewer:g}),[o,p,v,l,c,g]);return r.createElement(n.Provider,{store:i},r.createElement(u.RawIntlProvider,{value:a},r.createElement(j.FileViewerContextProvider,{value:_},r.createElement(B.KeyboardBindingProvider,{disableBindings:!v.keyboard_shortcuts||v.preview_content_only,osModifierKey:s},r.createElement(f.LayerContext.Provider,{value:501},r.createElement(H,Object.assign({intl:a},d)))))))},i.AppWithProvider.displayName="AppWithProvider"})),define("typescript/libraries/file-viewer/src/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TITLE_BAR_TEST_ID=void 0,i.TITLE_BAR_TEST_ID="fv-sdk-title-bar"})),define("typescript/libraries/file-viewer/src/comments2/plugin/loader/lazy",["require","exports","tslib","typescript/libraries/file-viewer/src/comments2/plugin/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeLoader=void 0,i.makeLoader=function(i,a={}){const n=(()=>{let r=null;return()=>t.__awaiter(this,void 0,void 0,(function*(){if(null==r){const{makeLoader:n}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/comments2/plugin/loader/eager"],i,t)}).then(t.__importStar);r=n(i,a)}return r}))})();return{pluginId:r.COMMENTS_PLUGIN_ID,load:(e,i)=>t.__awaiter(this,void 0,void 0,(function*(){return(yield n()).load(e,i)}))}}})),define("typescript/libraries/file-viewer/src/comments2/plugin/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.COMMENTS_PLUGIN_ID=void 0,i.COMMENTS_PLUGIN_ID="comments"})),define("typescript/libraries/file-viewer/src/core/data/store_utils",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.observeStore=void 0,i.observeStore=function(e,i,t,r){let a=r;const n=()=>{const r=i(e.getState());r!==a&&(t(a,r),a=r)},s=e.subscribe(n);return n(),s}})),define("typescript/libraries/file-viewer/src/core/middlewares/cloud_docs",["require","exports","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return()=>i=>r=>(r.type===t.Action.TriggerDynamicRoutingModalCheck&&e.triggerDynamicRoutingModalCheck(),i(r))}})),define("typescript/libraries/file-viewer/src/core/middlewares/file_system",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({dispatch:i})=>n=>s=>(s.type===t.Action.DownloadFile?e.downloadFile():s.type===t.Action.CopyToDropbox&&e.copyToDropbox({role:s.payload.role,logModalConfirm:()=>{i(r.logUserActionEvent({userAction:a.UserAction.SaveToDropboxApprove,fileViewerId:s.payload.fileViewerId,actionContext:a.UserActionContext.RightRail}))},logModalCancel:()=>{i(r.logUserActionEvent({userAction:a.UserAction.SaveToDropboxCancel,fileViewerId:s.payload.fileViewerId,actionContext:a.UserActionContext.RightRail}))}}),n(s))}})),define("typescript/libraries/file-viewer/src/core/middlewares/full_screen",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({dispatch:i})=>n=>s=>t.__awaiter(this,void 0,void 0,(function*(){const t=n(s);if(s.type===r.Action.EnterFullScreen){const{fileViewerId:t,previewKey:n}=s.payload,o=()=>{i(r.exitFullScreen(Object.assign(Object.assign({},s.payload),{skipAction:!0})))};e.enterFullScreen(o,!!s.payload.skipAction),i(r.zoomToggleOriginalOrFit({fileViewerId:t,previewKey:n,sourceContext:a.UserActionContext.Toolbar,fitOnly:!0,skipLogging:!0}))}else s.type===r.Action.ExitFullScreen&&e.exitFullScreen(!!s.payload.skipAction);return t}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/preferences",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.preferencesMiddleware=void 0,i.preferencesMiddleware=function(e){return({dispatch:i})=>n=>s=>t.__awaiter(this,void 0,void 0,(function*(){var t,o,l,c,d,u,p;switch(s.type){case r.Action.OpenRightRail:null===(t=e.rightRail)||void 0===t||t.setCollapsedState({isCollapsed:!1});break;case r.Action.CloseRightRail:null===(o=e.rightRail)||void 0===o||o.setCollapsedState({isCollapsed:!0});break;case r.Action.SetActiveRightRailPlugin:s.payload.pluginId&&s.payload.sourceContext===a.UserActionContext.RightRail&&(null===(l=e.rightRail)||void 0===l||l.setBladeState({bladeId:s.payload.pluginId}));break;case r.Action.InitializeRightRail:if(e.rightRail&&!s.payload.forceOpen){const t=e.rightRail.getCollapsedState(),a=e.rightRail.getBladeState();i(t?r.closeRightRail(Object.assign(Object.assign({},s.payload),{skipLogging:!0})):r.openRightRail(Object.assign(Object.assign({},s.payload),{skipLogging:!0}))),!t&&s.payload.useBladePreference&&i(r.setActiveRightRailPlugin(Object.assign(Object.assign({},s.payload),{pluginId:a,skipLogging:!0})))}else i(r.openRightRail(Object.assign(Object.assign({},s.payload),{skipLogging:!0})));break;case r.Action.OpenDocSidebar:null===(c=e.docSidebar)||void 0===c||c.setCollapsedState({isCollapsed:!1});break;case r.Action.CloseDocSidebar:null===(d=e.docSidebar)||void 0===d||d.setCollapsedState({isCollapsed:!0});break;case r.Action.InitializeDocSidebar:if(e.docSidebar){const t=e.docSidebar.getCollapsedState()?r.closeDocSidebar:r.openDocSidebar;i(t(Object.assign(Object.assign({},s.payload),{skipLogging:!0})))}else i(r.closeDocSidebar(Object.assign(Object.assign({},s.payload),{skipLogging:!0})));break;case r.Action.InitializeVolumeAndMuted:e.video&&(i(r.setVolume(Object.assign(Object.assign({},s.payload),{volume:e.video.getVolumeState(),skipLogging:!0}))),i(r.setMuted(Object.assign(Object.assign({},s.payload),{muted:e.video.getMutedState(),skipLogging:!0}))));break;case r.Action.SetVolume:null===(u=e.video)||void 0===u||u.setVolumeState(s.payload.volume);break;case r.Action.SetMuted:null===(p=e.video)||void 0===p||p.setMuteState(s.payload.muted)}return n(s)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/print",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({getState:i})=>n=>s=>t.__awaiter(this,void 0,void 0,(function*(){const t=n(s);if(s.type===r.Action.Print){const{fileViewerId:t,previewType:r}=s.payload,n=a.getPrintUrl(i(),t);e.print(n,r)}return t}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/report_exception",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.reportExceptionMiddleware=void 0,i.reportExceptionMiddleware=function(e){return()=>i=>a=>t.__awaiter(this,void 0,void 0,(function*(){return a.type===r.Action.ReportException&&e.reportException(a.payload.error,a.payload.fileType,a.payload.isCritical),i(a)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/url",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/preview_archive/constants","typescript/libraries/file-viewer/src/preview_archive/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({dispatch:i})=>n=>s=>{if(s.type===t.Action.UpdateArchiveFileCurrentPath)s.payload.fromUrlChanged||e.setQueryStringParameter(r.ArchiveSubpathQueryStringKey,a.archiveCurrentPathToQueryStringValue(s.payload.currentPath));else{if(s.type===t.Action.SetupArchiveFileCurrentPath){const o=(function(e,i,n){return(s,o)=>{s===r.ArchiveSubpathQueryStringKey&&n(t.updateArchiveFileCurrentPath({currentPath:a.queryStringValueToArchiveCurrentPath(o),fileViewerId:e,previewKey:i,fromUrlChanged:!0}))}})(s.payload.fileViewerId,s.payload.previewKey,i);e.onQueryStringParameterChange(r.ArchiveSubpathQueryStringKey,o);const l=e.getQueryStringParameter(r.ArchiveSubpathQueryStringKey);return n(t.updateArchiveFileCurrentPath({currentPath:a.queryStringValueToArchiveCurrentPath(l),fileViewerId:s.payload.fileViewerId,previewKey:s.payload.previewKey}))}s.type===t.Action.OpenFileURL?e.openFile(s.payload.fqPath):s.type===t.Action.CloseViewer?e.setQueryStringParameter(r.ArchiveSubpathQueryStringKey,null):s.type===t.Action.Redirect&&e.redirect(s.payload.href,s.payload.newTab)}return n(s)}}})),define("typescript/libraries/file-viewer/src/file_activity_blade/loader",["require","exports","tslib","typescript/libraries/file-viewer/src/file_activity_blade/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeFileActivityPluginLoader=void 0,i.makeFileActivityPluginLoader=function(i,a){return{pluginId:r.FILE_ACTIVITY_PLUGIN_ID,load:(r,n)=>t.__awaiter(this,void 0,void 0,(function*(){const{makeStore:s}=yield new Promise((i,t)=>{e(["typescript/component_libraries/files_components/src/blades/file_activity/index"],i,t)}).then(t.__importStar),{FileActivityPluginBase:o}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/file_activity_blade/file_activity_blade_plugin"],i,t)}).then(t.__importStar),l=s({apiV2Client:r.apiv2ClientBase});return new o(r,l,i,n,a)}))}}})),define("typescript/libraries/file-viewer/src/file_activity_blade/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FILE_ACTIVITY_PLUGIN_ID=void 0,i.FILE_ACTIVITY_PLUGIN_ID="file_activity"})),define("typescript/libraries/file-viewer/src/info_blade/info_blade_plugin",["require","exports","tslib","react","typescript/component_libraries/files_components/src/blades/info_blade/index","typescript/component_libraries/files_components/src/blades/info_blade/metadata/metadata_row","react-redux","typescript/component_libraries/pro-ui/src/components/branding/branding_block/optional_branding_block","typescript/libraries/file-viewer/src/utils","typescript/component_libraries/flows/src/components/approval-forms/approval_metadata","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/comments2/plugin/types","typescript/libraries/file-viewer/src/info_blade/types","react-intl","dig-components/typography"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.InfoBladePluginBase=void 0,r=t.__importStar(r);i.InfoBladePluginBase=class{constructor(e,i,t,g,_,m,w,b){this.layerUI={},this.rightRailUI={Sidebar:e=>{const i=e.file,t=v.useIntl(),g=r.useMemo(()=>{const{fqPath:e,name:t,lastModifiedDate:r,size:a}=i;return{fqPath:e,size:a,name:t,lastModifiedMs:r?new Date(r).getTime():void 0}},[i]),_=r.useMemo(()=>({enabled:!0,openPath:e.navigation.navigateToPath}),[e.navigation.navigateToPath]),m=r.useMemo(()=>{if("loaded"===e.account.state&&e.account.data)return l.getRootName(e.account.data)},[e.account]),w=r.useCallback(e=>{this.context.logUserAction(e?"click_show_all_metadata":"click_hide_all_metadata","right_sidebar")},[]),b=r.useCallback(()=>{this.context.logUserAction("right_rail_approval_status_click","right_sidebar",{file_id:i.fileId})},[i]);return r.default.createElement(s.Provider,{store:this.store},r.default.createElement(a.InfoBlade,{intl:this.platform.intl,id:p.INFO_BLADE_PLUGIN_ID},r.default.createElement(o.OptionalBrandingBlock,{sharedLinkInfo:e.sharedLinkInfo,brandingInfo:this.brandingInfo}),this.tagSection&&r.default.createElement(this.tagSection,null),r.default.createElement(f.Text,{variant:"paragraph",size:"small",isBold:!0},t.formatMessage({id:"bNnicH",defaultMessage:"Properties"})),r.default.createElement(a.BasicFileMetadata,{file:g,pathBar:_,accountRootName:m}),r.default.createElement(a.SharedLinkMetadata,Object.assign({},e.sharedLinkInfo)),r.default.createElement(a.UploadMetadata,{fileId:i.fileId,sharedLinkURL:e.file.url}),this.getApprovalStatus&&r.default.createElement(c.ApprovalMetadata,{fileId:i.fileId,getApprovalStatus:this.getApprovalStatus,onClick:()=>{b(),this.context.getPluginData().navigation.openRightRailPlugin(d.UserActionContext.ApprovalStatus,u.COMMENTS_PLUGIN_ID)},InfoBladeRowComponent:n.InfoBladeMetadataRow}),this.userId&&r.default.createElement(a.FileContentMetadata,{fileId:i.fileId,userId:this.userId,sharedLinkURL:e.file.url,onShowMore:w}),this.changeLogSection&&r.default.createElement(this.changeLogSection,null)))},Control:()=>r.default.createElement(a.InfoBladeCollapsedBladeButton,{intl:this.platform.intl,id:p.INFO_BLADE_PLUGIN_ID})},this.lifecycle={},this.platform=e,this.store=i,this.userId=g,this.brandingInfo=_,this.context=t,this.getApprovalStatus=m,this.tagSection=w,this.changeLogSection=b}}})),define("typescript/libraries/file-viewer/src/info_blade/loader",["require","exports","tslib","typescript/component_libraries/files_components/src/blades/info_blade/index","typescript/libraries/file-viewer/src/info_blade/info_blade_plugin","typescript/libraries/file-viewer/src/info_blade/types"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeInfoBladePluginLoader=void 0,i.makeInfoBladePluginLoader=function(e,i,s,o,l){return{pluginId:n.INFO_BLADE_PLUGIN_ID,load:(n,c)=>t.__awaiter(this,void 0,void 0,(function*(){const t=r.makeStore({apiV2ClientBase:n.apiv2ClientBase});return new a.InfoBladePluginBase(n,t,c,e,i,s,o,l)}))}}})),define("typescript/libraries/file-viewer/src/info_blade/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.INFO_BLADE_PLUGIN_ID=void 0,i.INFO_BLADE_PLUGIN_ID="info_blade"})),define("typescript/libraries/file-viewer/src/mobile_web/footer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/mobile_web.module.css"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Footer=void 0,r=t.__importDefault(r),a=t.__importStar(a);i.Footer=({leftButton:e,middleButton:i,rightButton:t})=>r.default.createElement("div",{className:a.footerContainer},e,r.default.createElement("div",{className:a.rightButtonsContainer},r.default.createElement("div",{className:a.abTestButton},i),t)),i.Footer.displayName="Footer"})),define("typescript/libraries/file-viewer/src/mobile_web/meatball_menu",["require","exports","tslib","dig-components/icons/src","dig-components/icons","react","react-intl","typescript/libraries/file-viewer/src/css/mobile_web.module.css","classnames","dig-components/buttons","dig-components/typography","typescript/libraries/file-viewer/src/core/i18n","typescript/component_libraries/files_components/src/icons/file_icon","typescript/libraries/file-viewer/src/core/utils/functions","dig-components/truncate"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MeatballMenu=void 0,n=t.__importDefault(n),o=t.__importStar(o),l=t.__importDefault(l);i.MeatballMenu=e=>{const{sharedLinkInfo:i,fileMetadata:t,isVisible:g,onDismiss:_,menuActions:m,onSignUp:w,onManageCookies:b}=e,h=s.useIntl(),y=(null==t?void 0:t.size)?u.formatBytes(t.size,h):0,S=(null==i?void 0:i.ownerName)||h.formatMessage({id:"BgdVC1",defaultMessage:"you"});return g?n.default.createElement(n.default.Fragment,null,n.default.createElement("div",{onClick:_,className:o.meatballMenuOverlay}),n.default.createElement("div",{className:o.meatballMenuContainer},n.default.createElement("div",null,n.default.createElement(c.IconButton,{onClick:_,className:o.meatballMenuDismiss,variant:"transparent"},n.default.createElement(a.UIIcon,{src:r.CloseLine})),n.default.createElement("div",{className:o.metadata},n.default.createElement("div",{className:o.fileIconContainer},n.default.createElement(p.FileIcon,{file:v.mapMetadataToFile(t)||{uniqueKey:"",title:"",isFolder:!1}})),n.default.createElement("div",{className:o.metadataText},n.default.createElement(d.Text,{className:o.fileName,variant:"label",size:"standard",tagName:"p",isBold:!0},n.default.createElement(f.Truncate,{maxWidth:188},null==t?void 0:t.file_name)),n.default.createElement(d.Text,{color:"faint"},h.formatMessage({id:"lFMuH3",defaultMessage:"{formatted_size}, file owner: {owner}"},{formatted_size:y,owner:S})))),n.default.createElement("div",{className:o.actions},m.map(e=>n.default.createElement("div",{key:null==e?void 0:e.type.displayName,className:l.default({[o.actionRow]:!(null==e?void 0:e.props.placeholder)})},e))),w&&n.default.createElement("div",{className:o.signInButton},n.default.createElement(c.Button,{onClick:w,variant:"opacity"},n.default.createElement(a.UIIcon,{src:r.PersonCircleLine}),n.default.createElement("span",null,h.formatMessage({id:"FFqlH9",defaultMessage:"Sign up"})))),n.default.createElement("div",{className:o.footer},n.default.createElement("span",{onClick:b},h.formatMessage({id:"FqzxYC",defaultMessage:"Cookie preferences"})),n.default.createElement(a.UIIcon,{className:o.meatballSeparator,size:"small",src:r.CircleSmallFilledFill}),n.default.createElement("a",{href:"https://dropbox.com/privacy"},h.formatMessage({id:"4gi6Mt",defaultMessage:"Privacy and legal"})))))):null},i.MeatballMenu.displayName="MeatballMenu"})),define("typescript/libraries/file-viewer/src/mobile_web/mobile_title_bar",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/css/title_bar.module.css","classnames","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","dig-components/icons","dig-components/buttons","dig-components/icons/src","react-redux","typescript/libraries/file-viewer/src/titlebar/close_button","typescript/libraries/file-viewer/src/titlebar/title","typescript/libraries/file-viewer/src/mobile_web/meatball_menu","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/constants","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/render_context"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.MobileTitleBar=i.TITLE_BAR_BACK_AND_HELP_ICONS=void 0,r=t.__importStar(r),n=t.__importStar(n),s=t.__importDefault(s),i.TITLE_BAR_BACK_AND_HELP_ICONS=146,i.MobileTitleBar=r.memo(e=>{const{sharedLinkInfo:i,menuActions:t,onSignUp:S,onManageCookies:P}=e;w.useMarkTimingEventOnMount(w.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT);const{responsiveSize:E,width:I}=y.useFileViewerRenderContext(),C=u.useDispatch(),F=a.useIntl(),{fileViewerId:O,canCloseViewer:T,featureConfig:A}=b.useFileViewerContext(),x=A.titlebar_logo_config.base_url,{previewKey:D}=h.useCurrentFileInfo(O),k=h.useCurrentFileMetadata(D),[M,L]=r.useState(!1),j=r.useCallback(()=>{L(!0),C(g.logUserActionEvent({userAction:_.UserAction.OpenMobileMenu,actionContext:_.UserActionContext.MobileWebMeatball,fileViewerId:O}))},[]),R=r.useCallback(()=>{L(!1),C(g.logUserActionEvent({userAction:_.UserAction.CloseMobileMenu,actionContext:_.UserActionContext.MobileWebMeatball,fileViewerId:O}))},[]),N=E===o.ResponsiveSize.MOBILE;return r.createElement(r.Fragment,null,r.createElement("header",{className:s.default(n.titleBar,n.mobileTitleBar),"data-testid":m.TITLE_BAR_TEST_ID},r.createElement(p.CloseButton,{previewKey:D,fileViewerId:O,baseUrl:x,canCloseViewer:T}),r.createElement(v.Title,{previewKey:D,fileViewerId:O,width:I,isMobileSize:N}),r.createElement("span",{className:n.mobileMeatball},r.createElement(c.IconButton,{variant:"transparent",onClick:j,"aria-label":F.formatMessage({id:"pExfXj",defaultMessage:"Actions"})},r.createElement(l.UIIcon,{src:d.MoreHorizontalLine})))),r.createElement(f.MeatballMenu,{isVisible:M,menuActions:t,onSignUp:S,fileViewerId:O,fileMetadata:k,onDismiss:R,sharedLinkInfo:i,onManageCookies:P}))}),i.MobileTitleBar.displayName="MobileTitleBar",i.MobileTitleBar.displayName="MobileTitleBar"})),define("typescript/libraries/file-viewer/src/pass/actions",["require","exports"],(function(e,i){"use strict";var t;Object.defineProperty(i,"__esModule",{value:!0}),i.unsubscribePresence=i.subscribePresence=i.Action=void 0,(function(e){e.SubscribePresence="@@presence/subscribe",e.UnsubscribePresence="@@presence/unsubscribe"})(t=i.Action||(i.Action={})),i.subscribePresence=function(e){return{type:t.SubscribePresence,payload:e}},i.unsubscribePresence=function(e){return{type:t.UnsubscribePresence,payload:e}}})),define("typescript/libraries/file-viewer/src/pass/beacon_middleware",["require","exports","tslib","typescript/libraries/file-viewer/src/pass/actions"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.beaconMiddleware=void 0,i.beaconMiddleware=function(e){return({})=>i=>a=>t.__awaiter(this,void 0,void 0,(function*(){const t=i(a);return a.type===r.Action.SubscribePresence?e.subscribe(a.payload.fileId):a.type===r.Action.UnsubscribePresence&&e.unsubscribe(a.payload),t}))}})),define("typescript/libraries/file-viewer/src/pass/lifecycle",["require","exports","typescript/libraries/file-viewer/src/pass/actions"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.teardownPASSPresence=i.initializePASSPresence=void 0,i.initializePASSPresence=function(e,i){e.dispatch(t.subscribePresence({fileId:i}))},i.teardownPASSPresence=function(e,i){e.dispatch(t.unsubscribePresence(i))}})),define("typescript/libraries/file-viewer/src/plugins/context",["require","exports","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/navigation"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePluginContext=void 0,i.makePluginContext=function({store:e,sdkConfig:i,fileViewerId:s,reinitializeFileViewer:o,exitPluginEditMode:l,hideContentPane:c,updatePreviewMetadata:d}){const u=n.makeNavigation({store:e,fileViewerId:s,reinitializeFileViewer:o,exitPluginEditMode:l,hideContentPane:c,updatePreviewMetadata:d});return{fileViewerId:s,getFilePreviewSessionId:()=>e.getState().loggingSession[s].file_preview_session_id,getFileViewerSessionId:()=>e.getState().loggingSession[s].file_viewer_session_id,logUserAction:(i,a,n)=>{const o=e.getState().loggingSession[s].file_preview_session_id;e.dispatch(t.logPreviewEvent({event:r.EventType.UserAction,fileViewerId:s,previewSessionId:o,extra:Object.assign(Object.assign({action:i},a?{context:a}:{}),n||{})}))},sdkConfig:i,getPluginData:()=>{const i=e.getState();return a.getPluginData(i,{fileViewerId:s,navigation:u})}}}})),define("typescript/libraries/file-viewer/src/plugins/data",["require","exports","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/plugins/selectors/file"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPluginData=void 0,i.getPluginData=function(e,i){const{fileViewerId:s,navigation:o}=i,l=r.getCurrentFile(e,s),c=l?e.previewData[l.previewKey.serialized]:null,d=r.getLoadableCurrentUser(e),u={navigation:o,sharedLinkInfo:n.getCurrentSharedLinkInfo(e,s),account:d},p=n.getCurrentBaseFile(e,s);if(!p)return Object.assign({previewType:t.PreviewType.Loading,file:null},u);const v=n.getCurrentCommonFile(e,p);if("errored"===l.bootstrap.state)return Object.assign({previewType:t.PreviewType.Error,file:v},u);if(!c)return Object.assign({previewType:t.PreviewType.Loading,file:v},u);const f=a.resolvePreviewType(c);switch(f){case t.PreviewType.Image:const i=n.getCurrentImageFile(e,p,s);if(i)return Object.assign({previewType:f,file:i,previewData:c},u);break;case t.PreviewType.SsrDoc:case t.PreviewType.CloudDoc:const r=n.getCurrentDocFile(e,p,s);if(r)return Object.assign({previewType:f,file:r},u);break;case t.PreviewType.Audio:case t.PreviewType.Video:const a=n.getCurrentAudioVideoFile(e,p);if(a)return Object.assign({previewType:f,file:a},u);break;case t.PreviewType.Archive:const o=n.getCurrentArchiveFile(e,p);if(o)return Object.assign({previewType:f,file:o},u);break;case t.PreviewType.Error:case t.PreviewType.Loading:return Object.assign({previewType:f,file:null},u);default:return Object.assign({previewType:f,file:v},u)}return Object.assign({previewType:t.PreviewType.Other,file:v},u)}})),define("typescript/libraries/file-viewer/src/plugins/edit_fullscreen_plugin_action",["require","exports","tslib","reselect","typescript/libraries/file-viewer/src/plugins/types","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","dig-components/menu","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","dig-components/icons","dig-components/buttons"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getEditPluginFullscreenActionDefinitions=void 0,n=t.__importStar(n);const p=(e,i,t)=>o.setActiveEditPlugin({previewKey:e,fileViewerId:i,pluginId:t,sourceContext:a.UserActionContext.Toolbar}),v=n.default.memo(({icon:e,label:i,pluginId:t,previewKey:r,fileViewerId:a,callback:o})=>{const d=s.useDispatch(),u=n.useCallback(()=>{d(p(r,a,t)),null==o||o()},[r,a,t,d]);return n.default.createElement(l.Menu.ActionItem,{value:{nodeType:"dropdown",actionType:c.ActionBarActionTypes.CUSTOM_ACTION,id:t,menuItem:{handler:u}},withLeftAccessory:e,disabled:!1},i)});v.displayName="EditFullscreenOverflowItem";const f=n.default.memo(({icon:e,label:i,pluginId:t,previewKey:r,fileViewerId:a,hideIcons:o,callback:l})=>{const c=s.useDispatch(),d=n.useCallback(()=>{c(p(r,a,t)),null==l||l()},[r,a,t,c]);return n.default.createElement(u.Button,{variant:"opacity",onClick:d,withIconLeft:o?null:e,disabled:!1},i)});f.displayName="EditFullscreenRenderButton";i.getEditPluginFullscreenActionDefinitions=r.defaultMemoize((e,i,t,r)=>(({editFullscreenPlugins:e,previewKey:i,fileViewerId:t})=>Object.entries(e).map(([e,r])=>{const a=n.default.createElement(d.UIIcon,{src:r.buttonIcon});return{overflowItem:n.default.createElement(v,{icon:a,label:r.buttonText,pluginId:e,fileViewerId:t,previewKey:i,callback:r.onActivate}),renderButton:s=>n.default.createElement(f,{hideIcons:s,icon:a,label:r.buttonText,pluginId:e,fileViewerId:t,previewKey:i,callback:r.onActivate}),id:"FULLSCREEN_ACTION"}}))({editFullscreenPlugins:Object.entries(e).reduce((e,[t,r])=>a.isEditPluginFullscreenInstance(r)&&!i.includes(t)?Object.assign(Object.assign({},e),{[t]:r}):e,{}),previewKey:t,fileViewerId:r}))})),define("typescript/libraries/file-viewer/src/plugins/navigation",["require","exports","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/plugins/selectors/file"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeNavigation=void 0;i.makeNavigation=({store:e,fileViewerId:i,reinitializeFileViewer:n,exitPluginEditMode:s,hideContentPane:o,updatePreviewMetadata:l,showAuthModal:c,canCloseViewer:d})=>({fileFlipping:{flipToNextFile(t){const n=a.getCurrentPreviewKey(e.getState(),i);null!=n&&e.dispatch(r.flipToNextFile({fileViewerId:i,previewKey:n,sourceContext:t}))},flipToPreviousFile(t){const n=a.getCurrentPreviewKey(e.getState(),i);null!=n&&e.dispatch(r.flipToNextFile({fileViewerId:i,previewKey:n,sourceContext:t}))}},navigateToPage(n,s){const o=a.getCurrentPreviewKey(e.getState(),i);null!=o&&(e.dispatch(r.updateDocCurrentPageIndex({fileViewerId:i,previewKey:o,pageIndex:n,sourceContext:s})),e.dispatch(r.pageNavigation({fileViewerId:i,previewKey:o,sourceContext:t.UserActionContext.RightRail,pageIndex:n})))},closeSidebar(t){const n=a.getCurrentPreviewKey(e.getState(),i);null!=n&&e.dispatch(r.closeRightRail({fileViewerId:i,previewKey:n,sourceContext:t}))},openSidebar(t){const n=a.getCurrentPreviewKey(e.getState(),i);null!=n&&e.dispatch(r.openRightRail({fileViewerId:i,previewKey:n,sourceContext:t}))},openUrl({url:i,fallbackUrl:t}){e.dispatch(r.openUrl({url:i,fallbackUrl:t}))},reinitializeFileViewer(e){n(e)},exitEditMode(){s()},hideContentPane(e){o(e)},updatePreviewMetadata(e,i){l(e,i)},seek(i){e.dispatch(r.requestVideoSeek({time:i}))},seekRelative(i){e.dispatch(r.requestVideoSeekRelative({delta:i}))},pause(){e.dispatch(r.requestVideoPause())},toggleVideoFrameSteppers(t){e.dispatch(r.toggleVideoFrameSteppers({fileViewerId:i,enabled:t}))},overrideFloatingToolbar(t,a){e.dispatch(r.overrideFloatingToolbar({fileViewerId:i,state:a,pluginId:t}))},navigateToPath(i){e.dispatch(r.openFileURL({fqPath:i}))},showAuthModal:c,canCloseViewer:d,openRightRailPlugin(n,s){const o=a.getCurrentPreviewKey(e.getState(),i);null!=o&&(e.dispatch(r.openRightRail({fileViewerId:i,previewKey:o,sourceContext:n})),e.dispatch(r.setActiveRightRailPlugin({fileViewerId:i,previewKey:o,sourceContext:t.UserActionContext.Initialization,pluginId:s})))}})})),define("typescript/libraries/file-viewer/src/plugins/props",["require","exports","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/selectors/ui"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makePluginControlProps=i.makePluginProps=void 0,i.makePluginProps=function(e,i,a,n){switch(a.previewType){case t.PreviewType.CloudDoc:case t.PreviewType.SsrDoc:return(function(e,i,t,a){const n=r.getDocUiProps(i,e);return null!=t.file&&null!=n?Object.assign(Object.assign({},t),{file:t.file,ui:n,queries:a.getHandlers()}):null})(i,e,a,n);case t.PreviewType.Image:return(function(e,i,t){const a=r.getImageUiProps(i,e);return null!=t.file&&null!=a?Object.assign(Object.assign({},t),{file:t.file,ui:a,queries:{}}):null})(i,e,a);case t.PreviewType.Audio:case t.PreviewType.Video:return(function(e,i,t,a){const n=r.getAudioVideoUiProps(i,e);return null!=t.file&&null!=n?Object.assign(Object.assign({},t),{file:t.file,ui:n,queries:a.getHandlers()}):null})(i,e,a,n);case t.PreviewType.Archive:return(function(e,i,t){const a=r.getArchiveUiProps(i,e);return null!=t.file&&null!=a?Object.assign(Object.assign({},t),{file:t.file,ui:a,queries:{}}):null})(i,e,a);case t.PreviewType.Loading:case t.PreviewType.Error:return(function(e,i,t){const a=r.getUnsupportedFileUiProps(i,e);return null!=t.file?Object.assign(Object.assign({},t),{file:t.file,ui:a,queries:{}}):null})(i,e,a);default:return(function(e,i,t){const a=r.getUnsupportedFileUiProps(i,e);return null!=t.file&&null!=a?Object.assign(Object.assign({},t),{file:t.file,ui:a,queries:{}}):null})(i,e,a)}},i.makePluginControlProps=function(e,i,t,a){const n=r.getControlUiProps(e,i,t.previewType);return Object.assign(Object.assign({},t),{ui:n,queries:a.getHandlers()})}})),define("typescript/libraries/file-viewer/src/plugins/queries",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PluginQueryBus=void 0;i.PluginQueryBus=class{constructor(e){this.handlerChain=[],this.defaultHandlers=e,this.resolvedHandlers=this.resolveHandlers()}getHandlers(){return this.resolvedHandlers}handleQuery(e,i){this.handlerChain.push([e,i]),this.resolvedHandlers=this.resolveHandlers()}unhandleQuery(e,i){const t=this.handlerChain.findIndex(([t,r])=>t===e&&r===i);if(null==t)throw new Error("Attempted to unregister query handlers that are not registered");this.handlerChain.splice(t),this.resolvedHandlers=this.resolveHandlers()}resolveHandlers(){return this.handlerChain.reduce((e,[i,t])=>Object.assign(Object.assign({},e),{[i]:t}),this.defaultHandlers)}}})),define("typescript/libraries/file-viewer/src/plugins/selectors/file",["require","exports","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getCurrentSharedLinkInfo=i.getCurrentPreviewKey=i.getCurrentFileId=i.getCurrentCommonFile=i.getCurrentArchiveFile=i.getCurrentAudioVideoFile=i.getCurrentDocFile=i.getCurrentImageFile=i.getCurrentBaseFile=void 0;class a extends Error{constructor(e,i){super(`Expected ${e} to be of type ${i}, but it is not`)}}i.getCurrentBaseFile=(e,i)=>{const{currentFileInfo:t,fileMetadata:r}=e,a=t[i];if(null==a)return null;const{file_id:n,ns_id:s,sj_id:o,url:l}=a;if(null==n||null==s||null==o)return null;const c=r[a.previewKey.serialized];if(null==c)return null;const{file_name:d,file_path:u,file_last_modified_date:p,size:v}=c;return{fileId:n,lastModifiedDate:p,name:d,nsId:s,fqPath:u,sjId:o,url:l,size:v,previewKey:a.previewKey}};i.getCurrentImageFile=(e,i,a)=>{var n;const s=e.previewData[i.previewKey.serialized],o=null===(n=t.getFileContentMetadata(e,i.previewKey))||void 0===n?void 0:n.metadata,l="image"===(null==o?void 0:o[".tag"])?o:null,c=r.filterDimensionsFilePreviewUiState(t.getFilePreviewUi(e,a,i.previewKey));return Object.assign(Object.assign({},i),{dimensions:(null==s?void 0:s.dimensions)||(null==c?void 0:c.dimensions),contentMetadata:l})};i.getCurrentDocFile=(e,i,n)=>{var s;const o=e.rivieraData[i.previewKey.serialized];if(null==o||0===Object.getOwnPropertyNames(o).length)return null;if(!("pages"in o))throw new a("rivieraData","DocPreviewMetadata");const l=null===(s=t.getFileContentMetadata(e,i.previewKey))||void 0===s?void 0:s.metadata,c="ms_office"===(null==l?void 0:l[".tag"])||"pdf"===(null==l?void 0:l[".tag"])?l:null,d=t.getFilePreviewUi(e,n,i.previewKey),u=r.filterDocFilePreviewUiState(d);return Object.assign(Object.assign({},i),{pages:o.pages.map(({dimension:[e,i],pageIndex:t})=>({pageIndex:t,dimensions:{width:e,height:i}})),contentMetadata:c,isPasswordProtected:!!(null==u?void 0:u.isPasswordProtected)})};i.getCurrentAudioVideoFile=(e,i)=>{var r;const a=null===(r=t.getFileContentMetadata(e,i.previewKey))||void 0===r?void 0:r.metadata,n="audio"===(null==a?void 0:a[".tag"])||"video"===(null==a?void 0:a[".tag"])?a:null;return null==n?null:Object.assign(Object.assign({},i),{contentMetadata:n})};i.getCurrentArchiveFile=(e,i)=>Object.assign(Object.assign({},i),{contentMetadata:null});i.getCurrentCommonFile=(e,i)=>Object.assign(Object.assign({},i),{contentMetadata:null});i.getCurrentFileId=(e,i)=>{const r=t.getCurrentFile(e,i);if(null!=r)return r.file_id};i.getCurrentPreviewKey=(e,i)=>{const r=t.getCurrentFile(e,i);if(null!=r)return r.previewKey};i.getCurrentSharedLinkInfo=(e,t)=>{const r=i.getCurrentPreviewKey(e,t);if(r)return e.sharedLinkInfo[r.serialized]}})),define("typescript/libraries/file-viewer/src/plugins/selectors/ui",["require","exports","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a){"use strict";function n(e,i){const{previewKey:t}=(function(e,i){return a.getCurrentFile(e,i)||null})(e,i);return e.filePreviewUi[i]?e.filePreviewUi[i][t.serialized]:null}function s(e,i){return{isSidebarVisible:a.isRightRailOpen(e,i)}}function o(e,i){const t=n(e,i);if(null==t)return null;const s=r.filterZoomableFilePreviewUi(t);return null==s?null:{scaleFactor:a.getCurrentScaleFactorFromFilePreviewUi(s)}}function l(e,i){var t,a;const l=s(e,i);if(null==l)return null;const c=o(e,i);if(null==c)return null;const d=n(e,i);if(null==d)return null;const u=null!==(a=null===(t=r.filterDocFilePreviewUiState(d))||void 0===t?void 0:t.currentPageIndex)&&void 0!==a?a:null;if(null==u)return null;const p=e.fileViewerUi[i],v=!!p&&p.isDocSidebarOpen;return Object.assign(Object.assign(Object.assign({},l),c),{currentPageIndex:u,isNavBarVisible:v})}function c(e,i){const t=s(e,i);if(null==t)return null;const r=o(e,i);return null==r?null:Object.assign(Object.assign({},t),r)}function d(e,i){return s(e,i)}function u(e,i){return{isSidebarVisible:a.isRightRailOpen(e,i)}}Object.defineProperty(i,"__esModule",{value:!0}),i.getControlUiProps=i.getUnsupportedFileUiProps=i.getArchiveUiProps=i.getAudioVideoUiProps=i.getImageUiProps=i.getDocUiProps=void 0,i.getDocUiProps=l,i.getImageUiProps=c,i.getAudioVideoUiProps=function(e,i){const t=s(e,i);if(null==t)return null;const a=n(e,i);if(null==a)return null;const o=r.filterAudioVideoFilePreviewUiState(a);if(null==o)return null;const{currentTimestamp:l,isPlaying:c}=o;return Object.assign(Object.assign({},t),{currentTimestamp:l,isPlaying:c})},i.getArchiveUiProps=function(e,i){return s(e,i)},i.getUnsupportedFileUiProps=d,i.getControlUiProps=function(e,i,r){switch(r){case t.PreviewType.SsrDoc:case t.PreviewType.CloudDoc:{const t=l(e,i);return null!=t?t:u(e,i)}case t.PreviewType.Image:{const t=c(e,i);return null!=t?t:u(e,i)}default:{const t=d(e,i);return null!=t?t:u(e,i)}}}})),define("typescript/libraries/file-viewer/src/preview_archive/constants",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ArchiveSubpathQueryStringKey=void 0,i.ArchiveSubpathQueryStringKey="file_subpath"})),define("typescript/libraries/file-viewer/src/preview_archive/utils",["require","exports","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/api_v2/redux/previews","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getArchiveFiles=i.getFiles=i.transformArchiveEntriesToFiles=i.queryStringValueToArchiveCurrentPath=i.archiveCurrentPathToQueryStringValue=void 0,i.archiveCurrentPathToQueryStringValue=function(e){return 0===e.length?null:`/${e.join("/")}`},i.queryStringValueToArchiveCurrentPath=function(e){return null===e?[]:e.split("/").slice(1)},i.transformArchiveEntriesToFiles=function(e,i,t,r,n){return e.map(e=>({uniqueKey:e.name,title:e.name,isFolder:!!e.isDir,extension:e.name.split(".").pop(),sizeInBytes:e.size,performOpenAction:()=>{i(a.updateArchiveFileCurrentPath({currentPath:[...t,e.name],fileViewerId:r,previewKey:n,isDir:!!e.isDir}))}}))},i.getFiles=function(e){return e.filter(e=>!e.isDir)},i.getArchiveFiles=function(e,i,a,n,s,o){if(!i.length)return;const l={file_id:a.file_id,ns_id:a.ns_id,sj_id:a.sj_id,url:a.url},c=i.map(i=>t.getSubpath([...e,i.name]));n(o?r.getArchiveFilesAction({arg:{root_file_info:l,subpaths:c}},{rootFileId:s}):r.loggedOutGetArchiveFilesAction({arg:{root_file_info:l,subpaths:c}},{rootFileId:s}))}})),define("typescript/libraries/file-viewer/src/preview_error/error_boundary",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/preview_error/preview_error"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ErrorBoundary=void 0,r=t.__importDefault(r);class l extends r.default.PureComponent{constructor(){super(...arguments),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}componentDidCatch(e){var i,t;this.props.reportException({error:e,fileType:(null===(t=null===(i=this.props.previewMetadata)||void 0===i?void 0:i.content)||void 0===t?void 0:t[".tag"])||"other",isCritical:!0})}render(){return this.state.hasError?r.default.createElement(o.PreviewRenderError,Object.assign({},this.props,{error:new s.FVError(s.FVErrorCode.Unknown)})):this.props.children}}l.displayName="UnconnectedErrorBoundary";const c={reportException:n.reportException};i.ErrorBoundary=a.connect(null,c)(l)})),define("typescript/libraries/file-viewer/src/preview_excel/tab_selection_handler",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.tabSelectionHandler=void 0;i.tabSelectionHandler=({dispatch:e,getState:i})=>s=>o=>{if(s(o),o.type!==t.Action.SwitchWorkbookTab)return;const{previewKey:l,fileViewerId:c,tabIndex:d}=o.payload;if(a.isNestedArchiveFilePreviewKey(l))return;const u=i(),p=n.getPreviewMetadata(u,l),v=n.getRivieraData(u,l);if(null==p||!r.isExcelApiV2MetadataContent(p.content))return;if(null==v||!r.isExcelPreviewRivieraData(v))return;const{workbook_data_url_tmpl:f}=p.content;if(null!=v.sheets){const i=v.sheets[d];null!=i&&"errored"!==i.state||e(t.fetchExcelSheetLayoutData({previewKey:l,fileViewerId:c,sheetIndex:d,workbookDataUrlTmpl:f}))}}})),define("typescript/libraries/file-viewer/src/renderer",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/css/app.module.css","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/core/utils/functions"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewRenderer=i.LoadingPlaceholder=i.PreviewError=i.Preview=void 0,r=t.__importStar(r),a=t.__importDefault(a),n=t.__importStar(n);i.Preview=e=>{var i,t;const{children:s,className:o}=e,l=e.__window||"undefined"!=typeof window?window:void 0,c=e.viewport||"undefined"!=typeof document?document.documentElement:void 0,[d,u]=r.useState({width:null!==(i=null==c?void 0:c.clientWidth)&&void 0!==i?i:0,height:null!==(t=null==c?void 0:c.clientHeight)&&void 0!==t?t:0}),p=r.useCallback(()=>{c&&u({width:c.clientWidth,height:c.clientHeight})},[]);return r.useEffect(()=>{p()},[]),r.useEffect(()=>{if(l)return l.addEventListener("resize",p),()=>l.removeEventListener("resize",p)},[p]),r.createElement("div",{className:a.default(n.container,o),style:d,id:"fvsdk-container"},null==s?void 0:s(d))},i.Preview.displayName="Preview",i.PreviewError=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewRenderError:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_error/preview_error"],i,t)}).then(t.__importStar);return{default:i}})));i.LoadingPlaceholder=()=>null,i.LoadingPlaceholder.displayName="LoadingPlaceholder";const c=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewImageContainer:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_image/container"],i,t)}).then(t.__importStar);return{default:i}}))),d=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewAudioVideo:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_audio_video/preview_video"],i,t)}).then(t.__importStar);return{default:i}}))),u=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewDoc:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_doc/renderer/preview_doc"],i,t)}).then(t.__importStar);return{default:i}}))),p=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewCloudDoc:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_cloud_doc/preview_cloud_doc"],i,t)}).then(t.__importStar);return{default:i}}))),v=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewExcelViewOnlyEmbed:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_excel/ms_embed/view_only_embed"],i,t)}).then(t.__importStar);return{default:i}}))),f=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewExcel:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_excel/renderer"],i,t)}).then(t.__importStar);return{default:i}}))),g=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewHTML:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_html/preview_html"],i,t)}).then(t.__importStar);return{default:i}}))),_=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewArchive:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_archive/preview_archive"],i,t)}).then(t.__importStar);return{default:i}}))),m=r.lazy(()=>t.__awaiter(void 0,void 0,void 0,(function*(){const{PreviewLinkfile:i}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/preview_linkfile/preview_linkfile"],i,t)}).then(t.__importStar);return{default:i}})));i.PreviewRenderer=e=>{var{data:a,filePreviewUiData:n,rivieraData:w,pluginProps:b}=e,h=t.__rest(e,["data","filePreviewUiData","rivieraData","pluginProps"]);const y=l.resolvePreviewType(h.previewMetadata);return r.createElement(r.Suspense,{fallback:r.createElement(i.LoadingPlaceholder,null)},(()=>{var e,t,a,l;switch(y){case s.PreviewType.Image:return r.createElement(c,Object.assign({},h,{data:void 0,filePreviewUiData:n,pluginProps:b}));case s.PreviewType.SsrDoc:case s.PreviewType.CloudDoc:return"cloud_doc"===(null===(t=null===(e=h.previewMetadata)||void 0===e?void 0:e.content)||void 0===t?void 0:t[".tag"])&&h.previewMetadata.content.exit_url?r.createElement(p,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:void 0,pluginProps:b})):(null===(l=null===(a=h.fileMetadata)||void 0===a?void 0:a.file_name)||void 0===l?void 0:l.endsWith(".gsheet"))?r.createElement(g,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:void 0,pluginProps:b,isRawHtml:!0})):r.createElement(u,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:w,pluginProps:b}));case s.PreviewType.Video:case s.PreviewType.Audio:return r.createElement(d,Object.assign({},h,{data:void 0,filePreviewUiData:n,isAudio:y===s.PreviewType.Audio,rivieraData:w,pluginProps:b}));case s.PreviewType.Excel:if("ms_view_embed"===h.config.excel_support.embed_support)return r.createElement(v,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:void 0,pluginProps:b}));if("excel1"===h.config.excel_support.support)return r.createElement(g,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:void 0,pluginProps:b,isRawHtml:!1}));if("excel2"===h.config.excel_support.support)return r.createElement(f,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:w,pluginProps:b}));break;case s.PreviewType.HTML:case s.PreviewType.RawHTML:if(h.config.html_support)return r.createElement(g,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:void 0,pluginProps:b,isRawHtml:y===s.PreviewType.RawHTML}));break;case s.PreviewType.Archive:return r.createElement(_,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:w,pluginProps:b}));case s.PreviewType.Linkfile:return r.createElement(m,Object.assign({},h,{data:void 0,filePreviewUiData:n,rivieraData:w,pluginProps:b}))}return r.createElement(i.PreviewError,Object.assign({error:new o.FVError(o.FVErrorCode.UnsupportedPreviewType),filePreviewUiData:n,data:void 0},h))})())},i.PreviewRenderer.displayName="PreviewRenderer",i.PreviewRenderer.displayName="PreviewRenderer"})),define("typescript/libraries/file-viewer/src/render_context",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewerRenderContextProvider=i.useFileViewerRenderContext=void 0;const a=(r=t.__importStar(r)).createContext(null);a.displayName="FileViewerRenderContext";i.useFileViewerRenderContext=()=>r.useContext(a),i.FileViewerRenderContextProvider=a.Provider})),define("typescript/libraries/file-viewer/src/sidebar/login_signup_buttons",["require","exports","tslib","dig-components/buttons","react","react-redux","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.LoginSignupButtons=void 0,a=t.__importDefault(a);i.LoginSignupButtons=({intl:e,dispatch:i,className:t})=>{const c=n.useSelector(s.getCurrentUser),d=n.useSelector(s.getFetchingUser),u=e.formatMessage({id:"N0xz5m",defaultMessage:"Sign in"});return d||c?null:a.default.createElement("div",{className:t},a.default.createElement(r.Button,{onClick:()=>i(l.showAuthModal({mode:o.AuthMode.LOGIN,kind:o.LoginOrRegisterKind.SIDEBAR})),"aria-label":e.formatMessage({id:"Cg3xuN",defaultMessage:"Button to trigger login dialog"}),variant:"opacity"},u),a.default.createElement(r.Button,{onClick:()=>i(l.showAuthModal({mode:o.AuthMode.REGISTER,kind:o.LoginOrRegisterKind.SIDEBAR})),"aria-label":e.formatMessage({id:"B9J0l9",defaultMessage:"Button to trigger sign up dialog"}),variant:"primary"},e.formatMessage({id:"5KEf7W",defaultMessage:"Sign up"})))},i.LoginSignupButtons.displayName="LoginSignupButtons"})),define("typescript/libraries/file-viewer/src/sidebar/edit_plugin_sidebar",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/css/right_rail/right_rail.module.css"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.EditPluginSidebar=void 0,r=t.__importDefault(r),o=t.__importStar(o);i.EditPluginSidebar=({plugin:e,fileViewerId:i,pluginNavigation:t,pluginQueryBus:l})=>{const c=a.useSelector(e=>n.getPluginData(e,{fileViewerId:i,navigation:t})),d=a.useSelector(e=>s.makePluginProps(e,i,c,l)),{Sidebar:u}=e.editUI;return u&&d?r.default.createElement("div",{className:o.editPluginContainer},r.default.createElement(u,Object.assign({},d))):null},i.EditPluginSidebar.displayName="EditPluginSidebar"})),define("typescript/libraries/file-viewer/src/titlebar/help_menu",["require","exports","tslib","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/menu","react","react-intl"],(function(e,i,t,r,a,n,s,o,l){"use strict";var c;Object.defineProperty(i,"__esModule",{value:!0}),i.HelpMenu=void 0,o=t.__importDefault(o),(function(e){e[e.HELP=0]="HELP",e[e.REPORT=1]="REPORT",e[e.PRIVACY=2]="PRIVACY",e[e.COOKIES=3]="COOKIES"})(c||(c={})),i.HelpMenu=o.default.memo(()=>{const e=l.useIntl(),i=document.getElementById("consent-iframe"),t=e.formatMessage({id:"yXlaNs",defaultMessage:"Help"});return o.default.createElement(s.Menu.Wrapper,{onSelection:e=>{var t;const r=window.location&&encodeURIComponent(window.location.href),a={[c.HELP]:"https://help.dropbox.com/",[c.REPORT]:`/report_abuse?ssu=${r}`,[c.PRIVACY]:"/privacy"};if(e===c.COOKIES)return null===(t=i.contentWindow)||void 0===t?void 0:t.postMessage({message_type:"OPEN_OPTIONS_DIALOG"},"https://consent.dropbox.com/");const n=a[e];window.open(n)}},({getTriggerProps:l,getContentProps:d})=>o.default.createElement(o.default.Fragment,null,o.default.createElement(r.IconButton,Object.assign({},l(),{variant:"transparent","aria-label":t}),o.default.createElement(n.UIIcon,{src:a.HelpLine})),o.default.createElement(s.Menu.Content,Object.assign({},d()),o.default.createElement(s.Menu.Segment,null,o.default.createElement(s.Menu.ActionItem,{value:c.HELP,key:c.HELP},e.formatMessage({id:"AIqtl8",defaultMessage:"Help center"})),o.default.createElement(s.Menu.ActionItem,{value:c.PRIVACY,key:c.PRIVACY},e.formatMessage({id:"dCY8w0",defaultMessage:"Privacy and legal"})),i&&o.default.createElement(s.Menu.ActionItem,{value:c.COOKIES,key:c.COOKIES},e.formatMessage({id:"jnuJZG",defaultMessage:"Cookie & CCPA preferences"})),o.default.createElement(s.Menu.ActionItem,{value:c.REPORT,key:c.REPORT},e.formatMessage({id:"ivV9/Z",defaultMessage:"Report an issue"}))))))}),i.HelpMenu.displayName="HelpMenu",i.HelpMenu.displayName="HelpMenu"})),define("typescript/libraries/file-viewer/src/utils",["require","exports","tslib","react-intl","react","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/plugins/types","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/core/utils/support","typescript/libraries/file-viewer/src/loading_helpers"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.maybePreloadFile=i.maybePreloadFiles=i.calcResponsiveSize=i.getRootName=i.extractSnackbarManagerFromPlugins=i.extractToolbarComponents=i.extractTitlebarComponentsFromPlugins=i.extractActionDefinitionsFromPlugins=i.extractActionsFromPlugins=i.CategoryButton=i.GENERIC_CATEGORY_PLUGIN_ID=void 0,a=t.__importStar(a),i.GENERIC_CATEGORY_PLUGIN_ID="GENERIC_CATEGORY_PLUGIN_ID";const g=e=>({actionType:c.ActionBarActionTypes.CUSTOM_ACTION,id:e.id,text:r.defineMessage({id:"C2s323",defaultMessage:"Blank"}),icon:a.default.createElement("div",null),isEnabled:!0,renderButton:e.renderButton,overflowItem:e.overflowItem,placement:e.placement}),_=(e,i)=>{const{alwaysAtTopLevel:t,atTopLevelIfSpace:r,alwaysInOverflow:a}=i,n=(e=[],i=[])=>[...e,...i];return{alwaysAtTopLevel:n(e.alwaysAtTopLevel,null==t?void 0:t.map(g)),atTopLevelIfSpace:n(e.atTopLevelIfSpace,null==r?void 0:r.map(g)),alwaysInOverflow:((e=[],i=[])=>{var t,r;const a=[];for(let n=0;n<e.length||n<i.length;n++)a[n]=[...null!==(t=e[n])&&void 0!==t?t:[],...null!==(r=i[n])&&void 0!==r?r:[]];return a})(e.alwaysInOverflow,null==a?void 0:a.map(e=>e.map(g)))}},m=(e,i)=>{const{identifier:t,titleBarUI:r}=i;return Object.assign(Object.assign({},e),{[t]:r})},w=(e,i)=>Object.assign(Object.assign({},e),{[i.identifier]:i.toolbarUI}),b={workflows:r.defineMessage({id:"6BWuNX",defaultMessage:"Workflows"})},h={workflows:l.MemberTransferLine};i.CategoryButton=({category:e,children:i,hideIcons:t})=>{const l=r.useIntl(),c=b[e],d=h[e],u=a.useCallback(e=>{null==e||e.handler()},[]);return a.default.createElement(n.Menu.Wrapper,{onSelection:u},({getTriggerProps:r,getContentProps:u})=>a.default.createElement(a.default.Fragment,null,a.default.createElement(s.Button,Object.assign({},r(),{variant:"opacity",withIconLeft:t?null:a.default.createElement(o.UIIcon,{src:d}),withDropdownIcon:!0,className:e+"-menu-button"}),l.formatMessage(c)),a.default.createElement(n.Menu.Content,Object.assign({},u()),a.default.createElement(n.Menu.Segment,null,i))))},i.CategoryButton.displayName="CategoryButton";const y=({category:e,children:i})=>{const t=r.useIntl(),s=b[e],l=h[e];return a.default.createElement(n.Menu.Submenu,{withTriggerContent:t.formatMessage(s),withLeftAccessory:a.default.createElement(o.UIIcon,{src:l})},a.default.createElement(n.Menu.Segment,null,i))};y.displayName="CategorySubmenu";const S=(e,t,r)=>{var n,s,o,l;const c=[];if(e.workflows&&e.workflows.length>0){const t=((e,t)=>{const r=t.map(e=>e.overflowItem?a.default.createElement(a.default.Fragment,{key:e.id},e.overflowItem):null).filter(e=>null!==e);if(0===r.length)return;const n=a.default.createElement(y,{category:e},r);return g({id:i.GENERIC_CATEGORY_PLUGIN_ID,renderButton:t=>a.default.createElement(i.CategoryButton,{category:e,hideIcons:t},r),overflowItem:n})})("workflows",e.workflows);void 0!==t&&c.push(t)}const d=t.map(g),u=(null!==(n=r.atTopLevelIfSpace)&&void 0!==n?n:[]).length,p=null!==(l=null===(o=null!==(s=r.alwaysInOverflow)&&void 0!==s?s:[])||void 0===o?void 0:o[0])&&void 0!==l?l:[],v=p.slice(0,u),f=p.slice(u),_=[...v,...d,...c,...f],m=[],w=[],b=[...r.atTopLevelIfSpace||[],...d];for(const e of b)"RightOfCategoryButtons"===e.placement?m.push(e):w.push(e);const h=[...w,...c,...m];return Object.assign(Object.assign({},r),{atTopLevelIfSpace:h,alwaysInOverflow:[_]})};i.extractActionsFromPlugins=function(e,i){const t=e.reduce(_,{}),r=e.reduce((e,i)=>((e,i)=>{var t,r;const a=e;let n;for(n in i){const s=null!==(t=e[n])&&void 0!==t?t:[],o=null!==(r=i[n])&&void 0!==r?r:[];a[n]=[...s,...o]}return a})(e,i.categories||{}),{});return S(r,i,t)},i.extractActionDefinitionsFromPlugins=function(e){return e.filter(e=>d.isActionBarPlugin(e)).map(e=>e.actionDefinitions())},i.extractTitlebarComponentsFromPlugins=function(e){return e.filter(e=>d.isTitleBarPlugin(e)).reduce(m,{})},i.extractToolbarComponents=function(e){return e.filter(e=>d.isToolbarPlugin(e)).reduce(w,{})},i.extractSnackbarManagerFromPlugins=function(e){return Object.values(e).find(d.isSnackbarManagerPlugin)};i.getRootName=function(e){return"work"===e.role&&e.team?e.team.name:e.is_paired?"Personal":"Dropbox"};function P(e){const i=v.resolvePreviewType(e),t=e.content;return t&&i===d.PreviewType.Image&&"image"===t[".tag"]&&t.default_src?f.preloadImage(t.default_src,{srcset:t.src_set}):Promise.resolve()}i.calcResponsiveSize=function(e){return p.is_mobile_or_tablet()?e>1026?u.ResponsiveSize.DESKTOP:e<=736?u.ResponsiveSize.MOBILE:u.ResponsiveSize.TABLET:e>736?u.ResponsiveSize.DESKTOP:e<=428?u.ResponsiveSize.MOBILE:u.ResponsiveSize.TABLET},i.maybePreloadFiles=function(e,i){const t=[];if(0===e.length)return Promise.all(t);const r=[];return[1,2,3,4,5,6,-1,-2].forEach((function(t){const a=(i+t+e.length)%e.length;-1===r.indexOf(a)&&r.push(a)})),r.forEach((function(i){if(e.length>i&&i>0){const r=e[i];r&&t.push(P(r))}})),Promise.all(t)},i.maybePreloadFile=P})),define("typescript/libraries/file-viewer/src/watermarking/edit_plugin/loader",["require","exports","tslib","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/watermarking/utils"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeWatermarkLoader=i.WATER_MARKING_PLUGIN_ID=void 0,i.WATER_MARKING_PLUGIN_ID="water_marking";i.makeWatermarkLoader=(n,s)=>({pluginId:i.WATER_MARKING_PLUGIN_ID,isEnabled:e=>{const i=e.getPluginData().file;return!!i&&a.isSupportedPreviewType(r.getFileExtension(i.name))},load:(i,r)=>t.__awaiter(void 0,void 0,void 0,(function*(){const{makeStore:a}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/watermarking/plugin/redux/store"],i,t)}).then(t.__importStar),{WatermarkingPlugin:o}=yield new Promise((i,t)=>{e(["typescript/libraries/file-viewer/src/watermarking/edit_plugin/plugin"],i,t)}).then(t.__importStar),l=a({platformAdapter:i,logger:n,onWatermarkingSuccessHandler:s});return new o(i,r,l)}))})})),define("typescript/libraries/file-viewer/src/watermarking/utils",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.isSupportedPreviewType=void 0;const t=[".pdf",".jpg",".jpeg",".png",".bmp"];i.isSupportedPreviewType=e=>t.includes(e)})),define("typescript/libraries/file-viewer/src/titlebar/title_bar",["require","exports","tslib","react","react-intl","typescript/libraries/file-viewer/src/css/title_bar.module.css","classnames","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","typescript/libraries/file-viewer/src/sidebar/login_signup_buttons","typescript/libraries/file-viewer/src/titlebar/help_menu","typescript/libraries/file-viewer/src/logging/performance","react-redux","typescript/libraries/file-viewer/src/titlebar/close_button","typescript/libraries/file-viewer/src/titlebar/title","typescript/libraries/file-viewer/src/constants","typescript/libraries/file-viewer/src/hooks/selectors","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/render_context"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TitleBar=i.TITLE_BAR_BACK_AND_HELP_ICONS=void 0,r=t.__importStar(r),n=t.__importStar(n),s=t.__importDefault(s),i.TITLE_BAR_BACK_AND_HELP_ICONS=146;const b={handleAction:e=>{var i,t;e.type!==l.ActionBarActionTypes.OPEN&&e.type!==l.ActionBarActionTypes.CUSTOM_ACTION||null===(t=null===(i=e.menuItem)||void 0===i?void 0:i.handler)||void 0===t||t.call(i)}};i.TitleBar=r.memo(e=>{var t,h;u.useMarkTimingEventOnMount(u.PreviewsTimingEvents.FVSDK_TITLE_BAR_MOUNT);const{actions:y,components:S}=e,P=p.useDispatch(),E=a.useIntl(),{fileViewerId:I,canCloseViewer:C,featureConfig:F}=m.useFileViewerContext(),{responsiveSize:O,width:T}=w.useFileViewerRenderContext(),A=F.titlebar_logo_config.base_url,{previewKey:x}=_.useCurrentFileInfo(I),D=_.useCurrentFileMetadata(x),k=(null==D?void 0:D.fileConfig.enable_pass)&&(null===(t=S.PASS)||void 0===t?void 0:t.Component),M=null===(h=S.SHARE)||void 0===h?void 0:h.Component,L=r.createElement(c.LoginSignupButtons,{intl:E,dispatch:P,className:n.auth}),j=O===l.ResponsiveSize.MOBILE;return r.createElement("header",{className:s.default(n.titleBar),"data-testid":g.TITLE_BAR_TEST_ID},r.createElement(v.CloseButton,{previewKey:x,fileViewerId:I,baseUrl:A,canCloseViewer:C}),null!=j?j:r.createElement(f.Title,{previewKey:x,fileViewerId:I,width:T-i.TITLE_BAR_BACK_AND_HELP_ICONS,isMobileSize:j}),r.createElement(o.ActionBar,{intl:E,actionHandler:b,actions:y,responsive:!0,responsiveSize:O,className:j?n.actionBarMobile:n.actionBar,fixedWidth:j?40:void 0}),!j&&r.createElement(r.Fragment,null,r.createElement("div",{className:n.spacer}),M&&r.createElement("div",{className:n.share},r.createElement(M,null)),L,k&&r.createElement("div",{className:n.pass},r.createElement(k,null))),r.createElement("div",{className:n.helpButton},r.createElement(d.HelpMenu,Object.assign({},e))))}),i.TitleBar.displayName="TitleBar",i.TitleBar.displayName="TitleBar"})),define("typescript/libraries/file-viewer/src/titlebar/close_button",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/css/title_bar.module.css","dig-components/icons","dig-components/buttons","dig-components/icons/src","react-intl","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/titlebar/titlebar_logo"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.CloseButton=void 0,r=t.__importStar(r),s=t.__importStar(s),i.CloseButton=r.memo(e=>{const{fileViewerId:i,previewKey:t,canCloseViewer:v,baseUrl:f}=e,g=a.useDispatch(),_=d.useIntl(),m=()=>{g(n.closeViewer({fileViewerId:i,previewKey:t,sourceContext:u.UserActionContext.TitleBarMain}))};return v?r.createElement("span",{className:s.closeButton},r.createElement(l.IconButton,{onClick:m,variant:"transparent"},r.createElement(o.UIIcon,{"aria-label":_.formatMessage({id:"IDlWPW",defaultMessage:"Back"}),src:c.ChevronLeftLine}))):r.createElement(p.Logo,{className:s.dropboxLogo,previewKey:t,fileViewerId:i,dispatch:g,baseUrl:f})}),i.CloseButton.displayName="CloseButton",i.CloseButton.displayName="CloseButton"})),define("typescript/libraries/file-viewer/src/titlebar/title",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/css/title_bar.module.css","typescript/libraries/file-viewer/src/titlebar/truncated_title","typescript/libraries/file-viewer/src/preview_archive/breadcrumbs","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Title=i.TITLE_BAR_BACK_AND_HELP_ICONS=void 0,r=t.__importStar(r),n=t.__importStar(n),i.TITLE_BAR_BACK_AND_HELP_ICONS=146,i.Title=r.memo(e=>{const{fileViewerId:i,previewKey:t,isMobileSize:c,width:d}=e,u=a.useDispatch(),p=a.useSelector(e=>l.getFileMetadata(e,t)),v=a.useSelector(e=>l.getFilePreviewUi(e,i,t)),f=null==v?void 0:v.currentPath,g=p.file_name||"",_=p.file_path||"",m=d+32;return r.createElement("div",{className:n.title,style:{maxWidth:d}},f&&f.length>0?r.createElement(o.ArchiveFileBreadcrumbs,{archiveName:g,currentPath:f,fileViewerId:i,previewKey:t,dispatch:u,isMobile:c}):r.createElement(s.TruncatedTitle,{width:m,fileName:g,filePath:_}))}),i.Title.displayName="Title",i.Title.displayName="Title"})),define("typescript/libraries/file-viewer/src/file_viewer/bootstrap",["require","exports","redux","typescript/libraries/file-viewer/src/core/data/reducer","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/api_v2/redux/previews","typescript/libraries/file-viewer/src/core/middlewares/riviera_data","typescript/libraries/file-viewer/src/core/config","typescript/libraries/file-viewer/src/core/middlewares/analytics","typescript/libraries/file-viewer/src/core/middlewares/ui_action_redispatcher","typescript/libraries/api_v2/redux/files","typescript/libraries/api_v2/redux/users","typescript/libraries/file-viewer/src/core/middlewares/file_system","typescript/libraries/file-viewer/src/core/middlewares/full_screen","typescript/libraries/file-viewer/src/core/middlewares/navigation","typescript/libraries/file-viewer/src/core/middlewares/print","typescript/libraries/file-viewer/src/core/middlewares/url","typescript/libraries/file-viewer/src/core/middlewares/cloud_docs","typescript/libraries/api_v2/redux/cloud_docs","typescript/libraries/api_v2/redux/seen_state","typescript/libraries/api_v2/redux/flows","typescript/libraries/api_v2/redux/sharing","typescript/libraries/file-viewer/src/file_viewer/file_viewer","typescript/libraries/file-viewer/src/file_viewer/types","typescript/libraries/file-viewer/src/pass/beacon_middleware","typescript/libraries/file-viewer/src/preview_excel/tab_selection_handler","typescript/libraries/file-viewer/src/core/middlewares/preferences","typescript/libraries/file-viewer/src/core/middlewares/report_exception"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F){"use strict";function O(e){const i="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__?t.compose(t.applyMiddleware(...e),window.__REDUX_DEVTOOLS_EXTENSION__({name:"File Viewer SDK"})):t.applyMiddleware(...e);return t.createStore(t.combineReducers(r.reducers),{},i)}Object.defineProperty(i,"__esModule",{value:!0}),i.createFileViewerFactory=i.createSDKStore=void 0,i.createSDKStore=O,i.createFileViewerFactory=function(e){var i,t;const{batteries:r,callbacks:T,featureConfig:A,initData:x,platformConfig:D}=e,{accountId:k,deviceType:M}=x,{optionalIOClients:L,coreIOClients:j,logger:R,intl:N}=r,{rivieraIOClient:V,apiv2ClientBase:U}=j,{fileSystemClient:B,fullScreenClient:K,navigationClient:z,presenceBeaconIOClient:H,printClient:W,urlClient:q,preferencesClient:G,cloudDocsClient:Z,reportExceptionClient:$}=L,Q=e.pluginLoaders||[],X=new Set(Q.map(e=>e.pluginId)),Y=O([...z?[f.middleware(z)]:[],s.rivieraDataMiddleware(V),n.middleware(U.ns("previews")),d.middleware(U.ns("files")),u.middleware(U.ns("users")),c.uiActionRedispatcher,...q?[_.middleware(q)]:[],...H?[E.beaconMiddleware(H)]:[],y.middleware(U.ns("sharing")),...(null==A?void 0:A.excel_support)?[I.tabSelectionHandler]:[],...B?[p.middleware(B)]:[],...K?[v.middleware(K)]:[],...W?[g.middleware(W)]:[],b.middleware(U.ns("seen_state")),h.middleware(U.ns("flows")),...G?[C.preferencesMiddleware(G)]:[],...Z?[m.middleware(Z)]:[],..."ms_view_embed"===(null===(i=null==A?void 0:A.excel_support)||void 0===i?void 0:i.embed_support)?[w.middleware(U.ns("cloud_docs"))]:[],...$?[F.reportExceptionMiddleware($)]:[],...R?[l.analyticsMiddleware(R)]:[]]);let J=o.DEFAULT_CONFIG;A&&(J=Object.assign(Object.assign({},J),A));const ee={callbacks:T,intl:N,store:Y,accountId:k,showAuthModal:r.optionalIOClients.showAuthModal,canCloseViewer:!!(null===(t=r.optionalIOClients.navigationClient)||void 0===t?void 0:t.closeViewer),deviceType:M||a.DeviceType.desktop,config:J,platformConfig:Object.assign(Object.assign({},P.defaultPlatformConfig),D)},ie=e=>{const i=e.pluginId;if(X.has(i))throw new Error("Plugin ID "+i+" registered twice");Q.push(e),X.add(i)};return{createFileViewer:()=>new S.SDKFileViewer(ee,U,Q,r),registerPlugin(e){ie(e)},registerPlugins(e){e.forEach(e=>e&&ie(e))}}}})),define("typescript/libraries/file-viewer/src/file_viewer/components",["require","exports","tslib","react","typescript/libraries/file-viewer/src/file_viewer/bootstrap"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewer=i.FileViewerInstance=i.FileViewerSDKContextProvider=i.FileViewerSDKContext=void 0,r=t.__importStar(r),i.FileViewerSDKContext=r.createContext(null);i.FileViewerSDKContextProvider=e=>{const{initData:{accountId:t},featureConfig:n,plugins:s,children:o}=e,l=r.useMemo(()=>{const i=a.createFileViewerFactory(e);return i.registerPlugins(s),i},[n,t]);return r.createElement(i.FileViewerSDKContext.Provider,{value:l},o)},i.FileViewerSDKContextProvider.displayName="FileViewerSDKContextProvider";i.FileViewerInstance=e=>{const{initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d}=e,u=r.useContext(i.FileViewerSDKContext);if(!u)throw new Error("File Viewer SDK Context must be provided");const p=r.useMemo(()=>u.createFileViewer(),[u]);r.useEffect(()=>()=>{p.cleanup()},[p]);const[v,f]=r.useState(0),g=r.useRef(null);r.useEffect(()=>{a&&t.__awaiter(void 0,void 0,void 0,(function*(){yield p.initialize(a),f(e=>e+1)}))},[a]);const _={header:l,mobileFooter:c,mobileHeader:d},m=r.useMemo(()=>v>0?p.makeComponent(o,_):null,[v]);return r.createElement("div",{className:n,id:s,ref:g},m)},i.FileViewerInstance.displayName="FileViewerInstance",i.FileViewerInstance.displayName="FileViewerInstance";i.FileViewer=e=>{const{initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d}=e,u=t.__rest(e,["initializeOpts","className","id","viewport","header","mobileFooter","mobileHeader"]),p={initializeOpts:a,className:n,id:s,viewport:o,header:l,mobileFooter:c,mobileHeader:d};return r.createElement(i.FileViewerSDKContextProvider,Object.assign({},u),r.createElement(i.FileViewerInstance,Object.assign({},p)))},i.FileViewer.displayName="FileViewer",i.FileViewer.displayName="FileViewer"})),define("typescript/libraries/file-viewer/src/core/middlewares/analytics",["require","exports","tslib","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/logging/session","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/extension_constants","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/paths","lodash","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";function v(e){return Object.keys(e).reduce((i,t)=>{const r=e[t];return"string"==typeof r||"number"==typeof r?i[t]=String(r):"boolean"==typeof r?i[t]=String(+r):"object"==typeof r&&r&&(i[t]=JSON.stringify(r)),i},{})}function f(e){return Object.assign(Object.assign({},e),{file_extension:o.getWhitelistedFileExtension(e.file_extension||""),extra:v(e.extra)})}Object.defineProperty(i,"__esModule",{value:!0}),i.analyticsMiddleware=i.MAPPED_USER_ACTIONS=i.serializeSession=void 0,d=t.__importDefault(d),i.serializeSession=f;const g={[s.Action.ZoomIn]:a.UserAction.ZoomIn,[s.Action.ZoomOut]:a.UserAction.ZoomOut,[s.Action.CloseDocSidebar]:a.UserAction.CloseDocSidebar,[s.Action.OpenDocSidebar]:a.UserAction.OpenDocSidebar,[s.Action.ZoomToggleOriginalOrFit]:a.UserAction.ZoomToggleOriginalOrFit,[s.Action.UpdateDocCurrentPageIndex]:a.UserAction.PageJump,[s.Action.PageDown]:a.UserAction.PageDown,[s.Action.PageUp]:a.UserAction.PageUp,[s.Action.Share]:a.UserAction.Share,[s.Action.Restore]:a.UserAction.Restore,[s.Action.OpenWith]:a.UserAction.OpenWith,[s.Action.OpenWebPreview]:a.UserAction.OpenWebPreview,[s.Action.FlipToNextFile]:a.UserAction.FlipNext,[s.Action.FlipToPreviousFile]:a.UserAction.FlipPrevious,[s.Action.CloseViewer]:a.UserAction.CloseViewer,[s.Action.OpenFullscreenPreview]:a.UserAction.OpenFullscreenPreview,[s.Action.OpenVersionHistory]:a.UserAction.OpenVersionHistory,[s.Action.OpenRightRail]:a.UserAction.ToggleSidebarOn,[s.Action.CloseRightRail]:a.UserAction.ToggleSidebarOff,[s.Action.SwitchWorkbookTab]:a.UserAction.SwitchWorkbookTab,[s.Action.CopyToDropbox]:a.UserAction.SaveToDropbox,[s.Action.DownloadFile]:a.UserAction.Download,[s.Action.Print]:a.UserAction.Print,[s.Action.EnterFullScreen]:a.UserAction.ToggleFullscreenOn,[s.Action.ExitFullScreen]:a.UserAction.ToggleFullscreenOff,[s.Action.ClickDropboxLogo]:a.UserAction.ClickDropboxLogo,[s.Action.SetActiveRightRailPlugin]:a.UserAction.SidebarPaneSelected};let _;i.MAPPED_USER_ACTIONS=d.default(g);i.analyticsMiddleware=function(e){return({getState:t,dispatch:d})=>m=>w=>{var b;switch(w.type){case r.Action.LogSessionEvent:try{return m(((e,i,t)=>{const{payload:{event:a,fileViewerId:s,previewSessionId:o,extra:l}}=t;let c=i.loggingSession[s];return o===c.file_preview_session_id&&(c=n.recordEvent(i.loggingSession[s],a,l),e.log(a,f(c)),c=n.updateSessionLastEvent(c,a)),r.updateSession(c)})(e,t(),w))}catch(e){return e instanceof Error&&(d(s.reportException({error:e,fileType:(null===(b=t().loggingSession[w.payload.fileViewerId])||void 0===b?void 0:b.extra.preview_type)||"other",isCritical:!u.isFVError(e)||e.type!==u.FVErrorCode.InvalidLoggingOrder})),console.warn(e.message)),m(w)}case r.Action.Log:return m(((e,i,t)=>{const{payload:a}=t,{event:n,fileViewerId:s}=a,o=i.loggingSession[s];return e.log(n,f(Object.assign(Object.assign({},o),{extra:Object.assign(Object.assign({},(null==o?void 0:o.extra.source_context)&&{source_context:o.extra.source_context}),a.extra)}))),r.updateSession(o)})(e,t(),w));case r.Action.LogVideo:return void 0!==e.logVideo?m(((e,i,t)=>{const{payload:a}=t,{eventName:n,fileViewerId:s,previewSessionId:o}=a,l=i.loggingSession[s],c=l.file_preview_session_id;return void 0!==e.logVideo&&o===c&&e.logVideo(n,((e,i,t)=>{const{previewSessionId:r,videoFormat:a,videoDuration:n,videoTruncated:s,extra:o}=e;return{file_preview_session_id:r,video_format:a,video_duration_seconds:n,video_truncated:s,ns_id:i,sj_id:t,extra:o}})(a,l.ns_id,l.sj_id)),r.updateSession(l)})(e,t(),w)):m(w);case r.Action.LogUserAction:return m(((e,t,r)=>{const{payload:n}=r,{userAction:s,actionContext:o,fileViewerId:l}=n,c=t.loggingSession[l];return s in i.MAPPED_USER_ACTIONS?console.warn(`WARNING: ${s} is automatically logged when it's in USER_ACTION_MAP. No need to call logUserAction for it.`):e.log(a.EventType.UserAction,f(Object.assign(Object.assign({},c),{extra:Object.assign(Object.assign(Object.assign({},(null==c?void 0:c.extra.source_context)&&{source_context:c.extra.source_context}),n.extra),{action:s,context:o})}))),r})(e,t(),w));case r.Action.LogTTI:return m(((e,i,t)=>{let a=null;return a=n.markTTI(i.loggingSession[t.payload]),e.logTTI(),r.updateSession(a)})(e,t(),w));case r.Action.LogTTV:return m(((e,i,t)=>{const a=i.loggingSession[t.payload];return e.logTTV(),r.updateSession(a)})(e,t(),w));case s.Action.ExcelSheetRenderFailed:case s.Action.ExcelSheetRenderSucceeded:case s.Action.FetchExcelSheetLayoutData:case s.Action.FetchExcelSheetLayoutDataResult:return m(((e,i,t)=>{const{fileViewerId:r,sheetIndex:n}=t.payload,o=i.loggingSession[r],l=f(Object.assign(Object.assign({},o),{extra:v({tab_index:n,ts:Date.now()})}));switch(t.type){case s.Action.FetchExcelSheetLayoutData:e.log(a.EventType.ExcelSheetDownloadAttempted,l);break;case s.Action.FetchExcelSheetLayoutDataResult:null!=t.error?e.log(a.EventType.ExcelSheetDownloadFailed,l):e.log(a.EventType.ExcelSheetDownloadSucceeded,l);break;case s.Action.ExcelSheetRenderFailed:e.log(a.EventType.ExcelSheetRenderFailed,l);break;case s.Action.ExcelSheetRenderSucceeded:e.log(a.EventType.ExcelSheetRenderSucceeded,l)}return t})(e,t(),w));case s.Action.UpdateArchiveFileCurrentPath:return m(((e,i,t)=>{const{fileViewerId:r,currentPath:n,isDir:s}=t.payload;if(void 0!==s){const t=i.loggingSession[r],l=f(Object.assign(Object.assign({},t),{extra:v({action:a.UserAction.ArchiveNavigation,context:a.UserActionContext.PreviewContentMain,isDir:String(s),extension:s?"":o.getWhitelistedFileExtension(c.getFileExtension(n[n.length-1]))})}));e.log(a.EventType.UserAction,l)}return t})(e,t(),w));case r.Action.LogDuration:return m(((e,i,t)=>{var r;const{eventName:a,duration:n,fileViewerId:s,tags:o,shouldLogToHive:l}=t.payload,c=i.loggingSession[s];return null===(r=e.logDuration)||void 0===r||r.call(e,{eventName:a,durationInMs:n,session:c?f(c):void 0,tags:o,shouldLogToHive:l}),t})(e,t(),w));case s.Action.SetupGetPlayDurationSeconds:return void(_=w.payload.getPlayDurationSeconds)}return w.type in g&&!w.payload.skipLogging?m(((e,i,t)=>{const{fileViewerId:r,sourceContext:n}=t.payload,{loggingSession:o}=i,c=o[r],d=l.isRightRailOpen(i,r),u={context:n,action:g[t.type],right_sidebar_state:d?"opened":"collapsed"};if(t.type===s.Action.SwitchWorkbookTab)u.tab_index=t.payload.tabIndex;else if(t.type===s.Action.SetActiveRightRailPlugin)u.selected_pane=t.payload.pluginId;else if(t.type===s.Action.CloseViewer){const e=l.getCurrentFilePreviewUI(i,r);e&&p.filterAudioVideoFilePreviewUiState(e)&&_&&(u.play_duration_seconds=_())}return e.log(a.EventType.UserAction,f(Object.assign(Object.assign({},c),{extra:v(u)}))),t})(e,t(),w)):m(w)}}})),define("typescript/libraries/file-viewer/src/core/middlewares/riviera_data",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/riviera/api","typescript/libraries/file-viewer/src/core/data/riviera/transform","typescript/libraries/file-viewer/src/core/invariant","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/constants","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/preview_key"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";function v(e){const{previewKey:i,fileViewerId:t}=e.payload;return{previewKey:i,fileViewerId:t}}Object.defineProperty(i,"__esModule",{value:!0}),i.rivieraDataMiddleware=void 0,i.rivieraDataMiddleware=function(e){const i=new a.RivieraClientBase(e);return({getState:e,dispatch:a})=>f=>g=>t.__awaiter(this,void 0,void 0,(function*(){var t,_;const m=e();switch(g.type){case r.Action.FetchRivieraData:{const{fileViewerId:e,previewKey:i,config:t}=g.payload,n=u.getRivieraData(m,i);if(n&&Object.keys(n).length)return;const l=u.getPreviewMetadata(m,i);if(!l||!l.content)throw new o.FVError(o.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `content` from preview data api payload");const c=[];switch(l.content[".tag"]){case"ssr_doc":case"cloud_doc":const{text_url_tmpl:n,image_url_tmpl:u}=l.content,p="cloud_doc"===l.content[".tag"]?l.content.exit_url:void 0;if(s.invariant(!("cloud_doc"!==l.content[".tag"]&&!n&&!u),o.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),!p&&null!=n&&null!=u){const s=a(r.fetchPageDataWithMetadata({fileViewerId:e,previewKey:i,textUrlTmpl:n,startPage:0,endPage:t.partial_prewarm_allowed?d.TEXT_FIRST_BATCH_SIZE:50}));c.push(s)}break;case"video":{const{metadata_url:e}=l.content;e&&a(r.fetchMediaMetadata({metadataUrl:e,previewKey:i}));break}case"audio":{const e=l.content.waveform_url;e&&a(r.fetchWaveformData({url:e,previewKey:i}));break}case"linkfile":{const e=l.content.url,t=l.content.authenticated;e&&a(r.fetchLinkfileData({url:e,authenticated:!!t,previewKey:i}));break}case"excel":{if("excel2"!==t.excel_support.support)break;const{content:{workbook_data_url_tmpl:n}}=l;s.invariant(!!n,o.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),null!=n&&c.push(a(r.fetchExcelSheetLayoutData({fileViewerId:e,previewKey:i,sheetIndex:0,workbookDataUrlTmpl:n})));break}case"archive":s.invariant(!!l.preview_url,o.FVErrorCode.MissingContentMetadata,"Content metadata is not present"),l.preview_url&&(a(r.fetchArchiveTopLevelData({fileViewerId:e,previewKey:i,contentUrl:l.preview_url})),c.push(a(r.setupArchiveFileCurrentPath({fileViewerId:e,previewKey:i}))))}return yield Promise.all(c)}case r.Action.FetchPageDataWithMetadata:{const{textUrlTmpl:e,startPage:t,endPage:a}=g.payload,{previewKey:l,fileViewerId:c}=v(g),d=u.getPreviewMetadata(m,l),p=u.getRivieraData(m,l),_=p&&"metadata"in p&&!p.error?p.metadata:void 0;try{const u=yield i.fetchDocMetadata(e,!_,t,a);s.invariant(!!d,o.FVErrorCode.InvalidFileInfo,`Preview Data for ${l.serialized} should have been available`);const{image_url_tmpl:v,supported_widths:g}=d.content,m=null!=_?_:u.metadata;s.invariant(!!m,o.FVErrorCode.MalformedRivieraData,"Response from riviera ssr_doc has no metadata and we also have no existing metadata");const w=p&&"pages"in p&&!p.error?p.pages:void 0,b=m.page_count;return f(r.fetchPageDataWithMetadataResult({fileViewerId:c,previewKey:l,data:{metadata:m,pages:n.processTextAndUrl(v,m.dimensions,b,u,w,g)}}))}catch(e){return f(r.fetchPageDataWithMetadataResult({fileViewerId:g.payload.fileViewerId,previewKey:l,data:void 0},e))}}case r.Action.FetchMediaMetadata:{const e=g.payload.previewKey;if(p.isNestedArchiveFilePreviewKey(e))return f(g);try{const t=yield i.fetchMediaMetadata(g.payload.metadataUrl);return s.invariant(!!m.previewData[e.serialized],o.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`),f(r.fetchMediaMetadataResult({data:{is_truncated:t.is_truncated},previewKey:e}))}catch(i){return a(r.fetchMediaMetadataResult({data:{is_truncated:void 0},previewKey:e},i))}}case r.Action.FetchWaveformData:{const e=g.payload.previewKey;if(p.isNestedArchiveFilePreviewKey(e))return f(g);try{const t=yield i.fetchWaveformData(g.payload.url);return s.invariant(!!m.previewData[e.serialized],o.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`),f(r.fetchWaveformDataResult({data:{waveformHeights:t.waveformHeights},previewKey:e}))}catch(i){return a(r.fetchWaveformDataResult({data:{waveformHeights:void 0},previewKey:e},i))}}case r.Action.FetchLinkfileData:{const e=g.payload.previewKey;try{const t=yield i.fetchLinkfileData(g.payload.url,g.payload.authenticated);return s.invariant(!!m.previewData[e.serialized],o.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`),f(r.fetchLinkfileDataResult({data:{uri:t.uri},previewKey:e}))}catch(i){return a(r.fetchLinkfileDataResult({data:{uri:void 0},previewKey:e},i))}}case r.Action.RefreshBlob:{const{previewKey:e,fileViewerId:n}=v(g),d=u.getPreviewMetadata(m,e);try{const p=yield i.refreshDocBlob(g.payload.refreshUrl,g.payload.password);if(f(r.refreshBlobSuccessAction({previewKey:e,preview:p})),s.invariant(!!d,o.FVErrorCode.InvalidFileInfo,`Preview Data for ${e.serialized} should have been available`),g.payload.password)return a(r.fetchPageDataWithMetadata({fileViewerId:n,previewKey:e,textUrlTmpl:p.text_url_tmpl}));const v=u.getFilePreviewUi(m,g.payload.fileViewerId,e),w=null!==(_=null===(t=c.filterDocFilePreviewUiState(v))||void 0===t?void 0:t.currentPageIndex)&&void 0!==_?_:0,b=l.calculatePageRange(w);return a(r.fetchPageDataWithMetadata({fileViewerId:n,previewKey:e,textUrlTmpl:p.text_url_tmpl,startPage:b[0],endPage:b[1]}))}catch(i){return f(r.fetchPageDataWithMetadataResult({fileViewerId:n,previewKey:e,data:void 0},i))}}case r.Action.FetchExcelSheetLayoutData:{const{previewKey:e,fileViewerId:t}=v(g);f(g);const{sheetIndex:n,workbookDataUrlTmpl:s}=g.payload;try{const o=yield i.fetchExcelWorkbookLayoutData(s,n);return a(r.fetchExcelSheetLayoutDataResult({fileViewerId:t,previewKey:e,sheetIndex:n,data:o}))}catch(i){return a(r.fetchExcelSheetLayoutDataResult({fileViewerId:t,previewKey:e,sheetIndex:n,data:void 0},i))}}case r.Action.FetchArchiveTopLevelData:{const{previewKey:e,fileViewerId:t}=v(g);f(g);try{const{contentUrl:n}=g.payload,l=yield i.fetchArchiveTopLevelData(n);return s.invariant(!!l,o.FVErrorCode.MalformedRivieraData,"Response from riviera archive has no data"),a(r.fetchArchiveTopLevelDataResult({fileViewerId:t,previewKey:e,data:l}))}catch(i){return a(r.fetchArchiveTopLevelDataResult({fileViewerId:t,previewKey:e,data:void 0},i))}}}return f(g)}))}})),define("typescript/libraries/file-viewer/src/core/middlewares/ui_action_redispatcher",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r,a,n){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.uiActionRedispatcher=void 0;i.uiActionRedispatcher=({getState:e})=>i=>s=>{const o=e(),{filePreviewUi:l,rivieraData:c}=o,{previewKey:d,fileViewerId:u}=s.payload;if(!d)return i(s);const p=n.getPreviewMetadata(o,d),v=c[d.serialized];if(!l[u]||!p||!p.content)return i(s);if(!l[u][d.serialized])return i(s);switch(s.type){case t.Action.ZoomIn:return i(t.zoomIn(Object.assign(Object.assign({},s.payload),{previewType:"ssr_doc"===p.content[".tag"]?r.PreviewType.SsrDoc:r.PreviewType.Image})));case t.Action.ZoomOut:return i(t.zoomOut(Object.assign(Object.assign({},s.payload),{previewType:"ssr_doc"===p.content[".tag"]?r.PreviewType.SsrDoc:r.PreviewType.Image})));case t.Action.UpdateDocCurrentPageIndex:if((p.content[".tag"]===r.PreviewType.SsrDoc||p.content[".tag"]===r.PreviewType.CloudDoc)&&a.isDocPreviewRivieraData(v)&&v.metadata)return i(t.updateDocCurrentPageIndex(Object.assign(Object.assign({},s.payload),{pageCount:v.metadata.page_count})));break;case t.Action.PageDown:if((p.content[".tag"]===r.PreviewType.SsrDoc||p.content[".tag"]===r.PreviewType.CloudDoc)&&a.isDocPreviewRivieraData(v)&&v.metadata)return i(t.pageDown(Object.assign(Object.assign({},s.payload),{pageCount:v.metadata.page_count})))}return i(s)}})),define("typescript/libraries/file-viewer/src/core/data/reducer",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/api_v2/redux/users","typescript/libraries/api_v2/redux/files","typescript/libraries/api_v2/redux/previews","typescript/libraries/api_v2/redux/flows","typescript/libraries/api_v2/redux/cloud_docs","typescript/libraries/file-viewer/src/core/logging/session","typescript/libraries/file-viewer/src/core/uuid","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/core/constants","typescript/libraries/file-viewer/src/core/extension_constants","typescript/libraries/file-viewer/src/core/data/utils","typescript/libraries/file-viewer/src/core/data/riviera/transform","lodash","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/riviera/types","typescript/libraries/file-viewer/src/core/errors"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.reducers=i.usersReducer=i.currentFileInfoReducer=i.loggingSessionReducer=i.DEFAULT_DOC_PREVIEW_METADATA=i.DEFAULT_FILE_VIEWER_UI=i.DEFAULT_AUDIO_VIDEO_PREVIEW_UI=i.DEFAULT_ARCHIVE_PREVIEW_UI=i.DEFAULT_EXCEL_PREVIEW_UI=i.DEFAULT_DOC_PREVIEW_UI=i.DEFAULT_IMAGE_PREVIEW_UI=i.DEFAULT_FILE_PREVIEW_UI=i.DEFAULT_STATE=void 0;function h(e,i){if(1===i||!e)return 1;let t=Math.round(e*i/p.ZOOM_PERCENT_DELTA)*p.ZOOM_PERCENT_DELTA;return Math.abs(t-e)<p.ZOOM_PERCENT_DELTA&&(t+=i>1?p.ZOOM_PERCENT_DELTA:-p.ZOOM_PERCENT_DELTA),Math.min(Math.max(t,p.MIN_IMG_SCALE_FACTOR),p.MAX_IMG_SCALE_FACTOR)}function y(e,i){return Math.max(Math.min(e*i,p.MAX_DOC_SCALE_FACTOR),p.MIN_DOC_SCALE_FACTOR)}i.DEFAULT_STATE={previewData:{},archiveFiles:{},fileMetadata:{},rivieraData:{},cloudDocsData:{},filePreviewUi:{},fileViewerUi:{},currentFileInfo:{},loggingSession:{},users:{},currentUser:null,fetchingUser:!0,fileContentMetadata:{},plugins:{},sharedLinkInfo:{},videoRequests:[],rootInfo:null,toolbar:{isHovered:!1,override:void 0,overridePluginId:void 0},volume:{volume:1,muted:!1},isPreviewLoading:!1,brandingInfo:{}},i.DEFAULT_FILE_PREVIEW_UI={currentPath:void 0},i.DEFAULT_IMAGE_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{fitScaleFactor:0}),i.DEFAULT_DOC_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentPageIndex:0,fitScaleFactor:0,isPasswordProtected:!1}),i.DEFAULT_EXCEL_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentTabIndex:0,fitScaleFactor:0}),i.DEFAULT_ARCHIVE_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentPath:[],extractAllSnackbarState:null}),i.DEFAULT_AUDIO_VIDEO_PREVIEW_UI=Object.assign(Object.assign({},i.DEFAULT_FILE_PREVIEW_UI),{currentTimestamp:0,isPlaying:!1}),i.DEFAULT_FILE_VIEWER_UI={isDocSidebarOpen:!1,showVideoFrameSteppers:!1,isFullScreen:!1,hasBeenFlipped:!1,isRightRailOpen:!1};const S=[".gdoc",".gslides",".paper",".papert",".binder"],P=(e,t)=>{switch(e){case u.PreviewType.Image:return i.DEFAULT_IMAGE_PREVIEW_UI;case u.PreviewType.SsrDoc:return i.DEFAULT_DOC_PREVIEW_UI;case u.PreviewType.Excel:return i.DEFAULT_EXCEL_PREVIEW_UI;case u.PreviewType.Archive:return i.DEFAULT_ARCHIVE_PREVIEW_UI;case u.PreviewType.Audio:case u.PreviewType.Video:return i.DEFAULT_AUDIO_VIDEO_PREVIEW_UI;case u.PreviewType.CloudDoc:return t&&S.includes(t)?i.DEFAULT_DOC_PREVIEW_UI:i.DEFAULT_FILE_PREVIEW_UI;default:return i.DEFAULT_FILE_PREVIEW_UI}};i.DEFAULT_DOC_PREVIEW_METADATA={metadata:{page_count:0,dimensions:[[0,0,0]]},pages:[]};i.loggingSessionReducer=(e=i.DEFAULT_STATE.loggingSession,r)=>{if(r.type===t.Action.InitializeFilePreviewSession){const{fileViewerId:i,sourceSession:t}=r.payload;return Object.assign(Object.assign({},e),{[i]:l.createFilePreviewSession({file_viewer_session_id:r.payload.fileViewerId,file_preview_session_id:c.v4(),file_id:r.payload.fileId,sj_id:r.payload.sjId,ns_id:r.payload.nsId,device_type:r.payload.deviceType,file_extension:v.getWhitelistedFileExtension(r.payload.fileExtension),extra:t})})}if(r.type===d.Action.UpdateSession)return Object.assign(Object.assign({},e),{[r.payload.file_viewer_session_id]:r.payload});if(r.type===t.Action.InitializeFilePreview){const{payload:{fileViewerId:i,fileInfo:t,previewType:a}}=r;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{file_id:t.file_id,ns_id:t.ns_id,extra:Object.assign(Object.assign({},e[i].extra),{preview_type:a})})})}return e};i.currentFileInfoReducer=(e=i.DEFAULT_STATE.currentFileInfo,r)=>{var a;switch(r.type){case t.Action.SetCurrentFilePreview:const{previewKey:i,fileInfo:s}=r.payload,o=null!==(a=s.file_id)&&void 0!==a?a:"fakeFileId";return Object.assign(Object.assign({},e),{[r.payload.fileViewerId]:Object.assign(Object.assign({fileId:o,previewKey:i},r.payload.fileInfo),{bootstrap:{state:"initializing"}})});case n.Action.GetPreviewDataBatchResult:if(r.payload.result){const i={},t=r.meta.previewKey;for(const a of Object.keys(e)){const n=e[a];for(const e of r.payload.result.results)if(n.previewKey===t){const r=e.file;i[a]=Object.assign(Object.assign({},r),{bootstrap:{state:"initializing"},previewKey:t})}}if(Object.keys(i).length>0)return Object.assign(Object.assign({},e),i)}return e;case t.Action.SetBootstrappedFile:if(e[r.payload.fileViewerId].previewKey.serialized===r.payload.previewKey.serialized)return Object.assign(Object.assign({},e),{[r.payload.fileViewerId]:Object.assign(Object.assign({},e[r.payload.fileViewerId]),{bootstrap:{state:"ready"}})});break;case t.Action.SetErroredFile:if(e[r.payload.fileViewerId].previewKey.serialized===r.payload.previewKey.serialized)return Object.assign(Object.assign({},e),{[r.payload.fileViewerId]:Object.assign(Object.assign({},e[r.payload.fileViewerId]),{bootstrap:{state:"errored",error:r.payload.error}})});break}return e};i.usersReducer=(e=i.DEFAULT_STATE.users,t)=>t.type===r.Action.GetAccountBatchResult&&t.payload.result?Object.assign(Object.assign({},e),t.payload.result.reduce((e,i)=>(e[i.account_id]=i,e),{})):e;i.reducers={previewData:(e=i.DEFAULT_STATE.previewData,r)=>{let a;switch(r.type){case t.Action.InitializeFilePreview:return a=r.payload.fileInfo.previewKey.serialized,e[a]?e:Object.assign(Object.assign({},e),{[a]:{}});case t.Action.SetPreviewMetadata:return a=r.payload.previewKey.serialized,Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},e[a]),r.payload)});case n.Action.GetPreviewDataBatchResult:{if(!r.payload||!r.payload.result)return e;const i=r.payload.result.results,t=r.meta.previewKey;return Object.assign(Object.assign({},e),i.reduce((e,i)=>{var a;if(null==i.file.file_id){if(null===(a=r.payload.arg)||void 0===a||!a.files||1!==r.payload.arg.files.length)throw Error("Invalid response: file_id must be present in FileInfo for get_preview_data_batch");i.file.file_id=r.payload.arg.files[0].file_id}return i.preview&&(e[t.serialized]=i.preview),null!=i.err&&(null==e[t.serialized]&&(e[t.serialized]={}),e[t.serialized]=Object.assign(Object.assign({},e[t.serialized]),{error:new b.FVError(b.getFvErrorCodeFromPreviewDataApi(i.err),`Got error from preview api: ${i.err[".tag"]}`)})),e},{}))}case t.Action.RefreshBlobSuccess:if(!r.payload)return e;const{previewKey:i,preview:s}=r.payload;if(m.isNestedArchiveFilePreviewKey(i))return e;const o=i.serialized,l=e[o]?e[o].content:{};return Object.assign(Object.assign({},e),{[o]:Object.assign(Object.assign({},e[o]),{content:Object.assign(Object.assign({},l),s)})})}return e},archiveFiles:(e=i.DEFAULT_STATE.archiveFiles,t)=>{switch(t.type){case n.Action.GetArchiveFilesResult:case n.Action.LoggedOutGetArchiveFilesResult:{const i=t.meta.rootFileId,r=_.cloneDeep(e);if(null==r[i]&&(r[i]={}),!t.payload||!t.payload.result)return r;for(const e of t.payload.result.archive_files)e.preview&&(r[i][e.subpath]=e.preview);return r}}return e},fileMetadata:(e=i.DEFAULT_STATE.fileMetadata,r)=>{const{payload:a}=r;if(!a)return e;if(r.type===t.Action.InitializeFilePreview){const i=r.payload.fileInfo.file_id,t=r.payload.fileInfo.previewKey.serialized;return Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},e[t]),{file_id:i,file_name:r.payload.fileName,size:r.payload.fileInfo.size,fileConfig:r.payload.fileConfig})})}if(r.type===t.Action.SetFileMetadata){const i=r.payload.previewKey.serialized;return Object.assign(Object.assign({},e),{[i]:r.payload})}return e},rivieraData:(e=i.DEFAULT_STATE.rivieraData,r)=>{const{payload:a,error:n}=r;if(!a)return e;switch(r.type){case t.Action.InitializeFilePreview:{const i=r.payload.fileInfo.previewKey.serialized;return e[i]?e:Object.assign(Object.assign({},e),{[i]:{}})}case t.Action.FetchPhotoMetadataResult:return Object.assign(Object.assign({},e),{[r.payload.previewKey.serialized]:{originalWidth:r.payload.originalWidth,originalHeight:r.payload.originalHeight}});case t.Action.FetchPageDataWithMetadataResult:{const t=r.payload.previewKey.serialized,{pages:a}=e[t]||i.DEFAULT_DOC_PREVIEW_METADATA;if(n)return a&&a.length?e:Object.assign(Object.assign({},e),{[t]:Object.assign(Object.assign({},i.DEFAULT_DOC_PREVIEW_METADATA),{error:n})});if(r.payload&&r.payload.data){const{data:{metadata:i,pages:n}}=r.payload;if(!i)return e;let s=a||new Array(i.page_count);return Array.isArray(n)&&n.length&&(s=[...s],n.forEach(e=>s[e.pageIndex]=Object.assign(Object.assign({},s[e.pageIndex]),e))),Object.assign(Object.assign({},e),{[t]:{metadata:i,pages:s}})}break}case t.Action.FetchExcelSheetLayoutData:{const i=r.payload.previewKey.serialized,t=e[i];if(null!=t&&"workbook"in t){if(!f.isExcelPreviewRivieraData(t))break;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{sheets:Object.assign(Object.assign({},t.sheets),{[r.payload.sheetIndex]:f.makePendingLoadableData()})})})}return Object.assign(Object.assign({},e),{[i]:{sheets:{[r.payload.sheetIndex]:f.makePendingLoadableData()},workbook:f.makePendingLoadableData()}})}case t.Action.FetchExcelSheetLayoutDataResult:{const i=r.payload.previewKey.serialized,{sheetIndex:t,data:a}=r.payload,n=e[i],s=f.isExcelPreviewRivieraData(n)?n.sheets:{};if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},n),{sheets:Object.assign(Object.assign({},s),{[t]:f.makeFulfilledLoadableData(a.sheets[t])}),workbook:g.transformExcelResponseToWorkbookMetadata(a)})});if(r.error){const a=f.isExcelPreviewRivieraData(n)&&"loaded"===n.workbook.state?n.workbook:f.makeRejectedLoadableData(r.error);return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},n),{sheets:Object.assign(Object.assign({},s),{[t]:f.makeRejectedLoadableData(r.error)}),workbook:a})})}break}case t.Action.FetchArchiveTopLevelData:{const i=r.payload.previewKey.serialized,t=e[i];if(null!=t&&"rootEntry"in t){if(!f.isArchivePreviewRivieraData(t))throw Error(`fetching archive top level data but ${i} has non archive data already: ${t}`);return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{rootEntry:f.makePendingLoadableData()})})}return Object.assign(Object.assign({},e),{[i]:{rootEntry:f.makePendingLoadableData()}})}case t.Action.FetchArchiveTopLevelDataResult:{const i=r.payload.previewKey.serialized,{data:t}=r.payload,a=e[i];if(t)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{rootEntry:g.transformArchiveTreeResponseToArchiveRootEntry(t)})});if(r.error){const t=f.isArchivePreviewRivieraData(a)&&"loaded"===a.rootEntry.state?a.rootEntry:f.makeRejectedLoadableData(r.error);return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},a),{rootEntry:t})})}break}case t.Action.FetchMediaMetadata:{const i=r.payload.previewKey.serialized,t=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{isTruncated:f.makePendingLoadableData()})})}case t.Action.FetchMediaMetadataResult:{const i=r.payload.previewKey.serialized,t=e[i],{is_truncated:a}=r.payload.data;if("boolean"==typeof a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{isTruncated:f.makeFulfilledLoadableData(a)})});if(r.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{isTruncated:f.makeRejectedLoadableData(r.error)})});break}case t.Action.FetchWaveformData:{const i=r.payload.previewKey.serialized,t=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{waveformData:f.makePendingLoadableData()})})}case t.Action.FetchWaveformDataResult:{const i=r.payload.previewKey.serialized,t=e[i],a=r.payload.data.waveformHeights;if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{waveformData:f.makeFulfilledLoadableData(a)})});if(r.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{waveformData:f.makeRejectedLoadableData(r.error)})});break}case t.Action.FetchLinkfileData:{const i=r.payload.previewKey.serialized,t=e[i];return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{linkfileData:f.makePendingLoadableData()})})}case t.Action.FetchLinkfileDataResult:{const i=r.payload.previewKey.serialized,t=e[i],a=r.payload.data.uri;if(a)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{linkfileData:f.makeFulfilledLoadableData(a)})});if(r.error)return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},t),{linkfileData:f.makeRejectedLoadableData(r.error)})})}}return e},cloudDocsData:(e=i.DEFAULT_STATE.cloudDocsData,t)=>{const{payload:r,type:a,error:n}=t;if(a===o.Action.GetCloudEditorUrlResult){if(n)return Object.assign(Object.assign({},e),{[t.payload.arg.file_id]:f.makeRejectedLoadableData(n)});if(null==r?void 0:r.result)return Object.assign(Object.assign({},e),{[t.payload.arg.file_id]:f.makeFulfilledLoadableData(r.result)})}return e},filePreviewUi:(e=i.DEFAULT_STATE.filePreviewUi,r)=>{var a,n,o,l,c,d,v,g,m;if(!r.payload)return e;if(r.type===t.Action.InitializeFileViewer)return Object.assign(Object.assign({},e),{[r.payload.fileViewerId]:{}});let b;if(r.type===t.Action.InitializeFilePreview)b=r.payload.fileInfo.previewKey.serialized;else if(r.type===s.Action.UnzipResult){b=r.meta.previewKey.serialized}else{if(!r.payload.previewKey)return e;b=r.payload.previewKey.serialized}const S=r.type===s.Action.UnzipResult?r.meta.fileViewerId:r.payload.fileViewerId,E=e[S]||{},I=E[b]||{},C=f.filterZoomableFilePreviewUi(I);switch(r.type){case t.Action.InitializeFilePreview:{const{previewType:i,fileExtension:t}=r.payload,a=P(i,t);return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},a),I)})})}case t.Action.InitializeNestedArchiveFilePreview:{const{previewType:i,currentPath:t}=r.payload,a=P(i);return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign(Object.assign({},a),{currentPath:t}),I)})})}case t.Action.FetchPageDataWithMetadataResult:if(r.payload.data&&r.payload.data.metadata)return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{isDocSidebarOpen:!1})})});if((null===(a=r.error)||void 0===a?void 0:a.statusCode)===w.RivieraStatus.PasswordProtected)return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{isPasswordProtected:!0})})});break;case t.Action.PageNavigation:{const{sourceContext:i,pageIndex:t,centerOnYOffset:a}=r.payload;return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{pageNavigation:{sourceContext:i,pageIndex:t,centerOnYOffset:a}})})})}case t.Action.ResolvePageNavigation:return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{pageNavigation:void 0})})});case t.Action.UpdateDocCurrentPageIndex:const{pageCount:i}=r.payload;let{pageIndex:F}=r.payload;return F<0?F=0:i&&F>=i-1&&(F=i-1),Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{currentPageIndex:F})})});case t.Action.PageUp:{const i=null!==(o=null===(n=f.filterDocFilePreviewUiState(I))||void 0===n?void 0:n.currentPageIndex)&&void 0!==o?o:null;if(i)return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{currentPageIndex:Math.max(i-1,0)})})});break}case t.Action.PageDown:{const i=null!==(c=null===(l=f.filterDocFilePreviewUiState(I))||void 0===l?void 0:l.currentPageIndex)&&void 0!==c?c:null;if(i)return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{currentPageIndex:Math.min(i+1,r.payload.pageCount||1)})})});break}case t.Action.ZoomIn:{if(null==C)return e;const i=null!==(d=C.zoomScaleFactor)&&void 0!==d?d:C.fitScaleFactor;return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{zoomScaleFactor:r.payload.previewType===u.PreviewType.SsrDoc?y(i,p.DOC_ZOOM_MULTIPLIER):h(i,p.IMG_ZOOM_MULTIPLIER)})})})}case t.Action.ZoomOut:{if(null==C)return e;const i=null!==(v=C.zoomScaleFactor)&&void 0!==v?v:C.fitScaleFactor;return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{zoomScaleFactor:r.payload.previewType===u.PreviewType.SsrDoc?y(i,1/p.DOC_ZOOM_MULTIPLIER):h(i,1/p.IMG_ZOOM_MULTIPLIER)})})})}case t.Action.ZoomToggleOriginalOrFit:{if(null==C)return e;const i=null!==(g=C.zoomScaleFactor)&&void 0!==g?g:C.fitScaleFactor,t=i===C.fitScaleFactor?1:void 0,a=(null==C?void 0:C.storedFitScaleFactor)&&1===i?null==C?void 0:C.storedFitScaleFactor:void 0,n=r.payload.fitOnly?void 0:a||t;return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{zoomScaleFactor:n})})})}case t.Action.UpdateFitScaleFactor:{if(null==C)return e;const{fitScaleFactor:i}=C;return i===r.payload.fitScaleFactor?e:Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{storedFitScaleFactor:r.payload.storedFitScaleFactor,fitScaleFactor:r.payload.fitScaleFactor})})})}case t.Action.UpdateDimensions:return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{dimensions:r.payload.dimensions})})});case t.Action.SwitchWorkbookTab:return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{currentTabIndex:r.payload.tabIndex})})});case t.Action.UpdateArchiveFileCurrentPath:return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{currentPath:r.payload.currentPath})})});case t.Action.UpdateArchiveExtractAllSnackbarState:return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{extractAllSnackbarState:r.payload.extractAllSnackbarState})})});case s.Action.UnzipResult:let O;return O=(null===(m=r.payload.result)||void 0===m?void 0:m.path)?f.makeFulfilledLoadableData(r.payload.result.path):f.makeRejectedLoadableData(r.error||new Error),Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),{extractAllSnackbarState:O})})});case t.Action.UpdateAudioVideoPlaybackState:const T=_.pick(r.payload,"currentTimestamp","isPlaying");return Object.assign(Object.assign({},e),{[S]:Object.assign(Object.assign({},E),{[b]:Object.assign(Object.assign({},I),T)})})}return e},fileViewerUi:(e=i.DEFAULT_STATE.fileViewerUi,r)=>{if(!r.payload)return e;const{fileViewerId:a}=r.payload,n=e[a]||{};switch(r.type){case t.Action.InitializeFileViewer:return Object.assign(Object.assign({},e),{[a]:i.DEFAULT_FILE_VIEWER_UI});case t.Action.OpenRightRail:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{isRightRailOpen:!0})});case t.Action.CloseRightRail:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{isRightRailOpen:!1})});case t.Action.OpenDocSidebar:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{isDocSidebarOpen:!0})});case t.Action.CloseDocSidebar:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{isDocSidebarOpen:!1})});case t.Action.EnterFullScreen:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{isFullScreen:!0})});case t.Action.ExitFullScreen:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{isFullScreen:!1})});case t.Action.ToggleVideoFrameSteppers:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{showVideoFrameSteppers:r.payload.enabled})});case t.Action.FlipToNextFile:case t.Action.FlipToPreviousFile:return Object.assign(Object.assign({},e),{[a]:Object.assign(Object.assign({},n),{hasBeenFlipped:!0})});case t.Action.SetActiveRightRailPlugin:{const{fileViewerId:i,pluginId:t}=r.payload;return null==t?e:Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},n),{isRightRailOpen:!0})})}default:return e}},loggingSession:i.loggingSessionReducer,currentFileInfo:i.currentFileInfoReducer,users:i.usersReducer,fetchingUser:(e=i.DEFAULT_STATE.fetchingUser,t)=>t.type!==r.Action.GetCurrentAccountResult&&e,currentUser:(e=i.DEFAULT_STATE.currentUser,t)=>t.type===r.Action.GetCurrentAccountResult&&t.payload.result?t.payload.result:e,fileContentMetadata:(e=i.DEFAULT_STATE.fileContentMetadata,t)=>{if(t.type===a.Action.GetFileContentMetadataResult&&t.payload.result){const i=(e=>{if(!e.meta)throw new Error(`missing meta argument to action ${e.type}`);return e.meta})(t).previewKey;return Object.assign(Object.assign({},e),{[i.serialized]:t.payload.result})}return e},plugins:(e=i.DEFAULT_STATE.plugins,r)=>{if(r.type===t.Action.InitializeFileViewer){const{fileViewerId:i}=r.payload;return Object.assign(Object.assign({},e),{[i]:{activeRightRailPluginId:void 0,activeEditPluginId:void 0,hideContentPanePluginId:void 0,runtimeDisabledPlugins:[]}})}if(r.type===t.Action.SetActiveRightRailPlugin){const{fileViewerId:i,pluginId:t}=r.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{activeRightRailPluginId:t,activeEditPluginId:void 0})})}if(r.type===t.Action.SetActiveEditPlugin){const{fileViewerId:i,pluginId:t}=r.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{activeEditPluginId:t})})}if(r.type===t.Action.HideContentPane){const{fileViewerId:i,pluginId:t}=r.payload;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),{hideContentPanePluginId:t})})}return e},sharedLinkInfo:(e=i.DEFAULT_STATE.sharedLinkInfo,r)=>{const{payload:a,type:n}=r;if(n===t.Action.SetSharedLinkInfo){const i=a.previewKey.serialized;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e[i]),a)})}return e},videoRequests:(e=i.DEFAULT_STATE.videoRequests,r)=>{switch(r.type){case t.Action.RequestVideoSeek:return[...e,{videoRequestType:"seek",time:r.payload.time}];case t.Action.RequestVideoSeekRelative:return[...e,{videoRequestType:"seekRelative",delta:r.payload.delta}];case t.Action.RequestVideoPause:return[...e,{videoRequestType:"pause"}];case t.Action.ClearVideoRequests:return[];default:return e}},rootInfo:(e=i.DEFAULT_STATE.rootInfo,t)=>{var a;switch(t.type){case r.Action.GetRootInfoResult:return null!==(a=t.payload.result)&&void 0!==a?a:null;default:return e}},toolbar:(e=i.DEFAULT_STATE.toolbar,r)=>{switch(r.type){case t.Action.SetToolbarIsHovered:return r.payload.isHovered?Object.assign(Object.assign({},e),{isHovered:!0}):Object.assign(Object.assign({},e),{isHovered:!1});case t.Action.OverrideFloatingToolbar:{const i=r.payload.state;return Object.assign(Object.assign({},e),{override:i,overridePluginId:r.payload.pluginId})}default:return e}},volume:(e=i.DEFAULT_STATE.volume,r)=>{switch(r.type){case t.Action.SetVolume:return Object.assign(Object.assign({},e),{volume:r.payload.volume});case t.Action.SetMuted:return Object.assign(Object.assign({},e),{muted:r.payload.muted});default:return e}},isPreviewLoading:(e=i.DEFAULT_STATE.isPreviewLoading,r)=>{switch(r.type){case t.Action.SetPreviewLoadingAction:return r.payload.isPreviewLoading;default:return e}},brandingInfo:(e=i.DEFAULT_STATE.brandingInfo,r)=>{const{payload:a,type:n}=r;if(n===t.Action.SetBrandingInfo){const i=a.previewKey.serialized;return Object.assign(Object.assign({},e),{[i]:Object.assign(Object.assign({},e),a)})}return e}}})),define("typescript/libraries/file-viewer/src/core/data/riviera/transform",["require","exports","typescript/libraries/file-viewer/src/core/urls","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transformArchiveTreeResponseToArchiveRootEntry=i.transformExcelResponseToSheetMetadata=i.transformExcelResponseToWorkbookMetadata=i.processTextAndUrl=void 0;function a(e,i,r){return r&&r.map(r=>`${t.imageUrl(e,i,0,r)} ${r}w`).join(",")}function n(e,i,r){return r&&r[0]?t.imageUrl(e,i,0,r[0]):t.imageUrl(e,i,0)}function s(e){var i;return{name:e.name,size:void 0!==e.size?Number(e.size):void 0,isDir:e.isDir,children:null===(i=e.children)||void 0===i?void 0:i.map(s)}}i.processTextAndUrl=function(e,i=[],r,s,o,l){const c=(function(e,i=[],r,s,o){const l=i.reduce((e,[i,t,r])=>{for(let a=0;a<r;a++)e.push([i,t]);return e},[]);return[...Array(r)].map((i,r)=>({pageIndex:r,dimension:l[r],thumbnailUrl:n(e,r,o),imgUrls:{"1x":t.imageUrl(e,r,0),"4x":t.imageUrl(e,r,400),srcset:a(e,r,o)},textboxes:s?s[r].textboxes:[],links:[]}))})(e,i,r,o,l);return(function(e){const{text:i}=e;if(!i||!i.pages)return[];const{links:t,pages:r}=i,a=(i.fonts||[]).reduce((e,i)=>(e[i.f]=(function(e){const i=e.n.lastIndexOf(",");return{fontFamily:`"${i>-1?e.n.substr(0,i):e.n}", ${1&e.f?"monospace":"serif"}`,isBold:(e.f&1<<18)>0,isItalic:(64&e.f)>0}})(i),e),{});return Object.keys(r).map(e=>({pageIndex:+e,textboxes:(r[e]||[]).map(e=>Object.assign(Object.assign({},e),{font:a[e.f]})),links:t&&t[e]||[]}))})(s).forEach(e=>{const{pageIndex:i}=e;c[i]=Object.assign(Object.assign({},c[i]),e)}),c},i.transformExcelResponseToWorkbookMetadata=function(e){return r.makeFulfilledLoadableData({name:e.workbook_name,sheetOverview:e.sheets.reduce((e,i)=>Object.assign(Object.assign({},e),{[i.idx]:{hidden:i.hidden,name:i.name}}),{})})},i.transformExcelResponseToSheetMetadata=function(e){return e.sheets.reduce((e,i)=>"dimensions"in i?Object.assign(Object.assign({},e),{[i.idx]:r.makeFulfilledLoadableData(i)}):e,{})},i.transformArchiveTreeResponseToArchiveRootEntry=function(e){return r.makeFulfilledLoadableData(Object.assign(Object.assign({},s(e)),{isPasswordProtected:!!e.isEncrypted}))}})),define("typescript/libraries/file-viewer/src/core/errors",["require","exports","typescript/libraries/file-viewer/src/core/data/riviera/types"],(function(e,i,t){"use strict";var r;Object.defineProperty(i,"__esModule",{value:!0}),i.getFvErrorCodeFromRivieraStatus=i.getFvErrorCodeFromPreviewDataApi=i.isFVError=i.FVError=i.FVErrorCode=void 0,(function(e){e[e.PreviewsDataApiFailure=0]="PreviewsDataApiFailure",e[e.MalformedPreviewsDataApiResponse=1]="MalformedPreviewsDataApiResponse",e[e.RivieraDataFetchFailure=2]="RivieraDataFetchFailure",e[e.MalformedRivieraData=3]="MalformedRivieraData",e[e.FileTooLarge=4]="FileTooLarge",e[e.UnsupportedPreviewType=5]="UnsupportedPreviewType",e[e.NoExtension=6]="NoExtension",e[e.PasswordProtected=7]="PasswordProtected",e[e.FileUploading=8]="FileUploading",e[e.Unknown=9]="Unknown",e[e.FileSwitched=10]="FileSwitched",e[e.InvalidFileInfo=11]="InvalidFileInfo",e[e.InvalidLoggingOrder=12]="InvalidLoggingOrder",e[e.InvalidLoggingSession=13]="InvalidLoggingSession",e[e.UserOffline=14]="UserOffline",e[e.MissingContentMetadata=15]="MissingContentMetadata"})(r=i.FVErrorCode||(i.FVErrorCode={}));class a extends Error{constructor(e,i){super(i),Object.setPrototypeOf(this,a.prototype),this.type=e}}i.FVError=a,i.isFVError=function(e){return e instanceof a},i.getFvErrorCodeFromPreviewDataApi=function(e){switch(e[".tag"]){case"unsupported_file_error":return r.UnsupportedPreviewType;case"content_not_uploaded":return r.FileUploading;default:return r.PreviewsDataApiFailure}},i.getFvErrorCodeFromRivieraStatus=function(e){switch(e){case t.RivieraStatus.Unknown:return r.Unknown;case t.RivieraStatus.UnsupportedFormat:return r.UnsupportedPreviewType;case t.RivieraStatus.TooBig:return r.FileTooLarge;case t.RivieraStatus.PasswordProtected:return r.PasswordProtected;default:return r.RivieraDataFetchFailure}}})),define("typescript/libraries/file-viewer/src/core/extension_constants",["require","exports","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/file_extension/extension_constants"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getWhitelistedFileExtension=i.brandWhitelistedFileExtension=i.resolvePreviewTypeFromExtension=i.LOGGING_ALLOWED_EXTS_SET=i.DOC_EXTS=i.IMAGE_EXTS=void 0;function a(e){return e}i.IMAGE_EXTS=r.PHOTO_EXTS.concat([".xd"]),i.DOC_EXTS=r.PDF_EXTS.concat(r.DOCUMENT_EXTS,r.PRESENTATION_EXTS,r.WORDPROC_EXTS),i.LOGGING_ALLOWED_EXTS_SET=new Set(r.LOGGING_ALLOWED_EXTS),i.resolvePreviewTypeFromExtension=function(e){return e=e.toLowerCase(),r.MSOFFICE_EXCEL_EXTS.includes(e)?t.PreviewType.Excel:i.DOC_EXTS.includes(e)?t.PreviewType.SsrDoc:i.IMAGE_EXTS.includes(e)?t.PreviewType.Image:r.TRANSCODE_VIDEO_EXTS.includes(e)?t.PreviewType.Video:r.AUDIO_EXTS.includes(e)?t.PreviewType.Audio:r.LINK_FILE_EXTS.includes(e)?t.PreviewType.Linkfile:r.HTMLIFIED_PREVIEW_EXTS.includes(e)?t.PreviewType.HTML:r.CLOUD_DOC_EXTS.includes(e)?t.PreviewType.CloudDoc:t.PreviewType.Other},i.brandWhitelistedFileExtension=a,i.getWhitelistedFileExtension=function(e){return i.LOGGING_ALLOWED_EXTS_SET.has(e)?e:r.LOGGING_UNALLOWED_EXT_PLACEHOLDER}})),define("typescript/libraries/file-viewer/src/core/i18n",["require","exports","react-intl"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.formatDuration=i.formatBytes=i.placeholderI18nFormatters=void 0;const r=t.createIntl({locale:"en"});i.placeholderI18nFormatters=Object.assign(Object.assign({},r),{formatMessage(...e){const[i,t]=e;return r.formatMessage(Object.assign(Object.assign({},i),{id:"placeholder"}),t)}}),i.formatBytes=function(e,i){const t={minimumFractionDigits:0,maximumFractionDigits:2};return e<1024?i.formatMessage({id:"JPwjIB",defaultMessage:"{value, plural, one {# byte} other {# bytes}}"},{value:i.formatNumber(e,t)}):e<921600?i.formatMessage({id:"rNMBTS",defaultMessage:"{value} KB"},{value:i.formatNumber(e/1024,t)}):e<943718400?i.formatMessage({id:"mDrYnG",defaultMessage:"{value} MB"},{value:i.formatNumber(e/1048576,t)}):e<900*1024**3?i.formatMessage({id:"g+xqHV",defaultMessage:"{value} GB"},{value:i.formatNumber(e/1024**3,t)}):i.formatMessage({id:"7XWgdi",defaultMessage:"{value} TB"},{value:i.formatNumber(e/1024**4,t)})};i.formatDuration=function(e,i){if(e&&!(isNaN(e)||e<=0))return e<6e4?i.formatMessage({id:"XJTRCn",defaultMessage:"{value, plural, one{# second} other{# seconds}}"},{value:Math.round(e/1e3)}):e<36e5?i.formatMessage({id:"hYCfnh",defaultMessage:"{value, plural, one{# minute} other{# minutes}}"},{value:Math.round(e/6e4)}):e<864e5?i.formatMessage({id:"5vUoeT",defaultMessage:"{value, plural, one{# hour} other{# hours}}"},{value:Math.round(e/36e5)}):e<6048e5?i.formatMessage({id:"VUIAfM",defaultMessage:"{value, plural, one{# day} other{# days}}"},{value:Math.round(e/864e5)}):e<2592e6?i.formatMessage({id:"0wIJlM",defaultMessage:"{value, plural, one{# week} other{# weeks}}"},{value:Math.round(e/6048e5)}):e<31536e6?i.formatMessage({id:"MPX3Ow",defaultMessage:"{value, plural, one{# month} other{# months}}"},{value:Math.round(e/2592e6)}):i.formatMessage({id:"toXz6N",defaultMessage:"{value, plural, one{# year} other{# years}}"},{value:Math.round(e/31536e6)})}})),define("typescript/libraries/file-viewer/src/core/invariant",["require","exports","typescript/libraries/file-viewer/src/core/errors"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.invariant=void 0,i.invariant=function(e,i=t.FVErrorCode.Unknown,r){if(!e){let e;throw e=void 0===r?new t.FVError(i,"An error occurred for unknown reason"):new t.FVError(i,r),e.framesToPop=1,e}return e}})),define("typescript/libraries/file-viewer/src/core/logging/actions",["require","exports"],(function(e,i){"use strict";var t;Object.defineProperty(i,"__esModule",{value:!0}),i.logDuration=i.updateSession=i.logTTV=i.logTTI=i.logVideoEvent=i.logUserActionEvent=i.logPreviewEvent=i.logSessionEvent=i.Action=void 0,(function(e){e.UpdateSession="@@previews/updateSession",e.Log="@@previews/log",e.LogUserAction="@@previews/LogUserAction",e.LogSessionEvent="@@previews/logSessionEvent",e.LogTTI="@@previews/logTTI",e.LogTTV="@@previews/logTTV",e.LogVideo="@@previews/logVideo",e.LogDuration="@@previews/logDuration",e.UpdateFitScaleFactor="UpdateFitScaleFactor"})(t=i.Action||(i.Action={})),i.logSessionEvent=function(e){return{type:t.LogSessionEvent,payload:e}},i.logPreviewEvent=function(e){return{type:t.Log,payload:e}},i.logUserActionEvent=function(e){return{type:t.LogUserAction,payload:e}},i.logVideoEvent=function(e){return{type:t.LogVideo,payload:e}},i.logTTI=function(e){return{type:t.LogTTI,payload:e}},i.logTTV=function(e){return{type:t.LogTTV,payload:e}},i.updateSession=function(e){return{type:t.UpdateSession,payload:e}},i.logDuration=function(e){return{type:t.LogDuration,payload:e}}})),define("typescript/libraries/file-viewer/src/core/logging/session",["require","exports","typescript/libraries/file-viewer/src/core/uuid","typescript/libraries/file-viewer/src/core/invariant","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/core/extension_constants","typescript/libraries/file-viewer/src/core/logging/constants"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.markTTI=i.recordExtra=i.updateSessionLastEvent=i.recordEvent=i.createFilePreviewSession=void 0,i.createFilePreviewSession=function(e){const{file_viewer_session_id:i=t.v4(),file_preview_session_id:r=t.v4(),file_id:a="",sj_id:o,ns_id:l,file_extension:c=n.getWhitelistedFileExtension(""),device_type:d=s.DeviceType.desktop,extra:u={}}=e||{};return{file_viewer_session_id:i,file_preview_session_id:r,file_id:a,sj_id:o,ns_id:l,file_extension:c,device_type:d,extra:Object.assign(Object.assign({},u),{source_action:u.source_action||s.SourceAction.Visit,source_context:u.source_context||s.SourceContext.FileViewer,was_flipped:u.was_flipped||!1,file_preview_timeline:{}})}},i.recordEvent=function(e,i,t){const{extra:{last_event:n}}=e;switch(r.invariant(n!==i,a.FVErrorCode.InvalidLoggingOrder,`Cannot log duplicate event ${i}`),i){case s.SessionEventType.FilePreviewSupportConfirmed:case s.SessionEventType.FilePreviewSupportDenied:r.invariant(n===s.SessionEventType.FilePreviewAttemptStarted,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewAttemptStarted}' but was '${n}'`);break;case s.SessionEventType.FilePreviewDownloadAttempted:r.invariant(n===s.SessionEventType.FilePreviewSupportConfirmed,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewSupportConfirmed}' but was '${n}'`);break;case s.SessionEventType.FilePreviewDownloadFailed:case s.SessionEventType.FilePreviewDownloadSucceeded:r.invariant(n===s.SessionEventType.FilePreviewDownloadAttempted,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewDownloadAttempted}' but was '${n}'`);break;case s.SessionEventType.FilePreviewRenderSucceeded:case s.SessionEventType.FilePreviewRenderFailed:r.invariant(n===s.SessionEventType.FilePreviewDownloadSucceeded||n===s.SessionEventType.FilePreviewDownloadAttempted,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order, expect \`last_event\` to be '${s.SessionEventType.FilePreviewDownloadSucceeded}' but was '${n}'`);break;case s.SessionEventType.FilePreviewGetApp:r.invariant(n!==s.SessionEventType.FilePreviewSessionEnded,a.FVErrorCode.InvalidLoggingOrder,`Event ${i} out of order. Preview session has already ended`)}return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign(Object.assign({},e.extra),{file_preview_timeline:Object.assign(Object.assign({},e.extra.file_preview_timeline),{[i]:Date.now()})}),t||{})})},i.updateSessionLastEvent=function(e,i){return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign({},e.extra),{last_event:i})})},i.recordExtra=function(e,i){return Object.assign(Object.assign({},e),{extra:Object.assign(Object.assign({},e.extra),i)})},i.markTTI=function(e){const i=Object.assign({},e.extra);if(i.time_to_primary_mark)return e;switch(i.primary_mark_ts||(i.primary_mark_ts=Date.now()),i.source_action){case s.SourceAction.Visit:r.invariant(!!i.page_start_ts,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate 1st page TTI without page_start_ts"),i.time_to_primary_mark=i.primary_mark_ts-i.page_start_ts;break;case s.SourceAction.Click:r.invariant(i.file_preview_timeline&&!!i.file_preview_timeline.preview_attempted,a.FVErrorCode.InvalidLoggingSession,"Cannot calculate subsequent page TTI without preview_attempted timestamp"),i.time_to_primary_mark=i.primary_mark_ts-i.file_preview_timeline.preview_attempted}return Object.assign(Object.assign({},e),{extra:i})}})),define("typescript/libraries/file-viewer/src/core/logging/video",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.VideoPreviewEvent=void 0,(function(e){e.PlayerRendered="player_rendered",e.FirstClickPlay="first_click_play",e.MediaError="media_error",e.ChangePlaybackRate="change_playback_rate",e.ChangeVideoQuality="change_video_quality",e.ClosePreview="close_preview",e.TimeToBuffer="time_to_buffer",e.TimeToLoad="time_to_load",e.SeekVideo="seek_video",e.VideoStartsPlaying="video_starts_playing",e.VideoResumesPlaying="video_resumes_playing",e.VideoStalled="video_stalled",e.VideoPaused="video_paused",e.ScrubberThumbnailsLoaded="scrubber_thumbnails_loaded",e.ScrubberThumbnailsFailed="scrubber_thumbnails_failed",e.AudioWaveformLoaded="audio_waveform_loaded",e.AudioWaveformFailed="audio_waveform_failed",e.MediaEnded="media_ended"})(i.VideoPreviewEvent||(i.VideoPreviewEvent={}))})),define("typescript/libraries/file-viewer/src/core/middlewares/navigation",["require","exports","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/selectors"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.middleware=void 0,i.middleware=function(e){return({getState:i})=>a=>n=>{var s,o,l,c,d,u;switch(n.type){case t.Action.Share:return null===(s=e.openShareModal)||void 0===s||s.call(e),a(n);case t.Action.OpenWith:return null===(o=e.openDefaultNativeApp)||void 0===o||o.call(e),a(n);case t.Action.OpenWebPreview:return null===(l=e.openWebPreview)||void 0===l||l.call(e),a(n);case t.Action.OpenVersionHistory:return e.openVersionHistory(),a(n);case t.Action.Restore:return e.restorePreviousVersion(),a(n);case t.Action.OpenFullscreenPreview:return e.openFullScreenPreview&&e.openFullScreenPreview(),a(n);case t.Action.OpenContainingFolder:return e.openContainingFolder&&e.openContainingFolder(),a(n);case t.Action.OpenUrl:const{url:p,fallbackUrl:v}=n.payload;return e.openUrl&&e.openUrl(p,v),a(n);case t.Action.CloseViewer:const f=r.getCurrentFilePreviewUI(i(),n.payload.fileViewerId);if((null==f?void 0:f.currentPath)&&f.currentPath.length>0){const e=f.currentPath.slice(0,-1);return a(t.updateArchiveFileCurrentPath(Object.assign(Object.assign({},n.payload),{currentPath:e,fromUrlChanged:!1,isDir:!0})))}return e.closeViewer&&e.closeViewer(),a(n);case t.Action.ShowAuthModal:const{encryptionOptions:g,sharedLinkUrl:_,kind:m,mode:w,loggingExtra:b}=n.payload;return e.showAuthModal&&e.showAuthModal({encryptionOptions:g,sharedLinkUrl:_,kind:m,mode:w,loggingExtra:b}),a(n);case t.Action.FlipToNextFile:return null===(c=e.flipToNextFile)||void 0===c||c.call(e),a(n);case t.Action.FlipToPreviousFile:return null===(d=e.flipToPreviousFile)||void 0===d||d.call(e),a(n);case t.Action.OpenWithCloudEditor:const{editorName:h,fileViewerId:y}=n.payload,S=r.getCurrentFile(i(),y),{currentUser:P}=i();return P&&(null==S?void 0:S.file_id)&&(null===(u=e.openWithCloudEditor)||void 0===u||u.call(e,S.file_id,P.uid,h)),a(n);default:return a(n)}}}})),define("typescript/libraries/file-viewer/src/core/uuid",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.v4=void 0;const t=(()=>{let e,i;const t=[];for(e=0,i=e;e<=255;e++,i=e)t.push((i+256).toString(16).substr(1));return t})();function r(e){return e.map(e=>t[e]).join("")}i.v4=function(){const e=(function(){const e=new Uint8Array(16);return window.crypto&&window.crypto.getRandomValues(e),e})();e[6]=15&e[6]|64,e[8]=63&e[8]|128;const i=Array.prototype.slice.call(e);return[i.slice(0,4),i.slice(4,6),i.slice(6,8),i.slice(8,10),i.slice(10,16)].map(r).join("-")}})),define("typescript/libraries/file-viewer/src/file_viewer/file_viewer",["require","exports","tslib","react","react-dom","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/app","typescript/libraries/file-viewer/src/core/uuid","typescript/libraries/file-viewer/src/core/config","typescript/libraries/api_v2/redux/previews","typescript/libraries/api_v2/redux/users","typescript/libraries/file-viewer/src/core/invariant","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/core/utils/functions","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/core/data/riviera/types","typescript/libraries/file-viewer/src/core/constants","typescript/libraries/api_v2/redux/seen_state","typescript/libraries/file-viewer/src/pass/lifecycle","typescript/libraries/api_v2/redux/files","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/file_viewer/plugin_manager","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.SDKFileViewer=void 0,r=t.__importStar(r),a=t.__importStar(a);i.SDKFileViewer=class{constructor(e,i,O=[],T,A){this.mounted=!1,this.sessionActive=!1,this.loadPreviewMetadata=e=>t.__awaiter(this,void 0,void 0,(function*(){const e=this.store,i=this.fileViewerId,{file_id:t,url:r,previewKey:a}=E.getCurrentFile(e.getState(),i),{config:s}=this.platformProps;e.dispatch(S.getFileContentMetadataAction({arg:{file_path_or_id:t,url:r}},{previewKey:a})),yield Promise.all([e.dispatch(n.fetchRivieraData({fileViewerId:this.fileViewerId,previewKey:a,config:s}))])})),this.resolveFilePreview=(e,i,r)=>t.__awaiter(this,void 0,void 0,(function*(){var t;let a;u.invariant(!(!e.url&&!e.file_id),m.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data");const n=null!==(t=e.url)&&void 0!==t?t:r;a=n?{url:n,file_id:e.file_id}:e.ns_id&&e.sj_id?{ns_id:e.ns_id,sj_id:e.sj_id}:{file_id:e.file_id},yield this.store.dispatch(c.getPreviewDataBatchAction({arg:{files:[a],include_dimensions:!0},params:{}},{previewKey:i}))})),this.hasFileFlipped=e=>{const i=E.getCurrentFile(this.store.getState(),this.fileViewerId),{previewKey:t}=i;return t.serialized!==e.serialized},this.initialize=({fileMetadata:e,fileSize:i,fileInfo:r,fileConfig:a,previewMetadata:s,sourceSession:o,defaultRightRailPlugin:c,activeEditPlugin:d,pluginParams:S={},supportedPreviewTypes:C=b.DEFAULT_SUPPORTED_PREVIEW_TYPES,sharedLinkInfo:O,brandingInfo:T})=>t.__awaiter(this,void 0,void 0,(function*(){F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_INITIALIZE_START);const{file_name:t}=e,b=r.file_id,A=r.sj_id,x=r.ns_id,D=r.url,k=P.getPreviewKey(b,x,A,D),{store:M,config:L,deviceType:j,accountId:R,callbacks:N}=this.platformProps,V=this.fileViewerId,U=f.getFileExtension(t),B=E.getCurrentFile(M.getState(),V);B&&this.mounted&&(yield this.doTeardown(),o.was_flipped=!0),this.store.dispatch(n.setCurrentFilePreview({fileViewerId:this.fileViewerId,fileInfo:r,previewKey:k}));const K=Object.assign(Object.assign({},l.DEFAULT_FILE_CONFIG),null!=a?a:{});M.dispatch(n.setFileMetadata(Object.assign(Object.assign({},e),{fileConfig:K,size:i,previewKey:k}))),s&&M.dispatch(n.setPreviewMetadata(Object.assign(Object.assign({},s),{previewKey:k}))),this.sessionActive=!0,M.dispatch(n.initializeFilePreviewSession({fileViewerId:V,fileId:b,sjId:A,nsId:x,deviceType:j,fileExtension:U,sourceSession:o})),M.dispatch(n.setPreviewLoadingAction({isPreviewLoading:!0}));const z=M.getState().loggingSession[this.fileViewerId].file_preview_session_id;N&&N.onPreviewSessionInitialized&&N.onPreviewSessionInitialized(z),M.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewAttemptStarted,fileViewerId:V,previewSessionId:z}));const H=performance.now();try{yield this.pluginManager.loadPlugins(),this.pluginManager.triggerPluginsPreviewWillInitialize(r,O,void 0===R)}catch(e){M.dispatch(g.logSessionEvent({event:_.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:z,extra:{e:e}}))}F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_LOADED_PLUGINS);const W=performance.now();M.dispatch(g.logDuration({eventName:"plugin_initialization_ms",duration:W-H,fileViewerId:V}));try{u.invariant(!!U,m.FVErrorCode.NoExtension,"Missing file extension"),u.invariant(!!r.url||!!r.file_id,m.FVErrorCode.InvalidFileInfo,"You have to either provide a file ID or shared link url to fetch the preview data");try{if(E.getPreviewMetadata(M.getState(),k)||(yield this.resolveFilePreview(r,k,null==O?void 0:O.url)),!navigator.onLine)throw new m.FVError(m.FVErrorCode.UserOffline,"There is a network connectivity issue")}catch(e){throw m.isFVError(e)?e:new m.FVError(m.FVErrorCode.PreviewsDataApiFailure,e.message)}if(this.hasFileFlipped(k))return;const e=E.getCurrentFile(M.getState(),V),{file_id:a,ns_id:s,sj_id:o}=e;O&&M.dispatch(n.setSharedLinkInfo(Object.assign(Object.assign({},O),{previewKey:k}))),T&&M.dispatch(n.setBrandingInfo(Object.assign(Object.assign({},T),{previewKey:k})));const l=performance.now();if(M.dispatch(g.logDuration({eventName:"fetch_preview_data_ms",duration:l-W,fileViewerId:V})),F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_GET_PREVIEW_METADATA),u.invariant(!!a,m.FVErrorCode.MalformedPreviewsDataApiResponse,"Missing `file_id` in `file_info`"),this.pluginManager.setDefaultRightRailPlugin(k,c),this.pluginManager.setActiveEditPlugin(k,d),null==B){const e={fileViewerId:this.fileViewerId,previewKey:k,sourceContext:_.UserActionContext.Initialization};M.dispatch(n.initializeRightRail(Object.assign(Object.assign({},e),{forceOpen:Boolean(S.shouldFocusApproval),useBladePreference:L.comments2_usability_revamp}))),M.dispatch(n.initializeDocSidebar({fileViewerId:this.fileViewerId,previewKey:k,sourceContext:_.UserActionContext.Initialization})),M.dispatch(n.initializeVolumeAndMuted(e))}M.dispatch(g.logDuration({eventName:"set_default_plugin_ms",duration:performance.now()-l,fileViewerId:V}));const f=E.getPreviewMetadata(M.getState(),k);if(!f)throw new Error("PreviewMetadata must be defined during initialization.");const b=v.resolvePreviewType(f);if(M.dispatch(n.initializeFilePreview({fileViewerId:V,fileInfo:{file_id:a,size:i,ns_id:s,sj_id:o,previewKey:k},fileExtension:U,fileName:t,previewType:b,fileConfig:K})),null==f?void 0:f.error)throw f.error;if(u.invariant(b!==p.PreviewType.Error,m.FVErrorCode.MalformedPreviewsDataApiResponse,"Preview Type got resolved to PreviewType.Error, possibly because of missing `content`"),u.invariant(C.includes(b),m.FVErrorCode.UnsupportedPreviewType,"Unsupported preview type"),u.invariant(v.fileSizeSupported(t,i,b,L),m.FVErrorCode.FileTooLarge,"Unsupported file size"),M.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewSupportConfirmed,fileViewerId:V,previewSessionId:z,extra:{preview_type:b}})),M.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewDownloadAttempted,fileViewerId:V,previewSessionId:z,extra:{preview_type:b}})),F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START),yield this.loadPreviewMetadata(r).catch(e=>{throw m.isFVError(e)?e:new m.FVError(m.FVErrorCode.RivieraDataFetchFailure,e.message)}),F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA),this.hasFileFlipped(k))return;const P=M.getState().rivieraData[k.serialized];let A;if(P&&(A=P.error,A&&(null==A?void 0:A.statusCode)!==w.RivieraStatus.PasswordProtected)){if(null==(null==A?void 0:A.statusCode)||!navigator.onLine)throw new m.FVError(m.FVErrorCode.UserOffline,"There is a network connectivity issue");throw new m.FVError(m.FVErrorCode.RivieraDataFetchFailure,`Riviera Failure, status code "${A.statusCode}"`)}if(M.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewDownloadSucceeded,fileViewerId:V,previewSessionId:z,extra:{preview_type:b}})),M.dispatch(n.setBootstrappedFile({fileViewerId:V,previewKey:k})),L.log_views_to_pass){const e={file_views:[{file_info:{file_identifier:a,shared_link_details:O?{url:O.url}:void 0},platform_type:{".tag":I.is_android()&&I.is_supported_mobile_browser()?"mobile_android":I.iphone?"mobile_ios":"web"}}]};R?M.dispatch(h.logFileViewAction({arg:e})):M.dispatch(h.loggedOutLogFileViewAction({arg:e}))}try{y.initializePASSPresence(M,a),this.pluginManager.triggerPluginsPreviewDidInitialize(S)}catch(e){M.dispatch(g.logSessionEvent({event:_.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:z,extra:{e:e}}))}this.pluginManager.subscribeToPluginActivation(z)}catch(e){switch(m.isFVError(e)||(e=new m.FVError(m.FVErrorCode.Unknown)),e.type){case m.FVErrorCode.PreviewsDataApiFailure:case m.FVErrorCode.NoExtension:case m.FVErrorCode.InvalidFileInfo:case m.FVErrorCode.UnsupportedPreviewType:case m.FVErrorCode.MalformedPreviewsDataApiResponse:case m.FVErrorCode.FileTooLarge:M.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewSupportDenied,fileViewerId:this.fileViewerId,previewSessionId:z,extra:{error_code:m.FVErrorCode[e.type]}}));break;default:M.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewDownloadFailed,fileViewerId:this.fileViewerId,previewSessionId:z,extra:{error_code:m.FVErrorCode[e.type]}}))}const{previewKey:i}=E.getCurrentFile(M.getState(),V);M.dispatch(n.setErroredFile({fileViewerId:V,previewKey:i,error:e})),M.dispatch(n.setPreviewLoadingAction({isPreviewLoading:!1})),this.pluginManager.setActiveEditPlugin(i,void 0),this.pluginManager.triggerPluginsPreviewDidError(e)}F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_INITIALIZE_COMPLETE)})),this.render=(e,i)=>{this.container=e;const t=this.makeComponent(i);if(t)return a.render(t,e,this.pluginManager.triggerPluginsPreviewDidRender)},this.makeComponent=(e,i)=>{const{store:t,intl:a,config:n,platformConfig:o,callbacks:l,canCloseViewer:c}=this.platformProps,{pluginInstances:d,rightRailPluginInstances:u}=this.pluginManager.getPluginInstances();return r.createElement(s.AppWithProvider,Object.assign({store:t,intl:a,id:this.fileViewerId,callbacks:l,config:n,canCloseViewer:c,pluginInstances:d,rightRailPluginInstances:u,pluginQueryBus:this.pluginManager.queryBus,pluginNavigation:this.pluginManager.navigation,pluginContext:this.pluginManager.context,onTtiMarked:this.pluginManager.triggerPluginsPreviewDidMarkTti,onDestroy:this.handleAppDestroy,onMount:this.handleAppMount,osModifierKey:o.osModifierKey,viewport:e,batteries:this.sdkBatteries,platformConfig:o},i))},this.doTeardown=()=>t.__awaiter(this,void 0,void 0,(function*(){this.endSession(),yield this.pluginManager.doTeardown()})),this.endSession=()=>{if(this.sessionActive){this.sessionActive=!1;const{store:e}=this.platformProps,i=e.getState().loggingSession[this.fileViewerId].file_preview_session_id,t=E.getCurrentFile(e.getState(),this.fileViewerId),r=F.PreviewsEventLogger.getEventTimelineWithStartTime();e.dispatch(g.logSessionEvent({event:_.SessionEventType.FilePreviewSessionEnded,fileViewerId:this.fileViewerId,previewSessionId:i,extra:Object.keys(r).length?{timeline:JSON.stringify(r)}:void 0})),(null==t?void 0:t.file_id)&&y.teardownPASSPresence(e,t.file_id)}F.PreviewsEventLogger.endCurrentSession()},this.handleAppDestroy=()=>t.__awaiter(this,void 0,void 0,(function*(){this.mounted=!1,yield this.doTeardown()})),this.handleAppMount=()=>{this.mounted=!0},this.unmount=()=>{this.container&&(a.unmountComponentAtNode(this.container),this.cleanup())},this.cleanup=()=>{window.removeEventListener("beforeunload",this.endSession)};const x=A||o.v4();this.fileViewerId=x,this.platformProps=e,this.apiv2ClientBase=i,this.sdkBatteries=T;const{store:D,deviceType:k=_.DeviceType.desktop}=e;this.store=D,this.pluginManager=new C.PluginManager(e,i,O,x,this.initialize),this.pluginManager.loadPlugins(),D.dispatch(n.initializeFileViewer({fileViewerId:x,deviceType:k})),D.dispatch(d.getCurrentAccountAction({arg:void 0,params:{}})),D.dispatch(d.getRootInfoAction({arg:void 0})),window.addEventListener("beforeunload",this.endSession,{once:!0}),F.PreviewsEventLogger.mark(F.PreviewsTimingEvents.FVSDK_CONSTRUCTOR)}}})),define("typescript/libraries/file-viewer/src/file_viewer/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defaultPlatformConfig=void 0,i.defaultPlatformConfig={osModifierKey:"ctrlKey"}})),define("typescript/libraries/file-viewer/src/file_viewer/plugin_manager",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/plugins/queries","typescript/libraries/file-viewer/src/plugins/context","typescript/libraries/file-viewer/src/plugins/navigation","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/preview_key","typescript/libraries/file-viewer/src/core/data/store_utils","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PluginManager=void 0;i.PluginManager=class{constructor(e,i,p,v,f){this.instances={},this.rightRailInstances={},this.loadPlugins=()=>t.__awaiter(this,void 0,void 0,(function*(){const e={},i={};this.instances=e,this.rightRailInstances=i,(yield Promise.all(this.wrappedPluginLoaders.map(e=>e.load()))).forEach(t=>{if(t){const[r,a]=t;e[r]=a,s.isRightRailPlugin(a)&&(i[r]=a)}})})),this.wrapPluginLoader=e=>{const i=e.pluginId,{intl:r}=this.platformProps,n={intl:r,apiv2ClientBase:this.apiv2ClientBase};let s=null,o=null;const l=()=>t.__awaiter(this,void 0,void 0,(function*(){if(s)return[i,s];const t=performance.now();return s=yield e.load(n,this.context),this.store.dispatch(a.logDuration({eventName:"plugin_load_ms",duration:performance.now()-t,fileViewerId:this.fileViewerId,tags:{pluginName:i}})),[i,s]}));return{load:()=>e.isEnabled&&!e.isEnabled(this.context)?Promise.resolve(null):(o||(o=l()),o)}},this.exitPluginEditMode=()=>t.__awaiter(this,void 0,void 0,(function*(){const e=this.store.getState(),{previewKey:i}=d.getCurrentFile(e,this.fileViewerId);this.store.dispatch(r.setActiveEditPlugin({fileViewerId:this.fileViewerId,previewKey:i,sourceContext:n.UserActionContext.RightRail,pluginId:void 0}))})),this.hideContentPane=e=>{const i=this.store.getState(),{previewKey:t}=d.getCurrentFile(i,this.fileViewerId);this.store.dispatch(r.hideContentPane({fileViewerId:this.fileViewerId,previewKey:t,sourceContext:n.UserActionContext.Toolbar,pluginId:e}))},this.updatePreviewMetadata=(e,i)=>{const t=e.file_id,a=e.sj_id,n=e.ns_id,s=e.url,o=u.getPreviewKey(t,n,a,s);i&&o&&this.store.dispatch(r.setPreviewMetadata(Object.assign(Object.assign({},i),{previewKey:o})))},this.triggerPluginsPreviewDidRender=()=>t.__awaiter(this,void 0,void 0,(function*(){var e,i;for(const t of Object.values(this.instances))null===(i=null===(e=t.lifecycle)||void 0===e?void 0:e.previewDidRender)||void 0===i||i.call(e)})),this.triggerPluginsPreviewDidMarkTti=()=>t.__awaiter(this,void 0,void 0,(function*(){var e,i;for(const t of Object.values(this.instances))null===(i=null===(e=null==t?void 0:t.lifecycle)||void 0===e?void 0:e.previewDidMarkTTI)||void 0===i||i.call(e)})),this.reinitializeFileViewer=e=>t.__awaiter(this,void 0,void 0,(function*(){let i;switch(e.userAction){case"click":i=n.SourceAction.Click;break;case"double_click":i=n.SourceAction.DoubleClick;break;case"visit":i=n.SourceAction.Visit}const t=this.store.getState(),r=d.getCurrentFile(t,this.fileViewerId),{fileConfig:a}=d.getFileMetadata(t,r.previewKey);let s;switch(e.sourceContext){case"workflow":s=n.SourceContext.Workflow}this.reinitialize({fileSize:e.fileSize,sourceSession:{source_action:i,source_context:s,was_flipped:!1},fileMetadata:{file_id:e.fileId,file_name:e.fileName},fileInfo:{ns_id:e.nsId,sj_id:e.sjId,file_id:e.fileId},fileConfig:a})})),this.getPluginInstances=()=>({pluginInstances:this.instances,rightRailPluginInstances:this.rightRailInstances}),this.doTeardown=()=>t.__awaiter(this,void 0,void 0,(function*(){const e=this.store.getState().loggingSession[this.fileViewerId].file_preview_session_id;try{this.triggerPluginDidDeactivateForCurrent()}catch(i){this.store.dispatch(a.logSessionEvent({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}this.unsubscribeFromPluginActivation&&this.unsubscribeFromPluginActivation();try{yield this.triggerPluginsPreviewWillTeardown()}catch(i){this.store.dispatch(a.logSessionEvent({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}})),this.fileViewerId=v,this.platformProps=e,this.apiv2ClientBase=i,this.reinitialize=f;const{store:g,config:_,showAuthModal:m,canCloseViewer:w}=e;this.store=g,this.navigation=c.makeNavigation({store:g,fileViewerId:v,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,hideContentPane:this.hideContentPane,updatePreviewMetadata:this.updatePreviewMetadata,showAuthModal:m,canCloseViewer:w}),this.context=l.makePluginContext({store:this.store,sdkConfig:_,fileViewerId:this.fileViewerId,reinitializeFileViewer:this.reinitializeFileViewer,exitPluginEditMode:this.exitPluginEditMode,hideContentPane:this.hideContentPane,updatePreviewMetadata:this.updatePreviewMetadata}),this.wrappedPluginLoaders=p.map(this.wrapPluginLoader),this.queryBus=new o.PluginQueryBus({getPageForSelection:()=>{}})}getPluginByName(e){return e&&this.instances&&this.instances[e]?this.instances[e]:null}getActivePluginInstance(){const e=v.getActivePluginId(this.store.getState(),this.fileViewerId);return this.getPluginByName(e)}setDefaultRightRailPlugin(e,i){var a;return t.__awaiter(this,void 0,void 0,(function*(){if(this.defaultPlugin=i,v.getSelectedRightRailPluginId(this.store.getState(),this.fileViewerId))return;const t=this.rightRailInstances?Object.keys(this.rightRailInstances)[0]:void 0;this.store.dispatch(r.setActiveRightRailPlugin({fileViewerId:this.fileViewerId,previewKey:e,sourceContext:n.UserActionContext.Initialization,pluginId:null!==(a=this.defaultPlugin)&&void 0!==a?a:t,skipLogging:!0}))}))}setActiveEditPlugin(e,i){return t.__awaiter(this,void 0,void 0,(function*(){this.store.dispatch(r.setActiveEditPlugin({fileViewerId:this.fileViewerId,previewKey:e,sourceContext:n.UserActionContext.Initialization,pluginId:i}))}))}triggerPluginDidDeactivateForCurrent(){const e=this.getActivePluginInstance();e&&e.lifecycle&&e.lifecycle.pluginDidDeactivate&&e.lifecycle.pluginDidDeactivate()}triggerPluginsPreviewWillInitialize({file_id:e,ns_id:i,sj_id:t,url:r},a,n){var s,o;let l;if(null!=e)l={fileId:e};else if(null!=i&&null!=t)l={nsId:i,sjId:t};else{if(null==r)throw new Error("Expected file_id, ns_id/sj_id, or url to be present");l={sharedLinkUrl:r}}for(const e of Object.values(this.instances))null===(o=null===(s=e.lifecycle)||void 0===s?void 0:s.previewWillInitialize)||void 0===o||o.call(s,l,a,n)}subscribeToPluginActivation(e){return t.__awaiter(this,void 0,void 0,(function*(){const i=this.fileViewerId;this.unsubscribeFromPluginActivation=p.observeStore(this.store,e=>v.getActivePluginId(e,i),(i,t)=>{const r=this.getPluginByName(i);if(r&&r.lifecycle&&r.lifecycle.pluginDidDeactivate)try{r.lifecycle.pluginDidDeactivate()}catch(i){this.store.dispatch(a.logSessionEvent({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}const s=this.getPluginByName(t);if(s&&r!==s&&s.lifecycle&&s.lifecycle.pluginDidActivate)try{s.lifecycle.pluginDidActivate()}catch(i){this.store.dispatch(a.logSessionEvent({event:n.SessionEventType.LifecycleFailure,fileViewerId:this.fileViewerId,previewSessionId:e,extra:{e:i}}))}})}))}triggerPluginsPreviewDidInitialize(e){var i,t;for(const r of Object.values(this.instances))null===(t=null===(i=r.lifecycle)||void 0===i?void 0:i.previewDidInitialize)||void 0===t||t.call(i,e)}triggerPluginsPreviewWillTeardown(){var e,i;for(const t of Object.values(this.instances))null===(i=null===(e=t.lifecycle)||void 0===e?void 0:e.previewWillTeardown)||void 0===i||i.call(e)}triggerPluginsPreviewDidError(e){var i,t;for(const r of Object.values(this.instances))null===(t=null===(i=r.lifecycle)||void 0===i?void 0:i.previewDidError)||void 0===t||t.call(i,e)}}})),define("typescript/libraries/file-viewer/src/preview_archive/archive_snack_bar",["require","exports","tslib","react","dig-components/snackbar","dig-components/progress_indicators","dig-components/icons","dig-components/icons/src","dig-components/buttons","typescript/libraries/file-viewer/src/css/preview-archive.module.css","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s,o,l,c,d){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ArchiveSnackBar=void 0,r=t.__importStar(r),c=t.__importStar(c);i.ArchiveSnackBar=e=>{const i=e.filePreviewUiData.extractAllSnackbarState,{intl:t,fileViewerId:u,previewKey:p,dispatch:v}=e,f=r.useMemo(()=>()=>v(d.updateArchiveExtractAllSnackbarState({extractAllSnackbarState:null,fileViewerId:u,previewKey:p})),[v,u,p]);if(!i)return null;let g;if("pending"===i.state)g=r.createElement(a.Snackbar,{open:!0,timeout:0},r.createElement(n.Spinner,{"aria-valuetext":"Loading",size:"small",inverse:!0}),r.createElement(a.Snackbar.Message,null,t.formatMessage({id:"Cdmrh0",defaultMessage:"Extracting files..."})));else if("loaded"===i.state){const e=()=>{v(d.openFileURL({fqPath:i.data}))};g=r.createElement(a.Snackbar,{open:!0,timeout:0},r.createElement(s.UIIcon,{src:o.CheckmarkCircleLine}),r.createElement(a.Snackbar.Message,null,t.formatMessage({id:"Qs0be2",defaultMessage:"Files extracted to {folder} in your main Dropbox folder"},{folder:i.data})),r.createElement(a.Snackbar.Actions,null,r.createElement(l.Button,{variant:"transparent",inverse:!0,onClick:e},t.formatMessage({id:"SliIKT",defaultMessage:"Open"})),r.createElement(l.Button,{variant:"transparent",inverse:!0,onClick:f},t.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))))}else g=r.createElement(a.Snackbar,{open:!0,timeout:0},r.createElement(s.UIIcon,{src:o.FailLine}),r.createElement(a.Snackbar.Message,null,t.formatMessage({id:"Jh3TK7",defaultMessage:"Couldn't extract files"})),r.createElement(a.Snackbar.Actions,null,r.createElement(l.Button,{variant:"transparent",inverse:!0,onClick:f},t.formatMessage({id:"1dhg8/",defaultMessage:"Close"}))));return r.createElement("div",{className:c.snackBar},g)}})),define("typescript/libraries/file-viewer/src/sidebar/right_rail",["require","exports","tslib","react","typescript/component_libraries/files_components/src/right-rail/right_rail","react-redux","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/css/right_rail/right_rail.module.css","typescript/libraries/file-viewer/src/plugins/data","typescript/libraries/file-viewer/src/plugins/props","typescript/libraries/file-viewer/src/plugins/selectors/active_plugin","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewRightRail=i.NOOP=void 0,r=t.__importStar(r),o=t.__importStar(o);i.NOOP=()=>{},i.PreviewRightRail=r.default.memo(({fileViewerId:e,previewKey:t,fileName:f,intl:g,pluginInstances:_,pluginNavigation:m,pluginQueryBus:w,height:b})=>{const h=n.useDispatch();v.useMarkTimingEventOnMount(v.PreviewsTimingEvents.FVSDK_RIGHT_RAIL_MOUNT);const y=n.useSelector(i=>u.isRightRailOpen(i,e)),S=n.useSelector(i=>l.getPluginData(i,{fileViewerId:e,navigation:m})),P=n.useSelector(i=>c.makePluginProps(i,e,S,w)),E=n.useSelector(i=>c.makePluginControlProps(i,e,S,w)),I=e=>{var i;return void 0===e[1].rightRailUI.isBladeSupported||!P||P&&P.file&&(null===(i=e[1].rightRailUI)||void 0===i?void 0:i.isBladeSupported(P.file))},C=n.useSelector(i=>{var r;const a=d.getSelectedRightRailPluginId(i,e),n=Object.entries(_).find(e=>e[0]===a);if(n&&!I(n)){const i=Object.entries(_).filter(I),r=null==i?void 0:i[0];r&&h(p.setActiveRightRailPlugin({fileViewerId:e,previewKey:t,sourceContext:s.UserActionContext.Default,pluginId:r[0]}))}return a||(null===(r=Object.keys(_))||void 0===r?void 0:r[0])}),F=r.default.useCallback(i=>{i===C&&y||h(p.setActiveRightRailPlugin({pluginId:i,fileViewerId:e,previewKey:t,sourceContext:s.UserActionContext.RightRail}))},[h,e,t,C,y]),O=r.default.useCallback(()=>{const i={fileViewerId:e,previewKey:t,sourceContext:s.UserActionContext.RightRail};h(p.openRightRail(i))},[h,e,t]),T=r.useCallback(()=>{const i={fileViewerId:e,previewKey:t,sourceContext:s.UserActionContext.RightRail};h(p.closeRightRail(i))},[h,e,t]),A=r.default.useCallback(e=>{F(e),O()},[F,O]);return P&&C?r.default.createElement("div",{style:{height:b},className:o.previewRightRailWrapper,"data-testid":"fv-sdk-right-rail"},y?r.default.createElement(a.RightRail.ExpandedWrapper,{withTitle:f,withCollapseButton:g.formatMessage({id:"BgMbCS",defaultMessage:"Close details pane"}),onCollapse:T,expandedBlade:C,className:o.rightRailContainer,onExpandBlade:F},r.default.createElement(a.RightRail.Content,null,Object.entries(_).map(([e,{rightRailUI:{Sidebar:i}}])=>r.default.createElement(i,Object.assign({},P,{key:`plugin-sidebar-${e}`}))))):r.default.createElement(a.RightRail.CollapsedWrapper,{onExpand:O,withExpandButton:g.formatMessage({id:"J5TC1D",defaultMessage:"Open details pane"}),className:o.rightRailContainer,onExpandBlade:A},E&&Object.entries(_).map(([e,{rightRailUI:{Control:t}}])=>r.default.createElement(t,Object.assign({},E,{isSelectedPlugin:e===C,onClick:i.NOOP,key:`plugin-control-${e}`}))))):null}),i.PreviewRightRail.displayName="PreviewRightRail",i.PreviewRightRail.displayName="PreviewRightRail"})),define("typescript/libraries/file-viewer/src/sidebar/download_dropdown",["require","exports","tslib","react","dig-components/buttons","dig-components/menu","dig-components/tooltips","dig-components/icons","dig-components/icons/src","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.DownloadDropdown=i.normalize=void 0,r=t.__importStar(r);function p(e){return e?("/"!==e.charAt(0)&&(e=`/${e}`),"/"===e.charAt(e.length-1)?e.substr(0,e.length-1):e):""}i.normalize=p;i.DownloadDropdown=({dispatch:i,fileViewerId:f,fileId:g,previewKey:_,intl:m,canDownload:w,copyTargets:b,useTextButton:h,extractConfig:y,useOutlineButton:S})=>{var P,E;const I=()=>{i(d.downloadFile({previewKey:_,fileViewerId:f,sourceContext:c.UserActionContext.RightRail}))},C=e=>()=>{i(d.copyToDropbox({previewKey:_,fileViewerId:f,sourceContext:c.UserActionContext.RightRail,role:e}))},F=m.formatMessage({id:"Mran8D",defaultMessage:"Download"}),O=()=>t.__awaiter(void 0,void 0,void 0,(function*(){i(d.updateArchiveExtractAllSnackbarState({extractAllSnackbarState:u.makePendingLoadableData(),fileViewerId:f,previewKey:_}));const{unzipAction:r}=yield new Promise((i,t)=>{e(["typescript/libraries/api_v2/redux/flows"],i,t)}).then(t.__importStar);i(r({arg:{file:{identifier:{file_id:g,".tag":"file_id"}}}},{previewKey:_,fileViewerId:f}))})),T=y.canExtract&&w?(e=>{let i;switch(null==e?void 0:e[".tag"]){case"cdm_team":const t=(function(e,i){const t=(e=p(e)).split("/").pop();return t||(i||"Dropbox")})(e.home_path);i=t.length>12?m.formatMessage({id:"TAv+z6",defaultMessage:"Extract to my member folder"}):m.formatMessage({id:"53+pL4",defaultMessage:"Extract to {cdm_tmf_name} folder"},{cdm_tmf_name:t});break;case"not_on_cdm_team":default:i=m.formatMessage({id:"v021UF",defaultMessage:"Extract to my Dropbox"})}return{text:i,value:O,disabled:!1,key:"decompress"}})(y.rootInfo):void 0,A=[w?{text:F,value:I,disabled:!1,key:"download"}:void 0,...b.map(({text:e,isDisabled:i,role:t})=>({text:e,value:C(t),disabled:i,key:e})),T].filter(Boolean);if(1===A.length)return r.createElement(a.Button,{onClick:null===(P=A[0])||void 0===P?void 0:P.value,variant:"outline"},null===(E=A[0])||void 0===E?void 0:E.text);const x=A.map(e=>e?r.createElement(n.Menu.ActionItem,{id:"download-menu-item",key:e.key,value:e.value,disabled:e.disabled},e.text):null);return h?r.createElement(a.SplitButton,{variant:S?"outline":"primary",renderMenu:v(x,m.formatMessage({id:"zeKy1a",defaultMessage:"More download options"})),onClick:I},F):r.createElement(n.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:e=>{e()}},({getContentProps:e,getTriggerProps:i,triggerRef:t})=>r.createElement(r.Fragment,null,r.createElement(s.Tooltip,{placement:"left",title:F,triggerRef:t},r.createElement(a.IconButton,Object.assign({},i(),{variant:"transparent","aria-label":F}),r.createElement(o.UIIcon,{src:l.DownloadLine}))),r.createElement(n.Menu.Content,Object.assign({},e()),r.createElement(n.Menu.Segment,null,x))))},i.DownloadDropdown.displayName="DownloadDropdown";const v=(e,i)=>({buttonProps:t})=>r.createElement(n.Menu.Wrapper,{key:"download-dropdown-menu",onSelection:e=>{e()}},({getContentProps:s,getTriggerProps:o})=>r.createElement(r.Fragment,null,r.createElement(a.Button,Object.assign({},o(),t,{"aria-label":i})),r.createElement(n.Menu.Content,Object.assign({},s()),r.createElement(n.Menu.Segment,null,e))));i.DownloadDropdown.displayName="DownloadDropdown"})),define("metaserver/static/js/logging/hive/schemas/web-file_previews",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.WebFilePreviewsLoggingRow=void 0;i.WebFilePreviewsLoggingRow=class{constructor(e){this.category="web-file_previews",this.active_user_id=null,this.anon_ip=null,this.authed_user_ids=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.session_id=null,this.team_id=null,this.team_type=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.user_id=null,this.device_type=e.device_type,this.event_name=e.event_name,this.extra=e.extra,this.file_extension=e.file_extension,this.file_last_edit_ts=e.file_last_edit_ts,this.file_obj_id=e.file_obj_id,this.file_preview_session_id=e.file_preview_session_id,this.file_preview_size=e.file_preview_size,this.file_sf_status=e.file_sf_status,this.file_size=e.file_size,this.file_viewer_session_id=e.file_viewer_session_id,this.is_starred=e.is_starred,this.ns_id=e.ns_id,this.sj_id=e.sj_id,this.x_dropbox_path=e.x_dropbox_path,this.timestamp=Date.now()/1e3|0,Object.seal(this)}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/pass",["require","exports","metaserver/static/js/pass/beacon_presence_helpers","metaserver/static/js/pass/types"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.getPresenceBeaconIOClient=void 0,i.getPresenceBeaconIOClient=function(e,i){return{subscribe(a){var n;const s=i(),o=(null==s?void 0:s.file.file_id)===a?null===(n=null==s?void 0:s.sharedLinkInfo)||void 0===n?void 0:n.url:void 0;t.BeaconPresenceHelpers.transmitBeaconData({prevBeaconFileData:null,beaconFileData:new r.BeaconFileData(a,o),user:null!=e?e:null})},unsubscribe(a){var n;const s=i(),o=(null==s?void 0:s.file.file_id)===a?null===(n=null==s?void 0:s.sharedLinkInfo)||void 0===n?void 0:n.url:void 0;t.BeaconPresenceHelpers.shutdown({beaconFileData:new r.BeaconFileData(a,o),user:null!=e?e:null,async:!0})}}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/hooks",["require","exports","tslib","react","react-redux","@reduxjs/toolkit","metaserver/static/js/file_actions/strings","metaserver/static/js/starred/browse_exports","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/portable/star/portable_star","metaserver/static/js/home/resource_id_types","metaserver/static/js/modules/clean/react/snackbar","metaserver/static/js/starred/browse_exports","metaserver/static/js/modules/core/i18n","dig-components/icons/src","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/starred/redux/selectors","metaserver/static/js/starred/redux/slice","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/starred/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y){"use strict";function S({getActiveFile:e,user:i,onToggle:t}){const a=e(),n=g.useStabilizedCallback(()=>o.StarredStore.getIsStarred({id:a.file.file_id,type:d.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID})),[_,m]=r.useState(n());r.useEffect(()=>{const e=o.StarredStore.addListener(()=>m(n()));return()=>e()},[n]);const w=p.itemNameFromStarrableItem(a.file),b=e=>()=>{const i=e?s.starSnackbarSuccess:s.unstarSnackbarSuccess;u.Snackbar.complete(v.intl.formatMessage(i,{itemName:w}),"star-action");const t={id:a.file.file_id,type:d.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID};p.StarredActions.setStarredStatus(t,e)},h=e=>()=>{const i=e?s.starSnackbarError:s.unstarSnackbarError;u.Snackbar.fail(v.intl.formatMessage(i,{itemName:w}))},y=()=>{null==t||t();const e=!_;c.star({userId:i.id,fileId:a.file.file_id,newStarredValue:e},{onSuccess:b(e),onError:h(e)})};return{message:v.intl.formatMessage(_?l.UNSTAR_ACTION_STRING:l.STAR_ACTION_STRING),iconSrc:_?f.StarFill:f.StarLine,handleClick:e=>{e.preventDefault(),e.stopPropagation(),y()},handleKeyPress:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),y())}}}Object.defineProperty(i,"__esModule",{value:!0}),i.isStarringEnabled=i.useStarControl=i.useStarControlFlux=void 0,i.useStarControlFlux=S,i.useStarControl=h.STARRED_STORE_REDUX?function({getActiveFile:e,onToggle:i}){const{file:s}=e(),o=a.useDispatch(),c=a.useSelector(e=>w.getIsStarred(e,s.file_id));r.useEffect(()=>{o(b.fetchMissingStarredStatuses([{id:s.file_id,type:d.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID}]))},[s]);const u=r.useCallback(()=>t.__awaiter(this,void 0,void 0,(function*(){null==i||i();const e=yield o(b.updateStarredStatus({id:s.file_id,newStatus:!c,showSnackbar:!1}));try{n.unwrapResult(e),y.displayStarSnackbar({itemName:p.itemNameFromStarrableItem(s),isStarred:!c,success:!0})}catch(e){y.displayStarSnackbar({itemName:p.itemNameFromStarrableItem(s),isStarred:!c,success:!1})}})),[i,o,s,c]),_=g.useStabilizedCallback(e=>{e.preventDefault(),e.stopPropagation(),u()}),m=g.useStabilizedCallback(e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),u())});return{message:v.intl.formatMessage(c?l.UNSTAR_ACTION_STRING:l.STAR_ACTION_STRING),iconSrc:c?f.StarFill:f.StarLine,handleClick:_,handleKeyPress:m}}:S,i.isStarringEnabled=function(e){return _.isLiveFile(e)&&!m.isSharedFile(e)&&!_.isInsideVaultFolder(e)}})),define("metaserver/static/js/modules/clean/react/previews/sharing_plugin/loader",["require","exports","tslib","react","react-intl","react-redux","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/modules/core/i18n","dig-components/icons/src","dig-components/buttons","dig-components/tooltips","dig-components/icons","dig-components/menu","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/clean/react/extensions/split_share_button","metaserver/static/js/modules/clean/react/extensions/data/store","spectrum-sharing/utils/sharing_constants","metaserver/static/js/modules/clean/react/file_viewer/share_helpers","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/utils","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/modules/clean/sharing/api/client","metaserver/static/js/modules/clean/sharing/access_level","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/modules/clean/integrations/zoom_share_dialog/async_modal","metaserver/static/js/action_bar/action_bar_strings","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/react/previews/sharing_plugin/copy_file_link_button","typescript/libraries/file-viewer/src/comments2/plugin/types"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S,P,E,I,C,F,O,T){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeShareMetaserverLoader=i.DisabledShareButton=void 0,r=t.__importStar(r),m=t.__importStar(m);const A=a.defineMessage({id:"VzQ1nj",defaultMessage:"Ask the owner of this file for permission to share it with others"}),x=a.defineMessage({id:"JDi0M8",defaultMessage:"Share"});i.DisabledShareButton=()=>{const e=a.useIntl(),i=e.formatMessage(x),t=e.formatMessage(A),n=r.default.createElement(u.UIIcon,{src:l.ShareArrowLine});return r.default.createElement(d.Tooltip,{title:t,placement:"left"},r.default.createElement("span",{style:{display:"inline-block"},tabIndex:0},r.default.createElement(c.SplitButton,{variant:"primary",disabled:!0,renderMenu:({buttonProps:e})=>r.default.createElement(p.Menu.Wrapper,null,({getTriggerProps:i,getContentProps:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(c.Button,Object.assign({"aria-label":"Show options"},e,i(),{disabled:!0})),r.default.createElement(p.Menu.Content,Object.assign({},t(),{placement:"bottom-end"}))))},n,i)))},i.DisabledShareButton.displayName="DisabledShareButton";i.makeShareMetaserverLoader=(a,c,d,p,x,D,k,M)=>({pluginId:"SHARE",load:(L,j)=>{const R=g.getStore(),N=d&&new S.FileShareApiClient({userId:d.id});return Promise.resolve(new class{constructor(s){this.identifier="SHARE",this.lifecycle={previewDidInitialize:()=>t.__awaiter(this,void 0,void 0,(function*(){var e;const{file:i}=a(),t=h.isSharedFile(i),r=v.is_supported_mobile_browser();this.isMobile=r||window.innerWidth<801;const n=c===E.SDKPreviewSurface.SHARED_LINK;t&&N&&!n&&i.file_id!==(null===(e=this.metadata)||void 0===e?void 0:e.id)&&i.file_id!==this.lastFailedId&&(yield N.getMetadataAlpha({contentId:i.file_id}).then(e=>this.metadata=e).catch(()=>this.lastFailedId=i.file_id))}))},this.titleBarUI={Component:()=>{const[s,o]=r.default.useState(null!=k?k:void 0),[l,u]=r.default.useState(void 0),[v,g]=r.default.useState(!0),S=(()=>{const e=()=>b.calcResponsiveSize(window.innerWidth),[i,t]=r.default.useState(e());return r.default.useEffect(()=>{const i=()=>t(e());return window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)},[]),i})(),C=c===E.SDKPreviewSurface.SHARED_CONTENT_LINK||c===E.SDKPreviewSurface.SHARED_LINK,A=C||c===E.SDKPreviewSurface.INBAND_SHARE,L=a().file,j=h.isSharedFile(L),V=()=>t.__awaiter(this,void 0,void 0,(function*(){j&&N&&L.file_id!==(null==s?void 0:s.id)&&L.file_id!==l&&!(null==D?void 0:D.doesContainShmodelLink)&&(yield N.getMetadataAlpha({contentId:L.file_id}).then(e=>o(e)).catch(()=>u(L.file_id)))}));if(r.useEffect(()=>{s||V()}),!d||c===E.SDKPreviewSurface.VERSION_HISTORY)return!d&&C&&"ON"===p&&((null==D?void 0:D.doesContainRlKey)||(null==D?void 0:D.doesContainShmodelLink))?r.default.createElement("div",{className:"share-button-container"},r.default.createElement(O.CopyFileLinkButton,{file_id:L.file_id,parsedLink:D,linkAccessLevel:D.doesContainShmodelLink?"viewer":void 0})):null;const U=null!=s&&s.access_type===P.ACCESS_LEVEL.WRITER;let B=!1;if(C||j&&!U)if("ON"===p&&D&&(D.doesContainRlKey||D.doesContainShmodelLink))B=!0;else if("ON"!==p&&!U)return r.default.createElement(i.DisabledShareButton,null);const K=h.isBrowseFile(L)?L.fq_path:"",z=h.isBrowseFile(L)?L.icon:"",H=y.isCloudDoc(L),W=y.getType(L),q=Object.assign(Object.assign({},L),{icon:z,fq_path:K,is_cloud_doc:H,type:W}),G=A&&U,Z=G&&"ON"===x||!A;return x&&"OFF"!==x&&G&&v&&(g(!1),new Promise((i,t)=>{e(["metaserver/static/js/modules/clean/stormcrow/stormcrow_exposure_logger"],i,t)}).then(t.__importStar).then(({StormcrowExposureLogger:e})=>{(new e).logExposure("sharing_modal_on_edit_previews",x)})),r.default.createElement("div",{className:"share-actions"},B&&r.default.createElement("div",{className:"share-button-container"},r.default.createElement(O.CopyFileLinkButton,{file_id:L.file_id,link_metadata:null==s?void 0:s.link_metadata,user:d,parsedLink:D,variant:Z?"opacity":"primary",linkAccessLevel:U?"editor":"viewer"})),Z&&r.default.createElement(n.Provider,{store:R},r.default.createElement(f.SplitShareButton,{files:[q],user:d,variant:"primary",onShowShare:()=>{const e=A?_.SHARE_ACTION_ORIGIN_TYPE.SHARING_PREVIEW_PAGE:_.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE;m.share(L,d,null,e,{showApproval:M,onCreateApprovalSuccess:()=>this.context.getPluginData().navigation.openRightRailPlugin(w.UserActionContext.TitleBarMain,T.COMMENTS_PLUGIN_ID)}),this.context.logUserAction(w.UserAction.Share,w.UserActionContext.TitleBarMain)},onPresentInZoom:()=>((e,i)=>{I.asyncShowModal(i.id,e,"file-viewer-modal-overlay")})(L.file_id,d),showLeftDigIcon:S===F.ResponsiveSize.DESKTOP})),!Z&&!B&&r.default.createElement(i.DisabledShareButton,null))}},this.context=s}actionDefinitions(){return d&&this.isMobile&&c!==E.SDKPreviewSurface.VERSION_HISTORY?{alwaysInOverflow:[[this.shareDefinition(a())]]}:{}}shareDefinition(e){const{file:i}=e,t=h.isSharedFile(i),a=!!this.metadata&&this.metadata.access_type!==P.ACCESS_LEVEL.WRITER,n=t&&a;return s.makePluginActionDefinition({label:o.intl.formatMessage(C.SHARE_ACTION_STRING),disabled:n?{disabled:!0,tooltipMessage:o.intl.formatMessage(A)}:{disabled:!1},icon:r.default.createElement(u.UIIcon,{src:l.ShareArrowLine}),id:"SHARE",action:()=>{d&&(m.share(i,d,null,_.SHARE_ACTION_ORIGIN_TYPE.PREVIEW_PAGE),this.context.logUserAction(w.UserAction.Share,w.UserActionContext.TitleBarMain))}})}}(j))}})})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/version_history_plugin",["require","exports","tslib","react","metaserver/static/js/modules/core/i18n","dig-components/icons","dig-components/icons/src","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/modules/core/browser","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/modules/clean/browse_interface","metaserver/static/js/file_store/utils","metaserver/static/js/cloud_docs/open_with_utils","metaserver/static/js/cloud_docs/constants","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/modules/clean/sync_everything/constants","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeVersionHistoryActionLoader=void 0,r=t.__importDefault(r),l=t.__importStar(l);i.makeVersionHistoryActionLoader=(e,i,t)=>({actionDefinitions:()=>{const{file:w}=e();if(!i||!u.isBrowseFile(w)||g.isSharedFile(w)||p.isCloudBasedDoc(w)||v.isPointerByExtension(w.fq_path)||f.isPnmLinkNodeSelected(w)||!f.isLiveFile(w))return{};let b="";return b=_.isBackupBrowse()?d.getFileHistoryUrlForNsPath({nsPath:w.ns_path,nsId:w.ns_id,userId:i.id},{inside_backup:"true",return_url:l.get_href()}):d.getFileHistoryUrl({fqPath:w.fq_path,userId:i.id}),{alwaysInOverflow:[[o.makePluginActionDefinition({label:a.intl.formatMessage(c.VERSION_HISTORY_ACTION_STRING),icon:r.default.createElement(n.UIIcon,{src:s.ClockLine}),id:m.VERSION_HISTORY_ACTION_PLUGIN_ID,action:()=>{t.logUserAction("version_history","title_bar_button"),l.redirect(b)}})]]}}})})),define("typescript/libraries/file-viewer/src/keyboard/bindings",["require","exports","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/data/actions","ts-keycode-enum"],(function(e,i,t,r,a){"use strict";function n(e){return null!=e&&null!=e.preventDefault}function s(e){return function(i){e(),n(i)&&i.preventDefault()}}function o({dispatch:e,fileViewerId:i,previewKey:n,requireCommandKey:o,fileIndex:l}){if(0===l)return[];const c=s(()=>{e(r.flipToPreviousFile({fileViewerId:i,previewKey:n,sourceContext:t.UserActionContext.Keyboard}))}),d={keyboardEventCriteria:{keyCode:a.Key.LeftArrow,osModifierKey:!0},callback:c};return o?[d]:[{keyboardEventCriteria:{keyCode:a.Key.LeftArrow},callback:c},d]}function l({dispatch:e,fileViewerId:i,previewKey:n,requireCommandKey:o,fileIndex:l,collectionFileCount:c}){if(l===c-1)return[];const d=s(()=>{e(r.flipToNextFile({fileViewerId:i,previewKey:n,sourceContext:t.UserActionContext.Keyboard}))}),u={keyboardEventCriteria:{keyCode:a.Key.RightArrow,osModifierKey:!0},callback:d};return o?[u]:[{keyboardEventCriteria:{keyCode:a.Key.RightArrow},callback:d},u]}function c(e){return{keyboardEventCriteria:{keyCode:a.Key.PageDown},callback:s(e)}}function d(e){return{keyboardEventCriteria:{keyCode:a.Key.DownArrow},callback:s(e)}}function u(e){return[{keyboardEventCriteria:{keyCode:a.Key.Dash,osModifierKey:!0},callback:s(e)}]}function p(e){return{keyboardEventCriteria:{keyCode:a.Key.End},callback:s(e)}}Object.defineProperty(i,"__esModule",{value:!0}),i.getKeyboardBinding=i.getEscapeBinding=i.getBrowserFindBinding=i.getFindInDocBinding=i.getHomeEndBindings=i.getZoomInOutBindings=i.getUpDownBindings=i.getPageUpDownBindings=i.getFileFlippingBindings=i.isKeyboardEvent=void 0,i.isKeyboardEvent=n,i.getFileFlippingBindings=function(e){return[...l(e),...o(e)]},i.getPageUpDownBindings=function({pageUp:e,pageDown:i}){return[(t=e,{keyboardEventCriteria:{keyCode:a.Key.PageUp},callback:s(t)}),c(i)];var t},i.getUpDownBindings=function({up:e,down:i}){return[(t=e,{keyboardEventCriteria:{keyCode:a.Key.UpArrow},callback:s(t)}),d(i)];var t},i.getZoomInOutBindings=function({zoomIn:e,zoomOut:i}){return[...(t=e,[{keyboardEventCriteria:{keyCode:a.Key.PlusSign,osModifierKey:!0},callback:s(t)}]),...u(i)];var t},i.getHomeEndBindings=function({home:e,end:i}){return[(t=e,{keyboardEventCriteria:{keyCode:a.Key.Home},callback:s(t)}),p(i)];var t},i.getFindInDocBinding=function(e){return{keyboardEventCriteria:{keyCode:a.Key.F,osModifierKey:!0},callback:s(e)}},i.getBrowserFindBinding=function(e){return{keyboardEventCriteria:{keyCode:a.Key.F,osModifierKey:!0},callback:e}},i.getEscapeBinding=function(e){return{keyboardEventCriteria:{keyCode:a.Key.Escape},callback:s(e)}},i.getKeyboardBinding=function({keyCode:e,callback:i}){return[{keyboardEventCriteria:{keyCode:e},callback:()=>i()}]}})),define("typescript/libraries/file-viewer/src/keyboard/context",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingContext=void 0,r=t.__importStar(r);const a=()=>{};i.KeyboardBindingContext=r.createContext({registerKeyBindings:a,unregisterKeyBindings:a,updateKeyBindings:a}),i.KeyboardBindingContext.displayName="KeyboardBindingContext"})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_binding_map",["require","exports","typescript/libraries/file-viewer/src/keyboard/keyboard_binding"],(function(e,i,t){"use strict";function r(e){return t.NormalizedKeyboardEventCriteriaKeys.map(i=>`${i}:${e[i]}`).join("")}function a(e,i){return(function(e,i){return e.reduce((e,{keyboardEventCriteria:t,callback:r})=>(e[i(t)]=r,e),{})})(e,e=>(function(e,i){return r(t.normalizeKeyboardEventCriteria(e,i))})(e,i))}Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingMap=void 0;i.KeyboardBindingMap=class{constructor(e,i){this.bindingDict={},this.bindingDict=a(e,i)}getCallbackForEvent(e){const i=t.normalizeKeyboardEvent(e);return this.bindingDict[r(i)]}}})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_binding",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.normalizeKeyboardEventCriteria=i.normalizeKeyboardEvent=i.NormalizedKeyboardEventCriteriaKeys=i.genericNormalizedKeyboardEventCriteria=void 0,i.genericNormalizedKeyboardEventCriteria={altKey:!1,ctrlKey:!1,metaKey:!1,shiftKey:!1,keyCode:0},i.NormalizedKeyboardEventCriteriaKeys=Object.keys(i.genericNormalizedKeyboardEventCriteria),i.normalizeKeyboardEvent=function(e){return{altKey:!0===e.altKey,ctrlKey:!0===e.ctrlKey,metaKey:!0===e.metaKey,shiftKey:!0===e.shiftKey,keyCode:e.keyCode}},i.normalizeKeyboardEventCriteria=function(e,i){return{altKey:!0===e.altKey,shiftKey:!0===e.shiftKey,keyCode:e.keyCode,ctrlKey:!1,metaKey:!1,[i]:!0===e.osModifierKey}}})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_connector",["require","exports","tslib","react","typescript/libraries/file-viewer/src/keyboard/context"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingConnector=void 0,r=t.__importStar(r);i.KeyboardBindingConnector=e=>{const{keyboardBindings:i}=e,t=r.useContext(a.KeyboardBindingContext);return r.useEffect(()=>{const e=t.registerKeyBindings(i);return()=>{t.unregisterKeyBindings(e)}},[i]),null},i.KeyboardBindingConnector.displayName="KeyboardBindingConnector"})),define("typescript/libraries/file-viewer/src/keyboard/keyboard_provider",["require","exports","tslib","react","lodash","typescript/libraries/file-viewer/src/keyboard/keyboard_binding_map","typescript/libraries/file-viewer/src/keyboard/context","typescript/libraries/file-viewer/src/css/preview-excel.module.css"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.KeyboardBindingProvider=void 0,r=t.__importStar(r);i.KeyboardBindingProvider=e=>{const{disableBindings:i,children:t,osModifierKey:l}=e,c=r.useRef(0),d=r.useRef([]),u=r.useRef(null),p=r.useCallback((e,i)=>{d.current[e]=null!=i?i:[],u.current=new n.KeyboardBindingMap((function(e){return e.map(e=>Object.assign(Object.assign({},e),{callback:a.throttle(e.callback,20)}))})(a.flatten(d.current)),l)},[]),v=r.useCallback(e=>{const i=c.current++;return p(i,e),i},[]),f=r.useCallback(e=>{p(e,[])},[]),g=r.useCallback(e=>{var i;if(!(function(e){const i=e.target||e.srcElement;if(!i)return!0;const{tagName:t,className:r=""}=i,a="INPUT"===t||"SELECT"===t||"TEXTAREA"===t,n=i instanceof HTMLInputElement&&("submit"===i.type||"button"==i.type),s=i.hasAttribute&&i.hasAttribute("contenteditable")&&"false"!==i.getAttribute("contenteditable").toLowerCase(),l=-1!==r.split(" ").indexOf(o.tab);return!s&&!l&&(!a||n)})(e))return;const t=null===(i=u.current)||void 0===i?void 0:i.getCallbackForEvent(e);t&&t(e)},[]);r.useEffect(()=>(!0!==i&&document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]);const _=r.useMemo(()=>({registerKeyBindings:v,unregisterKeyBindings:f,updateKeyBindings:p}),[]);return r.createElement(s.KeyboardBindingContext.Provider,{value:_},t)},i.KeyboardBindingProvider.displayName="KeyboardBindingProvider"})),define("typescript/libraries/file-viewer/src/css/app.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/app.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transparentBackground=i.authButtons=i.editPluginFullscreenContainer=i.loadingSpinnerWrapper=i.editMode=i.contentContainerHide=i.contentWrapper=i.contentContainer=i.containerV2=i.container=void 0,i.container="_container_rw8yl_1",i.containerV2="_containerV2_rw8yl_18",i.contentContainer="_contentContainer_rw8yl_27",i.contentWrapper="_contentWrapper_rw8yl_32",i.contentContainerHide="_contentContainerHide_rw8yl_32",i.editMode="_editMode_rw8yl_44",i.loadingSpinnerWrapper="_loadingSpinnerWrapper_rw8yl_48",i.editPluginFullscreenContainer="_editPluginFullscreenContainer_rw8yl_64",i.authButtons="_authButtons_rw8yl_69",i.transparentBackground="_transparentBackground_rw8yl_73";i.default={container:"_container_rw8yl_1",containerV2:"_containerV2_rw8yl_18",contentContainer:"_contentContainer_rw8yl_27",contentWrapper:"_contentWrapper_rw8yl_32",contentContainerHide:"_contentContainerHide_rw8yl_32",editMode:"_editMode_rw8yl_44",loadingSpinnerWrapper:"_loadingSpinnerWrapper_rw8yl_48",editPluginFullscreenContainer:"_editPluginFullscreenContainer_rw8yl_64",authButtons:"_authButtons_rw8yl_69",transparentBackground:"_transparentBackground_rw8yl_73"}})),define("typescript/libraries/file-viewer/src/css/right_rail/right_rail.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/right_rail/right_rail.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.previewRightRailWrapper=i.editPluginContainer=i.rightRailContainer=void 0,i.rightRailContainer="_rightRailContainer_h7q7y_1",i.editPluginContainer="_editPluginContainer_h7q7y_7",i.previewRightRailWrapper="_previewRightRailWrapper_h7q7y_14";i.default={rightRailContainer:"_rightRailContainer_h7q7y_1",editPluginContainer:"_editPluginContainer_h7q7y_7",previewRightRailWrapper:"_previewRightRailWrapper_h7q7y_14"}})),define("typescript/libraries/file-viewer/src/css/title_bar.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/title_bar.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.dropboxLogo=i.mobileMeatball=i.helpButton=i.actionBarMobile=i.actionBar=i.auth=i.spacer=i.share=i.pass=i.title=i.closeButton=i.mobileTitleBar=i.titleBar=void 0,i.titleBar="_titleBar_ji18g_1",i.mobileTitleBar="_mobileTitleBar_ji18g_8",i.closeButton="_closeButton_ji18g_13",i.title="_title_ji18g_1",i.pass="_pass_ji18g_27",i.share="_share_ji18g_34",i.spacer="_spacer_ji18g_38",i.auth="_auth_ji18g_42",i.actionBar="_actionBar_ji18g_50",i.actionBarMobile="_actionBarMobile_ji18g_55",i.helpButton="_helpButton_ji18g_59",i.mobileMeatball="_mobileMeatball_ji18g_65",i.dropboxLogo="_dropboxLogo_ji18g_69";i.default={titleBar:"_titleBar_ji18g_1",mobileTitleBar:"_mobileTitleBar_ji18g_8",closeButton:"_closeButton_ji18g_13",title:"_title_ji18g_1",pass:"_pass_ji18g_27",share:"_share_ji18g_34",spacer:"_spacer_ji18g_38",auth:"_auth_ji18g_42",actionBar:"_actionBar_ji18g_50",actionBarMobile:"_actionBarMobile_ji18g_55",helpButton:"_helpButton_ji18g_59",mobileMeatball:"_mobileMeatball_ji18g_65",dropboxLogo:"_dropboxLogo_ji18g_69"}})),define("typescript/libraries/file-viewer/src/css/preview-core.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/preview-core.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.brandingBackgroundImage=i.brandingLogo=i.isFullScreen=i.toolbar=i.app=void 0,i.app="_app_13gtt_5",i.toolbar="_toolbar_13gtt_14",i.isFullScreen="_is-full-screen_13gtt_33",i.brandingLogo="_brandingLogo_13gtt_43",i.brandingBackgroundImage="_brandingBackgroundImage_13gtt_50";i.default={app:"_app_13gtt_5",toolbar:"_toolbar_13gtt_14",isFullScreen:"_is-full-screen_13gtt_33",brandingLogo:"_brandingLogo_13gtt_43",brandingBackgroundImage:"_brandingBackgroundImage_13gtt_50"}})),define("typescript/libraries/file-viewer/src/css/preview-error.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/preview-error.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.illustrationContainer=i.ctaLink=i.ctaSecondary=i.message=i.header=i.img=i.container=void 0,i.container="_container_9t5i9_1",i.img="_img_9t5i9_12",i.header="_header_9t5i9_16",i.message="_message_9t5i9_24",i.ctaSecondary="_ctaSecondary_9t5i9_29",i.ctaLink="_ctaLink_9t5i9_34",i.illustrationContainer="_illustrationContainer_9t5i9_38";i.default={container:"_container_9t5i9_1",img:"_img_9t5i9_12",header:"_header_9t5i9_16",message:"_message_9t5i9_24",ctaSecondary:"_ctaSecondary_9t5i9_29",ctaLink:"_ctaLink_9t5i9_34",illustrationContainer:"_illustrationContainer_9t5i9_38"}})),define("typescript/libraries/file-viewer/src/css/preview-excel.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/preview-excel.module.out.css"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.gridCell=i.gridTable=i.toolbar=i.textAlignCenter=i.loadingSpinnerWrapper=i.tab=i.segmentedControlOptionContainer=i.buttonSeparator=i.tabsGroup=i.tabsTabs=i.tabsGroupButtonsContainer=i.tabsGroupContainer=i.tabsGroupAndButtonsContainer=i.tabsPanelContainerNoScroll=i.tabsPanelContainer=i.sheetContent=i.rowHeaders=i.columnHeaders=i.sheetHeader=i.columnHeadersContainer=i.rowHeadersContainer=i.sheetHeaderContainer=i.headerSpacer=i.sheet=i.sheetWrapper=i.container=void 0,i.container="_container_7l53b_9",i.sheetWrapper="_sheetWrapper_7l53b_16",i.sheet="_sheet_7l53b_16",i.headerSpacer="_header-spacer_7l53b_31",i.sheetHeaderContainer="_sheetHeaderContainer_7l53b_41",i.rowHeadersContainer="_row-headersContainer_7l53b_46",i.columnHeadersContainer="_column-headersContainer_7l53b_52",i.sheetHeader="_sheetHeader_7l53b_41",i.columnHeaders="_column-headers_7l53b_52",i.rowHeaders="_row-headers_7l53b_46",i.sheetContent="_sheet-content_7l53b_82",i.tabsPanelContainer="_tabsPanelContainer_7l53b_91",i.tabsPanelContainerNoScroll="_tabsPanelContainerNoScroll_7l53b_106",i.tabsGroupAndButtonsContainer="_tabsGroupAndButtonsContainer_7l53b_110",i.tabsGroupContainer="_tabsGroupContainer_7l53b_123",i.tabsGroupButtonsContainer="_tabsGroupButtonsContainer_7l53b_127",i.tabsTabs="_tabsTabs_7l53b_137",i.tabsGroup="_tabsGroup_7l53b_110",i.buttonSeparator="_buttonSeparator_7l53b_150",i.segmentedControlOptionContainer="_segmentedControlOptionContainer_7l53b_161",i.tab="_tab_7l53b_91",i.loadingSpinnerWrapper="_loadingSpinnerWrapper_7l53b_180",i.textAlignCenter="_textAlignCenter_7l53b_188",i.toolbar="_toolbar_7l53b_193",i.gridTable="_gridTable_7l53b_210",i.gridCell="_gridCell_7l53b_216";i.default={container:"_container_7l53b_9",sheetWrapper:"_sheetWrapper_7l53b_16",sheet:"_sheet_7l53b_16",headerSpacer:"_header-spacer_7l53b_31",sheetHeaderContainer:"_sheetHeaderContainer_7l53b_41",rowHeadersContainer:"_row-headersContainer_7l53b_46",columnHeadersContainer:"_column-headersContainer_7l53b_52",sheetHeader:"_sheetHeader_7l53b_41",columnHeaders:"_column-headers_7l53b_52",rowHeaders:"_row-headers_7l53b_46",sheetContent:"_sheet-content_7l53b_82",tabsPanelContainer:"_tabsPanelContainer_7l53b_91",tabsPanelContainerNoScroll:"_tabsPanelContainerNoScroll_7l53b_106",tabsGroupAndButtonsContainer:"_tabsGroupAndButtonsContainer_7l53b_110",tabsGroupContainer:"_tabsGroupContainer_7l53b_123",tabsGroupButtonsContainer:"_tabsGroupButtonsContainer_7l53b_127",tabsTabs:"_tabsTabs_7l53b_137",tabsGroup:"_tabsGroup_7l53b_110",buttonSeparator:"_buttonSeparator_7l53b_150",segmentedControlOptionContainer:"_segmentedControlOptionContainer_7l53b_161",tab:"_tab_7l53b_91",loadingSpinnerWrapper:"_loadingSpinnerWrapper_7l53b_180",textAlignCenter:"_textAlignCenter_7l53b_188",toolbar:"_toolbar_7l53b_193",gridTable:"_gridTable_7l53b_210",gridCell:"_gridCell_7l53b_216"}})),define("typescript/libraries/file-viewer/src/file_activity_blade/file_activity_blade_plugin",["require","exports","tslib","react","typescript/component_libraries/files_components/src/blades/file_activity/index","react-redux","typescript/libraries/file-viewer/src/file_activity_blade/types"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileActivityPluginBase=void 0,r=t.__importStar(r);i.FileActivityPluginBase=class{constructor(e,i,t,o,l){this.lifecycle={},this.layerUI={},this.rightRailUI={Sidebar:e=>{const i=this.onOpenVersionHistory,t=r.useMemo(()=>i?{enabled:!0,onVersionHistoryClicked:()=>{i(),this.context.logUserAction("version_history_clicked","right_sidebar")}}:{enabled:!1},[i]),o=r.useCallback(e=>{this.context.logUserAction(e,"right_sidebar")},[]);return r.default.createElement(n.Provider,{store:this.store},r.default.createElement(a.FileActivityBlade,{id:s.FILE_ACTIVITY_PLUGIN_ID,fileId:e.file.fileId,user:this.user,intl:this.platform.intl,versionHistory:t,logFilterChange:o}))},Control:()=>r.default.createElement(a.CollapsedFileActivityBladeButton,{id:s.FILE_ACTIVITY_PLUGIN_ID,intl:this.platform.intl})},this.platform=e,this.store=i,this.user=t,this.context=o,this.onOpenVersionHistory=l}}})),define("typescript/libraries/file-viewer/src/preview_image/data_transform",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transform=void 0,i.transform=function(e,i){return{thumbnailUrl:e.default_src||"",fullSizeUrl:e.full_size_src||"",srcSet:e.src_set||"",alt:"",imgWidth:i?i.width:void 0,imgHeight:i?i.height:void 0}}})),define("typescript/libraries/file-viewer/src/preview_image/img_layer",["require","exports","tslib","classnames","react","typescript/libraries/file-viewer/src/css/preview-image.module.css","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ImageLayer=void 0,r=t.__importDefault(r),a=t.__importStar(a),n=t.__importStar(n);i.ImageLayer=e=>{const{onSmallImageLoaded:i,onFullSizeImageLoaded:t,previewKey:o,viewportConfig:l}=e,[c,d]=a.useState(!1),[u,p]=a.useState(!0);a.useEffect(()=>{!c&&u||(d(!1),p(!0))},[o.serialized]);const v=a.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:t}})=>{p(!1),s.PreviewsEventLogger.mark(s.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD),i(e,t)},[]),f=a.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:i}})=>{p(!1),d(!0),t(e,i)},[]),g=a.useCallback(e=>{l.contextMenuDisabled&&e.preventDefault()},[l.contextMenuDisabled]),{data:{alt:_,fullSizeUrl:m,thumbnailUrl:w,srcSet:b,imgWidth:h,imgHeight:y},className:S,config:{img_size_optimization:P},layerViewportScale:E}=e;if(P&&h&&y)return a.createElement("div",{className:n.layer},a.createElement("img",{alt:_,className:r.default(n.fullSizeImg,S),src:m,srcSet:b,sizes:E+"vw",onLoad:f,onError:e.onImageError,onDoubleClick:e.onDoubleClick,onContextMenu:g,"data-testid":"fv-sdk-img-preview-full-size"}));const I={display:"none"};return a.createElement("div",{className:n.layer},a.createElement("img",{key:w,src:w,srcSet:b,style:u?I:void 0,onLoad:v,className:r.default(n.smallImg,S),onError:e.onImageError,onContextMenu:g,alt:_,"aria-hidden":!!c,"data-testid":"fv-sdk-img-preview-thumbnail"}),a.createElement("img",{key:m,alt:_,className:r.default(n.fullSizeImg,S),src:m,style:c?void 0:I,onLoad:f,onError:e.onImageError,onDoubleClick:e.onDoubleClick,onContextMenu:g,"data-testid":"fv-sdk-img-preview-full-size"}))},i.ImageLayer.displayName="ImageLayer"})),define("typescript/libraries/file-viewer/src/preview_image/layers",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_image/img_layer","typescript/libraries/file-viewer/src/plugins/layers","typescript/libraries/file-viewer/src/plugins/types"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.defaultLayerRenderFn=void 0,r=t.__importStar(r);i.defaultLayerRenderFn=e=>i=>{const{activePluginInstance:t,pluginProps:o}=e,l=[r.createElement(a.ImageLayer,Object.assign({key:"image"},e,i))];if((null==o?void 0:o.previewType)===s.PreviewType.Archive)return l;if(null!=o&&null!=t){const e=Object.assign(Object.assign({},o),{layer:{dimensions:o.file.dimensions}}),{layerUI:{Layer:i,LayerWithEventBubbling:a}}=t;if(null!=i)return[...l,r.createElement(i,Object.assign({},e))];if(null!=a)return[r.createElement(n.PortalTargetProvider,{key:"portal-target-provider"},i=>r.createElement(a,Object.assign({},e),r.createElement(n.PortalWrapper,{element:i},l),r.createElement("div",null)))]}return l}})),define("typescript/libraries/file-viewer/src/preview_image/preview_image",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/mobile_web.module.css","typescript/libraries/file-viewer/src/preview_image/viewport","typescript/libraries/file-viewer/src/preview_image/data_transform","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/plugins/header","typescript/libraries/file-viewer/src/css/header.module.css","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/errors","typescript/libraries/file-viewer/src/preview_error/preview_error","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/logging/performance","typescript/libraries/file-viewer/src/css/preview-core.module.css","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewImage=void 0,r=t.__importStar(r),a=t.__importStar(a);const b={top:20,bottom:120,bottomNoToolbar:20,horizontal:72};function h(e,i,t,r,a){return Math.min((t-a.horizontal)/e,(r-a.top-a.bottom)/i)}function y(e){const i={width:void 0,height:void 0};return e.config.img_size_optimization&&e.previewMetadata&&e.previewMetadata.dimensions?e.previewMetadata.dimensions:i}function S(e,i){const{width:t,height:r}=y(e);return null!=r&&null!=t?{originalWidth:t,originalHeight:r}:e.fileMetadata&&e.fileMetadata.file_name&&".svg"===p.getFileExtension(e.fileMetadata.file_name)?{originalWidth:600,originalHeight:600}:{originalWidth:i.assetWidth,originalHeight:i.assetHeight}}class P extends r.PureComponent{constructor(e){super(e),this.state={},this.handleDoubleClick=()=>{this.props.onDoubleClick&&this.props.onDoubleClick()},this.handleSmallImgLoad=(e,i)=>{if(!this.state.assetWidth||!this.state.assetHeight){const t={assetHeight:i,assetWidth:e,aspectRatio:e/i,renderSucceeded:!0};this.setState(t,()=>{const{originalWidth:e,originalHeight:i}=S(this.props,t),{width:r,height:a,onFitScaleFactorChanged:n}=this.props;e&&i&&"function"==typeof n&&n(h(e,i,r,a,b))})}},this.handleFullSizeImgLoad=(e,i)=>{const{width:t,height:r,onFitScaleFactorChanged:a}=this.props,{originalWidth:n,originalHeight:s}=S(this.props,this.state),o={assetHeight:i,assetWidth:e,aspectRatio:e/i,renderSucceeded:!0};this.setState(o,()=>{const{originalWidth:e,originalHeight:i}=S(this.props,o);e&&i&&"function"==typeof a&&(n===e&&s===i||a(h(e,i,t,r,b)))})},this.onRenderFailed=()=>{this.setState({errored:!0})},_.PreviewsEventLogger.mark(_.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START)}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&this.setState({assetWidth:void 0,assetHeight:void 0,aspectRatio:void 0,renderSucceeded:!1})}componentDidMount(){const{width:e,height:i,onFitScaleFactorChanged:t}=this.props,{originalWidth:r,originalHeight:a}=S(this.props,this.state);r&&a&&"function"==typeof t&&t(h(r,a,e,i,b)),_.PreviewsEventLogger.mark(_.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT)}componentDidUpdate(e,i){var t,r,a,n;const{width:s,height:o,onFitScaleFactorChanged:l,onInteractive:c,onRenderSucceeded:d}=this.props,{renderSucceeded:u}=this.state,{originalWidth:p,originalHeight:v}=S(this.props,this.state),{originalWidth:f,originalHeight:g}=S(e,i);if(u&&u!==i.renderSucceeded&&(c(),d()),i.assetHeight===this.state.assetHeight&&i.assetWidth===this.state.assetWidth&&this.props.previewKey.serialized===e.previewKey.serialized||(this.state.assetWidth&&this.state.assetHeight?null===(r=(t=this.props).onUpdateDimensions)||void 0===r||r.call(t,{height:this.state.assetHeight,width:this.state.assetWidth}):null===(n=(a=this.props).onUpdateDimensions)||void 0===n||n.call(a,void 0)),p&&v&&"function"==typeof l&&(e.width!==s||e.height!==o||f!==p||g!==v)){const e=h(p,v,s,o,b),i=p<s;l(i?1:e,i?e:void 0)}}componentWillUnmount(){var e,i;null===(i=(e=this.props).onUpdateDimensions)||void 0===i||i.call(e,void 0)}render(){const{account:e,activePluginInstance:i,className:t,config:p,fileViewerUiData:_,contextMenuDisabled:h,dispatch:P,fileInfo:E,fileMetadata:I,filePreviewUiData:C,fileViewerId:F,height:O,intl:T,layerRenderFn:A,previewKey:x,previewMetadata:D,pluginProps:k,sizerClassName:M,width:L,rootArchiveFileInformation:j,responsiveSize:R,toolbarPlugins:N,snackbarManagerPluginInstance:V,header:U,brandingInfo:B}=this.props,{originalWidth:K,originalHeight:z}=S(this.props,this.state),H=(function(e,i){const{width:t,height:r}=y(e);return null!=r&&null!=t?t/r:i.aspectRatio})(this.props,this.state),W=o.getCurrentScaleFactorFromFilePreviewUi(C),q=g.noToolbarShown(R,p);if(this.state.errored)return r.createElement(f.PreviewRenderError,Object.assign({},this.props,{error:new v.FVError(v.FVErrorCode.Unknown)}));if(!D||!D.content)return null;const G=s.transform(D.content,D.dimensions);if(p.mobile_web){const e=parseInt(a.mobileFooterHeight,10);return r.createElement("div",{style:{height:`${O-e}px`},className:a.imageContainer},k&&r.createElement(l.PluginHeader,{pluginProps:k,activePluginInstance:i||void 0,header:U}),r.createElement("img",{onLoad:()=>{this.props.onRenderSucceeded(),this.props.onInteractive()},onError:this.onRenderFailed,src:G.fullSizeUrl,"data-testid":"fv-sdk-img-preview-full-size"}))}return r.createElement("div",{className:c.headerContainer},r.createElement(w.BrandingFileViewerPreview,{backgroundClass:m.brandingBackgroundImage,brandingInfo:B,logoClass:m.brandingLogo},k&&r.createElement(l.PluginHeader,{pluginProps:k,activePluginInstance:i||void 0,header:U}),r.createElement(n.Viewport,{className:t,id:x.serialized,data:G,sizerClassName:M,originalWidth:K,originalHeight:z,scaleFactor:W,aspectRatio:H,width:L,height:O,contextMenuDisabled:h,topPadding:b.top,bottomPadding:q?b.bottomNoToolbar:b.bottom,horizontalPadding:b.horizontal,toolbar:!p.force_no_toolbar&&r.createElement(u.ConfigurableToolbar,{rootArchiveFileInformation:j,previewType:d.PreviewType.Image,filePreviewUi:C,fileViewerUi:_,plugins:N,snackbarManagerPluginInstance:V})},A({account:e,activePluginInstance:i,dispatch:P,config:p,fileViewerUiData:_,fileInfo:E,fileMetadata:I,filePreviewUiData:C,fileViewerId:F,intl:T,pluginProps:k,previewKey:x,previewMetadata:D,onDoubleClick:this.handleDoubleClick,onFullSizeImageLoaded:this.handleFullSizeImgLoad,onImageError:this.onRenderFailed,onSmallImageLoaded:this.handleSmallImgLoad}))))}}i.PreviewImage=P,P.displayName="PreviewImage"})),define("typescript/libraries/file-viewer/src/preview_image/viewport",["require","exports","tslib","classnames","react","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/css/preview-image.module.css"],(function(e,i,t,r,a,n,s){"use strict";function o(e,i,t,r){const{left:a,top:n}=e,{w:s,h:o}=i,{w:l,h:c}=t,d=[.5,.5];if(!s||!o||!r)return d;const u=s*r,p=o*r;return u>l&&(d[0]=(a+l/2)/u),p>c&&(d[1]=(n+c/2)/p),d}function l(e,i,t,r){const{w:a,h:n}=t,{w:s,h:o}=r,l=i*a,c=i*n;return[e[0]*l-s/2,e[1]*c-o/2]}Object.defineProperty(i,"__esModule",{value:!0}),i.Viewport=i._calculateScrollPosition=i._calculateFocusPoint=void 0,r=t.__importDefault(r),a=t.__importStar(a),s=t.__importStar(s),i._calculateFocusPoint=o,i._calculateScrollPosition=l;i.Viewport=e=>{const{id:i}=e,t=a.useRef(null),c=a.useRef([.5,.5]);a.useEffect(()=>{c.current=[.5,.5]},[i]);const{scaleFactor:d,originalWidth:u,originalHeight:p,width:v,height:f}=e;a.useLayoutEffect(()=>{t.current&&"function"==typeof t.current.scrollTo&&d&&u&&p&&t.current.scrollTo(...l(c.current,d,{w:u,h:p},{w:v,h:f}))},[d,u,p,f,v]);const g=a.useCallback(e=>{const{scrollLeft:i,scrollTop:t}=e.currentTarget;c.current=o({left:i,top:t},{w:u,h:p},{w:v,h:f},d)},[d,u,p,f,v]),{className:_,aspectRatio:m,sizerClassName:w,contextMenuDisabled:b,data:h,toolbar:y}=e;let S=0,P=0;const E={width:u,height:p},{topPadding:I,bottomPadding:C,horizontalPadding:F}=e;if(d&&u&&p){const e=u*d,i=p*d;e<v&&(S=(v-e)/2),i<f&&(P=(f-i-C+I)/2),E.width=e,E.height=i,E.transform=`translate(${S}px, ${P}px)`}else if(m){const[e,i]=n.calculateFitBox(v-F,f-I-C,m);E.width=e,E.height=i}else E.visibility="hidden";const O=Number(E.width)/window.innerWidth*100/window.devicePixelRatio;return a.createElement("div",{className:r.default(_,s.viewport),style:{width:v,height:f},onScroll:g,ref:t},a.createElement("div",{className:r.default(s.sizer,w),style:E},e.children({viewportConfig:{contextMenuDisabled:!!b},originalWidth:u||0,originalHeight:p||0,data:h,layerViewportScale:O})),y&&a.createElement("div",{className:s.toolbarHolder},y))},i.Viewport.displayName="Viewport"})),define("typescript/libraries/file-viewer/src/preview_doc/data_transform",["require","exports","typescript/libraries/file-viewer/src/preview_doc/text_transform"],(function(e,i,t){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transformData=void 0,i.transformData=function(e){const i=[];return e.metadata&&Array.isArray(e.pages)?e.pages.map(e=>Object.assign(Object.assign({},e),{textboxes:e.textboxes.map(e=>{const i=t.transform(e.t);return Object.assign(Object.assign({},e),{transformedText:i.str,dir:i.dir})})})):i}})),define("typescript/libraries/file-viewer/src/preview_doc/img_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/utils"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.ImgLayer=void 0,r=t.__importStar(r);class o extends r.PureComponent{constructor(){super(...arguments),this.el=null}componentDidMount(){this.fireEventHandlersIfNeeded()}componentDidUpdate(e){e.previewKey.serialized!==this.props.previewKey.serialized&&this.fireEventHandlersIfNeeded()}fireEventHandlersIfNeeded(){this.el&&this.el.complete&&(this.el.naturalHeight||this.el.naturalWidth?this.props.onImageLoad(this.props.data.pageIndex):this.props.onImageError(this.props.data.pageIndex))}render(){var e,i;const{data:{imgUrls:t,dimension:[o,l]},filePreviewUiData:c,fileMetadata:d,lazyLoad:u,onImageLoad:p,onImageError:v,config:{img_size_optimization:f}}=this.props,g=n.getCurrentScaleFactorFromFilePreviewUi(c),_=o*g,m=l*g,w=100*_/window.innerWidth/window.devicePixelRatio,b=null!==(i=null===(e=s.filterDocFilePreviewUiState(c))||void 0===e?void 0:e.viewportWidth)&&void 0!==i?i:0,h=f?{srcSet:t.srcset,sizes:`${2*Math.max(w,b)}vw`}:{},y={loading:u?"lazy":"eager"};return r.createElement("div",{className:a.imgLayer},r.createElement("img",Object.assign({},h,y,{ref:e=>this.el=e,alt:d?d.file_name:"",width:_,height:m,role:"tabpanel","aria-hidden":"true",draggable:!1,src:g>=2?t["4x"]:t["1x"],onLoad:()=>p(this.props.data.pageIndex),onError:()=>v(this.props.data.pageIndex),"data-testid":`fvsdk-doc-page-${this.props.data.pageIndex}`})))}}i.ImgLayer=o,o.displayName="ImgLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/layers",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/img_layer","typescript/libraries/file-viewer/src/preview_doc/text_layer","typescript/libraries/file-viewer/src/preview_doc/links_layer","typescript/libraries/file-viewer/src/plugins/layers","typescript/libraries/file-viewer/src/plugins/types"],(function(e,i,t,r,a,n,s,o,l){"use strict";function c(e,i,t){const{pluginProps:a,activePluginInstance:n}=e,s=t;if((null==a?void 0:a.previewType)===l.PreviewType.Archive)return s;if(null!=n&&null!=a){const{data:{pageIndex:e}}=i,t=Object.assign(Object.assign({},a),{layer:{dimensions:a.file.pages[e].dimensions,pageIndex:e}}),{layerUI:{Layer:l,LayerWithEventBubbling:c}}=n;if(null!=l)return[...s,r.createElement(l,Object.assign({},t))];if(null!=c)return[r.createElement(o.PortalTargetProvider,{key:"portal-target-provider"},e=>r.createElement(c,Object.assign({},t),r.createElement(o.PortalWrapper,{element:e},s),r.createElement("div",null)))]}return t}Object.defineProperty(i,"__esModule",{value:!0}),i.imageLayerRenderFn=i.defaultLayerRenderFn=void 0,r=t.__importStar(r);i.defaultLayerRenderFn=e=>i=>{const t=[r.createElement(a.ImgLayer,Object.assign({key:"image"},e,i)),r.createElement(n.TextLayer,Object.assign({key:"text"},e,i)),r.createElement(s.LinksLayer,Object.assign({key:"links"},e,i))];return c(e,i,t)};i.imageLayerRenderFn=e=>i=>{const t=[r.createElement(a.ImgLayer,Object.assign({key:"image"},e,i))];return c(e,i,t)}})),define("typescript/libraries/file-viewer/src/preview_doc/links_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/preview_doc/text_transform","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s,o){"use strict";function l(e){return!!e.ur}Object.defineProperty(i,"__esModule",{value:!0}),i.LinksLayer=i.isLinkUrl=void 0,r=t.__importStar(r),i.isLinkUrl=l;i.LinksLayer=e=>{const{intl:i,filePreviewUiData:t}=e,c=s.getCurrentScaleFactorFromFilePreviewUi(t);const d=e.data.links.map((t,s)=>{const c=t.a;let[d,u,p,v]=t.r;v<0&&(u+=v,v=-v),p<0&&(d+=p,p=-p);const f={position:"absolute",bottom:u,left:d,width:p,height:v};if(l(c)){const{ur:t}=c,a=t.startsWith("mailto:")||t.startsWith("tel:");return r.createElement("a",{key:s,"aria-label":i.formatMessage({id:"+trcEI",defaultMessage:"External Link"}),href:a?t:n.normalizeUrl(t),onClick:()=>(function(i){e.dispatch(o.openUrl({url:i}))})(t),rel:"noreferrer noopener",style:f,target:"_blank"})}return r.createElement("div",{key:s,className:a.internalLink,style:f,"aria-label":i.formatMessage({id:"UU1q+t",defaultMessage:"Internal Link"}),onClick:i=>(function(i,t){i.preventDefault(),e.onInternalLinkClicked(t)})(i,c.pn)})});return r.createElement("div",{className:a.linksLayer,style:{transform:`scale(${c})`}},d)},i.LinksLayer.displayName="LinksLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/password_modal",["require","exports","tslib","react","dig-components/modal","dig-components/buttons","dig-components/text_fields"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PasswordModal=void 0,r=t.__importStar(r);class o extends r.PureComponent{constructor(){super(...arguments),this.state={password:""},this.handleInputChange=e=>{this.setState({password:e.currentTarget.value})},this.handleKeyDown=e=>{"Enter"===e.key&&this.props.onSubmit(this.state.password)},this.onEnterPassword=()=>{this.props.onSubmit(this.state.password)}}componentDidMount(){"function"==typeof this.props.onComponentDidMount&&this.props.onComponentDidMount()}UNSAFE_componentWillReceiveProps(){this.setState({password:""})}render(){const{enteredWrongPassword:e,onDismiss:i,intl:t,fileName:o}=this.props,{password:l}=this.state,c=t.formatMessage({id:"GKzMoF",defaultMessage:"Close"});return r.createElement(a.Modal,{open:!0,isCentered:!0,withCloseButton:c,onRequestClose:i},r.createElement(a.Modal.Header,{hasBottomSpacing:"title-standard"},r.createElement(a.Modal.Title,null,t.formatMessage({id:"jvUwnG",defaultMessage:"This file is password protected"}))),r.createElement(a.Modal.Body,null,r.createElement("label",null,e?t.formatMessage({id:"qW3q74",defaultMessage:"The password you entered is incorrect, please try again."}):t.formatMessage({id:"qeA+3O",defaultMessage:"Enter password to continue."}),!!o&&r.createElement(s.TextInput,{type:"text",value:o,style:{display:"none"},wrapperProps:{style:{display:"none"}}}),r.createElement(s.TextInput,{autoFocus:!0,type:"password",value:l,isInvalid:e,placeholder:t.formatMessage({id:"4RJ0I8",defaultMessage:"Password"}),onChange:this.handleInputChange,wrapperProps:{style:{marginTop:"15px"}},onKeyDown:this.handleKeyDown}))),r.createElement(a.Modal.Footer,null,r.createElement(n.Button,{variant:"opacity",onClick:i},t.formatMessage({id:"xuJw2w",defaultMessage:"Cancel"})),r.createElement(n.Button,{variant:"primary",onClick:this.onEnterPassword},t.formatMessage({id:"RS9CyP",defaultMessage:"Submit"}))))}}i.PasswordModal=o,o.defaultProps={enteredWrongPassword:!1,onSubmit(){}},o.displayName="PasswordModal"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/page",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/preview-doc.module.css"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.Page=void 0,r=t.__importStar(r);class n extends r.PureComponent{constructor(){super(...arguments),this.state={},this.onPageRef=e=>{null!=this.props.onRef&&this.props.onRef(this.props.data.pageIndex,e)}}render(){const{scaleFactor:e,children:i,onMouseMove:t,onMouseUp:n,onMouseEnter:s,onMouseDown:o,className:l,data:c,isFocused:d,lazyLoad:u,findInDocHighlights:p,findInDocCurrentHit:v}=this.props,{pageIndex:f,dimension:[g,_]}=c;return r.createElement("div",{id:`pageContainer${f+1}`,className:a.page+" "+(l||""),"data-index":f,style:{width:g*e,height:_*e},onMouseDown:o,onMouseMove:t,onMouseUp:n,onMouseEnter:s,ref:this.onPageRef},i({isFocused:d,data:c,lazyLoad:u,findInDocHighlights:p,findInDocCurrentHit:v}))}}i.Page=n,n.defaultProps={data:{pageIndex:0,dimension:[0,0],thumbnailUrl:"",imgUrls:{"1x":"","4x":""},textboxes:[],links:[]},scaleFactor:0,lazyLoad:!1,children:()=>null,onRef:()=>{}},n.displayName="Page"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_pages",["require","exports","tslib","react","lodash","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_page","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/css/toolbar.module.css","typescript/libraries/file-viewer/src/core/utils/sizing_utils"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PdfPages=void 0,r=t.__importStar(r),s=t.__importStar(s),o=t.__importStar(o);const c=2*parseInt(o.toolbarRowHeight,10)+parseInt(o.toolbarVerticalPadding,10);class d extends r.PureComponent{constructor(e){super(e),this.state={currentPageIndex:0,startPage:0,endPage:0,pagesScrollTop:[],initialViewportCutoff:0},this.__viewportEl=null,this.viewportElRef=e=>this.__viewportEl=e,this.totalPagesHeight=0,this.maxWidth=0,this.pageRefs={},this.ol=null,this.handleScrollTopChange=()=>{this.__viewportEl&&(this.props.pageNavigation&&this.props.dispatchResolvePageNavigation(),this.setStateForStartAndEndPage(this.state.pagesScrollTop))},this.throttledHandleScrollTopChange=a.throttle(()=>this.handleScrollTopChange(),50,{leading:!0}),this.getPageForSelection=e=>{if(null!=e)for(const{pageIndex:i,el:t}of Object.values(this.pageRefs))if(null!=t&&null!=e.anchorNode&&e.anchorNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS&&null!=e.focusNode&&e.focusNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINS)return i},this.scrollDown=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop+60)},this.scrollUp=()=>{this.__viewportEl&&this.__viewportEl.scrollTo(0,this.__viewportEl.scrollTop-60)},this.pageUp=()=>{this.scrollToPage(Math.max(0,this.state.currentPageIndex-1))},this.pageDown=()=>{this.props.count&&this.scrollToPage(Math.min(this.props.count-1,this.state.currentPageIndex+1))},this.capturePageRef=(e,i)=>{null==i?delete this.pageRefs[e]:this.pageRefs[e]={el:i,pageIndex:e}},this.jumpToPage=e=>{this.scrollToPage(e)},e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex(()=>this.state.currentPageIndex)}getMargin(){return l.DOC_LI_MARGIN}computeScrollTops(){const{pages:e,scaleFactor:i}=this.props,t=l.DOC_LI_MARGIN,r=[t];let a=t;for(let n=1;n<e.length;++n){const s=e[n-1].dimension[1]*i+t;r.push(a+s),a+=s}if(e.length>0){const r=e[e.length-1].dimension[1]*i;this.totalPagesHeight=a+r+2*t+c}return this.setState({pagesScrollTop:r}),r}updateMaxWidth(){const{pages:e,scaleFactor:i}=this.props;let t=0;for(let i=0;i<e.length;++i){const r=e[i].dimension[0];r>t&&(t=r)}this.maxWidth=t*i}setStateForStartAndEndPage(e){if(!this.__viewportEl)return;const[i,t]=[a.sortedIndex(e,this.__viewportEl.scrollTop)-1,a.sortedIndex(e,this.__viewportEl.scrollTop+this.__viewportEl.offsetHeight)+1],r=Math.max(0,i-10),n=Math.min(this.props.pages.length-1,t+10),s=this.totalPagesHeight,o=this.__viewportEl.offsetHeight,l=Math.max(0,s-o),c=this.__viewportEl.scrollTop>=l?t:i,d=e.findIndex(e=>e>o);this.setState({startPage:r,endPage:n,currentPageIndex:c,initialViewportCutoff:d})}scrollToPage(e,i=null,t){const{count:r,scaleFactor:a}=this.props;if(e<0||e>=r||!this.ol||!this.__viewportEl)return;const n=i?i[e]:this.state.pagesScrollTop[e],s=t?t*a-this.__viewportEl.clientHeight/2:0;this.__viewportEl.scrollTop=Math.max(n+l.DOC_LI_MARGIN+s,l.DOC_LI_MARGIN)}componentDidMount(){const e=this.computeScrollTops();this.updateMaxWidth(),this.__viewportEl&&this.setStateForStartAndEndPage(e),null!=this.props.pluginQueryBus&&this.props.pluginQueryBus.handleQuery("getPageForSelection",this.getPageForSelection)}componentDidUpdate(e,i){let t;i.currentPageIndex!==this.state.currentPageIndex&&this.props.onPageChange&&this.props.onPageChange(this.state.currentPageIndex,e.currentPageIndex),e.pages===this.props.pages&&e.scaleFactor===this.props.scaleFactor||(t=this.computeScrollTops(),this.setStateForStartAndEndPage(t),this.updateMaxWidth(),e.scaleFactor!==this.props.scaleFactor&&this.scrollToPage(this.state.currentPageIndex,t)),this.props.pageNavigation&&e.pageNavigation&&this.props.previewKey.serialized!==e.previewKey.serialized?this.props.dispatchResolvePageNavigation():this.props.pageNavigation&&this.scrollToPage(this.props.pageNavigation.pageIndex,t,this.props.pageNavigation.centerOnYOffset)}makePdfPage(e,i){const{children:t,pages:a,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,pageClassName:d,scaleFactor:u,findInDocData:p}=this.props,v=a[e],f=this.state.pagesScrollTop[e];return r.createElement(n.PdfPage,{key:v.pageIndex,index:e,pageData:v,isFocused:this.state.currentPageIndex===e,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,onRef:this.capturePageRef,pageClassName:d,scaleFactor:u,top:f,lazyLoad:i,children:t,findInDocHighlights:null==p?void 0:p.highlights.get(e),findInDocCurrentHit:null==p?void 0:p.currentHit})}render(){const{className:e,pages:i,toolbar:t,width:a,nativeLazyLoadingVariant:n}=this.props,{startPage:o,endPage:l,initialViewportCutoff:c}=this.state,d={height:this.totalPagesHeight,minWidth:`${this.maxWidth+50}px`},u={width:`${a}px`},p="loading"in HTMLImageElement.prototype&&"OFF"!==n&&"CONTROL"!==n;return r.createElement("div",{className:e,onScroll:this.throttledHandleScrollTopChange,ref:this.viewportElRef,style:u},r.createElement("ol",{ref:e=>this.ol=e,style:d},!p&&i.slice(o,l+1).map((e,i)=>this.makePdfPage(o+i,!1)),p&&"FULL"==n&&i.map((e,i)=>this.makePdfPage(i,i>c)),p&&"COMBINED"==n&&i.slice(o,l+1).map((e,i)=>this.makePdfPage(o+i,o+i>c))),r.createElement("div",{className:s.toolbarHolder},t||null))}}i.PdfPages=d,d.displayName="PdfPages"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_page",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/renderer/page"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PdfPage=void 0,r=t.__importStar(r),i.PdfPage=r.memo(e=>{const{index:i,pageData:t,isFocused:n,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,onRef:d,pageClassName:u,scaleFactor:p,lazyLoad:v,children:f,top:g,findInDocHighlights:_,findInDocCurrentHit:m}=e,{dimension:[w,b]}=t,h=r.useMemo(()=>({width:w*p,height:b*p,transform:`translateY(${g}px)`}),[w,b,p,g]);return r.createElement("li",{"data-index":i,key:i,style:h},r.createElement(a.Page,{className:u,data:t,onMouseDown:s,onMouseEnter:o,onMouseMove:l,onMouseUp:c,scaleFactor:p,isFocused:n,onRef:d,lazyLoad:v,findInDocHighlights:_,findInDocCurrentHit:m},f))}),i.PdfPage.displayName="PdfPage",i.PdfPage.displayName="PdfPage"})),define("typescript/libraries/file-viewer/src/preview_doc/text_box",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/utils/browser_detection","typescript/libraries/file-viewer/src/preview_doc/types","typescript/libraries/file-viewer/src/css/preview-doc.module.css"],(function(e,i,t,r,a,n,s){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextBox=void 0,r=t.__importStar(r);i.TextBox=({data:{r:[e,i,t,o],d:l,dir:c,transformedText:d,font:u,h:p},onClickLink:v,findInDocHighlights:f,findInDocCurrentHit:g})=>{i=-i;const _={fontSize:p};l&&(_.transform=`rotate(${-l}rad)`,_.transformOrigin=`${e}px ${i}px`),u&&(_.fontFamily=u.fontFamily,u.isBold&&(_.fontWeight="bold"),u.isItalic&&(_.fontStyle="italic"));const m=r.useRef(null),w=f&&a.safari?"spacing":"spacingAndGlyphs";if(1===d.length){const a=d[0],n=[];if(f&&m.current){let e=0;f.forEach(t=>{const a=m.current.getStartPositionOfChar(Math.min(t.startingCharIndex,m.current.getNumberOfChars()-1)).x,l=m.current.getEndPositionOfChar(Math.min(t.endingCharIndex,m.current.getNumberOfChars())-1).x,c=t.hitNumber===g,d=o+3;n.push(r.createElement("rect",{x:a-1.5,y:i-o-1.5,width:l-a+3,height:d,opacity:1,fill:c?s.findInDocHighlightPrimary:s.findInDocHighlightSecondary,style:_,key:e})),e++})}return r.createElement(r.Fragment,null,r.createElement("text",{className:s.textbox,direction:c,height:o,lengthAdjust:w,style:_,textLength:t,x:e,y:i,"data-test":"textbox",ref:f?m:void 0},a.text),f&&n)}const b=d.reduce((e,i)=>e+i.text.length,0);let h=0;const y=d.map((a,s)=>{const l=h/b*t+e,c=a.text.length/b*t,d=r.createElement("text",{height:o,key:s,lengthAdjust:w,textLength:c,x:l,y:i},a.text);switch(h+=a.text.length,a.type){case n.TextNodeType.email:const e=`mailto:${a.text}`;return r.createElement("a",{key:s,href:e,referrerPolicy:"no-referrer",onClick:()=>v(e)},d);case n.TextNodeType.link:return r.createElement("a",{key:s,href:a.href,target:"_blank",rel:"noreferrer noopener",referrerPolicy:"no-referrer",onClick:()=>v(a.href)},d);default:return d}});return r.createElement("g",{className:s.textbox,direction:c,style:_,"data-test":"textbox"},y)},i.TextBox.displayName="TextBox"})),define("typescript/libraries/file-viewer/src/preview_doc/text_layer",["require","exports","tslib","react","typescript/libraries/file-viewer/src/preview_doc/text_box","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/core/data/actions"],(function(e,i,t,r,a,n,s,o){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextLayer=void 0,r=t.__importStar(r);class l extends r.PureComponent{constructor(){super(...arguments),this.handleLinkClick=e=>{e&&this.props.dispatch(o.openUrl({url:e}))}}componentDidMount(){this.props.onTextRendered(this.props.data.pageIndex)}componentDidUpdate(e){e.data!==this.props.data&&this.props.onTextRendered(this.props.data.pageIndex)}render(){const{data:{textboxes:e,dimension:[i,t]},findInDocHighlights:o,findInDocCurrentHit:l,filePreviewUiData:c}=this.props,d={transform:`scale(${s.getCurrentScaleFactorFromFilePreviewUi(c)})`},u=e.map((e,i)=>r.createElement(a.TextBox,{onClickLink:this.handleLinkClick,key:i,data:e,findInDocHighlights:null==o?void 0:o.get(i),findInDocCurrentHit:l}));return r.createElement("svg",{className:n.textLayer,viewBox:`0 -${t} ${i} ${t}`,width:i,height:t,style:d,"data-test":"text-layer"},u)}}i.TextLayer=l,l.displayName="TextLayer"})),define("typescript/libraries/file-viewer/src/preview_doc/text_transform",["require","exports","typescript/libraries/file-viewer/src/preview_doc/text/unicode","typescript/libraries/file-viewer/src/preview_doc/text/bidi","typescript/libraries/file-viewer/src/preview_doc/types"],(function(e,i,t,r,a){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.transform=i.normalizeUrl=void 0;const n=/^(([^:\/?#]+):)?(\/\/([^\/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,s=/[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,63}/,o=/(\s+)/;function l(e){return"http"===e.substr(0,4)?e:"http://"+e}function c(e){return e.split(o).map(e=>{if(o.test(e))return{type:a.TextNodeType.text,text:e.replace("\t"," ")};let i;return s.test(e)?{text:e,type:a.TextNodeType.email}:(i=e.match(n))&&i[2]&&i[4]?{href:l(e),text:e,type:a.TextNodeType.link}:{type:a.TextNodeType.text,text:e}}).reduce((e,i)=>{const t=e[e.length-1];return t&&t.type===a.TextNodeType.text&&i.type===a.TextNodeType.text?t.text+=i.text:e.push(i),e},[])}i.normalizeUrl=l,i.transform=function(e){const i=t.getNormalizedUnicodes();let a="";for(let r=0;r<e.length;r++){let n=e.charAt(r);void 0!==i[n]&&(n=i[n]),n=t.reverseIfRtl(n),"\t"===n&&(n=" "),a+=n}const n=r.bidi(a,-1,!1);return{dir:n.dir,str:c(n.str)}}})),define("typescript/libraries/file-viewer/src/preview_doc/types",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.TextNodeType=i.TextDir=void 0,(function(e){e.ltr="ltr",e.rtl="rtl",e.ttb="ttb"})(i.TextDir||(i.TextDir={})),(function(e){e[e.text=0]="text",e[e.email=1]="email",e[e.link=2]="link"})(i.TextNodeType||(i.TextNodeType={}))})),define("typescript/libraries/file-viewer/src/preview_audio_video/helper/thumbnails_helper",["require","exports","tslib","typescript/libraries/file-viewer/src/loading_helpers"],(function(e,i,t,r){"use strict";function a(e){const i={},t=e.text.split(/#xywh=/i);if(i.imageUrl=t[0],2===t.length){const e=t[1].split(/[ ,]+/);4===e.length&&(i.imageX=+e[0],i.imageY=+e[1],i.imageWidth=+e[2],i.imageHeight=+e[3])}return i}Object.defineProperty(i,"__esModule",{value:!0}),i.loadVtt=i.preloadThumbImage=i.parseVttCue=void 0,i.parseVttCue=a,i.preloadThumbImage=function(e){const i=a(e);return i.imageUrl?r.preloadImage(i.imageUrl):Promise.reject("Unable to get imageUrl from vtt cue")};function n(e){return new Promise((i,t)=>{const r=[],a=new WebVTT.Parser(window,WebVTT.StringDecoder());a.oncue=function(e){r.push(e)},a.onparsingerror=function(e){t(e)},a.onflush=function(){i(r)},a.parse(e),a.flush()})}i.loadVtt=function(e){return(i=e,t.__awaiter(void 0,void 0,void 0,(function*(){return(yield fetch(i,{method:"GET",credentials:"include"})).text()}))).then(n);var i}})),define("typescript/libraries/file-viewer/src/toolbar/audio_video_markers",["require","exports","tslib","react","lodash","react-dom","classnames","dig-components/icons","dig-components/icons/src","dig-components/buttons","typescript/libraries/file-viewer/src/preview_audio_video/helper/thumbnails_helper","typescript/libraries/file-viewer/src/css/toolbar.module.css","typescript/libraries/file-viewer/src/hooks/useStabilizedCallback","typescript/libraries/file-viewer/src/comments2/plugin/marker","react-redux"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f){"use strict";function g(e){const i=isNaN(e)||!isFinite(e)?0:e,t=Math.round(i%60),r=Math.floor(i/60)%60,a=Math.floor(i/3600);return{hours:0!==a?""+a:"",minutes:0!==a||0!==r?""+r:"",seconds:""+t}}function _(e,i){const t=g(e),r=g(i),a=r.hours,n=t.hours.padStart(r.hours.length,"0"),s=""===r.minutes?"0":r.minutes.padStart(2,"0"),o=t.minutes.padStart(s.length,"0"),l=r.seconds.padStart(2,"0"),c=t.seconds.padStart(2,"0");return a?{formattedTime:`${n}:${o}:${c}`,formattedDuration:`${a}:${s}:${l}`}:{formattedTime:`${o}:${c}`,formattedDuration:`${s}:${l}`}}Object.defineProperty(i,"__esModule",{value:!0}),i.AudioVideoMarkers=i.AudioVideoMarkersComponent=i.formatTime=void 0,r=t.__importStar(r),a=t.__importStar(a),s=t.__importDefault(s),u=t.__importStar(u),i.formatTime=_;var m;(function(e){e.Requesting="requesting",e.Failed="failed",e.ImageLoaded="image_loaded"})(m||(m={}));i.AudioVideoMarkersComponent=({threads:e,vttUrl:i,onScrubberThumbnailsLoaded:t,duration:n,openThreadInRightRail:g})=>{const w=r.useRef([]),[b,h]=r.useState(m.Requesting),[y,S]=r.useState(0),[P,E]=r.useState(0),[I,C]=r.useState(),[F,O]=r.useState(0),T=r.useRef(null),A=f.useSelector(e=>e.showResolvedComments),x=r.default.useMemo(()=>e?A?Object.entries(e):Object.entries(e).filter(e=>!e[1].resolvedInfo):void 0,[e,A]),D=r.default.useMemo(()=>x&&x.find(e=>{const i=v.getTimeForThread(e[1]);return void 0!==i&&100*Math.abs(F-i)/n<v.MARKER_WIDTH_PERCENT}),[x,F,n]),k=p.useStabilizedCallback(e=>{D&&(null==g||g(D[1]),e.stopPropagation())});r.useEffect(()=>{i&&d.loadVtt(i).then(e=>{w.current=e,e&&e.length>0&&d.preloadThumbImage(e[0]).then(()=>{h(m.ImageLoaded),null==t||t(!0)}).catch(()=>{null==t||t(!1),h(m.Failed)})}).catch(()=>{null==t||t(!1),h(m.Failed)})},[i,t]);const M=a.throttle(p.useStabilizedCallback(e=>{if(!e.currentTarget)return;const t=e.currentTarget.getBoundingClientRect(),r=t.width,a=e.clientX-t.left,s=Math.min(Math.max(a,0),r)/r*n;if(E(t.width),S(e.clientX-t.left),O(s),i&&w.current){const e=w.current.find(e=>e.startTime<=s&&e.endTime>=s);e&&C(d.parseVttCue(e))}}),50);r.useEffect(()=>{const e=T.current;if(e)return e.addEventListener("click",k),()=>e.removeEventListener("click",k)},[k,T]);const{imageUrl:L,imageX:j,imageY:R,imageWidth:N,imageHeight:V}=I||{},U=b===m.Failed?80:128,B=b===m.ImageLoaded?{background:`url("${L}") no-repeat -${j}px -${R}px`,width:N,height:V}:b===m.Failed?{display:"none"}:{},K=Math.min(Math.max(0,y-U/2),P-U),z={left:K},H={left:y-(K+U/2)},{formattedTime:W}=_(F,n);return r.default.createElement(r.default.Fragment,null,x&&r.default.createElement("div",{className:u.commentMarkersContainer},x.map(e=>r.default.createElement(v.Marker,{key:e[0],duration:n,thread:e[1]}))),r.default.createElement("div",{className:u.thumbnailHolder,onMouseMove:M},r.default.createElement("div",{className:s.default(u.thumbnailWrapper,{[u.thumbnailHolderComment]:!!D,[u.thumbnailLoadError]:!!i&&b===m.Failed}),style:z,ref:T},!!i&&r.default.createElement("div",{className:u.thumbnailImage,style:B},b===m.Requesting?r.default.createElement("div",{className:"c-loader"}):null),!!D&&!!i&&r.default.createElement("div",{className:u.commentIconHolder},r.default.createElement(c.IconButton,{className:s.default(u.regularButton),variant:"transparent",size:"small",inverse:!0},r.default.createElement(o.UIIcon,{src:l.CommentLine}))),!!i&&r.default.createElement("div",{className:u.thumbnailTime}," ",W," "),r.default.createElement("div",{className:u.timeLine,style:H}))))},i.AudioVideoMarkersComponent.displayName="AudioVideoMarkersComponent",i.AudioVideoMarkersComponent.displayName="AudioVideoMarkersComponent";i.AudioVideoMarkers=e=>{var{container:a}=e,s=t.__rest(e,["container"]);return n.createPortal(r.default.createElement(i.AudioVideoMarkersComponent,Object.assign({},s)),a)},i.AudioVideoMarkers.displayName="AudioVideoMarkers"})),define("typescript/libraries/file-viewer/src/preview_doc/text/bidi",["require","exports"],(function(e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.bidi=void 0;const t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","ON","ON","ET","ET","ET","ON","ON","ON","ON","ON","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","ON","ON","ON","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","ON","ET","ET","ET","ET","ON","ON","ON","ON","L","ON","ON","BN","ON","ON","ET","ET","EN","EN","ON","L","ON","ON","ON","EN","L","ON","ON","ON","ON","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","ON","L","L","L","L","L","L","L","L"],r=["AN","AN","AN","AN","AN","AN","ON","ON","AL","ET","ET","AL","CS","AL","ON","ON","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","ON","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","ON","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL"];function a(e){return 0!=(1&e)}function n(e){return 0==(1&e)}function s(e,i,t){for(var r=i,a=e.length;r<a;++r)if(e[r]!==t)return r;return r}function o(e,i,t,r){for(var a=i;a<t;++a)e[a]=r}function l(e,i,t){for(var r=i,a=t-1;r<a;++r,--a){var n=e[r];e[r]=e[a],e[a]=n}}function c(e,i,t){return{str:e,dir:t?"ttb":i?"ltr":"rtl"}}let d=[],u=[];i.bidi=function(e,i,p){var v=!0,f=e.length;if(0===f||p)return c(e,v,p);d.length=f,u.length=f;var g,_,m=0;for(g=0;g<f;++g){d[g]=e.charAt(g);var w=e.charCodeAt(g),b="L";w<=255?b=t[w]:1424<=w&&w<=1524?b="R":1536<=w&&w<=1791?b=r[255&w]:1792<=w&&w<=2220&&(b="AL"),"R"!==b&&"AL"!==b&&"AN"!==b||m++,u[g]=b}if(0===m)return c(e,v=!0);-1===i&&(m/f<.3?(v=!0,i=0):(v=!1,i=1));var h=[];for(g=0;g<f;++g)h[g]=i;var y,S=a(i)?"R":"L",P=S,E=P,I=P;for(g=0;g<f;++g)"NSM"===u[g]?u[g]=I:I=u[g];for(I=P,g=0;g<f;++g)"EN"===(y=u[g])?u[g]="AL"===I?"AN":"EN":"R"!==y&&"L"!==y&&"AL"!==y||(I=y);for(g=0;g<f;++g)"AL"===(y=u[g])&&(u[g]="R");for(g=1;g<f-1;++g)"ES"===u[g]&&"EN"===u[g-1]&&"EN"===u[g+1]&&(u[g]="EN"),"CS"!==u[g]||"EN"!==u[g-1]&&"AN"!==u[g-1]||u[g+1]!==u[g-1]||(u[g]=u[g-1]);for(g=0;g<f;++g)if("EN"===u[g]){var C;for(C=g-1;C>=0&&"ET"===u[C];--C)u[C]="EN";for(C=g+1;C<f&&"ET"===u[C];++C)u[C]="EN"}for(g=0;g<f;++g)"WS"!==(y=u[g])&&"ES"!==y&&"ET"!==y&&"CS"!==y||(u[g]="ON");for(I=P,g=0;g<f;++g)"EN"===(y=u[g])?u[g]="L"===I?"L":"EN":"R"!==y&&"L"!==y||(I=y);for(g=0;g<f;++g)if("ON"===u[g]){var F=s(u,g+1,"ON"),O=P;g>0&&(O=u[g-1]);var T=E;F+1<f&&(T=u[F+1]),"L"!==O&&(O="R"),"L"!==T&&(T="R"),O===T&&o(u,g,F,O),g=F-1}for(g=0;g<f;++g)"ON"===u[g]&&(u[g]=S);for(g=0;g<f;++g)y=u[g],n(h[g])?"R"===y?h[g]+=1:"AN"!==y&&"EN"!==y||(h[g]+=2):"L"!==y&&"AN"!==y&&"EN"!==y||(h[g]+=1);var A,x=-1,D=99;for(g=0,_=h.length;g<_;++g)x<(A=h[g])&&(x=A),D>A&&a(A)&&(D=A);for(A=x;A>=D;--A){var k=-1;for(g=0,_=h.length;g<_;++g)h[g]<A?k>=0&&(l(d,k,g),k=-1):k<0&&(k=g);k>=0&&l(d,k,h.length)}for(g=0,_=d.length;g<_;++g){var M=d[g];"<"!==M&&">"!==M||(d[g]="")}return c(d.join(""),v)}})),define("typescript/libraries/file-viewer/src/preview_doc/text/unicode",["require","exports"],(function(e,i){"use strict";function t(e){var i;return function(){return e&&(i=Object.create(null),e(i),e=null),i}}Object.defineProperty(i,"__esModule",{value:!0}),i.reverseIfRtl=i.getNormalizedUnicodes=void 0;t((function(e){e[63721]=169,e[63193]=169,e[63720]=174,e[63194]=174,e[63722]=8482,e[63195]=8482,e[63729]=9127,e[63730]=9128,e[63731]=9129,e[63740]=9131,e[63741]=9132,e[63742]=9133,e[63726]=9121,e[63727]=9122,e[63728]=9123,e[63737]=9124,e[63738]=9125,e[63739]=9126,e[63723]=9115,e[63724]=9116,e[63725]=9117,e[63734]=9118,e[63735]=9119,e[63736]=9120}));var r=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];i.getNormalizedUnicodes=t((function(e){e["¨"]=" ̈",e["¯"]=" ̄",e["´"]=" ́",e["µ"]="μ",e["¸"]=" ̧",e["Ĳ"]="IJ",e["ĳ"]="ij",e["Ŀ"]="L·",e["ŀ"]="l·",e["ŉ"]="ʼn",e["ſ"]="s",e["Ǆ"]="DŽ",e["ǅ"]="Dž",e["ǆ"]="dž",e["Ǉ"]="LJ",e["ǈ"]="Lj",e["ǉ"]="lj",e["Ǌ"]="NJ",e["ǋ"]="Nj",e["ǌ"]="nj",e["Ǳ"]="DZ",e["ǲ"]="Dz",e["ǳ"]="dz",e["˘"]=" ̆",e["˙"]=" ̇",e["˚"]=" ̊",e["˛"]=" ̨",e["˜"]=" ̃",e["˝"]=" ̋",e["ͺ"]=" ͅ",e["΄"]=" ́",e["ϐ"]="β",e["ϑ"]="θ",e["ϒ"]="Υ",e["ϕ"]="φ",e["ϖ"]="π",e["ϰ"]="κ",e["ϱ"]="ρ",e["ϲ"]="ς",e["ϴ"]="Θ",e["ϵ"]="ε",e["Ϲ"]="Σ",e["և"]="եւ",e["ٵ"]="اٴ",e["ٶ"]="وٴ",e["ٷ"]="ۇٴ",e["ٸ"]="يٴ",e["ำ"]="ํา",e["ຳ"]="ໍາ",e["ໜ"]="ຫນ",e["ໝ"]="ຫມ",e["ཷ"]="ྲཱྀ",e["ཹ"]="ླཱྀ",e["ẚ"]="aʾ",e["᾽"]=" ̓",e["᾿"]=" ̓",e["῀"]=" ͂",e["῾"]=" ̔",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e[" "]=" ",e["‗"]=" ̳",e["․"]=".",e["‥"]="..",e["…"]="...",e["″"]="′′",e["‴"]="′′′",e["‶"]="‵‵",e["‷"]="‵‵‵",e["‼"]="!!",e["‾"]=" ̅",e["⁇"]="??",e["⁈"]="?!",e["⁉"]="!?",e["⁗"]="′′′′",e[" "]=" ",e["₨"]="Rs",e["℀"]="a/c",e["℁"]="a/s",e["℃"]="°C",e["℅"]="c/o",e["℆"]="c/u",e["ℇ"]="Ɛ",e["℉"]="°F",e["№"]="No",e["℡"]="TEL",e["ℵ"]="א",e["ℶ"]="ב",e["ℷ"]="ג",e["ℸ"]="ד",e["℻"]="FAX",e["Ⅰ"]="I",e["Ⅱ"]="II",e["Ⅲ"]="III",e["Ⅳ"]="IV",e["Ⅴ"]="V",e["Ⅵ"]="VI",e["Ⅶ"]="VII",e["Ⅷ"]="VIII",e["Ⅸ"]="IX",e["Ⅹ"]="X",e["Ⅺ"]="XI",e["Ⅻ"]="XII",e["Ⅼ"]="L",e["Ⅽ"]="C",e["Ⅾ"]="D",e["Ⅿ"]="M",e["ⅰ"]="i",e["ⅱ"]="ii",e["ⅲ"]="iii",e["ⅳ"]="iv",e["ⅴ"]="v",e["ⅵ"]="vi",e["ⅶ"]="vii",e["ⅷ"]="viii",e["ⅸ"]="ix",e["ⅹ"]="x",e["ⅺ"]="xi",e["ⅻ"]="xii",e["ⅼ"]="l",e["ⅽ"]="c",e["ⅾ"]="d",e["ⅿ"]="m",e["∬"]="∫∫",e["∭"]="∫∫∫",e["∯"]="∮∮",e["∰"]="∮∮∮",e["⑴"]="(1)",e["⑵"]="(2)",e["⑶"]="(3)",e["⑷"]="(4)",e["⑸"]="(5)",e["⑹"]="(6)",e["⑺"]="(7)",e["⑻"]="(8)",e["⑼"]="(9)",e["⑽"]="(10)",e["⑾"]="(11)",e["⑿"]="(12)",e["⒀"]="(13)",e["⒁"]="(14)",e["⒂"]="(15)",e["⒃"]="(16)",e["⒄"]="(17)",e["⒅"]="(18)",e["⒆"]="(19)",e["⒇"]="(20)",e["⒈"]="1.",e["⒉"]="2.",e["⒊"]="3.",e["⒋"]="4.",e["⒌"]="5.",e["⒍"]="6.",e["⒎"]="7.",e["⒏"]="8.",e["⒐"]="9.",e["⒑"]="10.",e["⒒"]="11.",e["⒓"]="12.",e["⒔"]="13.",e["⒕"]="14.",e["⒖"]="15.",e["⒗"]="16.",e["⒘"]="17.",e["⒙"]="18.",e["⒚"]="19.",e["⒛"]="20.",e["⒜"]="(a)",e["⒝"]="(b)",e["⒞"]="(c)",e["⒟"]="(d)",e["⒠"]="(e)",e["⒡"]="(f)",e["⒢"]="(g)",e["⒣"]="(h)",e["⒤"]="(i)",e["⒥"]="(j)",e["⒦"]="(k)",e["⒧"]="(l)",e["⒨"]="(m)",e["⒩"]="(n)",e["⒪"]="(o)",e["⒫"]="(p)",e["⒬"]="(q)",e["⒭"]="(r)",e["⒮"]="(s)",e["⒯"]="(t)",e["⒰"]="(u)",e["⒱"]="(v)",e["⒲"]="(w)",e["⒳"]="(x)",e["⒴"]="(y)",e["⒵"]="(z)",e["⨌"]="∫∫∫∫",e["⩴"]="::=",e["⩵"]="==",e["⩶"]="===",e["⺟"]="母",e["⻳"]="龟",e["⼀"]="一",e["⼁"]="丨",e["⼂"]="丶",e["⼃"]="丿",e["⼄"]="乙",e["⼅"]="亅",e["⼆"]="二",e["⼇"]="亠",e["⼈"]="人",e["⼉"]="儿",e["⼊"]="入",e["⼋"]="八",e["⼌"]="冂",e["⼍"]="冖",e["⼎"]="冫",e["⼏"]="几",e["⼐"]="凵",e["⼑"]="刀",e["⼒"]="力",e["⼓"]="勹",e["⼔"]="匕",e["⼕"]="匚",e["⼖"]="匸",e["⼗"]="十",e["⼘"]="卜",e["⼙"]="卩",e["⼚"]="厂",e["⼛"]="厶",e["⼜"]="又",e["⼝"]="口",e["⼞"]="囗",e["⼟"]="土",e["⼠"]="士",e["⼡"]="夂",e["⼢"]="夊",e["⼣"]="夕",e["⼤"]="大",e["⼥"]="女",e["⼦"]="子",e["⼧"]="宀",e["⼨"]="寸",e["⼩"]="小",e["⼪"]="尢",e["⼫"]="尸",e["⼬"]="屮",e["⼭"]="山",e["⼮"]="巛",e["⼯"]="工",e["⼰"]="己",e["⼱"]="巾",e["⼲"]="干",e["⼳"]="幺",e["⼴"]="广",e["⼵"]="廴",e["⼶"]="廾",e["⼷"]="弋",e["⼸"]="弓",e["⼹"]="彐",e["⼺"]="彡",e["⼻"]="彳",e["⼼"]="心",e["⼽"]="戈",e["⼾"]="戶",e["⼿"]="手",e["⽀"]="支",e["⽁"]="攴",e["⽂"]="文",e["⽃"]="斗",e["⽄"]="斤",e["⽅"]="方",e["⽆"]="无",e["⽇"]="日",e["⽈"]="曰",e["⽉"]="月",e["⽊"]="木",e["⽋"]="欠",e["⽌"]="止",e["⽍"]="歹",e["⽎"]="殳",e["⽏"]="毋",e["⽐"]="比",e["⽑"]="毛",e["⽒"]="氏",e["⽓"]="气",e["⽔"]="水",e["⽕"]="火",e["⽖"]="爪",e["⽗"]="父",e["⽘"]="爻",e["⽙"]="爿",e["⽚"]="片",e["⽛"]="牙",e["⽜"]="牛",e["⽝"]="犬",e["⽞"]="玄",e["⽟"]="玉",e["⽠"]="瓜",e["⽡"]="瓦",e["⽢"]="甘",e["⽣"]="生",e["⽤"]="用",e["⽥"]="田",e["⽦"]="疋",e["⽧"]="疒",e["⽨"]="癶",e["⽩"]="白",e["⽪"]="皮",e["⽫"]="皿",e["⽬"]="目",e["⽭"]="矛",e["⽮"]="矢",e["⽯"]="石",e["⽰"]="示",e["⽱"]="禸",e["⽲"]="禾",e["⽳"]="穴",e["⽴"]="立",e["⽵"]="竹",e["⽶"]="米",e["⽷"]="糸",e["⽸"]="缶",e["⽹"]="网",e["⽺"]="羊",e["⽻"]="羽",e["⽼"]="老",e["⽽"]="而",e["⽾"]="耒",e["⽿"]="耳",e["⾀"]="聿",e["⾁"]="肉",e["⾂"]="臣",e["⾃"]="自",e["⾄"]="至",e["⾅"]="臼",e["⾆"]="舌",e["⾇"]="舛",e["⾈"]="舟",e["⾉"]="艮",e["⾊"]="色",e["⾋"]="艸",e["⾌"]="虍",e["⾍"]="虫",e["⾎"]="血",e["⾏"]="行",e["⾐"]="衣",e["⾑"]="襾",e["⾒"]="見",e["⾓"]="角",e["⾔"]="言",e["⾕"]="谷",e["⾖"]="豆",e["⾗"]="豕",e["⾘"]="豸",e["⾙"]="貝",e["⾚"]="赤",e["⾛"]="走",e["⾜"]="足",e["⾝"]="身",e["⾞"]="車",e["⾟"]="辛",e["⾠"]="辰",e["⾡"]="辵",e["⾢"]="邑",e["⾣"]="酉",e["⾤"]="釆",e["⾥"]="里",e["⾦"]="金",e["⾧"]="長",e["⾨"]="門",e["⾩"]="阜",e["⾪"]="隶",e["⾫"]="隹",e["⾬"]="雨",e["⾭"]="靑",e["⾮"]="非",e["⾯"]="面",e["⾰"]="革",e["⾱"]="韋",e["⾲"]="韭",e["⾳"]="音",e["⾴"]="頁",e["⾵"]="風",e["⾶"]="飛",e["⾷"]="食",e["⾸"]="首",e["⾹"]="香",e["⾺"]="馬",e["⾻"]="骨",e["⾼"]="高",e["⾽"]="髟",e["⾾"]="鬥",e["⾿"]="鬯",e["⿀"]="鬲",e["⿁"]="鬼",e["⿂"]="魚",e["⿃"]="鳥",e["⿄"]="鹵",e["⿅"]="鹿",e["⿆"]="麥",e["⿇"]="麻",e["⿈"]="黃",e["⿉"]="黍",e["⿊"]="黑",e["⿋"]="黹",e["⿌"]="黽",e["⿍"]="鼎",e["⿎"]="鼓",e["⿏"]="鼠",e["⿐"]="鼻",e["⿑"]="齊",e["⿒"]="齒",e["⿓"]="龍",e["⿔"]="龜",e["⿕"]="龠",e["〶"]="〒",e["〸"]="十",e["〹"]="卄",e["〺"]="卅",e["゛"]=" ゙",e["゜"]=" ゚",e["ㄱ"]="ᄀ",e["ㄲ"]="ᄁ",e["ㄳ"]="ᆪ",e["ㄴ"]="ᄂ",e["ㄵ"]="ᆬ",e["ㄶ"]="ᆭ",e["ㄷ"]="ᄃ",e["ㄸ"]="ᄄ",e["ㄹ"]="ᄅ",e["ㄺ"]="ᆰ",e["ㄻ"]="ᆱ",e["ㄼ"]="ᆲ",e["ㄽ"]="ᆳ",e["ㄾ"]="ᆴ",e["ㄿ"]="ᆵ",e["ㅀ"]="ᄚ",e["ㅁ"]="ᄆ",e["ㅂ"]="ᄇ",e["ㅃ"]="ᄈ",e["ㅄ"]="ᄡ",e["ㅅ"]="ᄉ",e["ㅆ"]="ᄊ",e["ㅇ"]="ᄋ",e["ㅈ"]="ᄌ",e["ㅉ"]="ᄍ",e["ㅊ"]="ᄎ",e["ㅋ"]="ᄏ",e["ㅌ"]="ᄐ",e["ㅍ"]="ᄑ",e["ㅎ"]="ᄒ",e["ㅏ"]="ᅡ",e["ㅐ"]="ᅢ",e["ㅑ"]="ᅣ",e["ㅒ"]="ᅤ",e["ㅓ"]="ᅥ",e["ㅔ"]="ᅦ",e["ㅕ"]="ᅧ",e["ㅖ"]="ᅨ",e["ㅗ"]="ᅩ",e["ㅘ"]="ᅪ",e["ㅙ"]="ᅫ",e["ㅚ"]="ᅬ",e["ㅛ"]="ᅭ",e["ㅜ"]="ᅮ",e["ㅝ"]="ᅯ",e["ㅞ"]="ᅰ",e["ㅟ"]="ᅱ",e["ㅠ"]="ᅲ",e["ㅡ"]="ᅳ",e["ㅢ"]="ᅴ",e["ㅣ"]="ᅵ",e["ㅤ"]="ᅠ",e["ㅥ"]="ᄔ",e["ㅦ"]="ᄕ",e["ㅧ"]="ᇇ",e["ㅨ"]="ᇈ",e["ㅩ"]="ᇌ",e["ㅪ"]="ᇎ",e["ㅫ"]="ᇓ",e["ㅬ"]="ᇗ",e["ㅭ"]="ᇙ",e["ㅮ"]="ᄜ",e["ㅯ"]="ᇝ",e["ㅰ"]="ᇟ",e["ㅱ"]="ᄝ",e["ㅲ"]="ᄞ",e["ㅳ"]="ᄠ",e["ㅴ"]="ᄢ",e["ㅵ"]="ᄣ",e["ㅶ"]="ᄧ",e["ㅷ"]="ᄩ",e["ㅸ"]="ᄫ",e["ㅹ"]="ᄬ",e["ㅺ"]="ᄭ",e["ㅻ"]="ᄮ",e["ㅼ"]="ᄯ",e["ㅽ"]="ᄲ",e["ㅾ"]="ᄶ",e["ㅿ"]="ᅀ",e["ㆀ"]="ᅇ",e["ㆁ"]="ᅌ",e["ㆂ"]="ᇱ",e["ㆃ"]="ᇲ",e["ㆄ"]="ᅗ",e["ㆅ"]="ᅘ",e["ㆆ"]="ᅙ",e["ㆇ"]="ᆄ",e["ㆈ"]="ᆅ",e["ㆉ"]="ᆈ",e["ㆊ"]="ᆑ",e["ㆋ"]="ᆒ",e["ㆌ"]="ᆔ",e["ㆍ"]="ᆞ",e["ㆎ"]="ᆡ",e["㈀"]="(ᄀ)",e["㈁"]="(ᄂ)",e["㈂"]="(ᄃ)",e["㈃"]="(ᄅ)",e["㈄"]="(ᄆ)",e["㈅"]="(ᄇ)",e["㈆"]="(ᄉ)",e["㈇"]="(ᄋ)",e["㈈"]="(ᄌ)",e["㈉"]="(ᄎ)",e["㈊"]="(ᄏ)",e["㈋"]="(ᄐ)",e["㈌"]="(ᄑ)",e["㈍"]="(ᄒ)",e["㈎"]="(가)",e["㈏"]="(나)",e["㈐"]="(다)",e["㈑"]="(라)",e["㈒"]="(마)",e["㈓"]="(바)",e["㈔"]="(사)",e["㈕"]="(아)",e["㈖"]="(자)",e["㈗"]="(차)",e["㈘"]="(카)",e["㈙"]="(타)",e["㈚"]="(파)",e["㈛"]="(하)",e["㈜"]="(주)",e["㈝"]="(오전)",e["㈞"]="(오후)",e["㈠"]="(一)",e["㈡"]="(二)",e["㈢"]="(三)",e["㈣"]="(四)",e["㈤"]="(五)",e["㈥"]="(六)",e["㈦"]="(七)",e["㈧"]="(八)",e["㈨"]="(九)",e["㈩"]="(十)",e["㈪"]="(月)",e["㈫"]="(火)",e["㈬"]="(水)",e["㈭"]="(木)",e["㈮"]="(金)",e["㈯"]="(土)",e["㈰"]="(日)",e["㈱"]="(株)",e["㈲"]="(有)",e["㈳"]="(社)",e["㈴"]="(名)",e["㈵"]="(特)",e["㈶"]="(財)",e["㈷"]="(祝)",e["㈸"]="(労)",e["㈹"]="(代)",e["㈺"]="(呼)",e["㈻"]="(学)",e["㈼"]="(監)",e["㈽"]="(企)",e["㈾"]="(資)",e["㈿"]="(協)",e["㉀"]="(祭)",e["㉁"]="(休)",e["㉂"]="(自)",e["㉃"]="(至)",e["㋀"]="1月",e["㋁"]="2月",e["㋂"]="3月",e["㋃"]="4月",e["㋄"]="5月",e["㋅"]="6月",e["㋆"]="7月",e["㋇"]="8月",e["㋈"]="9月",e["㋉"]="10月",e["㋊"]="11月",e["㋋"]="12月",e["㍘"]="0点",e["㍙"]="1点",e["㍚"]="2点",e["㍛"]="3点",e["㍜"]="4点",e["㍝"]="5点",e["㍞"]="6点",e["㍟"]="7点",e["㍠"]="8点",e["㍡"]="9点",e["㍢"]="10点",e["㍣"]="11点",e["㍤"]="12点",e["㍥"]="13点",e["㍦"]="14点",e["㍧"]="15点",e["㍨"]="16点",e["㍩"]="17点",e["㍪"]="18点",e["㍫"]="19点",e["㍬"]="20点",e["㍭"]="21点",e["㍮"]="22点",e["㍯"]="23点",e["㍰"]="24点",e["㏠"]="1日",e["㏡"]="2日",e["㏢"]="3日",e["㏣"]="4日",e["㏤"]="5日",e["㏥"]="6日",e["㏦"]="7日",e["㏧"]="8日",e["㏨"]="9日",e["㏩"]="10日",e["㏪"]="11日",e["㏫"]="12日",e["㏬"]="13日",e["㏭"]="14日",e["㏮"]="15日",e["㏯"]="16日",e["㏰"]="17日",e["㏱"]="18日",e["㏲"]="19日",e["㏳"]="20日",e["㏴"]="21日",e["㏵"]="22日",e["㏶"]="23日",e["㏷"]="24日",e["㏸"]="25日",e["㏹"]="26日",e["㏺"]="27日",e["㏻"]="28日",e["㏼"]="29日",e["㏽"]="30日",e["㏾"]="31日",e["ﬀ"]="ff",e["ﬁ"]="fi",e["ﬂ"]="fl",e["ﬃ"]="ffi",e["ﬄ"]="ffl",e["ﬅ"]="ſt",e["ﬆ"]="st",e["ﬓ"]="մն",e["ﬔ"]="մե",e["ﬕ"]="մի",e["ﬖ"]="վն",e["ﬗ"]="մխ",e["ﭏ"]="אל",e["ﭐ"]="ٱ",e["ﭑ"]="ٱ",e["ﭒ"]="ٻ",e["ﭓ"]="ٻ",e["ﭔ"]="ٻ",e["ﭕ"]="ٻ",e["ﭖ"]="پ",e["ﭗ"]="پ",e["ﭘ"]="پ",e["ﭙ"]="پ",e["ﭚ"]="ڀ",e["ﭛ"]="ڀ",e["ﭜ"]="ڀ",e["ﭝ"]="ڀ",e["ﭞ"]="ٺ",e["ﭟ"]="ٺ",e["ﭠ"]="ٺ",e["ﭡ"]="ٺ",e["ﭢ"]="ٿ",e["ﭣ"]="ٿ",e["ﭤ"]="ٿ",e["ﭥ"]="ٿ",e["ﭦ"]="ٹ",e["ﭧ"]="ٹ",e["ﭨ"]="ٹ",e["ﭩ"]="ٹ",e["ﭪ"]="ڤ",e["ﭫ"]="ڤ",e["ﭬ"]="ڤ",e["ﭭ"]="ڤ",e["ﭮ"]="ڦ",e["ﭯ"]="ڦ",e["ﭰ"]="ڦ",e["ﭱ"]="ڦ",e["ﭲ"]="ڄ",e["ﭳ"]="ڄ",e["ﭴ"]="ڄ",e["ﭵ"]="ڄ",e["ﭶ"]="ڃ",e["ﭷ"]="ڃ",e["ﭸ"]="ڃ",e["ﭹ"]="ڃ",e["ﭺ"]="چ",e["ﭻ"]="چ",e["ﭼ"]="چ",e["ﭽ"]="چ",e["ﭾ"]="ڇ",e["ﭿ"]="ڇ",e["ﮀ"]="ڇ",e["ﮁ"]="ڇ",e["ﮂ"]="ڍ",e["ﮃ"]="ڍ",e["ﮄ"]="ڌ",e["ﮅ"]="ڌ",e["ﮆ"]="ڎ",e["ﮇ"]="ڎ",e["ﮈ"]="ڈ",e["ﮉ"]="ڈ",e["ﮊ"]="ژ",e["ﮋ"]="ژ",e["ﮌ"]="ڑ",e["ﮍ"]="ڑ",e["ﮎ"]="ک",e["ﮏ"]="ک",e["ﮐ"]="ک",e["ﮑ"]="ک",e["ﮒ"]="گ",e["ﮓ"]="گ",e["ﮔ"]="گ",e["ﮕ"]="گ",e["ﮖ"]="ڳ",e["ﮗ"]="ڳ",e["ﮘ"]="ڳ",e["ﮙ"]="ڳ",e["ﮚ"]="ڱ",e["ﮛ"]="ڱ",e["ﮜ"]="ڱ",e["ﮝ"]="ڱ",e["ﮞ"]="ں",e["ﮟ"]="ں",e["ﮠ"]="ڻ",e["ﮡ"]="ڻ",e["ﮢ"]="ڻ",e["ﮣ"]="ڻ",e["ﮤ"]="ۀ",e["ﮥ"]="ۀ",e["ﮦ"]="ہ",e["ﮧ"]="ہ",e["ﮨ"]="ہ",e["ﮩ"]="ہ",e["ﮪ"]="ھ",e["ﮫ"]="ھ",e["ﮬ"]="ھ",e["ﮭ"]="ھ",e["ﮮ"]="ے",e["ﮯ"]="ے",e["ﮰ"]="ۓ",e["ﮱ"]="ۓ",e["ﯓ"]="ڭ",e["ﯔ"]="ڭ",e["ﯕ"]="ڭ",e["ﯖ"]="ڭ",e["ﯗ"]="ۇ",e["ﯘ"]="ۇ",e["ﯙ"]="ۆ",e["ﯚ"]="ۆ",e["ﯛ"]="ۈ",e["ﯜ"]="ۈ",e["ﯝ"]="ٷ",e["ﯞ"]="ۋ",e["ﯟ"]="ۋ",e["ﯠ"]="ۅ",e["ﯡ"]="ۅ",e["ﯢ"]="ۉ",e["ﯣ"]="ۉ",e["ﯤ"]="ې",e["ﯥ"]="ې",e["ﯦ"]="ې",e["ﯧ"]="ې",e["ﯨ"]="ى",e["ﯩ"]="ى",e["ﯪ"]="ئا",e["ﯫ"]="ئا",e["ﯬ"]="ئە",e["ﯭ"]="ئە",e["ﯮ"]="ئو",e["ﯯ"]="ئو",e["ﯰ"]="ئۇ",e["ﯱ"]="ئۇ",e["ﯲ"]="ئۆ",e["ﯳ"]="ئۆ",e["ﯴ"]="ئۈ",e["ﯵ"]="ئۈ",e["ﯶ"]="ئې";e["ﯷ"]="ئې",e["ﯸ"]="ئې",e["ﯹ"]="ئى",e["ﯺ"]="ئى",e["ﯻ"]="ئى",e["ﯼ"]="ی",e["ﯽ"]="ی",e["ﯾ"]="ی",e["ﯿ"]="ی",e["ﰀ"]="ئج",e["ﰁ"]="ئح",e["ﰂ"]="ئم",e["ﰃ"]="ئى",e["ﰄ"]="ئي",e["ﰅ"]="بج",e["ﰆ"]="بح",e["ﰇ"]="بخ",e["ﰈ"]="بم",e["ﰉ"]="بى",e["ﰊ"]="بي",e["ﰋ"]="تج",e["ﰌ"]="تح",e["ﰍ"]="تخ",e["ﰎ"]="تم",e["ﰏ"]="تى",e["ﰐ"]="تي",e["ﰑ"]="ثج",e["ﰒ"]="ثم",e["ﰓ"]="ثى",e["ﰔ"]="ثي",e["ﰕ"]="جح",e["ﰖ"]="جم",e["ﰗ"]="حج",e["ﰘ"]="حم",e["ﰙ"]="خج",e["ﰚ"]="خح",e["ﰛ"]="خم",e["ﰜ"]="سج",e["ﰝ"]="سح",e["ﰞ"]="سخ",e["ﰟ"]="سم",e["ﰠ"]="صح",e["ﰡ"]="صم",e["ﰢ"]="ضج",e["ﰣ"]="ضح",e["ﰤ"]="ضخ",e["ﰥ"]="ضم",e["ﰦ"]="طح",e["ﰧ"]="طم",e["ﰨ"]="ظم",e["ﰩ"]="عج",e["ﰪ"]="عم",e["ﰫ"]="غج",e["ﰬ"]="غم",e["ﰭ"]="فج",e["ﰮ"]="فح",e["ﰯ"]="فخ",e["ﰰ"]="فم",e["ﰱ"]="فى",e["ﰲ"]="في",e["ﰳ"]="قح",e["ﰴ"]="قم",e["ﰵ"]="قى",e["ﰶ"]="قي",e["ﰷ"]="كا",e["ﰸ"]="كج",e["ﰹ"]="كح",e["ﰺ"]="كخ",e["ﰻ"]="كل",e["ﰼ"]="كم",e["ﰽ"]="كى",e["ﰾ"]="كي",e["ﰿ"]="لج",e["ﱀ"]="لح",e["ﱁ"]="لخ",e["ﱂ"]="لم",e["ﱃ"]="لى",e["ﱄ"]="لي",e["ﱅ"]="مج",e["ﱆ"]="مح",e["ﱇ"]="مخ",e["ﱈ"]="مم",e["ﱉ"]="مى",e["ﱊ"]="مي",e["ﱋ"]="نج",e["ﱌ"]="نح",e["ﱍ"]="نخ",e["ﱎ"]="نم",e["ﱏ"]="نى",e["ﱐ"]="ني",e["ﱑ"]="هج",e["ﱒ"]="هم",e["ﱓ"]="هى",e["ﱔ"]="هي",e["ﱕ"]="يج",e["ﱖ"]="يح",e["ﱗ"]="يخ",e["ﱘ"]="يم",e["ﱙ"]="يى",e["ﱚ"]="يي",e["ﱛ"]="ذٰ",e["ﱜ"]="رٰ",e["ﱝ"]="ىٰ",e["ﱞ"]=" ٌّ",e["ﱟ"]=" ٍّ",e["ﱠ"]=" َّ",e["ﱡ"]=" ُّ",e["ﱢ"]=" ِّ",e["ﱣ"]=" ّٰ",e["ﱤ"]="ئر",e["ﱥ"]="ئز",e["ﱦ"]="ئم",e["ﱧ"]="ئن",e["ﱨ"]="ئى",e["ﱩ"]="ئي",e["ﱪ"]="بر",e["ﱫ"]="بز",e["ﱬ"]="بم",e["ﱭ"]="بن",e["ﱮ"]="بى",e["ﱯ"]="بي",e["ﱰ"]="تر",e["ﱱ"]="تز",e["ﱲ"]="تم",e["ﱳ"]="تن",e["ﱴ"]="تى",e["ﱵ"]="تي",e["ﱶ"]="ثر",e["ﱷ"]="ثز",e["ﱸ"]="ثم",e["ﱹ"]="ثن",e["ﱺ"]="ثى",e["ﱻ"]="ثي",e["ﱼ"]="فى",e["ﱽ"]="في",e["ﱾ"]="قى",e["ﱿ"]="قي",e["ﲀ"]="كا",e["ﲁ"]="كل",e["ﲂ"]="كم",e["ﲃ"]="كى",e["ﲄ"]="كي",e["ﲅ"]="لم",e["ﲆ"]="لى",e["ﲇ"]="لي",e["ﲈ"]="ما",e["ﲉ"]="مم",e["ﲊ"]="نر",e["ﲋ"]="نز",e["ﲌ"]="نم",e["ﲍ"]="نن",e["ﲎ"]="نى",e["ﲏ"]="ني",e["ﲐ"]="ىٰ",e["ﲑ"]="ير",e["ﲒ"]="يز",e["ﲓ"]="يم",e["ﲔ"]="ين",e["ﲕ"]="يى",e["ﲖ"]="يي",e["ﲗ"]="ئج",e["ﲘ"]="ئح",e["ﲙ"]="ئخ",e["ﲚ"]="ئم",e["ﲛ"]="ئه",e["ﲜ"]="بج",e["ﲝ"]="بح",e["ﲞ"]="بخ",e["ﲟ"]="بم",e["ﲠ"]="به",e["ﲡ"]="تج",e["ﲢ"]="تح",e["ﲣ"]="تخ",e["ﲤ"]="تم",e["ﲥ"]="ته",e["ﲦ"]="ثم",e["ﲧ"]="جح",e["ﲨ"]="جم",e["ﲩ"]="حج",e["ﲪ"]="حم",e["ﲫ"]="خج",e["ﲬ"]="خم",e["ﲭ"]="سج",e["ﲮ"]="سح",e["ﲯ"]="سخ",e["ﲰ"]="سم",e["ﲱ"]="صح",e["ﲲ"]="صخ",e["ﲳ"]="صم",e["ﲴ"]="ضج",e["ﲵ"]="ضح",e["ﲶ"]="ضخ",e["ﲷ"]="ضم",e["ﲸ"]="طح",e["ﲹ"]="ظم",e["ﲺ"]="عج",e["ﲻ"]="عم",e["ﲼ"]="غج",e["ﲽ"]="غم",e["ﲾ"]="فج",e["ﲿ"]="فح",e["ﳀ"]="فخ",e["ﳁ"]="فم",e["ﳂ"]="قح",e["ﳃ"]="قم",e["ﳄ"]="كج",e["ﳅ"]="كح",e["ﳆ"]="كخ",e["ﳇ"]="كل",e["ﳈ"]="كم",e["ﳉ"]="لج",e["ﳊ"]="لح",e["ﳋ"]="لخ",e["ﳌ"]="لم",e["ﳍ"]="له",e["ﳎ"]="مج",e["ﳏ"]="مح",e["ﳐ"]="مخ",e["ﳑ"]="مم",e["ﳒ"]="نج",e["ﳓ"]="نح",e["ﳔ"]="نخ",e["ﳕ"]="نم",e["ﳖ"]="نه",e["ﳗ"]="هج",e["ﳘ"]="هم",e["ﳙ"]="هٰ",e["ﳚ"]="يج",e["ﳛ"]="يح",e["ﳜ"]="يخ",e["ﳝ"]="يم",e["ﳞ"]="يه",e["ﳟ"]="ئم",e["ﳠ"]="ئه",e["ﳡ"]="بم",e["ﳢ"]="به",e["ﳣ"]="تم",e["ﳤ"]="ته",e["ﳥ"]="ثم",e["ﳦ"]="ثه",e["ﳧ"]="سم",e["ﳨ"]="سه",e["ﳩ"]="شم",e["ﳪ"]="شه",e["ﳫ"]="كل",e["ﳬ"]="كم",e["ﳭ"]="لم",e["ﳮ"]="نم",e["ﳯ"]="نه",e["ﳰ"]="يم",e["ﳱ"]="يه",e["ﳲ"]="ـَّ",e["ﳳ"]="ـُّ",e["ﳴ"]="ـِّ",e["ﳵ"]="طى",e["ﳶ"]="طي",e["ﳷ"]="عى",e["ﳸ"]="عي",e["ﳹ"]="غى",e["ﳺ"]="غي",e["ﳻ"]="سى",e["ﳼ"]="سي",e["ﳽ"]="شى",e["ﳾ"]="شي",e["ﳿ"]="حى",e["ﴀ"]="حي",e["ﴁ"]="جى",e["ﴂ"]="جي",e["ﴃ"]="خى",e["ﴄ"]="خي",e["ﴅ"]="صى",e["ﴆ"]="صي",e["ﴇ"]="ضى",e["ﴈ"]="ضي",e["ﴉ"]="شج",e["ﴊ"]="شح",e["ﴋ"]="شخ",e["ﴌ"]="شم",e["ﴍ"]="شر",e["ﴎ"]="سر",e["ﴏ"]="صر",e["ﴐ"]="ضر",e["ﴑ"]="طى",e["ﴒ"]="طي",e["ﴓ"]="عى",e["ﴔ"]="عي",e["ﴕ"]="غى",e["ﴖ"]="غي",e["ﴗ"]="سى",e["ﴘ"]="سي",e["ﴙ"]="شى",e["ﴚ"]="شي",e["ﴛ"]="حى",e["ﴜ"]="حي",e["ﴝ"]="جى",e["ﴞ"]="جي",e["ﴟ"]="خى",e["ﴠ"]="خي",e["ﴡ"]="صى",e["ﴢ"]="صي",e["ﴣ"]="ضى",e["ﴤ"]="ضي",e["ﴥ"]="شج",e["ﴦ"]="شح",e["ﴧ"]="شخ",e["ﴨ"]="شم",e["ﴩ"]="شر",e["ﴪ"]="سر",e["ﴫ"]="صر",e["ﴬ"]="ضر",e["ﴭ"]="شج",e["ﴮ"]="شح",e["ﴯ"]="شخ",e["ﴰ"]="شم",e["ﴱ"]="سه",e["ﴲ"]="شه",e["ﴳ"]="طم",e["ﴴ"]="سج",e["ﴵ"]="سح",e["ﴶ"]="سخ",e["ﴷ"]="شج",e["ﴸ"]="شح",e["ﴹ"]="شخ",e["ﴺ"]="طم",e["ﴻ"]="ظم",e["ﴼ"]="اً",e["ﴽ"]="اً",e["ﵐ"]="تجم",e["ﵑ"]="تحج",e["ﵒ"]="تحج",e["ﵓ"]="تحم",e["ﵔ"]="تخم",e["ﵕ"]="تمج",e["ﵖ"]="تمح",e["ﵗ"]="تمخ",e["ﵘ"]="جمح",e["ﵙ"]="جمح",e["ﵚ"]="حمي",e["ﵛ"]="حمى",e["ﵜ"]="سحج",e["ﵝ"]="سجح",e["ﵞ"]="سجى",e["ﵟ"]="سمح",e["ﵠ"]="سمح",e["ﵡ"]="سمج",e["ﵢ"]="سمم",e["ﵣ"]="سمم",e["ﵤ"]="صحح",e["ﵥ"]="صحح",e["ﵦ"]="صمم",e["ﵧ"]="شحم",e["ﵨ"]="شحم",e["ﵩ"]="شجي",e["ﵪ"]="شمخ",e["ﵫ"]="شمخ",e["ﵬ"]="شمم",e["ﵭ"]="شمم",e["ﵮ"]="ضحى",e["ﵯ"]="ضخم",e["ﵰ"]="ضخم",e["ﵱ"]="طمح",e["ﵲ"]="طمح",e["ﵳ"]="طمم",e["ﵴ"]="طمي",e["ﵵ"]="عجم",e["ﵶ"]="عمم",e["ﵷ"]="عمم",e["ﵸ"]="عمى",e["ﵹ"]="غمم",e["ﵺ"]="غمي",e["ﵻ"]="غمى",e["ﵼ"]="فخم",e["ﵽ"]="فخم",e["ﵾ"]="قمح",e["ﵿ"]="قمم",e["ﶀ"]="لحم",e["ﶁ"]="لحي",e["ﶂ"]="لحى",e["ﶃ"]="لجج",e["ﶄ"]="لجج",e["ﶅ"]="لخم",e["ﶆ"]="لخم",e["ﶇ"]="لمح",e["ﶈ"]="لمح",e["ﶉ"]="محج",e["ﶊ"]="محم",e["ﶋ"]="محي",e["ﶌ"]="مجح",e["ﶍ"]="مجم",e["ﶎ"]="مخج",e["ﶏ"]="مخم",e["ﶒ"]="مجخ",e["ﶓ"]="همج",e["ﶔ"]="همم",e["ﶕ"]="نحم",e["ﶖ"]="نحى",e["ﶗ"]="نجم",e["ﶘ"]="نجم",e["ﶙ"]="نجى",e["ﶚ"]="نمي",e["ﶛ"]="نمى",e["ﶜ"]="يمم",e["ﶝ"]="يمم",e["ﶞ"]="بخي",e["ﶟ"]="تجي",e["ﶠ"]="تجى",e["ﶡ"]="تخي",e["ﶢ"]="تخى",e["ﶣ"]="تمي",e["ﶤ"]="تمى",e["ﶥ"]="جمي",e["ﶦ"]="جحى",e["ﶧ"]="جمى",e["ﶨ"]="سخى",e["ﶩ"]="صحي",e["ﶪ"]="شحي",e["ﶫ"]="ضحي",e["ﶬ"]="لجي",e["ﶭ"]="لمي",e["ﶮ"]="يحي",e["ﶯ"]="يجي",e["ﶰ"]="يمي",e["ﶱ"]="ممي",e["ﶲ"]="قمي",e["ﶳ"]="نحي",e["ﶴ"]="قمح",e["ﶵ"]="لحم",e["ﶶ"]="عمي",e["ﶷ"]="كمي",e["ﶸ"]="نجح",e["ﶹ"]="مخي",e["ﶺ"]="لجم",e["ﶻ"]="كمم",e["ﶼ"]="لجم",e["ﶽ"]="نجح",e["ﶾ"]="جحي",e["ﶿ"]="حجي",e["ﷀ"]="مجي",e["ﷁ"]="فمي",e["ﷂ"]="بحي",e["ﷃ"]="كمم",e["ﷄ"]="عجم",e["ﷅ"]="صمم",e["ﷆ"]="سخي",e["ﷇ"]="نجي",e["﹉"]="‾",e["﹊"]="‾",e["﹋"]="‾",e["﹌"]="‾",e["﹍"]="_",e["﹎"]="_",e["﹏"]="_",e["ﺀ"]="ء",e["ﺁ"]="آ",e["ﺂ"]="آ",e["ﺃ"]="أ",e["ﺄ"]="أ",e["ﺅ"]="ؤ",e["ﺆ"]="ؤ",e["ﺇ"]="إ",e["ﺈ"]="إ",e["ﺉ"]="ئ",e["ﺊ"]="ئ",e["ﺋ"]="ئ",e["ﺌ"]="ئ",e["ﺍ"]="ا",e["ﺎ"]="ا",e["ﺏ"]="ب",e["ﺐ"]="ب",e["ﺑ"]="ب",e["ﺒ"]="ب",e["ﺓ"]="ة",e["ﺔ"]="ة",e["ﺕ"]="ت",e["ﺖ"]="ت",e["ﺗ"]="ت",e["ﺘ"]="ت",e["ﺙ"]="ث",e["ﺚ"]="ث",e["ﺛ"]="ث",e["ﺜ"]="ث",e["ﺝ"]="ج",e["ﺞ"]="ج",e["ﺟ"]="ج",e["ﺠ"]="ج",e["ﺡ"]="ح",e["ﺢ"]="ح",e["ﺣ"]="ح",e["ﺤ"]="ح",e["ﺥ"]="خ",e["ﺦ"]="خ",e["ﺧ"]="خ",e["ﺨ"]="خ",e["ﺩ"]="د",e["ﺪ"]="د",e["ﺫ"]="ذ",e["ﺬ"]="ذ",e["ﺭ"]="ر",e["ﺮ"]="ر",e["ﺯ"]="ز",e["ﺰ"]="ز",e["ﺱ"]="س",e["ﺲ"]="س",e["ﺳ"]="س",e["ﺴ"]="س",e["ﺵ"]="ش",e["ﺶ"]="ش",e["ﺷ"]="ش",e["ﺸ"]="ش",e["ﺹ"]="ص",e["ﺺ"]="ص",e["ﺻ"]="ص",e["ﺼ"]="ص",e["ﺽ"]="ض",e["ﺾ"]="ض",e["ﺿ"]="ض",e["ﻀ"]="ض",e["ﻁ"]="ط",e["ﻂ"]="ط",e["ﻃ"]="ط",e["ﻄ"]="ط",e["ﻅ"]="ظ",e["ﻆ"]="ظ",e["ﻇ"]="ظ",e["ﻈ"]="ظ",e["ﻉ"]="ع",e["ﻊ"]="ع",e["ﻋ"]="ع",e["ﻌ"]="ع",e["ﻍ"]="غ",e["ﻎ"]="غ",e["ﻏ"]="غ",e["ﻐ"]="غ",e["ﻑ"]="ف",e["ﻒ"]="ف",e["ﻓ"]="ف",e["ﻔ"]="ف",e["ﻕ"]="ق",e["ﻖ"]="ق",e["ﻗ"]="ق",e["ﻘ"]="ق",e["ﻙ"]="ك",e["ﻚ"]="ك",e["ﻛ"]="ك",e["ﻜ"]="ك",e["ﻝ"]="ل",e["ﻞ"]="ل",e["ﻟ"]="ل",e["ﻠ"]="ل",e["ﻡ"]="م",e["ﻢ"]="م",e["ﻣ"]="م",e["ﻤ"]="م",e["ﻥ"]="ن",e["ﻦ"]="ن",e["ﻧ"]="ن",e["ﻨ"]="ن",e["ﻩ"]="ه",e["ﻪ"]="ه",e["ﻫ"]="ه",e["ﻬ"]="ه",e["ﻭ"]="و",e["ﻮ"]="و",e["ﻯ"]="ى",e["ﻰ"]="ى",e["ﻱ"]="ي",e["ﻲ"]="ي",e["ﻳ"]="ي",e["ﻴ"]="ي",e["ﻵ"]="لآ",e["ﻶ"]="لآ",e["ﻷ"]="لأ",e["ﻸ"]="لأ",e["ﻹ"]="لإ",e["ﻺ"]="لإ",e["ﻻ"]="لا",e["ﻼ"]="لا"})),i.reverseIfRtl=function(e){var i,t,a=e.length;if(a<=1||!((i=e.charCodeAt(0))>=(t=r[13]).begin&&i<t.end||i>=(t=r[11]).begin&&i<t.end))return e;for(var n="",s=a-1;s>=0;s--)n+=e[s];return n}})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/pdf",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/preview_doc/sidebar","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/preview_doc/renderer/pdf_pages","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/css/ui.module.css","typescript/libraries/file-viewer/src/css/preview-core.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/plugins/header","typescript/libraries/file-viewer/src/css/header.module.css","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewPDF=void 0,r=t.__importStar(r),a=t.__importDefault(a);class S extends r.PureComponent{constructor(e){super(e),this.pdfPages=null,this.containerEl=null,this.pageRendered={},this.state={isSidebarFocused:!1,rendered:!1},this.handleSidebarPageChange=e=>{this.focusSidebar(),this.syncStorePageIndex(e,s.UserActionContext.DocSidebar),this.props.onPageNavigation&&this.props.onPageNavigation(e);const{logSidebarPageClicked:i}=this.props;i&&i()},this.dispatchResolvePageNavigation=()=>{this.props.dispatch(g.resolvePageNavigation({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,sourceContext:s.UserActionContext.Default}))},this.focusSidebar=()=>{this.setState({isSidebarFocused:!0})},this.unfocusSidebar=()=>{this.setState({isSidebarFocused:!1})},this.handleCloseFullScreen=()=>{const{dispatch:e,previewKey:i,fileViewerId:t}=this.props;e(g.exitFullScreen({previewKey:i,fileViewerId:t,sourceContext:s.UserActionContext.Default}))},this.handleInternalLinkClicked=e=>{this.props.onPageNavigation&&this.props.onPageNavigation(e),this.syncStorePageIndex(e,s.UserActionContext.DocLink)},this.handleImageLoad=e=>{this.pageRendered[e]|=2,this.props.onInteractive(),this.checkPageRendered()},this.handleImageError=()=>{this.props.onPageImageError&&this.props.onPageImageError()},this.handleTextRendered=e=>{this.pageRendered[e]|=1,this.checkPageRendered()},this.pageDown=()=>{this.pdfPages&&this.pdfPages.pageDown()},this.pageUp=()=>{this.pdfPages&&this.pdfPages.pageUp()},this.scrollDown=()=>{this.pdfPages&&this.pdfPages.scrollDown()},this.scrollUp=()=>{this.pdfPages&&this.pdfPages.scrollUp()},this.upBinding=()=>{this.state.isSidebarFocused?this.pageUp():this.scrollUp()},this.downBinding=()=>{this.state.isSidebarFocused?this.pageDown():this.scrollDown()},this.makeKeyboardBindings=()=>[...w.getPageUpDownBindings({pageUp:this.pageUp,pageDown:this.pageDown}),...w.getUpDownBindings({up:this.upBinding,down:this.downBinding}),...w.getHomeEndBindings({home:()=>this.syncStorePageIndex(0,s.UserActionContext.Keyboard),end:()=>{this.props.rivieraData&&this.syncStorePageIndex(this.props.rivieraData.pages.length-1,s.UserActionContext.Keyboard)}})],this.keybindings=this.makeKeyboardBindings()}checkPageRendered(){if(this.state.rendered)return;Object.keys(this.pageRendered).find(e=>3===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.syncStorePageIndex(0,s.UserActionContext.DocReset))}getContainerEl(){return this.containerEl}syncStorePageIndex(e,i){this.props.dispatch(g.pageNavigation({fileViewerId:this.props.fileViewerId,previewKey:this.props.previewKey,sourceContext:i,pageIndex:e}))}jumpToPage(e){this.pdfPages&&this.pdfPages.jumpToPage(e)}render(){const{account:e,activePluginInstance:i,className:t,config:s,fileViewerUiData:g,data:w,dispatch:S,fileInfo:P,fileMetadata:E,filePreviewUiData:I,fileViewerId:C,height:F,intl:O,isEditMode:T,layerRenderFn:A,onMouseDown:x,onMouseEnter:D,onMouseMove:k,onMouseUp:M,rootArchiveFileInformation:L,onPageChange:j,onScroll:R,pageClassName:N,pagesClassName:V,pluginProps:U,previewKey:B,previewMetadata:K,pluginQueryBus:z,width:H,rivieraData:W,toolbarPlugins:q,snackbarManagerPluginInstance:G,header:Z,onFindInDoc:$,findInDocData:Q,findInDocController:X,brandingInfo:Y}=this.props,{currentPageIndex:J}=I,ee=u.getCurrentScaleFactorFromFilePreviewUi(I),{isDocSidebarOpen:ie,isFullScreen:te}=g,{rendered:re}=this.state,ae=m.shouldShowDocSidebar(H,_.PreviewType.SsrDoc),ne=ae&&s.enable_navigation_bar&&ie,se=s.enable_navigation_bar&&ae,oe=s.fvsdk_use_native_lazy_loading;return r.createElement(r.Fragment,null,r.createElement("article",{className:a.default(l.container,t,{[d.isFullScreen]:te}),style:{visibility:re?"visible":"hidden",width:H,height:F},ref:e=>this.containerEl=e},te&&r.createElement(b.CloseButton,{className:a.default(l.close,c.close),intl:O,onClick:this.handleCloseFullScreen}),re&&se&&!te?r.createElement(n.Sidebar,{isOpened:ie,isEditMode:T,currentPageIndex:J,pages:w,intl:O,isFocused:this.state.isSidebarFocused,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,featureConfig:s}):null,r.createElement("div",{className:v.headerContainer},r.createElement(y.BrandingFileViewerPreview,{backgroundClass:d.brandingBackgroundImage,brandingInfo:Y,logoClass:d.brandingLogo},U&&r.createElement(p.PluginHeader,{pluginProps:U,activePluginInstance:i||void 0,header:Z}),r.createElement(o.PdfPages,{className:a.default(l.pdfViewport,V),count:w?w.length:1,height:F,onMouseDown:x,onMouseEnter:D,onMouseMove:k,onMouseUp:M,onPageChange:j,onScroll:R,pageClassName:N,currentPageIndex:J,pages:(w||[]).slice(0,re?void 0:1),ref:e=>this.pdfPages=e,scaleFactor:ee,width:ne?H-n.SIDEBAR_WIDTH:H,pageNavigation:I.pageNavigation,dispatchResolvePageNavigation:this.dispatchResolvePageNavigation,pluginQueryBus:z,previewKey:B,nativeLazyLoadingVariant:oe,findInDocData:Q,findInDocController:X,toolbar:r.createElement(f.ConfigurableToolbar,{showDocSidebar:se,rootArchiveFileInformation:L,previewType:_.PreviewType.SsrDoc,fileRivieraData:W,filePreviewUi:I,fileViewerUi:g,plugins:q,snackbarManagerPluginInstance:G,onFindInDoc:$})},A({account:e,activePluginInstance:i,config:s,fileViewerUiData:g,dispatch:S,fileInfo:P,fileMetadata:E,filePreviewUiData:I,fileViewerId:C,intl:O,pluginProps:U,previewKey:B,previewMetadata:K,onImageError:this.handleImageError,onImageLoad:this.handleImageLoad,onInternalLinkClicked:this.handleInternalLinkClicked,onTextRendered:this.handleTextRendered}))))),r.createElement(h.KeyboardBindingConnector,{keyboardBindings:this.keybindings}))}}i.PreviewPDF=S,S.displayName="PreviewPDF"})),define("typescript/libraries/file-viewer/src/preview_image/container",["require","exports","tslib","react","classnames","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/preview_image/preview_image","typescript/libraries/file-viewer/src/css/preview-core.module.css","typescript/libraries/file-viewer/src/preview_image/layers","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/keyboard/keyboard_connector"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewImageContainer=void 0,r=t.__importStar(r),a=t.__importDefault(a);class v extends r.Component{constructor(){super(...arguments),this.handleCloseFullScreen=()=>{const{dispatch:e,previewKey:i,fileViewerId:t}=this.props;e(c.exitFullScreen({previewKey:i,fileViewerId:t,sourceContext:n.UserActionContext.Default}))},this.handleFitScaleFactorChange=(e,i)=>{const{dispatch:t,fileViewerId:r,previewKey:a}=this.props;t(c.updateFitScaleFactor({fileViewerId:r,previewKey:a,fitScaleFactor:e,storedFitScaleFactor:i}))},this.handleUpdateDimensions=e=>{const{dispatch:i,fileViewerId:t,previewKey:r}=this.props;i(c.updateDimensions({fileViewerId:t,previewKey:r,dimensions:e}))},this.zoomIn=e=>{const{dispatch:i,fileViewerId:t,previewKey:r}=this.props;i(c.zoomIn({fileViewerId:t,previewKey:r,sourceContext:e}))},this.zoomOut=e=>{const{dispatch:i,fileViewerId:t,previewKey:r}=this.props;i(c.zoomOut({fileViewerId:t,previewKey:r,sourceContext:e}))},this.keyboardBindings=u.getZoomInOutBindings({zoomIn:()=>this.zoomIn(n.UserActionContext.Keyboard),zoomOut:()=>this.zoomOut(n.UserActionContext.Keyboard)})}render(){const{fileViewerUiData:e,intl:i}=this.props,t=e.isFullScreen;return r.createElement("div",{className:a.default(o.app,{[o.isFullScreen]:t})},t&&r.createElement(d.CloseButton,{intl:i,onClick:this.handleCloseFullScreen}),r.createElement(s.PreviewImage,Object.assign({},this.props,{layerRenderFn:l.defaultLayerRenderFn,onFitScaleFactorChanged:this.handleFitScaleFactorChange,onUpdateDimensions:this.handleUpdateDimensions})),r.createElement(p.KeyboardBindingConnector,{keyboardBindings:this.keyboardBindings}))}}i.PreviewImageContainer=v,v.displayName="PreviewImageContainer"})),define("typescript/libraries/file-viewer/src/preview_doc/renderer/ppt",["require","exports","tslib","react","lodash","classnames","typescript/libraries/file-viewer/src/preview_doc/sidebar","typescript/libraries/file-viewer/src/core/logging/constants","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/preview_doc/renderer/page","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/css/preview-core.module.css","typescript/libraries/file-viewer/src/css/header.module.css","typescript/libraries/file-viewer/src/core/data/selectors","typescript/libraries/file-viewer/src/plugins/header","typescript/libraries/file-viewer/src/toolbar/toolbar","typescript/libraries/file-viewer/src/plugins/types","typescript/libraries/file-viewer/src/core/data/actions","typescript/libraries/file-viewer/src/toolbar/configuration","typescript/libraries/file-viewer/src/keyboard/bindings","typescript/libraries/file-viewer/src/ui/close_button","typescript/libraries/file-viewer/src/keyboard/keyboard_connector","typescript/component_libraries/pro-ui/src/components/branding/file_viewer_preview"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.PreviewPPTWithOnlyImageLayer=i.PreviewPPT=void 0,r=t.__importStar(r),n=t.__importDefault(n);class P extends r.PureComponent{constructor(e){super(e),this.state={isSidebarFocused:!0,rendered:!1},this.pageRendered={},this.focusSidebar=()=>{this.setState({isSidebarFocused:!0})},this.unfocusSidebar=()=>{this.setState({isSidebarFocused:!1})},this.handleSidebarPageChange=e=>{this.focusSidebar(),this.props.onPageChange&&this.props.onPageChange(e,o.UserActionContext.DocSidebar)},this.handleWheel=a.debounce(e=>{const{data:i,width:t,height:r,filePreviewUiData:a,onPageChange:n}=this.props;if(!i.length)return;const{currentPageIndex:s}=a,c=v.getCurrentScaleFactorFromFilePreviewUi(a),{dimension:d}=i[s],u=(p=d,f=[t,r],l.calculateFitBox(f[0],f[1],p[0]/p[1])[0]/p[0]);var p,f;c.toFixed(2)<=u.toFixed(2)&&n&&n(s+(e.deltaY>0?1:-1),o.UserActionContext.MouseWheel)},40,{leading:!0,trailing:!1}),this.handleClose=()=>{const{dispatch:e,previewKey:i,fileViewerId:t}=this.props;e(m.exitFullScreen({previewKey:i,fileViewerId:t,sourceContext:o.UserActionContext.Default}))},this.handleImageLoad=e=>(this.pageRendered[e]|=2,this.props.onInteractive(),this.checkPageRendered()),this.handleTextRendered=e=>{this.pageRendered[e]|=1,this.checkPageRendered()},this.changePage=(e,i)=>{const{onPageChange:t}=this.props;t(e,i)},this.pageFirst=e=>{this.changePage(0,e)},this.pageLast=e=>{const i=this.props.rivieraData;i&&this.changePage(i.pages.length-1,e)},this.pageNext=e=>{const{currentPageIndex:i}=this.props.filePreviewUiData;this.changePage(i+1,e)},this.pagePrev=e=>{const{currentPageIndex:i}=this.props.filePreviewUiData;this.changePage(i-1,e)},this.pageUpKeyboard=()=>this.pagePrev(o.UserActionContext.Keyboard),this.pageDownKeyboard=()=>this.pageNext(o.UserActionContext.Keyboard),this.pageFirstKeyboard=()=>this.pageFirst(o.UserActionContext.Keyboard),this.pageLastKeyboard=()=>this.pageLast(o.UserActionContext.Keyboard),this.keyboardBindings=[...b.getPageUpDownBindings({pageUp:this.pageUpKeyboard,pageDown:this.pageDownKeyboard}),...b.getUpDownBindings({up:this.pageUpKeyboard,down:this.pageDownKeyboard}),...b.getHomeEndBindings({home:this.pageFirstKeyboard,end:this.pageLastKeyboard})],e.findInDocController&&e.findInDocController.setRetrieveCurrentPageIndex(()=>this.props.pageNavigation?this.props.pageNavigation.pageIndex:this.props.filePreviewUiData.currentPageIndex)}checkPageRendered(){!this.state.rendered&&Object.keys(this.pageRendered).find(e=>3===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}handleInternalLinkClicked(){}handleImageError(){}UNSAFE_componentWillReceiveProps(e){e.previewKey.serialized!==this.props.previewKey.serialized&&(this.setState({isSidebarFocused:!1,rendered:!1}),this.pageRendered={},this.props.onPageChange&&this.props.onPageChange(0,o.UserActionContext.DocReset))}componentDidUpdate(){this.props.pageNavigation&&(this.props.onPageChange(this.props.pageNavigation.pageIndex,o.UserActionContext.Default),this.props.dispatch(m.resolvePageNavigation({previewKey:this.props.previewKey,fileViewerId:this.props.fileViewerId,sourceContext:o.UserActionContext.Default})))}render(){const{account:e,activePluginInstance:i,className:t,config:a,fileViewerUiData:o,data:m,dispatch:b,fileInfo:P,fileMetadata:E,filePreviewUiData:I,fileViewerId:C,height:F,intl:O,layerRenderFn:T,onPageMouseDown:A,onPageMouseEnter:x,onPageMouseMove:D,onPageMouseUp:k,pageClassName:M,pluginProps:L,previewKey:j,previewMetadata:R,refCallback:N,width:V,rootArchiveFileInformation:U,pageNavigation:B,rivieraData:K,toolbarPlugins:z,snackbarManagerPluginInstance:H,responsiveSize:W,onFindInDoc:q,findInDocData:G,header:Z,brandingInfo:$}=this.props,Q=B?B.pageIndex:I.currentPageIndex,X=v.getCurrentScaleFactorFromFilePreviewUi(I),{isDocSidebarOpen:Y,isFullScreen:J}=o,{isSidebarFocused:ee,rendered:ie}=this.state,te=w.noToolbarShown(W,a),re=ie&&a.enable_navigation_bar&&l.shouldShowDocSidebar(V,_.PreviewType.SsrDoc)&&!J;return r.createElement(r.Fragment,null,r.createElement("article",{ref:N,className:n.default(d.container,t,{[u.isFullScreen]:J}),style:{visibility:ie?"visible":"hidden",height:F,width:V}},r.createElement(g.ConfigurableToolbar,{rootArchiveFileInformation:U,showDocSidebar:re,previewType:_.PreviewType.SsrDoc,fileRivieraData:K,filePreviewUi:I,fileViewerUi:o,plugins:z,snackbarManagerPluginInstance:H,onFindInDoc:q}),J&&r.createElement(h.CloseButton,{intl:O,onClick:this.handleClose,isInverse:!1}),re?r.createElement(s.Sidebar,{currentPageIndex:Q,pages:m,intl:O,isFocused:ee,onPageChange:this.handleSidebarPageChange,onFocus:this.focusSidebar,onBlur:this.unfocusSidebar,isOpened:Y,featureConfig:a}):null,r.createElement("div",{className:p.headerContainer},r.createElement(S.BrandingFileViewerPreview,{backgroundClass:u.brandingBackgroundImage,brandingInfo:$,logoClass:u.brandingLogo},L&&r.createElement(f.PluginHeader,{pluginProps:L,activePluginInstance:i||void 0,header:Z}),r.createElement("section",{className:d.pptViewport,onWheel:this.handleWheel},r.createElement("div",{className:n.default(d.pptSizer,{[d.pptFullSizer]:te})},r.createElement(c.Page,{className:M,key:Q,onMouseDown:A,onMouseEnter:x,onMouseMove:D,onMouseUp:k,data:m?m[Q]:void 0,scaleFactor:X,findInDocHighlights:null==G?void 0:G.highlights.get(Q),findInDocCurrentHit:null==G?void 0:G.currentHit},T({account:e,activePluginInstance:i,config:a,fileViewerUiData:o,dispatch:b,fileInfo:P,fileMetadata:E,filePreviewUiData:I,fileViewerId:C,intl:O,pluginProps:L,previewKey:j,previewMetadata:R,onImageError:this.handleImageError,onImageLoad:this.handleImageLoad,onInternalLinkClicked:this.handleInternalLinkClicked,onTextRendered:this.handleTextRendered}))))))),r.createElement(y.KeyboardBindingConnector,{keyboardBindings:this.keyboardBindings}))}}i.PreviewPPT=P,P.displayName="PreviewPPT";i.PreviewPPTWithOnlyImageLayer=class extends P{checkPageRendered(){!this.state.rendered&&Object.keys(this.pageRendered).find(e=>2===this.pageRendered[+e])&&(this.setState({rendered:!0}),this.props.onRenderSucceeded&&this.props.onRenderSucceeded())}}})),define("typescript/libraries/file-viewer/src/comments2/plugin/marker",["require","exports","tslib","react","typescript/libraries/file-viewer/src/css/toolbar.module.css"],(function(e,i,t,r,a){"use strict";function n(e){var i;switch(null===(i=e.annotation)||void 0===i?void 0:i.type){case"audio":case"video":return e.annotation.time/100;default:return}}Object.defineProperty(i,"__esModule",{value:!0}),i.Marker=i.getTimeForThread=i.MARKER_WIDTH_PERCENT=void 0,r=t.__importDefault(r),a=t.__importStar(a),i.MARKER_WIDTH_PERCENT=2,i.getTimeForThread=n;i.Marker=({duration:e,thread:i})=>{const t=n(i);if(void 0===t)return null;const s=0===e?0:100*t/e;return r.default.createElement("div",{className:a.commentMarker,style:{left:`${s}%`}})},i.Marker.displayName="Marker"})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/download_plugin",["require","exports","tslib","react","metaserver/static/js/modules/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons/src","dig-components/icons","dig-components/tooltips","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/portable/utils","metaserver/static/js/action_bar/file_actions/portable/download","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/file_store/utils","metaserver/static/js/share_download/ui/util","metaserver/static/js/file_viewer/sdk_file_viewer/download_utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils","metaserver/static/js/modules/clean/user_survey/user_survey","metaserver/static/js/modules/clean/sync_everything/constants","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/data/store","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h,y,S){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeDownloadPlugin=void 0,r=t.__importDefault(r);const P=[m.SDKPreviewSurface.BROWSE,m.SDKPreviewSurface.SEARCH,m.SDKPreviewSurface.STANDALONE_PREVIEW];i.makeDownloadPlugin=(e,i,t,n,s,c,m,I)=>{const C=u.makePluginActionDefinition({label:a.intl.formatMessage(d.DOWNLOAD_ACTION_STRING),icon:r.default.createElement(l.UIIcon,{src:o.DownloadLine}),id:S.DOWNLOAD_ACTION_PLUGIN_ID,action:()=>{t.logUserAction("download","title_bar_open_split_button");const{file:r}=e();(e=>{P.includes(e)&&w.UserSurvey.trackEvent("download_item","previews")})(i);const{rootNSID:a,blockHash:s}=h.getBrowseState(y.getStoreForBrowse().getState()).context;n&&a&&b.isUnmountedBackupBrowse(n,a)?s&&f.isBrowseFile(r)&&p.downloadSingleFileAsZip({fqPath:r.fq_path,rootNsId:a,source:"PREVIEWS",blockHash:s,user:n}):p.downloadSingleFile({href:r.href,source:"PREVIEWS",isFswm:f.isSharedFile(r)})}}),F=E({downloadAllowed:!!c&&g.isDownloadAllowed(c),downloadAction:()=>{t.logUserAction("download","title_bar_download_split_button");const{file:i}=e();_.downloadActiveFile(i,n,m,I,t.logUserAction,s)},saveACopyToDropboxAction:()=>{const{file:i}=e();_.saveToDropbox(i,e=>t.logUserAction(e,"title_bar_download_split_button"),n,s,m)},getActiveFile:e,user:n,shareToken:s,encryptionOptions:m});return{actionDefinitions:()=>{const{file:i}=e();if(!v.isLiveFile(i)||v.isPnmLinkNodeSelected(i)||v.isCloudDoc(i))return{};let t;return t=f.isSharedFile(i)?F:C,{atTopLevelIfSpace:[t],alwaysInOverflow:[[t]]}}}};const E=({downloadAction:e,saveACopyToDropboxAction:i,shareToken:t,downloadAllowed:p})=>{const v=r.default.createElement(l.UIIcon,{src:o.DownloadLine}),f=a.intl.formatMessage(d.DOWNLOAD_ACTION_STRING),g=e=>{e.menuItem.handler()},_=i=>{i.preventDefault(),i.stopPropagation(),e()},m=i=>{"Enter"===i.key&&(i.preventDefault(),i.stopPropagation(),e())},w=u.getCustomActionOverflowItem({icon:v,label:f,action:e,id:S.DOWNLOAD_ACTION_PLUGIN_ID});let b=null;t&&(b=u.getCustomActionOverflowItem({icon:r.default.createElement(l.UIIcon,{src:o.DropboxLine}),label:a.intl.formatMessage({id:"WiS7tZ",defaultMessage:"Save a copy to Dropbox"}),action:()=>{i()},id:"SHARECOPY_ACTION"}));const h=r.default.createElement(r.default.Fragment,null,w,b),y=({buttonProps:e})=>r.default.createElement(n.Menu.Wrapper,{onSelection:g},({getTriggerProps:i,getContentProps:t})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(s.Button,Object.assign({"aria-label":"Show options"},e,i(),{disabled:!p})),r.default.createElement(n.Menu.Content,Object.assign({},t(),{placement:"bottom-end"}),r.default.createElement(n.Menu.Segment,null,h)))),P=e=>r.default.createElement(c.Tooltip,{title:a.intl.formatMessage({id:"3IQVpL",defaultMessage:"You do not have permission to download this file"})},r.default.createElement("div",null,e)),E=r.default.createElement(n.Menu.Submenu,{disabled:!p,withTriggerContent:f,withLeftAccessory:v},r.default.createElement(n.Menu.Segment,null,h));return{renderButton:e=>{const i=r.default.createElement(s.SplitButton,{onClick:_,onKeyPress:m,variant:"opacity",renderMenu:y,disabled:!p},!e&&v,f);return p?i:P(i)},overflowItem:p?E:P(E)}}})),define("metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/open_dropdown_plugin",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/plugins/types","metaserver/static/js/file_viewer/sdk_file_viewer/action_plugins/utils","metaserver/static/js/modules/core/i18n","dig-components/menu","dig-components/buttons","dig-components/icons","dig-components/icons/src","metaserver/static/js/modules/clean/react/extensions/data/store","metaserver/static/js/modules/clean/react/extensions/data/helpers","metaserver/static/js/modules/clean/react/extensions/data/selectors","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/portable/go_to_folder","metaserver/static/js/modules/clean/react/extensions/extensions_menu_component_v2","metaserver/static/js/modules/clean/react/file_viewer/unity/with_unity","metaserver/static/js/file_store/utils","metaserver/static/js/file_viewer/sdk_file_viewer/utils"],(function(e,i,t,r,a,n,s,o,l,c,d,u,p,v,f,g,_,m,w,b,h){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.makeOpenDropdownAction=i.OpenMenuContent=void 0,r=t.__importDefault(r);const y={surface:"previews"};i.OpenMenuContent=e=>b.isBrowseFile(e.file)?r.default.createElement(w.WithUnity,{file:e.file,user:e.user,render:i=>r.default.createElement(m.ExtensionsPopoverContent,Object.assign({},e,{unityInfo:i}))}):r.default.createElement(m.ExtensionsPopoverContent,Object.assign({},e)),i.OpenMenuContent.displayName="OpenMenuContent";const S=e=>{const i=a.useSelector(i=>f.getOpenActionsForFile(i,e),a.shallowEqual),t=r.default.useMemo(()=>v.partitionActions(i).cloudEditors,[i]);return!b.isSharedFile(e)||0!==t.length},P=({file:e,icon:i,label:t,content:a,hideIcon:n,handleSelection:s})=>S(e)?r.default.createElement(l.Menu.Wrapper,{onSelection:s},({getTriggerProps:e,getContentProps:s})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(c.Button,Object.assign({},e(),{variant:"opacity",withIconLeft:n?null:i,withDropdownIcon:!0}),t),r.default.createElement(l.Menu.Content,Object.assign({},s()),a))):null;P.displayName="OpenButton";const E=({file:e,icon:i,label:t,content:a,handleSelection:n})=>S(e)?r.default.createElement(l.Menu.Submenu,{withTriggerContent:t,withLeftAccessory:i},a):null;E.displayName="OpenOverflow";const I=({file:e,user:t,store:s,logUserAction:l})=>{const c=r.default.createElement(i.OpenMenuContent,{user:t,file:e,isInActionBar:!0,telemetryContext:y,goToFolderActionHandler:()=>((e,i)=>{if(b.isBrowseFile(e)){const t=[e.fq_path];_.handleShowInFolder({fqPaths:t,user:i})}})(e,t),hideZipAction:!0}),p=r.default.createElement(d.UIIcon,{src:u.OpenLine}),v=o.intl.formatMessage(g.OPEN_ACTION_STRING),f=e=>{e.menuItem.handler(),l(e.menuItem.userAction||"unknown",n.UserActionContext.Toolbar,Object.assign({},e.menuItem.actionName&&{app_action_name:e.menuItem.actionName}))};return{renderButton:i=>r.default.createElement(a.Provider,{store:s},r.default.createElement(P,{icon:p,content:c,file:e,handleSelection:f,hideIcon:i,label:v})),overflowItem:r.default.createElement(a.Provider,{store:s},r.default.createElement(E,{icon:p,content:c,file:e,handleSelection:f,label:v})),id:h.OPEN_DROPDOWN_ACTION_PLUGIN_ID}};I.displayName="OpenDropdownPreview";i.makeOpenDropdownAction=(e,i,t)=>({actionDefinitions:()=>{const r=p.getStore(),{file:a}=e();if(!s.isLiveFile(a)||s.isInsideVaultFolder(a)||s.isPnmLinkNodeSelected(a)||b.isArchiveFile(a))return{};const n=I({file:a,store:r,user:i,logUserAction:t.logUserAction});return{atTopLevelIfSpace:[n],alwaysInOverflow:[[n]]}}})})),define("typescript/libraries/file-viewer/src/file_viewer/context_provider",["require","exports","tslib","react"],(function(e,i,t,r){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.FileViewerContextProvider=i.useFileViewerContext=void 0;const a=(r=t.__importDefault(r)).default.createContext(null);a.displayName="FileViewerContext";i.useFileViewerContext=()=>r.default.useContext(a),i.FileViewerContextProvider=a.Provider})),define("typescript/libraries/file-viewer/src/logging/timing",["require","exports","tslib","react","react-redux","typescript/libraries/file-viewer/src/core/logging/actions","typescript/libraries/file-viewer/src/core/middlewares/analytics","typescript/libraries/file-viewer/src/file_viewer/context_provider","typescript/libraries/file-viewer/src/logging/performance"],(function(e,i,t,r,a,n,s,o,l){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.useTimingLogging=void 0,r=t.__importDefault(r);const c=new Set([l.PreviewsTimingEvents.SKELETON_MOUNT,l.PreviewsTimingEvents.SKELETON_IMAGE_LOAD,l.PreviewsTimingEvents.SKELETON_DOC_RIVIERA_CALL_END,l.PreviewsTimingEvents.SKELETON_DOC_IMAGE_LOAD,l.PreviewsTimingEvents.CONTAINER_CODE_START,l.PreviewsTimingEvents.COLLECTION_VIEWER_CODE_START,l.PreviewsTimingEvents.COLLECTION_VIEWER_MOUNT,l.PreviewsTimingEvents.SDK_FILE_VIEWER_CODE_START,l.PreviewsTimingEvents.FVSDK_CONSTRUCTOR,l.PreviewsTimingEvents.FVSDK_INITIALIZE_START,l.PreviewsTimingEvents.FVSDK_LOADED_PLUGINS,l.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA_START_START,l.PreviewsTimingEvents.FVSDK_GET_PREVIEW_METADATA,l.PreviewsTimingEvents.FVSDK_GET_RIVIERA_DATA,l.PreviewsTimingEvents.FVSDK_INITIALIZE_COMPLETE,l.PreviewsTimingEvents.FVSDK_APP_MOUNT,l.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_START,l.PreviewsTimingEvents.FVSDK_IMAGE_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_IMAGE_ON_LOAD,l.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_START,l.PreviewsTimingEvents.FVSDK_DOC_CONTAINER_MOUNT,l.PreviewsTimingEvents.FVSDK_MARK_TTI]);i.useTimingLogging=e=>{const i=a.useDispatch(),t=a.useSelector(i=>i.loggingSession[e]),{batteries:d}=o.useFileViewerContext(),{onLogTimeline:u}=(e=>{const i=a.useSelector(i=>i.loggingSession[e]),{batteries:t}=o.useFileViewerContext(),n=r.default.useRef(!1);return{onLogTimeline:r.default.useCallback(()=>{var e,r;const a=l.PreviewsEventLogger.getStartEntry();if(a&&!n.current){const o=l.PreviewsEventLogger.getEventTimeline();Object.entries(o).forEach(([e,r])=>{var a,n;c.has(e)&&(null===(n=null===(a=null==t?void 0:t.logger)||void 0===a?void 0:a.logDuration)||void 0===n||n.call(a,{eventName:"preview_timeline",durationInMs:r,tags:{event:e},session:i?s.serializeSession(i):void 0}))}),null===(r=null===(e=null==t?void 0:t.logger)||void 0===e?void 0:e.logDuration)||void 0===r||r.call(e,{eventName:"preview_timeline_session_start_since_load",durationInMs:a.startTime,session:i?s.serializeSession(i):void 0}),n.current=!0}},[i,t])}})(e),p=r.default.useCallback(()=>{l.PreviewsEventLogger.mark(l.PreviewsTimingEvents.FVSDK_MARK_TTI),i(n.logTTI(e)),u()},[e,i,u]),v=r.default.useCallback(e=>{var i,r,a;(null===(i=e.detail)||void 0===i?void 0:i.value)&&(null===(a=null===(r=null==d?void 0:d.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"TTI",durationInMs:e.detail.value,shouldLogToHive:!0,tags:{navigation_type:e.detail.isAjax?"ajax":"page_load"},session:t?s.serializeSession(t):void 0}))},[d,t]),f=r.default.useCallback(()=>{i(n.logTTV(e))},[e,i]),g=r.default.useCallback(e=>{var i,r,a,n;(null===(i=e.detail)||void 0===i?void 0:i.value)&&(null===(a=null===(r=null==d?void 0:d.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"visually_complete",durationInMs:e.detail.value,tags:{navigation_type:null!==(n=e.detail.navigation_type)&&void 0!==n?n:"unknown"},shouldLogToHive:!0,session:t?s.serializeSession(t):void 0}))},[d,t]),_=r.default.useCallback(e=>{var i,r,a;(null===(i=e.detail)||void 0===i?void 0:i.value)&&(null===(a=null===(r=null==d?void 0:d.logger)||void 0===r?void 0:r.logDuration)||void 0===a||a.call(r,{eventName:"largest_contentful_paint",durationInMs:e.detail.value,shouldLogToHive:!0,session:t?s.serializeSession(t):void 0}))},[d,t]);return r.default.useEffect(()=>(window.addEventListener("time_to_interactive",v),window.addEventListener("visually_complete",g),window.addEventListener("largest_contentful_paint",_),()=>{window.removeEventListener("time_to_interactive",v),window.removeEventListener("visually_complete",g),window.removeEventListener("largest_contentful_paint",_)}),[v,g,_]),{onLogTTI:p,onLogTTV:f}}}));
//# sourceMappingURL=pkg-fvsdk.min.js-vflFQnu7B.map