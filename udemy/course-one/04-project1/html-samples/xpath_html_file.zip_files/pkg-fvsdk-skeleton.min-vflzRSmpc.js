define("typescript/libraries/file-viewer/src/core/data/riviera/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RivieraStatus=void 0,(function(e){e[e.Unknown=0]="Unknown",e[e.OK=1]="OK",e[e.ConversionFailure=2]="ConversionFailure",e[e.TemporaryFailure=3]="TemporaryFailure",e[e.InternalFailure=4]="InternalFailure",e[e.UnsupportedFormat=5]="UnsupportedFormat",e[e.Timeout=6]="Timeout",e[e.TooBig=7]="TooBig",e[e.InvalidMetadata=8]="InvalidMetadata",e[e.SourceCorrupt=9]="SourceCorrupt",e[e.TimeBudgetExceeded=10]="TimeBudgetExceeded",e[e.NotFound=11]="NotFound",e[e.PasswordProtected=12]="PasswordProtected",e[e.InvalidRequest=13]="InvalidRequest",e[e.VirusDetected=14]="VirusDetected",e[e.BlockMissing=15]="BlockMissing",e[e.FeatureDisabled=16]="FeatureDisabled"})(t.RivieraStatus||(t.RivieraStatus={}))})),define("typescript/libraries/file-viewer/src/core/data/models",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PreviewType=void 0,(function(e){e.Archive="archive",e.Audio="audio",e.CloudDoc="cloud_doc",e.Excel="excel",e.Error="error",e.HTML="html",e.Image="image",e.Linkfile="linkfile",e.Other="other",e.SsrDoc="ssr_doc",e.RawHTML="raw_html",e.Restricted="restricted",e.Video="video",e.Loading="loading",e.Doc="doc",e.Photo="photo",e.Text="text"})(t.PreviewType||(t.PreviewType={}))})),define("metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util",["require","exports","metaserver/static/js/modules/core/persistence/storage"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMutedState=t.getMutedState=t.setVolumeState=t.getVolumeState=t.setDocSidebarIsCollapsed=t.getDocSidebarIsCollapsed=t.setRightRailBlade=t.getRightRailBlade=t.setRightRailIsCollapsed=t.getRightRailIsCollapsed=void 0;t.getRightRailIsCollapsed=function(e){var t;try{return null===(t=r.UserLocalStorage.get(e,"file_viewer_right_rail_collapsed_preference"))||void 0===t||t}catch(e){return!0}},t.setRightRailIsCollapsed=function(e,t){try{r.UserLocalStorage.set(e,"file_viewer_right_rail_collapsed_preference",t)}catch(e){}},t.getRightRailBlade=function(e){var t;try{return null!==(t=r.UserLocalStorage.get(e,"file_viewer_right_rail_blade_preference"))&&void 0!==t?t:void 0}catch(e){return}},t.setRightRailBlade=function(e,t){try{r.UserLocalStorage.set(e,"file_viewer_right_rail_blade_preference",t)}catch(e){}},t.getDocSidebarIsCollapsed=function(e){var t;try{return null===(t=r.UserLocalStorage.get(e,"file_viewer_doc_sidebar_collapsed_preference"))||void 0===t||t}catch(e){return!0}},t.setDocSidebarIsCollapsed=function(e,t){try{r.UserLocalStorage.set(e,"file_viewer_doc_sidebar_collapsed_preference",t)}catch(e){}},t.getVolumeState=function(e){var t;try{return parseFloat(null!==(t=r.UserLocalStorage.get(e,"file_viewer_video_volume_preference"))&&void 0!==t?t:1)}catch(e){return 1}},t.setVolumeState=function(e,t){try{r.UserLocalStorage.set(e,"file_viewer_video_volume_preference",t)}catch(e){}},t.getMutedState=function(e){var t;try{return null!==(t=r.UserLocalStorage.get(e,"file_viewer_video_muted_preference"))&&void 0!==t&&t}catch(e){return!1}},t.setMutedState=function(e,t){try{r.UserLocalStorage.set(e,"file_viewer_video_muted_preference",t)}catch(e){}}})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton",["require","exports","tslib","react","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/skeleton/constants","typescript/libraries/file-viewer/src/logging/performance"],(function(e,t,r,i,a,o,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Skeleton=void 0,i=r.__importDefault(i);t.Skeleton=({isRightRailCollapsed:e,docSidebarCollapsed:t,canShowSsrDocs:r,preview:l,fileName:d,logPerformanceMark:c,metricsReporter:p})=>{const _=o.calcContentWidth(window.innerWidth,!e),u=window.innerWidth-_,f=o.calcContentHeight(window.innerHeight,!0),h=window.innerHeight-f;return i.default.useEffect(()=>{c&&n.PreviewsEventLogger.mark(n.PreviewsTimingEvents.SKELETON_MOUNT)},[c]),i.default.createElement("div",{className:"skeleton-holder prerender-preview",style:{position:"absolute",top:0,left:0,width:"100%",height:"100vh",backgroundColor:s.FAINT_BACKGROUND}},i.default.createElement("div",{className:"skeleton-action-bar",style:{position:"relative",top:0,left:0,width:"100%",height:`${h}px`,borderBottom:s.STANDARD_BORDER,backgroundColor:s.STANDARD_BACKGROUND,boxSizing:"border-box"}}),i.default.createElement("div",{style:{display:"flex",width:"100%",height:"calc(100% - 64px)"}},i.default.createElement("div",{style:{flexGrow:1,height:"100%"}},i.default.createElement(a.SkeletonViewport,{width:_,height:f,docSidebarCollapsed:t,canShowSsrDocs:r,previewContent:null==l?void 0:l.content,fileName:d,logPerformanceMark:c,metricsReporter:p})),u>0&&i.default.createElement("div",{className:"skeleton-right-rail",style:{width:`${u}px`,height:"100%",borderLeft:s.STANDARD_BORDER,backgroundColor:s.STANDARD_BACKGROUND}})))},t.Skeleton.displayName="Skeleton"})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_doc","typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_image"],(function(e,t,r,i,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonViewport=t.isEligibleToShowSkeletonPreview=void 0,i=r.__importDefault(i),t.isEligibleToShowSkeletonPreview=function(e){if(!e)return!1;const t=e[".tag"];return t===a.PreviewType.Image||t===a.PreviewType.SsrDoc||t===a.PreviewType.CloudDoc};const n=({width:e,height:t,docSidebarCollapsed:r,canShowSsrDocs:n,previewContent:l,docMetadata:d,fileName:c,logPerformanceMark:p,metricsReporter:_})=>{const u=null==l?void 0:l[".tag"];return i.default.createElement("div",{className:"skeleton-viewport",style:{width:e,height:t}},u===a.PreviewType.Image&&i.default.createElement(s.SkeletonViewportImage,{viewportWidth:e,viewportHeight:t,imageContent:l,logPerformanceMark:p}),u===a.PreviewType.SsrDoc&&n&&i.default.createElement(o.SkeletonViewportDoc,{viewportWidth:e,viewportHeight:t,docSidebarCollapsed:r,docContent:l,docMetadata:d,fileName:c,logPerformanceMark:p,metricsReporter:_}),u===a.PreviewType.CloudDoc&&n&&i.default.createElement(o.SkeletonViewportDoc,{viewportWidth:e,viewportHeight:t,docSidebarCollapsed:r,docContent:l,docMetadata:d,fileName:c,logPerformanceMark:p,metricsReporter:_}))};n.displayName="SkeletonViewportComponent",t.SkeletonViewport=i.default.memo(n),t.SkeletonViewport.displayName="SkeletonViewport"})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_image",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/logging/performance"],(function(e,t,r,i,a,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonViewportImage=void 0,i=r.__importDefault(i);t.SkeletonViewportImage=({viewportWidth:e,viewportHeight:t,imageContent:r,logPerformanceMark:s})=>{const{thumbnailUrl:n,srcSet:l}={thumbnailUrl:(d=r).default_src,srcSet:d.src_set};var d;const[c,p]=i.default.useState(NaN),[_,u]=i.default.useState(0),[f,h]=i.default.useState(0),[m,w]=i.default.useState(0),[v,g]=i.default.useState(0),b=i.default.useCallback(({currentTarget:{naturalWidth:e,naturalHeight:t}})=>{p(e/t),s&&o.PreviewsEventLogger.mark(o.PreviewsTimingEvents.SKELETON_IMAGE_LOAD)},[]);return i.default.useEffect(()=>{const[r,i]=a.calculateFitBox(e-72,t-20-120,c);u(r),h(i),r<e&&w((e-r)/2),i<t&&g((t-i-120+20)/2)},[e,t,c]),i.default.createElement("div",{className:"skeleton-sizer",style:{position:"absolute",width:`${_}px`,height:`${f}px`,transform:`translate(${m}px, ${v}px)`}},i.default.createElement("img",{className:"skeleton-image",src:n,srcSet:l,onLoad:b,style:{width:"100%",height:"100%"},alt:""}))},t.SkeletonViewportImage.displayName="SkeletonViewportImage"})),define("typescript/libraries/file-viewer/src/skeleton/preview_skeleton_viewport_doc",["require","exports","tslib","react","typescript/libraries/file-viewer/src/core/urls","typescript/libraries/file-viewer/src/core/utils/sizing_utils","typescript/libraries/file-viewer/src/core/data/riviera/api","typescript/libraries/file-viewer/src/core/data/models","typescript/libraries/file-viewer/src/skeleton/constants","typescript/libraries/file-viewer/src/logging/performance"],(function(e,t,r,i,a,o,s,n,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SkeletonViewportDoc=void 0,i=r.__importDefault(i);const c=({url:e,width:t,height:r,onImgLoad:a})=>i.default.createElement("div",{className:"skeleton-page-container",style:{margin:"auto",width:`${t}px`,height:`${r}px`}},i.default.createElement("img",{className:"skeleton-image",src:e,style:{width:`${t}px`,height:`${r}px`,opacity:"60%"},alt:"",onLoad:a}));c.displayName="SkeletonPage";t.SkeletonViewportDoc=({viewportWidth:e,viewportHeight:t,docSidebarCollapsed:r,docContent:p,docMetadata:_,fileName:u,metricsReporter:f,logPerformanceMark:h})=>{const m=(function(e){if(e.image_url_tmpl)return a.getDocPrewarmUrl(e)})(p),[w,v]=i.default.useState(0),[g,b]=i.default.useState(0),y=!r&&o.shouldShowDocSidebar(e,n.PreviewType.SsrDoc)?o.DOC_SIDEBAR_WIDTH:0,x=o.isPpt(u),S=i.default.useCallback(()=>{h&&d.PreviewsEventLogger.mark(d.PreviewsTimingEvents.SKELETON_DOC_IMAGE_LOAD)},[h]);return i.default.useEffect(()=>{const i=i=>{const a=o.calculateDocumentScaleFactor({width:e,height:t,dimensions:i.dimensions,isDocSidebarVisible:!r,fileName:u,scaleToFit:"width_and_height",toolbarShown:!0}),s=i.dimensions[0][0],n=i.dimensions[0][1];v(s*a),b(n*a)};if(_)i(_);else if(null==p?void 0:p.text_url_tmpl){new s.RivieraClientBase(new s.WebRivieraIOClient).fetchDocMetadata(p.text_url_tmpl,!0,0,0).then(e=>{const t=e.metadata;if(!t)return;i(t),d.PreviewsEventLogger.mark(d.PreviewsTimingEvents.SKELETON_DOC_RIVIERA_CALL_END);const r=document.getElementById("fvsdk-container");null==f||f.createStats({ns:"web_previews",name:"skeleton_doc_fetch_success"}).record(r?0:1)})}},[u,p,_,r,t,e,f]),i.default.createElement("div",{className:"skeleton-doc-viewport-wrapper",style:{width:`${e}px`,height:"100%",display:"flex",overflow:"hidden"}},y>0&&i.default.createElement("div",{className:"skeleton-doc-sidebar",style:{width:`${y}px`,height:"100%",boxSizing:"border-box",borderRight:l.STANDARD_BORDER,flexShrink:0}}),i.default.createElement("div",{className:"skeleton-doc-viewport",style:{display:"flex",width:"100%"}},x?i.default.createElement("div",{className:"skeleton-ppt-viewport",style:{width:"100%"}},i.default.createElement("div",{className:"skeleton-ppt-sizer",style:{height:`calc(100% - ${o.DOC_PAGE_PPT_MARGIN_BOTTOM}px)`,width:"100%",display:"flex"}},i.default.createElement(c,{width:w,height:g,url:m,onImgLoad:S}))):i.default.createElement("ol",{style:{width:`${e-y}px`,height:`${g}px`,padding:0,listStyle:"none",display:"flex",flexDirection:"column",alignItems:"center",overflow:"hidden"}},i.default.createElement("li",{style:{transform:`translateY(${o.DOC_LI_MARGIN}px)`,margin:`${o.DOC_LI_MARGIN}px 0`}},i.default.createElement(c,{width:w,height:g,url:m,onImgLoad:S})))))},t.SkeletonViewportDoc.displayName="SkeletonViewportDoc"})),define("metaserver/static/js/modules/clean/react/file_viewer/container_with_skeleton",["require","exports","tslib","react","metaserver/static/js/modules/clean/react/file_viewer/container_props_util","typescript/libraries/file-viewer/src/skeleton/preview_skeleton","metaserver/static/js/file_viewer/sdk_file_viewer/preferences_util","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/file_store/utils","metaserver/static/js/modules/clean/viewer","typescript/libraries/file-viewer/src/logging/performance","metaserver/static/js/metrics/index","metaserver/static/js/modules/clean/web_timing_logger","metaserver/static/js/dropbox/proto/js_init_data/file_viewer/container_props","metaserver/static/js/proto_utils/unpack"],(function(e,t,r,i,a,o,s,n,l,d,c,p,_,u,f){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RootComponent=t.ContainerWithSkeleton=void 0,i=r.__importDefault(i),_=r.__importStar(_);const h=i.default.lazy(()=>r.__awaiter(void 0,void 0,void 0,(function*(){const{FileViewerContainer:t}=yield new Promise((t,r)=>{e(["metaserver/static/js/modules/clean/react/file_viewer/container"],t,r)}).then(r.__importStar);return{default:t}})));t.ContainerWithSkeleton=e=>{var t,r;const{isEmbedded:a}=e,_=d.Viewer.get_viewer(),u=_.work_user||_.personal_user,f=null!==(t=e.userId)&&void 0!==t?t:null==u?void 0:u.id,m=null!==(r=e.shouldShowSkeletonDocs)&&void 0!==r&&r,w=!f||s.getRightRailIsCollapsed(f),v=!f||s.getDocSidebarIsCollapsed(f),g=l.getFilename(e.file);return c.usePreviewTimingSession(),i.default.createElement(i.default.Fragment,null,!a&&!n.is_mobile_or_tablet()&&i.default.createElement(o.Skeleton,{isRightRailCollapsed:w,docSidebarCollapsed:v,canShowSsrDocs:m,preview:e.file.preview,fileName:g,logPerformanceMark:!0,metricsReporter:p.getMetricsReporter()}),i.default.createElement(i.default.Suspense,{fallback:i.default.createElement("div",null)},i.default.createElement(h,Object.assign({},e))))},t.ContainerWithSkeleton.displayName="ContainerWithSkeleton";t.RootComponent=({encodedProto:e})=>{const r=f.unpackProto(e,u.file_viewer.FileViewerContainerProps);return r.webTimingLoggerServerContext&&_.initialize({log_time_to_interactive:!0},r.webTimingLoggerServerContext),i.default.createElement(t.ContainerWithSkeleton,Object.assign({},a.protoToContainerProps(r)))}})),define("typescript/libraries/file-viewer/src/skeleton/constants",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.STANDARD_BACKGROUND=t.FAINT_BACKGROUND=t.STANDARD_BORDER=void 0,t.STANDARD_BORDER="1px solid rgba(166,158,146,0.6)",t.FAINT_BACKGROUND="#f7f5f2",t.STANDARD_BACKGROUND="#FFFFFF"})),define("typescript/libraries/file-viewer/src/css/doc-sidebar.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/doc-sidebar.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnfocusedInEditMode=t.focused=t.selected=t.loader=t.thumbnail=t.isEditMode=t.containerBorder=t.open=t.container=t.border=t.sidebarWidth=t.thumbnailWidth=void 0,t.thumbnailWidth="112px",t.sidebarWidth="168px",t.border="4px",t.container="_container_4llxd_13",t.open="_open_4llxd_24",t.containerBorder="_containerBorder_4llxd_28",t.isEditMode="_isEditMode_4llxd_70",t.thumbnail="_thumbnail_4llxd_74",t.loader="_loader_4llxd_91",t.selected="_selected_4llxd_100",t.focused="_focused_4llxd_104",t.isUnfocusedInEditMode="_isUnfocusedInEditMode_4llxd_108";t.default={thumbnailWidth:"112px",sidebarWidth:"168px",border:"4px",container:"_container_4llxd_13",open:"_open_4llxd_24",containerBorder:"_containerBorder_4llxd_28",isEditMode:"_isEditMode_4llxd_70",thumbnail:"_thumbnail_4llxd_74",loader:"_loader_4llxd_91",selected:"_selected_4llxd_100",focused:"_focused_4llxd_104",isUnfocusedInEditMode:"_isUnfocusedInEditMode_4llxd_108"}})),define("typescript/libraries/file-viewer/src/css/preview-doc.module.css",["require","exports","css!metaserver/static/js/typescript/libraries/file-viewer/src/css/preview-doc.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toolbarHolder=t.close=t.container=t.pptFullSizer=t.pptSizer=t.pptViewport=t.pdfViewport=t.page=t.snackbar=t.imgLayer=t.internalLink=t.linksLayer=t.textLayer=t.textbox=t.findInDocHighlightSecondary=t.findInDocHighlightPrimary=t.pagePptMarginBottom=t.pageMarginTop=t.pageMarginLeft=t.pageMargin=void 0,t.pageMargin="16px",t.pageMarginLeft="24px",t.pageMarginTop="24px",t.pagePptMarginBottom="100px",t.findInDocHighlightPrimary="var(--color__accent__lime)",t.findInDocHighlightSecondary="var(--color__accent__banana)",t.textbox="_textbox_ysiwt_17",t.textLayer="_textLayer_ysiwt_22",t.linksLayer="_linksLayer_ysiwt_42",t.internalLink="_internalLink_ysiwt_52",t.imgLayer="_imgLayer_ysiwt_63",t.snackbar="_snackbar_ysiwt_90",t.page="_page_ysiwt_100",t.pdfViewport="_pdfViewport_ysiwt_104",t.pptViewport="_pptViewport_ysiwt_110",t.pptSizer="_pptSizer_ysiwt_128",t.pptFullSizer="_pptFullSizer_ysiwt_134",t.container="_container_ysiwt_144",t.close="_close_ysiwt_175",t.toolbarHolder="_toolbarHolder_ysiwt_180";t.default={pageMargin:"16px",pageMarginLeft:"24px",pageMarginTop:"24px",pagePptMarginBottom:"100px",findInDocHighlightPrimary:"var(--color__accent__lime)",findInDocHighlightSecondary:"var(--color__accent__banana)",textbox:"_textbox_ysiwt_17",textLayer:"_textLayer_ysiwt_22",linksLayer:"_linksLayer_ysiwt_42",internalLink:"_internalLink_ysiwt_52",imgLayer:"_imgLayer_ysiwt_63",snackbar:"_snackbar_ysiwt_90",page:"_page_ysiwt_100",pdfViewport:"_pdfViewport_ysiwt_104",pptViewport:"_pptViewport_ysiwt_110",pptSizer:"_pptSizer_ysiwt_128",pptFullSizer:"_pptFullSizer_ysiwt_134",container:"_container_ysiwt_144",close:"_close_ysiwt_175",toolbarHolder:"_toolbarHolder_ysiwt_180"}})),define("typescript/libraries/file-viewer/src/core/utils/sizing_utils",["require","exports","typescript/libraries/file-viewer/src/css/preview-doc.module.css","typescript/libraries/file-viewer/src/css/doc-sidebar.module.css","typescript/libraries/file-viewer/src/file_extension/extension_constants","typescript/libraries/file-viewer/src/core/utils/paths","typescript/libraries/file-viewer/src/core/data/models"],(function(e,t,r,i,a,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldShowDocSidebar=t.calcContentHeight=t.calcContentWidth=t.calculateDocumentScaleFactor=t.isPpt=t.calculateFitBox=t.READABLE_DOC_FILE_TYPES=t.DOC_LI_MARGIN=t.DOC_EXTRA_HORIZONTAL_MARGIN=t.DOC_SIDEBAR_WIDTH=t.DOC_PAGE_MARGIN_LEFT=t.DOC_PAGE_PPT_MARGIN_BOTTOM=t.DOC_PAGE_MARGIN_TOP=t.DOC_PAGE_MARGIN=void 0,t.DOC_PAGE_MARGIN=parseInt(r.pageMargin,10),t.DOC_PAGE_MARGIN_TOP=parseInt(r.pageMarginTop,10),t.DOC_PAGE_PPT_MARGIN_BOTTOM=parseInt(r.pagePptMarginBottom,10),t.DOC_PAGE_MARGIN_LEFT=parseInt(r.pageMarginLeft,10),t.DOC_SIDEBAR_WIDTH=parseInt(i.sidebarWidth,10);const n=t.DOC_SIDEBAR_WIDTH+600;function l(e){return a.PRESENTATION_EXTS.includes(o.getFileExtension(e))}t.DOC_EXTRA_HORIZONTAL_MARGIN=30,t.DOC_LI_MARGIN=16,t.READABLE_DOC_FILE_TYPES=[...a.PDF_EXTS,...a.WORDPROC_EXTS],t.calculateFitBox=function(e,t,r){const i=e/t;return isNaN(r)||isNaN(i)||!isFinite(i)||!isFinite(r)?[0,0]:i>r?[t*r,t]:[e,e/r]},t.isPpt=l,t.calculateDocumentScaleFactor=function(e){const{width:r,height:i,dimensions:a,isDocSidebarVisible:s,scaleToFit:n,toolbarShown:d,fileName:c,maxWidth:p}=e;if(0===a.length)return 1;const _=Math.max(0,r-t.DOC_PAGE_MARGIN-t.DOC_PAGE_MARGIN_LEFT-(s?t.DOC_SIDEBAR_WIDTH:0)-t.DOC_EXTRA_HORIZONTAL_MARGIN),u=l(c)&&!d?Math.max(0,i-t.DOC_PAGE_MARGIN_TOP-t.DOC_PAGE_PPT_MARGIN_BOTTOM):Math.max(0,i-t.DOC_PAGE_MARGIN_TOP),f=null!=p?Math.min(_,p):_,h=u,m=t.READABLE_DOC_FILE_TYPES.includes(o.getFileExtension(c)),w="width_and_height"===n&&!m,v=a.reduce((e,[t,r])=>Math.min(e,f/t,w?h/r:Number.POSITIVE_INFINITY),Number.POSITIVE_INFINITY);return Math.min(v,w?Number.POSITIVE_INFINITY:1.75)},t.calcContentWidth=function(e,t,r=!0,i=!1){return!r||i?e:e<=833?e:e-(t?329:57)},t.calcContentHeight=function(e,t){return e-(t?64:0)},t.shouldShowDocSidebar=function(e,t){return e>=n&&(t===s.PreviewType.SsrDoc||t===s.PreviewType.CloudDoc)}})),define("typescript/libraries/file-viewer/src/core/urls",["require","exports"],(function(e,t){"use strict";function r(e,t,r,i){const a=new URL(e);return a.searchParams.set("page",t.toString()),a.searchParams.set("scale_percent",r.toString()),null!=i&&a.searchParams.set("width",i.toString()),a.toString()}Object.defineProperty(t,"__esModule",{value:!0}),t.getDocPrewarmUrl=t.getXlsImgUrl=t.imageUrl=t.updateQueryParam=void 0,t.updateQueryParam=function(e,t){Object.keys(t).forEach(r=>{e.searchParams.set(r,t[r])})},t.imageUrl=r,t.getXlsImgUrl=function(e,t,r){const i=new URL(e,"https://www.dropbox.com");if("/previews_asset/"===i.pathname){return(i.pathname+i.search).replace(/SHEET_PLACEHOLDER/,t.toString()).replace(/TILE_PLACEHOLDER/,r.toString())}return i.searchParams.set("sheet",t.toString()),i.searchParams.set("tile",r.toString()),i.toString()},t.getDocPrewarmUrl=function(e){const t="ssr_doc"===e[".tag"]?Math.min(...(e.supported_widths||[]).concat([480])):void 0;return e.image_url_tmpl?r(e.image_url_tmpl,0,0,t):""}})),define("typescript/libraries/file-viewer/src/core/data/riviera/api",["require","exports","tslib","typescript/libraries/file-viewer/src/core/data/riviera/types"],(function(e,t,r,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RivieraClientBase=t.WebRivieraIOClient=t.excelUrl=t.textUrl=t.RivieraError=void 0;class a extends Error{constructor(e,t=i.RivieraStatus.Unknown){super(e),this.statusCode=t}}function o(e,t,r){return 401===e&&r?new a("Password required",i.RivieraStatus.PasswordProtected):new a("Load Error",t.rivieraStatusCode)}t.RivieraError=a;const s=e=>{let t={};try{e&&(t=JSON.parse(e))}catch(e){}return t};function n(e,t,r=0,i=50,a=!1){const o=new URL(e);return t&&o.searchParams.set("metadata","1"),void 0!==r&&(o.searchParams.set("text","1"),o.searchParams.set("page_start",r.toString()),o.searchParams.set("page_end",i.toString())),a&&o.searchParams.set("canned_file_name","spdf/audi.pdf.json"),o.toString()}function l(e,t){if(void 0===t)return e;{const r=new URL(e);return r.searchParams.set("sheet",t+""),r.toString()}}t.textUrl=n,t.excelUrl=l;t.WebRivieraIOClient=class{refreshDocBlob(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield fetch(e,{headers:{"Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams({password:t||""}),credentials:"include",method:"POST"}),i=yield r.json();return{ok:r.ok,status:r.status,data:i,headers:{"x-dropbox-metadata":r.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":r.headers.get("x-dropbox-pdf-password-needed")}}}))}fetchDocMetadata(e,t,i,a,o){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield fetch(n(e,t,i,a,o),{headers:{"content-type":"application/json"},credentials:"include",method:"POST"});try{const e=yield r.json();return{ok:r.ok,status:r.status,data:e,headers:{"x-dropbox-metadata":r.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":r.headers.get("x-dropbox-pdf-password-needed")}}}catch(e){return{ok:!1,status:r.status,data:null,headers:{"x-dropbox-metadata":r.headers.get("x-dropbox-metadata"),"x-dropbox-pdf-password-needed":r.headers.get("x-dropbox-pdf-password-needed")}}}}))}fetchMediaMetadata(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{credentials:"include"}),r=t.headers.get("x-dropbox-metadata")||"",i=yield t.json();return{ok:t.ok,status:t.status,data:i,headers:{"x-dropbox-metadata":r}}}))}fetchWaveformData(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{credentials:"include"}),r=t.headers.get("x-dropbox-metadata")||"",i=yield t.json();return{ok:t.ok,status:t.status,data:i,headers:{"x-dropbox-metadata":r}}}))}fetchLinkfileData(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield fetch(e,{credentials:t?"include":"omit",headers:{"content-type":"application/json"},method:"POST"}),i=r.headers.get("x-dropbox-metadata")||"",a={uri:(yield r.json()).uri};return{ok:r.ok,status:r.status,data:a,headers:{"x-dropbox-metadata":i}}}))}fetchExcelWorkbookLayoutData(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const r=yield fetch(l(e,t),{headers:{"content-type":"application/json"},credentials:"include",method:"POST"}),i=yield r.json(),a=r.headers.get("x-dropbox-metadata")||"";return{ok:r.ok,status:r.status,data:i,headers:{"x-dropbox-metadata":a}}}))}fetchArchiveTopLevelData(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield fetch(e,{headers:{"content-type":"application/json"},credentials:"include",method:"POST"}),r=yield t.json(),i=t.headers.get("x-dropbox-metadata")||"";return{ok:t.ok,status:t.status,data:r,headers:{"x-dropbox-metadata":i}}}))}};t.RivieraClientBase=class{constructor(e){this.ioClient=e}refreshDocBlob(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const{data:r,status:i,ok:a,headers:n}=yield this.ioClient.refreshDocBlob(e,t);if(!a){const e="1"===n["x-dropbox-pdf-password-needed"];throw o(i,s(n["x-dropbox-metadata"]),e)}const{text:l,image:d,refresh:c}=r;return{text_url_tmpl:l,image_url_tmpl:d,refresh_url:c}}))}fetchDocMetadata(e,t=!1,i=0,a=50,n=!1){return r.__awaiter(this,void 0,void 0,(function*(){const{ok:r,data:l,status:d,headers:c}=yield this.ioClient.fetchDocMetadata(e,t,i,a,n);if(r)return l;const p="1"===c["x-dropbox-pdf-password-needed"];throw o(d,s(c["x-dropbox-metadata"]),p)}))}fetchExcelWorkbookLayoutData(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const{ok:r,data:i,status:a,headers:n}=yield this.ioClient.fetchExcelWorkbookLayoutData(e,t);if(r)return i;throw o(a,s(n["x-dropbox-metadata"]),!1)}))}fetchMediaMetadata(e){return r.__awaiter(this,void 0,void 0,(function*(){const{ok:t,data:r,status:i,headers:a}=yield this.ioClient.fetchMediaMetadata(e);if(t)return r;throw o(i,s(a["x-dropbox-metadata"]),!1)}))}fetchWaveformData(e){return r.__awaiter(this,void 0,void 0,(function*(){const{ok:t,data:r,status:i,headers:a}=yield this.ioClient.fetchWaveformData(e);if(t)return r;throw o(i,s(a["x-dropbox-metadata"]),!1)}))}fetchLinkfileData(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const{ok:r,data:i,status:a,headers:n}=yield this.ioClient.fetchLinkfileData(e,t);if(r)return i;throw o(a,s(n["x-dropbox-metadata"]),!1)}))}fetchArchiveTopLevelData(e){return r.__awaiter(this,void 0,void 0,(function*(){const{ok:t,data:r,status:i,headers:a}=yield this.ioClient.fetchArchiveTopLevelData(e);if(t)return r;throw o(i,s(a["x-dropbox-metadata"]),!1)}))}}}));
//# sourceMappingURL=pkg-fvsdk-skeleton.min.js-vflFMdW3_.map