define("metaserver/static/js/logging/compression",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBestCompressionCodec=t.IdentityCodec=void 0;class s{inflate(e){return e}deflate(e){return e}}t.IdentityCodec=s,t.getBestCompressionCodec=function(){return new s}})),define("metaserver/static/js/logging/hive/schemas/web-user-action",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebUserActionRow=void 0;t.WebUserActionRow=class{constructor(e){this.category="web-user-action",this.session_id=null,this.user_id=null,this.team_id=null,this.on_maestro=!0,this.extra={},this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.authed_user_ids=null,this.identity_gid=null,this.anon_ip=null,this.active_user_id=null,this.team_type=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.user_agent=null,this.country=null,e.hasOwnProperty("event_name")&&void 0!==e.event_name&&(this.event_name=e.event_name),e.hasOwnProperty("session_id")&&void 0!==e.session_id&&(this.session_id=e.session_id),e.hasOwnProperty("source")&&void 0!==e.source&&(this.source=e.source),e.hasOwnProperty("user_id")&&void 0!==e.user_id&&(this.user_id=e.user_id),e.hasOwnProperty("team_id")&&void 0!==e.team_id&&(this.team_id=e.team_id),e.hasOwnProperty("on_maestro")&&void 0!==e.on_maestro&&(this.on_maestro=e.on_maestro),e.hasOwnProperty("extra")&&void 0!==e.extra&&(this.extra=e.extra),e.hasOwnProperty("ua_browser_name")&&void 0!==e.ua_browser_name&&(this.ua_browser_name=e.ua_browser_name),e.hasOwnProperty("ua_browser_version")&&void 0!==e.ua_browser_version&&(this.ua_browser_version=e.ua_browser_version),e.hasOwnProperty("ua_dist_name")&&void 0!==e.ua_dist_name&&(this.ua_dist_name=e.ua_dist_name),e.hasOwnProperty("ua_dist_version")&&void 0!==e.ua_dist_version&&(this.ua_dist_version=e.ua_dist_version),e.hasOwnProperty("ua_os_name")&&void 0!==e.ua_os_name&&(this.ua_os_name=e.ua_os_name),e.hasOwnProperty("ua_os_version")&&void 0!==e.ua_os_version&&(this.ua_os_version=e.ua_os_version),e.hasOwnProperty("authed_user_ids")&&void 0!==e.authed_user_ids&&(this.authed_user_ids=e.authed_user_ids),e.hasOwnProperty("identity_gid")&&void 0!==e.identity_gid&&(this.identity_gid=e.identity_gid),e.hasOwnProperty("timestamp")&&void 0!==e.timestamp&&(this.timestamp=e.timestamp),e.hasOwnProperty("anon_ip")&&void 0!==e.anon_ip&&(this.anon_ip=e.anon_ip),e.hasOwnProperty("active_user_id")&&void 0!==e.active_user_id&&(this.active_user_id=e.active_user_id),e.hasOwnProperty("team_type")&&void 0!==e.team_type&&(this.team_type=e.team_type),e.hasOwnProperty("locale_browser_header")&&void 0!==e.locale_browser_header&&(this.locale_browser_header=e.locale_browser_header),e.hasOwnProperty("locale_user_selected")&&void 0!==e.locale_user_selected&&(this.locale_user_selected=e.locale_user_selected),e.hasOwnProperty("referrer")&&void 0!==e.referrer&&(this.referrer=e.referrer),e.hasOwnProperty("user_agent")&&void 0!==e.user_agent&&(this.user_agent=e.user_agent),e.hasOwnProperty("country")&&void 0!==e.country&&(this.country=e.country),e.hasOwnProperty("view_type")&&void 0!==e.view_type&&(this.view_type=e.view_type),e.hasOwnProperty("file_nsid")&&void 0!==e.file_nsid&&(this.file_nsid=e.file_nsid),e.hasOwnProperty("file_sjid")&&void 0!==e.file_sjid&&(this.file_sjid=e.file_sjid),e.hasOwnProperty("file_id")&&void 0!==e.file_id&&(this.file_id=e.file_id),e.hasOwnProperty("file_name")&&void 0!==e.file_name&&(this.file_name=e.file_name),e.hasOwnProperty("file_path")&&void 0!==e.file_path&&(this.file_path=e.file_path),e.hasOwnProperty("file_size")&&void 0!==e.file_size&&(this.file_size=e.file_size),e.hasOwnProperty("file_extension")&&void 0!==e.file_extension&&(this.file_extension=e.file_extension),e.hasOwnProperty("request_id")&&void 0!==e.request_id&&(this.request_id=e.request_id),e.hasOwnProperty("upload_id")&&void 0!==e.upload_id&&(this.upload_id=e.upload_id),e.hasOwnProperty("all_fsw_ids")&&void 0!==e.all_fsw_ids&&(this.all_fsw_ids=e.all_fsw_ids),e.hasOwnProperty("filtered_fsw_ids")&&void 0!==e.filtered_fsw_ids&&(this.filtered_fsw_ids=e.filtered_fsw_ids),e.hasOwnProperty("browser_width")&&void 0!==e.browser_width&&(this.browser_width=e.browser_width),e.hasOwnProperty("browser_height")&&void 0!==e.browser_height&&(this.browser_height=e.browser_height),e.hasOwnProperty("device_width")&&void 0!==e.device_width&&(this.device_width=e.device_width),e.hasOwnProperty("device_height")&&void 0!==e.device_height&&(this.device_height=e.device_height),e.hasOwnProperty("action_source")&&void 0!==e.action_source&&(this.action_source=e.action_source),Object.seal(this)}}})),define("metaserver/static/js/logging/sender",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax","metaserver/static/js/modules/core/xhr"],(function(e,t,s,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sender=t.MAX_REPORT_ATTEMPTS=void 0,n=s.__importStar(n);t.MAX_REPORT_ATTEMPTS=4;const r=204;t.Sender=class{constructor(e,t,s){this.store=e,this.sendInterval=t,this.batchSize=s,this.numSuccessfulPublish=0,this.numFailedPublish=0,this._pageUnloading=!1,this.scheduleNextSend(Date.now())}drainAllLogs(){this._pageUnloading||(this._pageUnloading=!0,this.store.subscribeToPushEvent(()=>{this.sendOnce(!0)})),null!=this.nextSendTimeoutId&&clearTimeout(this.nextSendTimeoutId),this.sendOnce(!0)}sendOnce(e=!1){const t=this.store.drain(this.batchSize);Object.keys(t).length>0&&this.publish(t,e);const s=Date.now();this.scheduleNextSend(s),this.lastSendTime=s}publish(e,t=!1){const s={},o={};if(Object.keys(e).forEach((function(t){const i=e[t].map(e=>e.records());s[t]=JSON.stringify([].concat.apply([],i))})),o["data-version"]="1",o.batches=JSON.stringify(s),o.stats=this.store.stats.getAndReset(),t&&"navigator"in window&&"sendBeacon"in window.navigator)return void i.SilentBackgroundBeaconRequest({url:"/log/telemetry",data:o});n.sendXhr("/log/telemetry",o,t=>{t===r?this.onSendSuccess(e):this.onSendFailure(e)})}scheduleNextSend(e){this.nextSendTime=e+this.sendInterval,this.nextSendTimeoutId=setTimeout(()=>{this.sendOnce()},this.sendInterval)}onSendSuccess(e){this.numSuccessfulPublish++,window.SECRET_LOGGING_FRAMEWORK_CALLBACK_DO_NOT_USE&&window.SECRET_LOGGING_FRAMEWORK_CALLBACK_DO_NOT_USE(e)}onSendFailure(e){this.numFailedPublish++;for(const s in e)if(e.hasOwnProperty(s))for(const i of e[s])i.markFailure(),i.numReportAttempts<t.MAX_REPORT_ATTEMPTS&&this.store.reEnqueueBatch(s,i)}}})),define("metaserver/static/js/logging/storage",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MessageBatch=t.WindowStorage=t.EventStorage=t.MAX_MESSAGES_IN_BATCH=void 0,t.MAX_MESSAGES_IN_BATCH=100;class s{constructor(){this.stats=new i}}t.EventStorage=s;class i{constructor(){this.rate_stats={}}_val(e,t){return e.hasOwnProperty(t)?e[t]:0}onPushEvent(e){for(const t of["*",e]){const e="enqueue:"+t;this.rate_stats[e]=this._val(this.rate_stats,e)+1}}onDrain(e){let t=0;for(const s in e)if(e.hasOwnProperty(s)){const i=e[s].map(e=>e.size()).reduce((e,t)=>e+t,0),n="dequeue:"+s;this.rate_stats[n]=this._val(this.rate_stats,n)+i,t+=i}this.rate_stats["dequeue:*"]=this._val(this.rate_stats,"dequeue:*")+t}onReEnqueueBatch(e,t){for(const s of["*",e]){const e="reEnqueue:"+s;this.rate_stats[e]=this._val(this.rate_stats,e)+t.size()}}getAndReset(){const e=JSON.stringify({"rate-stats":this.rate_stats});return this.rate_stats={},e}}t.WindowStorage=class extends s{constructor(e){super(),this.compressionCodec=e,this.existing_batches={},this._pushEventCallbacks=[]}_append_batch_to_category(e,t){this.existing_batches[e]||(this.existing_batches[e]=[]),this.existing_batches[e].push(t)}_get_or_create_batch(e){let t=this.existing_batches[e];return t&&0!==t.length||(this._add_new_batch_for_category(e),t=this.existing_batches[e]),t[t.length-1]}_add_new_batch_for_category(e){const s=new n(e,t.MAX_MESSAGES_IN_BATCH,this.compressionCodec);return this._append_batch_to_category(e,s),s}pushEvent(e,t){const s=JSON.parse(JSON.stringify(t));if(this.stats.onPushEvent(e),!this._get_or_create_batch(e).tryAppend(s)){this._add_new_batch_for_category(e).tryAppend(s)}for(const e of this._pushEventCallbacks)"function"==typeof e&&e()}reEnqueueBatch(e,t){return this.stats.onReEnqueueBatch(e,t),this._append_batch_to_category(e,t)}subscribeToPushEvent(e){this._pushEventCallbacks.push(e)}drain(e){let t=e;const s={};for(const e in this.existing_batches)if(this.existing_batches.hasOwnProperty(e)){if(t<=0)break;const i=this.existing_batches[e].splice(0,t);if(t-=i.length,i.length>0){for(const e of i)e.close();s[e]=i}}return this.stats.onDrain(s),s}};class n{constructor(e,t,s){this.category=e,this.maxMessages=t,this.compressionCodec=s,this.numReportAttempts=0,this.messages=[]}isFull(){return this.messages.length>=this.maxMessages}size(){return this.messages.length}tryAppend(e){return!this.isFull()&&!this.closed&&(this.messages.push(e),this.isFull()&&this.close(),!0)}close(){this.closed||(this.closed=!0)}records(){return this.messages}markFailure(){if(!this.closed)throw new Error("Attempted to send an open batch");this.numReportAttempts++}}t.MessageBatch=n})),define("metaserver/static/js/logging/telemetry",["require","exports","metaserver/static/js/logging/storage","metaserver/static/js/logging/compression","metaserver/static/js/logging/sender","metaserver/static/js/modules/core/browser"],(function(e,t,s,i,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getGlobalTelemetrySingleton=t.ClientTelemetry=t.VortexComboLogger=t.HiveLogger=t.JSEventLogger=void 0;class o{constructor(e){this.prefix=e}log(e){u().storage.pushEvent(this.prefix+e.category,e)}}t.JSEventLogger=class extends o{constructor(){super("js:")}};t.HiveLogger=class extends o{constructor(){super("hive:")}};t.VortexComboLogger=class extends o{constructor(){super("vortexcombo:")}};class a{constructor(){const e=i.getBestCompressionCodec();this.storage=new s.WindowStorage(e),this.sender=new n.Sender(this.storage,5e3,1),r.onBrowserRedirect(e=>{this.drainAllLogs()}),window.addEventListener("beforeunload",()=>{this.drainAllLogs()})}drainAllLogs(){this.sender.drainAllLogs()}sendOnce(){this.sender.sendOnce()}}let d;function u(){return d||(d=new a),d}t.ClientTelemetry=a,t.getGlobalTelemetrySingleton=u})),define("metaserver/static/js/prod_assets_web_modules/web-vitals",["exports"],(function(e){"use strict";var t,s,i,n,r=function(e,t){return{name:e,value:void 0===t?-1:t,delta:0,entries:[],id:"v2-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12)}},o=function(e,t){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){if("first-input"===e&&!("PerformanceEventTiming"in self))return;var s=new PerformanceObserver((function(e){return e.getEntries().map(t)}));return s.observe({type:e,buffered:!0}),s}}catch(e){}},a=function(e,t){var s=function s(i){"pagehide"!==i.type&&"hidden"!==document.visibilityState||(e(i),t&&(removeEventListener("visibilitychange",s,!0),removeEventListener("pagehide",s,!0)))};addEventListener("visibilitychange",s,!0),addEventListener("pagehide",s,!0)},d=function(e){addEventListener("pageshow",(function(t){t.persisted&&e(t)}),!0)},u=function(e,t,s){var i;return function(n){t.value>=0&&(n||s)&&(t.delta=t.value-(i||0),(t.delta||void 0===i)&&(i=t.value,e(t)))}},c=-1,h=function(){return"hidden"===document.visibilityState?0:1/0},_=function(){a((function(e){var t=e.timeStamp;c=t}),!0)},l=function(){return c<0&&(c=h(),_(),d((function(){setTimeout((function(){c=h(),_()}),0)}))),{get firstHiddenTime(){return c}}},p=function(e,t){var s,i=l(),n=r("FCP"),a=function(e){"first-contentful-paint"===e.name&&(h&&h.disconnect(),e.startTime<i.firstHiddenTime&&(n.value=e.startTime,n.entries.push(e),s(!0)))},c=performance.getEntriesByName&&performance.getEntriesByName("first-contentful-paint")[0],h=c?null:o("paint",a);(c||h)&&(s=u(e,n,t),c&&a(c),d((function(i){n=r("FCP"),s=u(e,n,t),requestAnimationFrame((function(){requestAnimationFrame((function(){n.value=performance.now()-i.timeStamp,s(!0)}))}))})))},v=!1,f=-1,m={passive:!0,capture:!0},g=new Date,w=function(e,n){t||(t=n,s=e,i=new Date,O(removeEventListener),y())},y=function(){if(s>=0&&s<i-g){var e={entryType:"first-input",name:t.type,target:t.target,cancelable:t.cancelable,startTime:t.timeStamp,processingStart:t.timeStamp+s};n.forEach((function(t){t(e)})),n=[]}},b=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?(function(e,t){var s=function(){w(e,t),n()},i=function(){n()},n=function(){removeEventListener("pointerup",s,m),removeEventListener("pointercancel",i,m)};addEventListener("pointerup",s,m),addEventListener("pointercancel",i,m)})(t,e):w(t,e)}},O=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,b,m)}))},P=new Set;e.getCLS=function(e,t){v||(p((function(e){f=e.value})),v=!0);var s,i=function(t){f>-1&&e(t)},n=r("CLS",0),c=0,h=[],_=function(e){if(!e.hadRecentInput){var t=h[0],i=h[h.length-1];c&&e.startTime-i.startTime<1e3&&e.startTime-t.startTime<5e3?(c+=e.value,h.push(e)):(c=e.value,h=[e]),c>n.value&&(n.value=c,n.entries=h,s())}},l=o("layout-shift",_);l&&(s=u(i,n,t),a((function(){l.takeRecords().map(_),s(!0)})),d((function(){c=0,f=-1,n=r("CLS",0),s=u(i,n,t)})))},e.getFCP=p,e.getFID=function(e,i){var c,h=l(),_=r("FID"),p=function(e){e.startTime<h.firstHiddenTime&&(_.value=e.processingStart-e.startTime,_.entries.push(e),c(!0))},v=o("first-input",p);c=u(e,_,i),v&&a((function(){v.takeRecords().map(p),v.disconnect()}),!0),v&&d((function(){var o;_=r("FID"),c=u(e,_,i),n=[],s=-1,t=null,O(addEventListener),o=p,n.push(o),y()}))},e.getLCP=function(e,t){var s,i=l(),n=r("LCP"),c=function(e){var t=e.startTime;t<i.firstHiddenTime&&(n.value=t,n.entries.push(e)),s()},h=o("largest-contentful-paint",c);if(h){s=u(e,n,t);var _=function(){P.has(n.id)||(h.takeRecords().map(c),h.disconnect(),P.add(n.id),s(!0))};["keydown","click"].forEach((function(e){addEventListener(e,_,{once:!0,capture:!0})})),a(_,!0),d((function(i){n=r("LCP"),s=u(e,n,t),requestAnimationFrame((function(){requestAnimationFrame((function(){n.value=performance.now()-i.timeStamp,P.add(n.id),s(!0)}))}))}))}},e.getTTFB=function(e){var t,s=r("TTFB");t=function(){try{var t=performance.getEntriesByType("navigation")[0]||(function(){var e=performance.timing,t={entryType:"navigation",startTime:0};for(var s in e)"navigationStart"!==s&&"toJSON"!==s&&(t[s]=Math.max(e[s]-e.navigationStart,0));return t})();if(s.value=s.delta=t.responseStart,s.value<0)return;s.entries=[t],e(s)}catch(e){}},"complete"===document.readyState?setTimeout(t,0):addEventListener("pageshow",t)},Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=pkg-telemetry.min.js-vfl7FQFh_.map