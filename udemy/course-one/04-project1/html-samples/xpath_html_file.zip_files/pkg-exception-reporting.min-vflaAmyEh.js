define("metaserver/static/js/modules/core/assert",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assert=t.overrideEnvironmentForTesting=void 0;let n="production";t.overrideEnvironmentForTesting=function(e){n=e},t.assert=function(e,t,r={}){if(e)return;"production"!==n&&alert(`Assertion Error: ${t}`);const o=new Error(`Assertion Error: ${t}`),{tags:i=[],exc_extra:s=null}=r;throw o.assertOptions={tags:i.concat("module:exception","assert"),exc_extra:s},o.isAssertion=!0,o}})),define("metaserver/static/js/modules/core/exception_tag_registry",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clear_all_tags=t.unregister_tag=t.register_tag=t.get_registered_tags=void 0;let n=new Set;if(window.ensemble){const e=window;e.REGISTERED_EXCEPTION_TAGS||(e.REGISTERED_EXCEPTION_TAGS=new Set),n=e.REGISTERED_EXCEPTION_TAGS}t.get_registered_tags=function(){const e=[];return n.forEach(t=>e.push(t)),e},t.register_tag=function(e){n.add(e)},t.unregister_tag=function(e){n.delete(e)},t.clear_all_tags=function(){n.clear()}})),define("metaserver/static/js/modules/core/exception",["require","exports","metaserver/static/js/modules/core/exception_info","metaserver/static/js/modules/core/exception_info"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SEVERITY=t.reportStack=t.reportException=t.unregisterOnFailedAssert=t.registerOnFailedAssert=t.overrideEnvironmentForTesting=void 0;let o="production";t.overrideEnvironmentForTesting=function(e){o=e};const i=[];function reportException(e){const{err:t}=e;if(t.reported)return;const[r,o,s]=n.collectExceptionStack(t);t.isAssertion&&i.forEach(e=>e(s)),t.stack_frames=r.reverse(),t.context_tb=o.reverse(),t.tags=(function(e,t){const n=new Set;return e&&e.forEach(e=>n.add(e)),t&&t.forEach(e=>n.add(e)),Array.from(n.values())})(e.tags,t.tags),t.excExtra=(function(e,t){let n={};return e&&(n=Object.assign(Object.assign({},n),e)),t&&(n=Object.assign(Object.assign({},n),t)),n})(e.exc_extra,t.excExtra),t.severity=e.severity,t.force=e.force,window.onerror&&window.onerror(t.message,void 0,void 0,void 0,t)}t.registerOnFailedAssert=function(e){i.push(e)},t.unregisterOnFailedAssert=function(e){const t=i.indexOf(e);t>=0&&i.splice(t,1)},t.reportException=reportException,t.reportStack=function(e,t={}){t={severity:t.severity||n.SEVERITY.NONCRITICAL,tags:t.tags||[],exc_extra:t.exc_extra||{},silent:!!t.silent};const r=new Error(e);reportException({err:r,force:!0,tags:(t.tags||[]).concat("module:exception","reportStack"),severity:t.severity,exc_extra:t.exc_extra}),"production"!==o&&(t.severity===n.SEVERITY.CRITICAL?(t.silent||alert(e),console&&console.error&&console.error(r)):console&&console.warn&&console.warn(r))},Object.defineProperty(t,"SEVERITY",{enumerable:!0,get:function(){return r.SEVERITY}})})),define("metaserver/static/js/modules/core/exception_info",["require","exports","tslib","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/core/exception_tag_registry","metaserver/static/js/modules/shims/tracekit"],(function(e,t,n,r,o,i,s){"use strict";var c;Object.defineProperty(t,"__esModule",{value:!0}),t.collectExceptionStack=t.collectExceptionTags=t.collectExceptionExtra=t.SEVERITY=void 0,r=n.__importStar(r),o=n.__importStar(o),s=n.__importDefault(s),t.SEVERITY={CRITICAL:"critical",NONCRITICAL:"non-critical",USER_ERROR:"user-error",UNCAUGHT:"uncaught",OPERATIONAL:"operational"};const a=null===(c=window.edisonExceptionContext)||void 0===c?void 0:c.exceptionExtras;t.collectExceptionExtra=function(e){let t={};if(e.isAssertion){const n=e;n.assertOptions&&n.assertOptions.exc_extra&&(t=Object.assign(Object.assign({},t),n.assertOptions.exc_extra))}e.excExtra&&(t=Object.assign(Object.assign({},t),e.excExtra)),window.DB_FRAME_BUST&&(t.DB_FRAME_BUST=!0),t.client_time=(new Date).toString(),t.client_utc_time=(new Date).toUTCString();const n={};for(const e in window.requireContexts)if(window.requireContexts.hasOwnProperty(e)){const t={},r=window.requireContexts[e].firstUndefinedModule;r&&(t.first_undefined_module=r),n[e]=t}t.page_alameda_failures=n;const i=window.ensemble;return null!=i&&(null!=i.getExceptionInfo&&(t.dws_page_info=i.getExceptionInfo()),null!=i.getPageletInfoForExceptionReporting&&(t.pagelet_info=i.getPageletInfoForExceptionReporting())),a?(t=Object.assign(Object.assign({},t),a),delete t.sessionId):t=Object.assign(Object.assign({},t),{page_repo_rev:r.REPO_REV,page_load_timestamp:o.PAGE_LOAD_TIME,page_load_hostname:r.HOSTNAME,yaps_project:r.YAPS_PROJECT,yaps_deployment:r.YAPS_DEPLOYMENT,user_locale:r.USER_LOCALE}),t},t.collectExceptionTags=function(e){var t;const n=new Set;if(e.isAssertion){const t=e;t.assertOptions&&t.assertOptions.tags&&t.assertOptions.tags.forEach(e=>n.add(e))}e.tags&&e.tags.forEach(e=>n.add(e)),i.get_registered_tags().forEach(e=>n.add(e)),(null===(t=window.edisonExceptionContext)||void 0===t?void 0:t.tags)&&window.edisonExceptionContext.tags.forEach(e=>n.add(e));let o="";return o=a&&"sessionId"in a?a.sessionId:r.SESSION_ID,n.add(`session-id:${o}`),Array.from(n.values())};const l=["\\bassert\\b","\\bcollectExceptionStack\\b","\\breportException\\b","\\breportStack\\b","\\bsendExceptionReport\\b"];function u(e,t){const n=e=>{if(!e)return!1;for(const n of t)if(-1!==e.search(n))return!0;return!1};for(;e.length>0&&n(e[0].func);)e=e.slice(1);return e}t.collectExceptionStack=function(e){const t=s.default.computeStackTrace(e),n=null!=(t&&t.stack)?u(t.stack,l):[];let r=[];try{throw new Error}catch(e){const t=s.default.computeStackTrace(e);null!=t&&null!=t.stack&&(r=t.stack),r=u(r,l)}let o=n.length-r.length;return o<=0&&(o=1),[n.slice(0,o),n.slice(o),t]}})),define("metaserver/static/js/modules/shims/tracekit",["require","exports","tslib","tracekit"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),(r=n.__importDefault(r)).default.linesOfContext=1,r.default.remoteFetching=!1,r.default.noConflict(),t.default=r.default})),define("metaserver/static/js/modules/core/cookies",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Cookies=t._setCookie=void 0;const assert=function(e,t){if(!e)throw new Error(t)},n=/^([0-9]{1,3}\.){3}[0-9]{1,3}$/,r=function(e){if(e.match(n))return[e];const t=e.split("."),r=[];for(let e=0;e<t.length;e++)r.push(t.slice(e).join("."));return r},o=function(e){const t=e.split("/"),n=[];for(let e=0;e<t.length;e++){const r=t.slice(0,t.length-e).join("/");""!==r&&n.push(r),n.push(r+"/")}return n},i=["=",";"],s=function(e,t,n=!1){assert("string"==typeof e,`${t} must be a string, but was ${typeof e}`),assert(n||e.length>0,`${t} must not be empty`),assert(!(function(e){if(null==e)return!1;for(const t of i)if(-1!==e.indexOf(t))return!0;return!1})(e),`${t} contains illegal characters`)},c=e=>s(e,"Cookie name",!1);t._setCookie=function(e,t,n={}){var r,o,i;c(e),(e=>{s(e,"Cookie value",!0)})(t),n.expires&&(r=n.expires,s(r,"Cookie expiration date",!1)),n.domain&&(o=n.domain,s(o,"Cookie domain",!1)),n.path&&(i=n.path,s(i,"Cookie path",!1));const a=[`${e}=${t}`];n.expires&&a.push(`expires=${n.expires}`),n.domain&&a.push(`domain=${n.domain}`),n.path&&a.push(`path=${n.path}`),n.samesite&&a.push(`samesite=${n.samesite}`),a.push("secure"),document.cookie=a.join("; ")};const a=new Date(1).toUTCString();t.Cookies={create(e,n,r,o,i="/",s="lax"){let c;if(null!=r){assert("number"==typeof r,"Cookie expiration must be a number");const e=new Date;e.setTime(e.getTime()+24*r*60*60*1e3),c=e.toUTCString()}t._setCookie(e,n,{expires:c,path:i,domain:o,samesite:s})},read(e){c(e);const n=[];for(const t of document.cookie.split(";")){const r=t.split("=",1)[0];r.trim()===e&&n.push(t.substring(r.length+1,t.length).trim())}let r=!1;const o=[];for(const e of n)""===e?r=!0:o.push(e);return 1===o.length?o[0]:o.length>1?(t.Cookies.delete(e),null):r?"":null},delete(e){const n=[null,...r(window.location.hostname)],i=[null,...o(window.location.pathname)];for(const r of n)for(const n of i)t._setCookie(e,"",{expires:a,domain:r,path:n,samesite:"lax"})},are_enabled:()=>navigator.cookieEnabled?navigator.cookieEnabled:(document.cookie="this_is_a_test_cookie",-1!==document.cookie.indexOf("this_is_a_test_cookie"))}})),define("metaserver/static/js/modules/core/xhr",["require","exports","metaserver/static/js/modules/clean/csrf"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sendXhr=void 0;const r=function(e){};t.sendXhr=function(e,t,o=r){n.assertDropboxDomain(e),(function(e){const t=n.readCsrfToken();e.is_xhr=!0,e.t=t})(t);const i=(function(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&void 0!==e[n]&&t.push(`${encodeURIComponent(n)}=${encodeURIComponent(String(e[n]))}`);return t.join("&")})(t),s=new XMLHttpRequest;return s.onreadystatechange=function(){s.readyState===XMLHttpRequest.DONE&&o(s.status)},s.open("POST",e),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),s.send(i),s}})),define("metaserver/static/js/modules/clean/csrf",["require","exports","metaserver/static/js/modules/core/cookies"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.assertDropboxDomain=t.readCsrfToken=void 0,t.readCsrfToken=function(){return n.Cookies.read("__Host-js_csrf")},t.assertDropboxDomain=function(e){const t=document.createElement("a");t.href=e;const n=t.hostname||window.location.hostname;if(-1===n.indexOf(".dropbox.com",n.length-".dropbox.com".length))throw new Error("Cannot send the CSRF token to "+n)}})),define("metaserver/static/js/prod_assets_web_modules/tracekit",["./common/_commonjsHelpers"],(function(e){"use strict";var t,n={exports:{}};return t=n,(function(e,n){if(e){var r={},o=e.TraceKit,i=[].slice,s="?";r.noConflict=function(){return e.TraceKit=o,r},r.wrap=function(e){return function(){try{return e.apply(this,arguments)}catch(e){throw r.report(e),e}}},r.report=(function(){var t,n,o=[],s=null,a=null,l=null;function u(e,t){var n=null;if(!t||r.collectWindowErrors){for(var s in o)if(c(o,s))try{o[s].apply(null,[e].concat(i.call(arguments,2)))}catch(e){n=e}if(n)throw n}}function f(e,n,o,i,s){if(l)r.computeStackTrace.augmentStackTraceWithInitialElement(l,n,o,e),p();else if(s)u(r.computeStackTrace(s),!0);else{var c={url:n,line:o,column:i};c.func=r.computeStackTrace.guessFunctionName(c.url,c.line),c.context=r.computeStackTrace.gatherContext(c.url,c.line),u({mode:"onerror",message:e,stack:[c]},!0)}return!!t&&t.apply(this,arguments)}function p(){var e=l,t=s;s=null,l=null,a=null,u.apply(null,[e,!1].concat(t))}function d(t){if(l){if(a===t)return;p()}var n=r.computeStackTrace(t);throw l=n,a=t,s=i.call(arguments,1),e.setTimeout((function(){a===t&&p()}),n.incomplete?2e3:0),t}return d.subscribe=function(r){!0!==n&&(t=e.onerror,e.onerror=f,n=!0),o.push(r)},d.unsubscribe=function(e){for(var t=o.length-1;t>=0;--t)o[t]===e&&o.splice(t,1)},d})(),r.computeStackTrace=(function(){var t={};function n(n){if("string"!=typeof n)return[];if(!c(t,n)){var o="",i="";try{i=e.document.domain}catch(e){}var s=/(.*)\:\/\/([^:\/]+)([:\d]*)\/{0,1}([\s\S]*)/.exec(n);s&&s[2]===i&&(o=(function(t){if(!r.remoteFetching)return"";try{var n=(function(){try{return new e.XMLHttpRequest}catch(t){return new e.ActiveXObject("Microsoft.XMLHTTP")}})();return n.open("GET",t,!1),n.send(""),n.responseText}catch(e){return""}})(n)),t[n]=o?o.split("\n"):[]}return t[n]}function o(e,t){var r,o=/function ([^(]*)\(([^)]*)\)/,i=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,c="",l=n(e);if(!l.length)return s;for(var u=0;u<10;++u)if(!a(c=l[t-u]+c)){if(r=i.exec(c))return r[1];if(r=o.exec(c))return r[1]}return s}function i(e,t){var o=n(e);if(!o.length)return null;var i=[],s=Math.floor(r.linesOfContext/2),c=s+r.linesOfContext%2,l=Math.max(0,t-s-1),u=Math.min(o.length,t+c-1);t-=1;for(var f=l;f<u;++f)a(o[f])||i.push(o[f]);return i.length>0?i:null}function l(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function u(e){return l(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function f(e,t){for(var r,o,i=0,s=t.length;i<s;++i)if((r=n(t[i])).length&&(r=r.join("\n"),o=e.exec(r)))return{url:t[i],line:r.substring(0,o.index).split("\n").length,column:o.index-r.lastIndexOf("\n",o.index)-1};return null}function p(e,t,r){var o,i=n(t),s=new RegExp("\\b"+l(e)+"\\b");return r-=1,i&&i.length>r&&(o=s.exec(i[r]))?o.index:null}function d(t){if(!a(e&&e.document)){for(var n,r,o,i,s=[e.location.href],c=e.document.getElementsByTagName("script"),p=""+t,d=0;d<c.length;++d){var m=c[d];m.src&&s.push(m.src)}if(o=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var g=o[1]?"\\s+"+o[1]:"",x=o[2].split(",").join("\\s*,\\s*");n=l(o[3]).replace(/;$/,";?"),r=new RegExp("function"+g+"\\s*\\(\\s*"+x+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else r=new RegExp(l(p).replace(/\s+/g,"\\s+"));if(i=f(r,s))return i;if(o=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/.exec(p)){var h=o[1];if(n=u(o[2]),i=f(r=new RegExp("on"+h+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),s[0]))return i;if(i=f(r=new RegExp(n),s))return i}return null}}function m(e,t,n,r){var s={url:t,line:n};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=o(s.url,s.line)),s.context||(s.context=i(s.url,s.line));var c=/ '([^']+)' /.exec(r);if(c&&(s.column=p(c[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function g(e,t){for(var n,i,c,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,l=[],u={},f=!1,h=g.caller;h&&!f;h=h.caller)if(h!==x&&h!==r.report){if(i={url:null,func:s,args:[],line:null,column:null},h.name?i.func=h.name:(n=a.exec(h.toString()))&&(i.func=n[1]),void 0===i.func)try{i.func=n.input.substring(0,n.input.indexOf("{"))}catch(e){}if(c=d(h)){i.url=c.url,i.line=c.line,i.func===s&&(i.func=o(i.url,i.line));var v=/ '([^']+)' /.exec(e.message||e.description);v&&(i.column=p(v[1],c.url,c.line))}u[""+h]?f=!0:u[""+h]=!0,l.push(i)}t&&l.splice(0,t);var _={mode:"callers",name:e.name,message:e.message,stack:l};return m(_,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),_}function x(t,r){var l=null;r=null==r?0:+r;try{if(l=(function(e){var t=e.stacktrace;if(t){for(var n,r=/ line (\d+).*script (?:in )?(\S+)(?:: in function (\S+))?$/i,s=/ line (\d+), column (\d+)\s*(?:in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\))? in (.*):\s*$/i,c=t.split("\n"),a=[],l=0;l<c.length;l+=2){var u=null;if((n=r.exec(c[l]))?u={url:n[2],line:+n[1],column:null,func:n[3],args:[]}:(n=s.exec(c[l]))&&(u={url:n[6],line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[]}),u){if(!u.func&&u.line&&(u.func=o(u.url,u.line)),u.line)try{u.context=i(u.url,u.line)}catch(e){}u.context||(u.context=[c[l+1]]),a.push(u)}}return a.length?{mode:"stacktrace",name:e.name,message:e.message,stack:a}:null}})(t))return l}catch(e){}try{if(l=(function(e){if(!e.stack)return null;for(var t,n,r=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|webpack|eval).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,c=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,l=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,u=e.stack.split("\n"),f=[],d=/^(.*) is undefined$/.exec(e.message),m=0,g=u.length;m<g;++m){if(t=r.exec(u[m])){var x=t[2]&&-1!==t[2].indexOf("native");n={url:x?null:t[2],func:t[1]||s,args:x?[t[2]]:[],line:t[3]?+t[3]:null,column:t[4]?+t[4]:null}}else if(t=l.exec(u[m]))n={url:t[2],func:t[1]||s,args:[],line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=c.exec(u[m])))continue;n={url:t[3],func:t[1]||s,args:t[2]?t[2].split(","):[],line:t[4]?+t[4]:null,column:t[5]?+t[5]:null}}!n.func&&n.line&&(n.func=o(n.url,n.line)),n.line&&(n.context=i(n.url,n.line)),f.push(n)}return f.length?(f[0]&&f[0].line&&!f[0].column&&d?f[0].column=p(d[1],f[0].url,f[0].line):f[0].column||a(e.columnNumber)||(f[0].column=e.columnNumber+1),{mode:"stack",name:e.name,message:e.message,stack:f}):null})(t))return l}catch(e){}try{if(l=(function(t){var r=t.message.split("\n");if(r.length<4)return null;var s,a=/^\s*Line (\d+) of linked script ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,l=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?|blob)\S+)(?:: in function (\S+))?\s*$/i,p=/^\s*Line (\d+) of function script\s*$/i,d=[],m=e&&e.document&&e.document.getElementsByTagName("script"),g=[];for(var x in m)c(m,x)&&!m[x].src&&g.push(m[x]);for(var h=2;h<r.length;h+=2){var v=null;if(s=a.exec(r[h]))v={url:s[2],func:s[3],args:[],line:+s[1],column:null};else if(s=l.exec(r[h])){v={url:s[3],func:s[4],args:[],line:+s[1],column:null};var _=+s[1],E=g[s[2]-1];if(E){var w=n(v.url);if(w){var b=(w=w.join("\n")).indexOf(E.innerText);b>=0&&(v.line=_+w.substring(0,b).split("\n").length)}}}else if(s=p.exec(r[h])){var k=e.location.href.replace(/#.*$/,""),S=f(new RegExp(u(r[h+1])),[k]);v={url:k,func:"",args:[],line:S?S.line:s[1],column:null}}if(v){v.func||(v.func=o(v.url,v.line));var O=i(v.url,v.line),T=O?O[Math.floor(O.length/2)]:null;O&&T.replace(/^\s*/,"")===r[h+1].replace(/^\s*/,"")?v.context=O:v.context=[r[h+1]],d.push(v)}}return d.length?{mode:"multiline",name:t.name,message:r[0],stack:d}:null})(t))return l}catch(e){}try{if(l=g(t,r+1))return l}catch(e){}return{mode:"failed"}}return x.augmentStackTraceWithInitialElement=m,x.guessFunctionName=o,x.gatherContext=i,x.ofCaller=function(e){e=1+(null==e?0:+e);try{throw new Error}catch(t){return x(t,e+1)}},x.getSource=n,x})(),r.extendToAsynchronousCallbacks=function(){var t=function(t){var n=e[t];e[t]=function(){var e=i.call(arguments),t=e[0];return"function"==typeof t&&(e[0]=r.wrap(t)),n.apply?n.apply(this,e):n(e[0],e[1])}};t("setTimeout"),t("setInterval")},r.remoteFetching||(r.remoteFetching=!0),r.collectWindowErrors||(r.collectWindowErrors=!0),(!r.linesOfContext||r.linesOfContext<1)&&(r.linesOfContext=11),t.exports&&e.module!==t?t.exports=r:e.TraceKit=r}function c(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function a(e){return void 0===e}})("undefined"!=typeof window?window:e.commonjsGlobal),n.exports}));
//# sourceMappingURL=pkg-exception-reporting.min.js-vflFkNNnf.map