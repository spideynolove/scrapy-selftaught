function q(e){throw e}define("metaserver/static/js/deprecated_ajax/ajax",["require","exports","tslib","@dropbox/ttvc","metaserver/static/js/devtools/panels/performance/perf_hub_action_types","metaserver/static/js/deprecated_ajax/job_progress","metaserver/static/js/deprecated_ajax/util","metaserver/static/js/modules/core/persistence/storage","metaserver/static/js/modules/constants/ajax_strings","metaserver/static/js/modules/constants/page_load","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/core/assert","metaserver/static/js/modules/core/transport/fetch_utils","metaserver/static/js/modules/core/html","metaserver/static/js/modules/core/notify","metaserver/static/js/modules/core/uri","metaserver/static/js/modules/clean/csrf","metaserver/static/js/modules/clean/viewer"],(function(e,t,r,s,n,o,i,a,c,l,u,h,d,p,f,m,_,g,b){"use strict";function y(e){return e}Object.defineProperty(t,"__esModule",{value:!0}),t.SilentBackgroundBeaconRequest=t.SilentBackgroundRequest=t.BackgroundRequest=t.WebProgressRequest=t.FormWebRequest=t.WebRequestOref=t.WebRequest=t.Request=void 0,o=r.__importStar(o),a=r.__importStar(a),c=r.__importStar(c),l=r.__importStar(l),u=r.__importStar(u),h=r.__importStar(h);function v(e,t){null==e&&(e={}),null==t&&(t=[]);const r=new A(e),n=w(r,t),o=n.options().type||"POST",a=n.data(),c=n.dataType(),l=n.headers();let u=String(n.url());const h={method:o,mode:"cors",credentials:"same-origin",headers:l,signal:e.signal};"POST"===o.toUpperCase()?h.body=i.jqParam(a,!0):u=i.mergeQueryParams(u,a),l.append("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),s.incrementAjaxCount();const d=fetch(u,h);return new Promise((function(e,t){d.then(e=>e.text().then(t=>({response:e,responseText:t}))).then(({response:t,responseText:r})=>{if(!t.ok)throw new p.FetchResponseError(t,r);if("abort"===t.statusText)throw new p.FetchAbortError(t,t.statusText);if("failed"===t.statusText)throw new p.FetchFailError(t,t.statusText);e({response:t,responseText:r})}).catch(e=>t(e))})).then(({response:e,responseText:t})=>{if("json"===c)try{const r=JSON.parse(t);n.success(r,t,"success",e),n.complete(e,"success",t)}catch(t){n.error(e,"parsererror",t),n.complete(e,"parsererror")}else n.success(void 0,t,"success",e),n.complete(e,"success",t)}).catch(e=>{const t=new Response;p.errorIsFetchFailError(e)?(n.error(e.response,"failed",e),n.complete(e.response,"failed")):p.errorIsFetchResponseError(e)?(n.error(e.response,"error",e),n.complete(e.response,"error")):p.errorIsFetchAbortError(e)?(n.error(e.response,"aborted",e),n.complete(e.response,"aborted")):"AbortError"===e.name?(n.error(t,"aborted",e),n.complete(t,"aborted")):(n.error(t,"error",e),n.complete(t,"error"))}).finally(s.decrementAjaxCount),n.request(d),d}function j(e){return e.type===x.CHAINED}t.Request=v;const w=function(e,t){const r=[e];for(const e of Array.from(t.slice(0).reverse()))r.push(new e);let s=e;for(const e of r)s&&j(e)&&(e.next=s),s=e;return s};var x;(function(e){e.BASE="base",e.CHAINED="chained"})(x||(x={}));class A{constructor(e){this.type=x.BASE;const t=e||{};this.options=()=>t,this.url=()=>String(t.url||""),this.data=()=>t.data||{},this.dataType=()=>t.dataType||"text",this.headers=()=>t.headers||new Headers,this.success=t.success||y,this.error=t.error||y,this.complete=t.complete||y,this.request=y}}class E{constructor(){this.type=x.CHAINED}options(){return this.next.options()}url(){return this.next.url()}contentType(){return this.next.contentType()}data(){return this.next.data()}dataType(){return this.next.dataType()}headers(){return this.next.headers()}success(e,t,r,s){this.next.success(e,t,r,s)}error(e,t,r){this.next.error(e,t,r)}complete(e,t,r){this.next.complete(e,t,r)}request(e){this.next.request(e)}}class R extends E{constructor(){super(...arguments),this.SUPPORTED_TLDS=["dropbox.com"]}static initClass(){}data(){if(this.options().skipInjectCsrf)return this.next.data();d.assert(this._is_db_domain(),"injecting CSRF token into request to non-dropbox domain");const e={is_xhr:!0};return"GET"!==(this.options().type||"POST").toUpperCase()&&(e.t=g.readCsrfToken()),Object.assign(Object.assign({},e),this.next.data())}_is_db_domain(){const e=_.URI.parse(String(this.url())).getAuthority();if(!e)return!0;const t=e.split(".");return this.SUPPORTED_TLDS.reduce((function(e,r){const s=r.split("."),n=t.slice(-1*s.length).join(".");return e||r===n}),!1)}}R.initClass();class S extends E{data(){const e=this.next.data(),t=this.options();return t.subject_user&&!e._subject_uid&&(e._subject_uid=String(t.subject_user)),e}headers(){const e=this.next.headers(),t=this.options();return t.subject_user&&e.set("X-DROPBOX-UID",String(t.subject_user)),e}}class T extends E{headers(){var e;const t=this.next.headers(),r=this.options().teamAuthParams||{},s=r.team_id||b.Viewer.get_viewer().team_id;if(s){const{subject_user:r}=this.options(),n=this.next.data()._subject_uid,o=("number"==typeof r?r:null==r?void 0:r.id)||("string"==typeof n?parseInt(n,10):n);o&&o===(null===(e=b.Viewer.get_viewer().work_user)||void 0===e?void 0:e.id)&&t.set("X-Dropbox-Teamid",String(s))}const n=r.auth_role||b.Viewer.get_viewer().auth_role,o=r.auth_action_type||b.Viewer.get_viewer().auth_action_type;return(n||o)&&t.set("X-Dropbox-Team-Authorization",JSON.stringify({auth_role:String(n),auth_action_type:String(o)})),t}}class k extends E{data(){const e=this.next.data();return u.REQUEST_TRACING_ENABLED?Object.assign({parent_request_id:u.REQUEST_ID},e):e}headers(){const e=this.next.headers(),t=this.options().type||"POST";return u.REQUEST_TRACING_ENABLED&&"POST"===t.toUpperCase()&&e.append(n.PerfHubHeaderNames.FORCE_REQUEST_TRACING_HEADER,"ON"),e}}class O extends E{success(e,t,r,s){let n;if(!t.length)return this.next.error(s,r,new Error("AJAX Response was empty."));const o=this.options();let i=!0,a=!1;if(0===t.indexOf("err:"))n=t.substr("err:".length),["{","["].includes(n[0])&&(i=!1);else{if(0!==t.indexOf("htmlerr:"))return this.next.success(e,t,r,s);n=t.substr("htmlerr:".length),a=!0}const c=this.next.error(s,r,new Error(n));if(i&&!o.skipNotifyError){let e=n;a&&(e=new f.HTML(n)),m.Notify.error(e)}return c}error(e,t,r){return"aborted"!==t&&m.Notify.error(c.PROBLEM_COMPLETING_REQUEST),this.next.error(e,t,r)}}class C extends E{constructor(){super(),this._watch=this._watch.bind(this)}data(){this.job_id=C.generate_job_id();const e=this.next.data(),t=e._subject_uid,r=this.options(),{subject_user:s}=r;return t&&"string"==typeof t?this.uid=t:s&&(this.uid=String(s)),Object.assign({job_id:this.job_id},e)}request(e){return this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval),this.next.request(e)}success(e,t,r,s){return this.next.success(e,t,r,s)}error(e,t,r){return this.next.error(e,t,r)}complete(e,t,r){return this._stop(),o.Job.handled(this.job_id),this.next.complete(e,t,r)}_watch(){return o.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10==0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())}_stop(){clearInterval(this._watch_id),o.ModalProgress.hide()}_show_progress_modal(){if(this._modal_shown)return;this._modal_shown=!0;const e=this.options();e.progress_text&&o.ModalProgress.show(e.progress_text)}_fetch_progress(){const e={};return this.uid&&(e._subject_uid=this.uid),H({url:`/job_status/${this.job_id}`,data:e,dataType:"text",success(e,t,r,s){let n;n=0===t.indexOf("done")?"1/1":t,o.ModalProgress.update(n)},error:(e,t,r)=>{if(this._failures++,!(this._failures<3))return this._stop(),this.next.error(e,t,r)}})}static generate_job_id(){const e=(new Date).getTime().toString();let t=Math.floor(1e6*Math.random()).toString();return t=`000000${t}`.substring(t.length),e+t}}class q extends E{data(){var e;const t=h.get_uri().getQuery().oref;return!(null===(e=this.next.data())||void 0===e?void 0:e.oref)&&t?Object.assign({oref:t},this.next.data()):this.next.data()}}const I=[class extends E{constructor(){super(),this.browser_unload_handler=this.browser_unload_handler.bind(this),this.is_browser_unloading=!1}browser_unload_handler(){this.is_browser_unloading=!0}request(e){return window.addEventListener("beforeunload",this.browser_unload_handler),this.next.request(e)}error(e,t,r){return"error"===t&&this.is_browser_unloading?this.next.error(e,"aborted",new Error("unload")):this.next.error(e,t,r)}complete(e,t,r){return window.removeEventListener("beforeunload",this.browser_unload_handler),this.next.complete(e,t,r)}}],B=[S,T,R,class extends E{error(e,t,r){if(p.errorIsFetchFailError(r)||p.errorIsFetchResponseError(r)&&403===r.response.status){const e=a.SessionStorage.get("reload-timestamp"),t=(new Date).getTime();(!e||t-e>3e4)&&(a.SessionStorage.set("reload-timestamp",t),window.location.reload())}return this.next.error(e,t,r)}}],D=[class extends E{constructor(){super(),this._clear_working_msg=this._clear_working_msg.bind(this)}request(e){let t=!1;return e.catch(()=>{}).then(()=>{t=!0}),setTimeout(()=>{t||this._should_show_working_msg()&&(this._show_working_msg(),e.catch(()=>{}).then(()=>{this._clear_working_msg()}))},4e3),this.next.request(e)}_should_show_working_msg(){return m.Notify.isShown()}_show_working_msg(){return this.notification=m.Notify.success(c.STILL_WORKING),this.notification}_clear_working_msg(){if(m.Notify.isShown()&&this.notification===m.Notify.current())return m.Notify.clear()}}],P=[class extends E{error(e,t,r){return this._notify_dev(t,r),this.next.error(e,t,r)}_notify_dev(e,t){if(p.errorIsFetchFailError(t)||p.errorIsFetchResponseError(t)){const e=t.response;e.headers.get("X-Debug-Url");0}}},k,class extends E{data(){const e=this.next.data(),t={};return l.PUBLIC_MODE_OVERRIDE&&(t.public_mode_override="1"),l.COUNTRY_OVERRIDE&&(t.country_override=l.COUNTRY_OVERRIDE),Object.assign(Object.assign({},t),e)}}],F=[class extends E{constructor(){super(),this._watch=this._watch.bind(this)}data(){const e=this.next.data();this.uid=e._subject_uid?String(e._subject_uid):"";const{subject_user:t}=this.options();return!this.uid&&t&&(this.uid=String(t)),e}success(e,t,r,s){return this._is_async_job_response(t)?(this.job_id=t.split(":")[1],this._interval=1e3,this._failures=0,this._watch_count=0,this._watch_id=setInterval(this._watch,this._interval)):this.next.success(e,t,r,s)}complete(e,t,r){if(!this._is_async_job_response(r))return this.next.complete(e,t,r)}_is_async_job_response(e){if(!e||0!==e.indexOf("async_task_started:"))return!1;return e.split(":")[1].match(/^[A-Za-z0-9_\-=]*$/)}_watch(){return o.Job.peek(this.job_id)?this._stop():(this._watch_count++,this._watch_count%10==0&&(clearInterval(this._watch_id),this._interval=Math.min(Math.floor(1.5*this._interval),3e4),this._watch_id=setInterval(this._watch,this._interval)),this._show_progress_modal(),this._fetch_progress())}_stop(){clearInterval(this._watch_id),o.ModalProgress.hide()}_show_progress_modal(){if(this._modal_shown)return;this._modal_shown=!0;const{progress_text:e}=this.options();e&&o.ModalProgress.show(e)}_fetch_progress(){const e={};return this.uid&&(e._subject_uid=this.uid),G({url:`/async_task_status/${this.job_id}`,data:e,dataType:"text",success:(e,t,r,s)=>{let n=t;if(0===n.indexOf("done:"))return o.Job.handled(this.job_id),this._stop(),n=n.substr("done:".length),t=n,this.next.success(e,t,r,s),this.next.complete(s,r,t);if(0===n.indexOf("err:")){o.Job.handled(this.job_id),this._stop();const e=n.substr("err:".length);return m.Notify.error(e),this.next.error(s,r,new Error(e)),this.next.complete(s,r,t)}if(0===n.indexOf("async_task_err:")){o.Job.handled(this.job_id),this._stop();const e=n.substr("async_task_err:".length);return m.Notify.error(new f.HTML(e)),this.next.complete(s,r,t)}o.ModalProgress.update(n)},error:(e,t,r)=>{if(this._failures++,!(this._failures<3))return this._stop(),this.next.error(e,t,r),this.next.complete(e,t,"")}})}}],N=[].concat(I,D,O,P,B,F);t.WebRequest=function(e){return null==e&&(e={}),v(e,N)},t.WebRequestOref=function(e){return null==e&&(e={}),v(e,[].concat(q,N))};const U=[].concat(I,D,class extends E{success(e,t,r,s){if(!this.options().skipErrorHandling){if(!t.length)return this.next.error(s,r,new Error("AJAX Form response was empty."));if(0===t.indexOf("err:")){const e=t.substr("err:".length);return this.next.error(s,r,new Error(e))}}return this.next.success(e,t,r,s)}},P,B,F);t.FormWebRequest=function(e){return null==e&&(e={}),v(e,U)};const L=[].concat(I,D,O,P,B,C,F);function H(e){return null==e&&(e={}),v(e,[].concat(I,P,B))}t.WebProgressRequest=function(e){return null==e&&(e={}),v(e,L)},t.BackgroundRequest=H;const M=[S,T,R],V=[].concat(I,P,M);function G(e){return null==e&&(e={}),v(e,V)}t.SilentBackgroundRequest=G,t.SilentBackgroundBeaconRequest=function(e){var t;null==e&&(e={});const r=null===(t=navigator.sendBeacon)||void 0===t?void 0:t.bind(navigator);if(!r)return G(e);const s=new A(e),n=w(s,[].concat(M,k)),o=n.url(),i=(e=>{const t=new FormData;for(const r of Object.keys(e)){const s=e[r];(null===s?[]:Array.isArray(s)?s:[s]).forEach(e=>{let s;void 0!==e&&(s=!0===e?"true":!1===e?"false":"number"==typeof e?String(e):"object"==typeof e?e.toString():e,t.append(r,s))})}return t})(n.data());r(String(o),i)||console.warn(`Beacon request failed: ${o}`)}})),define("metaserver/static/js/api_v2/client_base",["require","exports","tslib","metaserver/static/js/api_v2/types","metaserver/static/js/api_v2/transport/fetch","metaserver/static/js/devtools/panels/performance/perf_hub_action_types","metaserver/static/js/modules/constants/request","metaserver/static/js/modules/core/cookies","metaserver/static/js/modules/core/uri"],(function(e,t,r,s,n,o,i,a,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApiV2ClientBase=t.DefaultApiV2Transport=void 0,i=r.__importStar(i);class l extends n.FetchAsyncTransport{}t.DefaultApiV2Transport=l;class u{constructor(e){this.uploadEndpoints=new Set(["files/alpha/upload","files/paper/create","files/paper/update","files/upload","files/upload_session/append_v2","files/upload_session/finish","files/upload_session/start","paper/cloud_docs/update","paper/desktop/spaces/upload_log","paper/desktop/upload_log","paper/docs/create","paper/docs/update"]),this.downloadEndpoints=new Set(["files/download","files/download_zip","files/export","files/get_preview","files/get_thumbnail_v2","paper/docs/download","sharing/get_shared_link_file","sharing/export_shared_link"]),this.supportedUploadEndpoints=new Set(["files/paper/create","files/paper/update","files/upload","files/upload_session/append_v2","files/upload_session/finish","files/upload_session/start","paper/cloud_docs/update","paper/desktop/spaces/upload_log","paper/desktop/upload_log","paper/docs/create","paper/docs/update"]),this.supportedDownloadEndpoints=new Set(["files/download","sharing/get_shared_link_file","sharing/export_shared_link"]),this.transport=e||new l}_upload(e,t,r,s){return this._uploadWithResponseHeaders(e,t,r,s).then(e=>e.result)}_uploadWithResponseHeaders(e,t,r,n){if(!this.uploadEndpoints.has(e))throw new Error(e+" does not use the content-upload endpoint format");if(!this.supportedUploadEndpoints.has(e))throw new Error(e+" is not in the supported list of content-upload endpoints");const o=Object.assign({[s.ApiV2HeaderNames.CsrfToken]:this.csrfToken(),[s.ApiV2HeaderNames.DropboxApiArg]:this.http_header_safe_json(t)},this._headers(n));if("string"==typeof r||void 0===r)return this.executeRpc(e,o,r,"application/octet-stream",n.signal);{const t=new Blob([r],{type:"application/octet-stream"});return this.executeRpc(e,o,t,"application/octet-stream",n.signal)}}_download(e,t,r,s){return this._downloadWithResponseHeaders(e,t,r,s).then(e=>e.result)}_downloadWithResponseHeaders(e,t,r,n){if(void 0===n||!n.hasOwnProperty("dangerouslyFetchUserContent")||!n.dangerouslyFetchUserContent)throw new Error("download requires explicit acknowledgement of the risk");if(!this.downloadEndpoints.has(e))throw new Error(e+" does not use the content-download endpoint format");if(!this.supportedDownloadEndpoints.has(e))throw new Error(e+" is not in the supported list of content-download endpoints");const o=Object.assign({[s.ApiV2HeaderNames.CsrfToken]:this.csrfToken(),[s.ApiV2HeaderNames.DropboxApiArg]:this.http_header_safe_json(t)},this._headers(r));return this.executeBinaryRpc(e,o,"","application/octet-stream",r.signal)}_rpc(e,t,r){return this._rpcWithResponseHeaders(e,t,r).then(e=>e.result)}_rpcWithResponseHeaders(e,t,r){const n=Object.assign({[s.ApiV2HeaderNames.CsrfToken]:this.csrfToken()},this._headers(r));if(this.downloadEndpoints.has(e))throw new Error(e+' does not use the rpc endpoint format. Use "download" instead');if(this.uploadEndpoints.has(e))throw new Error(e+' does not use the rpc endpoint format. Use "upload" instead');const o=JSON.stringify(t||null);return this.executeRpc(e,n,o,"application/json",r.signal)}csrfToken(){return a.Cookies.read("__Host-js_csrf")||""}executeRpc(e,t,s,n,a){return r.__awaiter(this,void 0,void 0,(function*(){const r="client-web.dropbox.com"===window.location.hostname?"client-web.dropbox.com":"www.dropbox.com";let l;i.REQUEST_TRACING_ENABLED&&(l={parent_request_id:i.REQUEST_ID},t[o.PerfHubHeaderNames.FORCE_REQUEST_TRACING_HEADER]="ON");const u=new c.URI({scheme:"https",authority:r,path:"/2/"+e,query:l});return yield this.transport.executeRpc(u,t,s,n,a)}))}executeBinaryRpc(e,t,s,n,a){return r.__awaiter(this,void 0,void 0,(function*(){const r="client-web.dropbox.com"===window.location.hostname?"client-web.dropbox.com":"www.dropbox.com";let l;i.REQUEST_TRACING_ENABLED&&(l={parent_request_id:i.REQUEST_ID},t[o.PerfHubHeaderNames.FORCE_REQUEST_TRACING_HEADER]="ON");const u=new c.URI({scheme:"https",authority:r,path:"/2/"+e,query:l});return yield this.transport.executeBinaryRpc(u,t,s,n,a)}))}http_header_safe_json(e){return JSON.stringify(e).replace(/[\u007f-\uffff]/g,(function(e){return"\\u"+("000"+e.charCodeAt(0).toString(16)).slice(-4)}))}}t.ApiV2ClientBase=u,u.prototype.ns=function(e){const t=this;return{rpc:function(r,s,n){return t._rpc(e+"/"+r,s,n)},rpcWithResponseHeaders:function(r,s,n){return t._rpcWithResponseHeaders(e+"/"+r,s,n)},upload:function(r,s,n,o){return t._upload(e+"/"+r,s,n,o)},uploadWithResponseHeaders:function(r,s,n,o){return t._uploadWithResponseHeaders(e+"/"+r,s,n,o)},download:function(r,s,n,o){return t._download(e+"/"+r,s,n,o)},downloadWithResponseHeaders:function(r,s,n,o){return t._downloadWithResponseHeaders(e+"/"+r,s,n,o)}}}})),define("metaserver/static/js/api_v2/error",["require","exports","tslib","metaserver/static/js/modules/core/exception"],(function(e,t,r,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.catchApiError=t.isRateLimitError=t.isServerError=t.isAppError=t.isAuthError=t.isBadRequestError=t.isApiError=t.RateLimitError=t.ServerError=t.AppError=t.AuthError=t.BadRequestError=t.ApiError=void 0,s=r.__importStar(s);class n{constructor(e){this.message=e}toString(){return void 0===this.message?"ApiError":this.message}static parseResponse(e,t,r,o=null){let i="";null==o&&(o=e in h?h[e]:e>=500?c:n);const a={raw:{status:e,responseBody:r},summary:null,error:{},headers:t};try{const e=JSON.parse(r)||{};a.error=e.error,a.summary=e.error_summary,i=null!=e.user_message?e.user_message.text:""}catch(e){}return 429!==e||i||s.reportException({err:new Error("Error response is missing message"),severity:s.SEVERITY.NONCRITICAL,tags:["APIV2"],exc_extra:{summary:a.summary||"",error:a.error||""}}),Object.assign(new o(i||void 0),a)}}t.ApiError=n;class o extends n{}t.BadRequestError=o;class i extends n{}t.AuthError=i;class a extends n{}t.AppError=a;class c extends n{}t.ServerError=c;class l extends n{}function u(e){return e instanceof n}t.RateLimitError=l,t.isApiError=u,t.isBadRequestError=function(e){return e instanceof o},t.isAuthError=function(e){return e instanceof i},t.isAppError=function(e){return e instanceof a},t.isServerError=function(e){return e instanceof c},t.isRateLimitError=function(e){return e instanceof l},t.catchApiError=function(e){return function(t){if(u(t))return e(t);throw t}};const h={400:o,401:i,409:a,429:l}})),define("metaserver/static/js/api_v2/transport/fetch",["require","exports","metaserver/static/js/api_v2/error","metaserver/static/js/modules/core/transport/fetch_utils","@dropbox/ttvc"],(function(e,t,r,s,n){"use strict";function o(e){const t={};return e.forEach((e,r)=>{t[r]=e}),t}Object.defineProperty(t,"__esModule",{value:!0}),t.FetchSyncTransport=t.FetchAsyncTransport=void 0;t.FetchAsyncTransport=class{executeRpc(e,t,i,a,c){return new Promise((function(l,u){return n.incrementAjaxCount(),fetch(e.toString(),{method:"POST",mode:"same-origin",credentials:"same-origin",headers:Object.assign(Object.assign({},t),{"Content-Type":a}),body:i,signal:c}).then(e=>e.text().then(t=>({response:e,responseText:t}))).then(({response:e,responseText:t})=>{if(e.ok)return{response:e,responseText:t};throw new s.FetchResponseError(e,t)}).then(({response:e,responseText:t})=>l({headers:o(e.headers),result:JSON.parse(t)})).catch(e=>s.errorIsFetchResponseError(e)?u(r.ApiError.parseResponse(e.response.status,o(e.response.headers),e.message)):u(r.ApiError.parseResponse(0,{},""))).finally(n.decrementAjaxCount)}))}executeBinaryRpc(e,t,i,a,c){return new Promise((function(l,u){return n.incrementAjaxCount(),fetch(e.toString(),{method:"POST",mode:"same-origin",credentials:"same-origin",headers:Object.assign(Object.assign({},t),{"Content-Type":a}),body:i,signal:c}).then(e=>e.ok?e.arrayBuffer().then(t=>({response:e,responseData:t})):e.text().then(t=>{throw new s.FetchResponseError(e,t)})).then(({response:e,responseData:t})=>l({headers:o(e.headers),result:t})).catch(e=>s.errorIsFetchResponseError(e)?u(r.ApiError.parseResponse(e.response.status,o(e.response.headers),e.message)):u(r.ApiError.parseResponse(0,{},""))).finally(n.decrementAjaxCount)}))}};t.FetchSyncTransport=class{executeRpc(e,t,r,s,o){return n.incrementAjaxCount(),fetch(e.toString(),{method:"POST",mode:"same-origin",credentials:"same-origin",headers:Object.assign(Object.assign({},t),{"Content-Type":s}),keepalive:!0,body:r,signal:o}).finally(n.decrementAjaxCount),Promise.resolve({headers:{},result:{}})}executeBinaryRpc(e,t,r,s,o){return n.incrementAjaxCount(),fetch(e.toString(),{method:"POST",mode:"same-origin",credentials:"same-origin",headers:Object.assign(Object.assign({},t),{"Content-Type":s}),keepalive:!0,body:r,signal:o}).finally(n.decrementAjaxCount),Promise.resolve({headers:{},result:new ArrayBuffer(0)})}}})),define("metaserver/static/js/api_v2/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UnionStruct=t.UnionScalar=t.Union=t.TeamAuthRequestActionType=t.TeamAuthRequestRole=t.ApiV2HeaderNames=void 0,(function(e){e.DropboxApiArg="Dropbox-API-Arg",e.DropboxApiSelectAdmin="Dropbox-API-Select-Admin",e.DropboxPathRoot="X-Dropbox-Path-Root",e.DropboxUid="X-Dropbox-Uid",e.DropboxTeamId="X-Dropbox-Teamid",e.DropboxTeamAuthorization="X-Dropbox-Team-Authorization",e.CsrfToken="X-CSRF-Token"})(t.ApiV2HeaderNames||(t.ApiV2HeaderNames={})),(function(e){e[e.TeamAdminRole=0]="TeamAdminRole",e[e.MTARole=1]="MTARole",e[e.FederationAdminRole=2]="FederationAdminRole"})(t.TeamAuthRequestRole||(t.TeamAuthRequestRole={})),(function(e){e[e.AdminAction=0]="AdminAction",e[e.AssumeAction=1]="AssumeAction",e[e.OnBehalfOfAction=2]="OnBehalfOfAction"})(t.TeamAuthRequestActionType||(t.TeamAuthRequestActionType={}));class r{constructor(e,t,r){this.type=e,this.value=t,this.isScalar=r}static parse(e){const t=e[".tag"];return 2===Object.keys(e).length&&null!=e[t]?new s(t,e[t]):new n(t,e)}}t.Union=r;class s extends r{constructor(e,t=null){super(e,t,!0)}toJSON(){const e={".tag":this.type};return null!=this.value&&(e[this.type]=this.value),e}}t.UnionScalar=s;class n extends r{constructor(e,t={}){super(e,t,!1)}toJSON(){return Object.assign({".tag":this.type},this.value||{})}}t.UnionStruct=n})),define("metaserver/static/js/api_v2/noauth_client",["require","exports","metaserver/static/js/api_v2/types","metaserver/static/js/api_v2/client_base","metaserver/static/js/modules/constants/request"],(function(e,t,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoAuthApiV2Client=void 0;class o extends s.ApiV2ClientBase{constructor(e){super(e)}_headers(e){return Object.assign({[r.ApiV2HeaderNames.DropboxUid]:String(n.LOGGED_OUT_X_DROPBOX_UID)},e.headers)}}t.NoAuthApiV2Client=o})),define("metaserver/static/js/api_v2/user_client",["require","exports","metaserver/static/js/api_v2/types","metaserver/static/js/api_v2/client_base","metaserver/static/js/modules/clean/viewer"],(function(e,t,r,s,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UserApiV2Client=void 0;class o extends s.ApiV2ClientBase{constructor(e){super(e)}_headers(e){const t=n.Viewer.get_viewer().get_user_by_id(e.subjectUserId);return Object.assign({[r.ApiV2HeaderNames.DropboxUid]:String(t.id),[r.ApiV2HeaderNames.DropboxPathRoot]:String(t.root_ns_id)},e.headers)}}t.UserApiV2Client=o})),define("metaserver/static/js/modules/clean/active_user",["require","exports","metaserver/static/js/modules/clean/viewer"],(function(e,t,r){"use strict";function s(){if(window.RUNNING_IN_EDISON)return window.EDISON_ACTIVE_USER_ID;if(window.ensemble&&window.ensemble.viewer){const e=window.ensemble.viewer.getActiveUser();if(e)return e.userId}}function n(){const e=s();if("number"!=typeof e)throw new Error("could not get active user id");return e}Object.defineProperty(t,"__esModule",{value:!0}),t.mustGetActiveUser=t.getActiveUser=t.mustGetActiveUserId=t.getActiveUserId=void 0,t.getActiveUserId=s,t.mustGetActiveUserId=n,t.getActiveUser=function(){const e=s();return e?r.Viewer.get_viewer().get_user_by_id(e):void 0},t.mustGetActiveUser=function(){const e=n();return r.Viewer.get_viewer().get_user_by_id(e)}})),define("metaserver/static/js/modules/core/transport/fetch_utils",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.errorIsFetchResponseError=t.errorIsFetchFailError=t.errorIsFetchAbortError=t.FetchResponseError=t.FetchFailError=t.FetchAbortError=void 0;class r extends Error{constructor(e,t){super(t),this.name="FetchAbortError",this.response=e}}t.FetchAbortError=r;class s extends Error{constructor(e,t){super(t),this.name="FetchFailError",this.response=e}}t.FetchFailError=s;class n extends Error{constructor(e,t){super(t),this.name="FetchResponseError",this.response=e}}t.FetchResponseError=n,t.errorIsFetchAbortError=function(e){return"FetchAbortError"===e.name},t.errorIsFetchFailError=function(e){return"FetchFailError"===e.name},t.errorIsFetchResponseError=function(e){return"FetchResponseError"===e.name}})),define("metaserver/static/js/prod_assets_web_modules/reselect",["exports"],(function(e){"use strict";function t(e,t){return e===t}function r(e,t,r){if(null===t||null===r||t.length!==r.length)return!1;for(var s=t.length,n=0;n<s;n++)if(!e(t[n],r[n]))return!1;return!0}function s(e){var s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t,n=null,o=null;return function(){return r(s,n,arguments)||(o=e.apply(null,arguments)),n=arguments,o}}function n(e){var t=Array.isArray(e[0])?e[0]:e;if(!t.every((function(e){return"function"==typeof e}))){var r=t.map((function(e){return typeof e})).join(", ");throw new Error("Selector creators expect all input-selectors to be functions, instead received the following types: ["+r+"]")}return t}function o(e){for(var t=arguments.length,r=Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return function(){for(var t=arguments.length,o=Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=0,c=o.pop(),l=n(o),u=e.apply(void 0,[function(){return a++,c.apply(null,arguments)}].concat(r)),h=s((function(){for(var e=[],t=l.length,r=0;r<t;r++)e.push(l[r].apply(null,arguments));return u.apply(null,e)}));return h.resultFunc=c,h.recomputations=function(){return a},h.resetRecomputations=function(){return a=0},h}}var i=o(s);e.createSelector=i,e.createSelectorCreator=o,e.createStructuredSelector=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if("object"!=typeof e)throw new Error("createStructuredSelector expects first argument to be an object where each property is a selector, instead received a "+typeof e);var r=Object.keys(e);return t(r.map((function(t){return e[t]})),(function(){for(var e=arguments.length,t=Array(e),s=0;s<e;s++)t[s]=arguments[s];return t.reduce((function(e,t,s){return e[r[s]]=t,e}),{})}))},e.defaultMemoize=s,Object.defineProperty(e,"__esModule",{value:!0})}));var s=void 0,u=!1,sjcl={cipher:{},hash:{},keyexchange:{},mode:{},misc:{},codec:{},exception:{corrupt:function(e){this.toString=function(){return"CORRUPT: "+this.message},this.message=e},invalid:function(e){this.toString=function(){return"INVALID: "+this.message},this.message=e},bug:function(e){this.toString=function(){return"BUG: "+this.message},this.message=e},notReady:function(e){this.toString=function(){return"NOT READY: "+this.message},this.message=e}}};function w(e,t,r){4!==t.length&&q(new sjcl.exception.invalid("invalid aes block size"));var s=e.b[r],n=t[0]^s[0],o=t[r?3:1]^s[1],i=t[2]^s[2];t=t[r?1:3]^s[3];var a,c,l,u,h=s.length/4-2,d=4,p=[0,0,0,0];e=(a=e.k[r])[0];var f=a[1],m=a[2],_=a[3],g=a[4];for(u=0;u<h;u++)a=e[n>>>24]^f[o>>16&255]^m[i>>8&255]^_[255&t]^s[d],c=e[o>>>24]^f[i>>16&255]^m[t>>8&255]^_[255&n]^s[d+1],l=e[i>>>24]^f[t>>16&255]^m[n>>8&255]^_[255&o]^s[d+2],t=e[t>>>24]^f[n>>16&255]^m[o>>8&255]^_[255&i]^s[d+3],d+=4,n=a,o=c,i=l;for(u=0;4>u;u++)p[r?3&-u:u]=g[n>>>24]<<24^g[o>>16&255]<<16^g[i>>8&255]<<8^g[255&t]^s[d++],a=n,n=o,o=i,i=t,t=a;return p}function x(e,t){var r,s,n,o=t.slice(0),i=e.r,a=e.b,c=i[0],l=i[1],u=i[2],h=i[3],d=i[4],p=i[5],f=i[6],m=i[7];for(r=0;64>r;r++)16>r?s=o[r]:(s=o[r+1&15],n=o[r+14&15],s=o[15&r]=(s>>>7^s>>>18^s>>>3^s<<25^s<<14)+(n>>>17^n>>>19^n>>>10^n<<15^n<<13)+o[15&r]+o[r+9&15]|0),s=s+m+(d>>>6^d>>>11^d>>>25^d<<26^d<<21^d<<7)+(f^d&(p^f))+a[r],m=f,f=p,p=d,d=h+s|0,h=u,u=l,c=s+((l=c)&u^h&(l^u))+(l>>>2^l>>>13^l>>>22^l<<30^l<<19^l<<10)|0;i[0]=i[0]+c|0,i[1]=i[1]+l|0,i[2]=i[2]+u|0,i[3]=i[3]+h|0,i[4]=i[4]+d|0,i[5]=i[5]+p|0,i[6]=i[6]+f|0,i[7]=i[7]+m|0}function C(e,t){var r,s=sjcl.random.w[e],n=[];for(r in s)s.hasOwnProperty(r)&&n.push(s[r]);for(r=0;r<n.length;r++)n[r](t)}function E(e){"undefined"!=typeof window&&window.performance&&"function"==typeof window.performance.now?sjcl.random.addEntropy(window.performance.now(),e,"loadtime"):sjcl.random.addEntropy((new Date).valueOf(),e,"loadtime")}function A(e){e.b=B(e).concat(B(e)),e.A=new sjcl.cipher.aes(e.b)}function B(e){for(var t=0;4>t&&(e.f[t]=e.f[t]+1|0,!e.f[t]);t++);return e.A.encrypt(e.f)}function D(e,t){return function(){t.apply(e,arguments)}}"undefined"!=typeof module&&module.exports&&(module.exports=sjcl),"function"==typeof define&&define("metaserver/static/js/prod_assets_web_modules/sjcl",[],(function(){return sjcl})),sjcl.cipher.aes=function(e){this.k[0][0][0]||this.D();var t,r,s,n,o=this.k[0][4],i=this.k[1],a=1;for(4!==(t=e.length)&&6!==t&&8!==t&&q(new sjcl.exception.invalid("invalid aes key size")),this.b=[s=e.slice(0),n=[]],e=t;e<4*t+28;e++)r=s[e-1],(0==e%t||8===t&&4==e%t)&&(r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[255&r],0==e%t&&(r=r<<8^r>>>24^a<<24,a=a<<1^283*(a>>7))),s[e]=s[e-t]^r;for(t=0;e;t++,e--)r=s[3&t?e:e-4],n[t]=4>=e||4>t?r:i[0][o[r>>>24]]^i[1][o[r>>16&255]]^i[2][o[r>>8&255]]^i[3][o[255&r]]},sjcl.cipher.aes.prototype={encrypt:function(e){return w(this,e,0)},decrypt:function(e){return w(this,e,1)},k:[[[],[],[],[],[]],[[],[],[],[],[]]],D:function(){var e,t,r,s,n,o,i,a=this.k[0],c=this.k[1],l=a[4],u=c[4],h=[],d=[];for(e=0;256>e;e++)d[(h[e]=e<<1^283*(e>>7))^e]=e;for(t=r=0;!l[t];t^=s||1,r=d[r]||1)for(o=(o=r^r<<1^r<<2^r<<3^r<<4)>>8^255&o^99,l[t]=o,u[o]=t,i=16843009*(n=h[e=h[s=h[t]]])^65537*e^257*s^16843008*t,n=257*h[o]^16843008*o,e=0;4>e;e++)a[e][t]=n=n<<24^n>>>8,c[e][o]=i=i<<24^i>>>8;for(e=0;5>e;e++)a[e]=a[e].slice(0),c[e]=c[e].slice(0)}},sjcl.bitArray={bitSlice:function(e,t,r){return e=sjcl.bitArray.P(e.slice(t/32),32-(31&t)).slice(1),r===s?e:sjcl.bitArray.clamp(e,r-t)},extract:function(e,t,r){var s=Math.floor(-t-r&31);return(-32&(t+r-1^t)?e[t/32|0]<<32-s^e[t/32+1|0]>>>s:e[t/32|0]>>>s)&(1<<r)-1},concat:function(e,t){if(0===e.length||0===t.length)return e.concat(t);var r=e[e.length-1],s=sjcl.bitArray.getPartial(r);return 32===s?e.concat(t):sjcl.bitArray.P(t,s,0|r,e.slice(0,e.length-1))},bitLength:function(e){var t=e.length;return 0===t?0:32*(t-1)+sjcl.bitArray.getPartial(e[t-1])},clamp:function(e,t){if(32*e.length<t)return e;var r=(e=e.slice(0,Math.ceil(t/32))).length;return t&=31,0<r&&t&&(e[r-1]=sjcl.bitArray.partial(t,e[r-1]&2147483648>>t-1,1)),e},partial:function(e,t,r){return 32===e?t:(r?0|t:t<<32-e)+1099511627776*e},getPartial:function(e){return Math.round(e/1099511627776)||32},equal:function(e,t){if(sjcl.bitArray.bitLength(e)!==sjcl.bitArray.bitLength(t))return u;var r,s=0;for(r=0;r<e.length;r++)s|=e[r]^t[r];return 0===s},P:function(e,t,r,n){var o;for(o=0,n===s&&(n=[]);32<=t;t-=32)n.push(r),r=0;if(0===t)return n.concat(e);for(o=0;o<e.length;o++)n.push(r|e[o]>>>t),r=e[o]<<32-t;return o=e.length?e[e.length-1]:0,e=sjcl.bitArray.getPartial(o),n.push(sjcl.bitArray.partial(t+e&31,32<t+e?r:n.pop(),1)),n},l:function(e,t){return[e[0]^t[0],e[1]^t[1],e[2]^t[2],e[3]^t[3]]},byteswapM:function(e){var t,r;for(t=0;t<e.length;++t)r=e[t],e[t]=r>>>24|r>>>8&65280|(65280&r)<<8|r<<24;return e}},sjcl.codec.utf8String={fromBits:function(e){var t,r,s="",n=sjcl.bitArray.bitLength(e);for(t=0;t<n/8;t++)0==(3&t)&&(r=e[t/4]),s+=String.fromCharCode(r>>>24),r<<=8;return decodeURIComponent(escape(s))},toBits:function(e){e=unescape(encodeURIComponent(e));var t,r=[],s=0;for(t=0;t<e.length;t++)s=s<<8|e.charCodeAt(t),3==(3&t)&&(r.push(s),s=0);return 3&t&&r.push(sjcl.bitArray.partial(8*(3&t),s)),r}},sjcl.codec.hex={fromBits:function(e){var t,r="";for(t=0;t<e.length;t++)r+=(0xf00000000000+(0|e[t])).toString(16).substr(4);return r.substr(0,sjcl.bitArray.bitLength(e)/4)},toBits:function(e){var t,r,s=[];for(r=(e=e.replace(/\s|0x/g,"")).length,e+="00000000",t=0;t<e.length;t+=8)s.push(0^parseInt(e.substr(t,8),16));return sjcl.bitArray.clamp(s,4*r)}},sjcl.codec.base64={J:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fromBits:function(e,t,r){var s="",n=0,o=sjcl.codec.base64.J,i=0,a=sjcl.bitArray.bitLength(e);for(r&&(o=o.substr(0,62)+"-_"),r=0;6*s.length<a;)s+=o.charAt((i^e[r]>>>n)>>>26),6>n?(i=e[r]<<6-n,n+=26,r++):(i<<=6,n-=6);for(;3&s.length&&!t;)s+="=";return s},toBits:function(e,t){e=e.replace(/\s|=/g,"");var r,s,n=[],o=0,i=sjcl.codec.base64.J,a=0;for(t&&(i=i.substr(0,62)+"-_"),r=0;r<e.length;r++)0>(s=i.indexOf(e.charAt(r)))&&q(new sjcl.exception.invalid("this isn't base64!")),26<o?(o-=26,n.push(a^s>>>o),a=s<<32-o):a^=s<<32-(o+=6);return 56&o&&n.push(sjcl.bitArray.partial(56&o,a,1)),n}},sjcl.codec.base64url={fromBits:function(e){return sjcl.codec.base64.fromBits(e,1,1)},toBits:function(e){return sjcl.codec.base64.toBits(e,1)}},sjcl.hash.sha256=function(e){this.b[0]||this.D(),e?(this.r=e.r.slice(0),this.o=e.o.slice(0),this.h=e.h):this.reset()},sjcl.hash.sha256.hash=function(e){return(new sjcl.hash.sha256).update(e).finalize()},sjcl.hash.sha256.prototype={blockSize:512,reset:function(){return this.r=this.N.slice(0),this.o=[],this.h=0,this},update:function(e){"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e));var t,r=this.o=sjcl.bitArray.concat(this.o,e);for(t=this.h,e=this.h=t+sjcl.bitArray.bitLength(e),t=512+t&-512;t<=e;t+=512)x(this,r.splice(0,16));return this},finalize:function(){var e,t=this.o,r=this.r;for(e=(t=sjcl.bitArray.concat(t,[sjcl.bitArray.partial(1,1)])).length+2;15&e;e++)t.push(0);for(t.push(Math.floor(this.h/4294967296)),t.push(0|this.h);t.length;)x(this,t.splice(0,16));return this.reset(),r},N:[],b:[],D:function(){function e(e){return 4294967296*(e-Math.floor(e))|0}var t,r=0,s=2;e:for(;64>r;s++){for(t=2;t*t<=s;t++)if(0==s%t)continue e;8>r&&(this.N[r]=e(Math.pow(s,.5))),this.b[r]=e(Math.pow(s,1/3)),r++}}},sjcl.mode.ccm={name:"ccm",encrypt:function(e,t,r,s,n){var o,i=t.slice(0),a=sjcl.bitArray,c=a.bitLength(r)/8,l=a.bitLength(i)/8;for(n=n||64,s=s||[],7>c&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),o=2;4>o&&l>>>8*o;o++);return o<15-c&&(o=15-c),r=a.clamp(r,8*(15-o)),t=sjcl.mode.ccm.L(e,t,r,s,n,o),i=sjcl.mode.ccm.p(e,i,r,t,n,o),a.concat(i.data,i.tag)},decrypt:function(e,t,r,s,n){n=n||64,s=s||[];var o=sjcl.bitArray,i=o.bitLength(r)/8,a=o.bitLength(t),c=o.clamp(t,a-n),l=o.bitSlice(t,a-n);a=(a-n)/8;for(7>i&&q(new sjcl.exception.invalid("ccm: iv must be at least 7 bytes")),t=2;4>t&&a>>>8*t;t++);return t<15-i&&(t=15-i),r=o.clamp(r,8*(15-t)),c=sjcl.mode.ccm.p(e,c,r,l,n,t),e=sjcl.mode.ccm.L(e,c.data,r,s,n,t),o.equal(c.tag,e)||q(new sjcl.exception.corrupt("ccm: tag doesn't match")),c.data},L:function(e,t,r,s,n,o){var i=[],a=sjcl.bitArray,c=a.l;if(((n/=8)%2||4>n||16<n)&&q(new sjcl.exception.invalid("ccm: invalid tag length")),(4294967295<s.length||4294967295<t.length)&&q(new sjcl.exception.bug("ccm: can't deal with 4GiB or more data")),o=[a.partial(8,(s.length?64:0)|n-2<<2|o-1)],(o=a.concat(o,r))[3]|=a.bitLength(t)/8,o=e.encrypt(o),s.length)for(65279>=(r=a.bitLength(s)/8)?i=[a.partial(16,r)]:4294967295>=r&&(i=a.concat([a.partial(16,65534)],[r])),i=a.concat(i,s),s=0;s<i.length;s+=4)o=e.encrypt(c(o,i.slice(s,s+4).concat([0,0,0])));for(s=0;s<t.length;s+=4)o=e.encrypt(c(o,t.slice(s,s+4).concat([0,0,0])));return a.clamp(o,8*n)},p:function(e,t,r,s,n,o){var i,a=sjcl.bitArray;i=a.l;var c=t.length,l=a.bitLength(t);if(r=a.concat([a.partial(8,o-1)],r).concat([0,0,0]).slice(0,4),s=a.bitSlice(i(s,e.encrypt(r)),0,n),!c)return{tag:s,data:[]};for(i=0;i<c;i+=4)r[3]++,n=e.encrypt(r),t[i]^=n[0],t[i+1]^=n[1],t[i+2]^=n[2],t[i+3]^=n[3];return{tag:s,data:a.clamp(t,l)}}},sjcl.mode.ocb2={name:"ocb2",encrypt:function(e,t,r,s,n,o){128!==sjcl.bitArray.bitLength(r)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits"));var i,a=sjcl.mode.ocb2.H,c=sjcl.bitArray,l=c.l,u=[0,0,0,0];r=a(e.encrypt(r));var h,d=[];for(s=s||[],n=n||64,i=0;i+4<t.length;i+=4)u=l(u,h=t.slice(i,i+4)),d=d.concat(l(r,e.encrypt(l(r,h)))),r=a(r);return h=t.slice(i),t=c.bitLength(h),i=e.encrypt(l(r,[0,0,0,t])),h=c.clamp(l(h.concat([0,0,0]),i),t),u=l(u,l(h.concat([0,0,0]),i)),u=e.encrypt(l(u,l(r,a(r)))),s.length&&(u=l(u,o?s:sjcl.mode.ocb2.pmac(e,s))),d.concat(c.concat(h,c.clamp(u,n)))},decrypt:function(e,t,r,s,n,o){128!==sjcl.bitArray.bitLength(r)&&q(new sjcl.exception.invalid("ocb iv must be 128 bits")),n=n||64;var i,a,c=sjcl.mode.ocb2.H,l=sjcl.bitArray,u=l.l,h=[0,0,0,0],d=c(e.encrypt(r)),p=sjcl.bitArray.bitLength(t)-n,f=[];for(s=s||[],r=0;r+4<p/32;r+=4)i=u(d,e.decrypt(u(d,t.slice(r,r+4)))),h=u(h,i),f=f.concat(i),d=c(d);return a=p-32*r,i=e.encrypt(u(d,[0,0,0,a])),i=u(i,l.clamp(t.slice(r),a).concat([0,0,0])),h=u(h,i),h=e.encrypt(u(h,u(d,c(d)))),s.length&&(h=u(h,o?s:sjcl.mode.ocb2.pmac(e,s))),l.equal(l.clamp(h,n),l.bitSlice(t,p))||q(new sjcl.exception.corrupt("ocb: tag doesn't match")),f.concat(l.clamp(i,a))},pmac:function(e,t){var r,s=sjcl.mode.ocb2.H,n=sjcl.bitArray,o=n.l,i=[0,0,0,0],a=o(a=e.encrypt([0,0,0,0]),s(s(a)));for(r=0;r+4<t.length;r+=4)a=s(a),i=o(i,e.encrypt(o(a,t.slice(r,r+4))));return r=t.slice(r),128>n.bitLength(r)&&(a=o(a,s(a)),r=n.concat(r,[-2147483648,0,0,0])),i=o(i,r),e.encrypt(o(s(o(a,s(a))),i))},H:function(e){return[e[0]<<1^e[1]>>>31,e[1]<<1^e[2]>>>31,e[2]<<1^e[3]>>>31,e[3]<<1^135*(e[0]>>>31)]}},sjcl.mode.gcm={name:"gcm",encrypt:function(e,t,r,s,n){var o=t.slice(0);return t=sjcl.bitArray,s=s||[],e=sjcl.mode.gcm.p(!0,e,o,s,r,n||128),t.concat(e.data,e.tag)},decrypt:function(e,t,r,s,n){var o=t.slice(0),i=sjcl.bitArray,a=i.bitLength(o);return s=s||[],(n=n||128)<=a?(t=i.bitSlice(o,a-n),o=i.bitSlice(o,0,a-n)):(t=o,o=[]),e=sjcl.mode.gcm.p(u,e,o,s,r,n),i.equal(e.tag,t)||q(new sjcl.exception.corrupt("gcm: tag doesn't match")),e.data},Z:function(e,t){var r,s,n,o,i,a=sjcl.bitArray.l;for(n=[0,0,0,0],o=t.slice(0),r=0;128>r;r++){for((s=0!=(e[Math.floor(r/32)]&1<<31-r%32))&&(n=a(n,o)),i=0!=(1&o[3]),s=3;0<s;s--)o[s]=o[s]>>>1|(1&o[s-1])<<31;o[0]>>>=1,i&&(o[0]^=-520093696)}return n},g:function(e,t,r){var s,n=r.length;for(t=t.slice(0),s=0;s<n;s+=4)t[0]^=4294967295&r[s],t[1]^=4294967295&r[s+1],t[2]^=4294967295&r[s+2],t[3]^=4294967295&r[s+3],t=sjcl.mode.gcm.Z(t,e);return t},p:function(e,t,r,s,n,o){var i,a,c,l,u,h,d,p,f=sjcl.bitArray;for(h=r.length,d=f.bitLength(r),p=f.bitLength(s),a=f.bitLength(n),i=t.encrypt([0,0,0,0]),96===a?(n=n.slice(0),n=f.concat(n,[1])):(n=sjcl.mode.gcm.g(i,[0,0,0,0],n),n=sjcl.mode.gcm.g(i,n,[0,0,Math.floor(a/4294967296),4294967295&a])),a=sjcl.mode.gcm.g(i,[0,0,0,0],s),u=n.slice(0),s=a.slice(0),e||(s=sjcl.mode.gcm.g(i,a,r)),l=0;l<h;l+=4)u[3]++,c=t.encrypt(u),r[l]^=c[0],r[l+1]^=c[1],r[l+2]^=c[2],r[l+3]^=c[3];return r=f.clamp(r,d),e&&(s=sjcl.mode.gcm.g(i,a,r)),e=[Math.floor(p/4294967296),4294967295&p,Math.floor(d/4294967296),4294967295&d],s=sjcl.mode.gcm.g(i,s,e),c=t.encrypt(n),s[0]^=c[0],s[1]^=c[1],s[2]^=c[2],s[3]^=c[3],{tag:f.bitSlice(s,0,o),data:r}}},sjcl.misc.hmac=function(e,t){this.M=t=t||sjcl.hash.sha256;var r,s=[[],[]],n=t.prototype.blockSize/32;for(this.n=[new t,new t],e.length>n&&(e=t.hash(e)),r=0;r<n;r++)s[0][r]=909522486^e[r],s[1][r]=1549556828^e[r];this.n[0].update(s[0]),this.n[1].update(s[1]),this.G=new t(this.n[0])},sjcl.misc.hmac.prototype.encrypt=sjcl.misc.hmac.prototype.mac=function(e){return this.Q&&q(new sjcl.exception.invalid("encrypt on already updated hmac called!")),this.update(e),this.digest(e)},sjcl.misc.hmac.prototype.reset=function(){this.G=new this.M(this.n[0]),this.Q=u},sjcl.misc.hmac.prototype.update=function(e){this.Q=!0,this.G.update(e)},sjcl.misc.hmac.prototype.digest=function(){var e=this.G.finalize();e=new this.M(this.n[1]).update(e).finalize();return this.reset(),e},sjcl.misc.pbkdf2=function(e,t,r,s,n){r=r||1e3,(0>s||0>r)&&q(sjcl.exception.invalid("invalid params to pbkdf2")),"string"==typeof e&&(e=sjcl.codec.utf8String.toBits(e)),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),e=new(n=n||sjcl.misc.hmac)(e);var o,i,a,c,l=[],u=sjcl.bitArray;for(c=1;32*l.length<(s||1);c++){for(n=o=e.encrypt(u.concat(t,[c])),i=1;i<r;i++)for(o=e.encrypt(o),a=0;a<o.length;a++)n[a]^=o[a];l=l.concat(n)}return s&&(l=u.clamp(l,s)),l},sjcl.prng=function(e){this.c=[new sjcl.hash.sha256],this.i=[0],this.F=0,this.s={},this.C=0,this.K={},this.O=this.d=this.j=this.W=0,this.b=[0,0,0,0,0,0,0,0],this.f=[0,0,0,0],this.A=s,this.B=e,this.q=u,this.w={progress:{},seeded:{}},this.m=this.V=0,this.t=1,this.u=2,this.S=65536,this.I=[0,48,64,96,128,192,256,384,512,768,1024],this.T=3e4,this.R=80},sjcl.prng.prototype={randomWords:function(e,t){var r,s,n=[];if((r=this.isReady(t))===this.m&&q(new sjcl.exception.notReady("generator isn't seeded")),r&this.u){r=!(r&this.t),s=[];var o,i=0;for(this.O=s[0]=(new Date).valueOf()+this.T,o=0;16>o;o++)s.push(4294967296*Math.random()|0);for(o=0;o<this.c.length&&(s=s.concat(this.c[o].finalize()),i+=this.i[o],this.i[o]=0,r||!(this.F&1<<o));o++);for(this.F>=1<<this.c.length&&(this.c.push(new sjcl.hash.sha256),this.i.push(0)),this.d-=i,i>this.j&&(this.j=i),this.F++,this.b=sjcl.hash.sha256.hash(this.b.concat(s)),this.A=new sjcl.cipher.aes(this.b),r=0;4>r&&(this.f[r]=this.f[r]+1|0,!this.f[r]);r++);}for(r=0;r<e;r+=4)0==(r+1)%this.S&&A(this),s=B(this),n.push(s[0],s[1],s[2],s[3]);return A(this),n.slice(0,e)},setDefaultParanoia:function(e,t){0===e&&"Setting paranoia=0 will ruin your security; use it only for testing"!==t&&q("Setting paranoia=0 will ruin your security; use it only for testing"),this.B=e},addEntropy:function(e,t,r){r=r||"user";var n,o,i=(new Date).valueOf(),a=this.s[r],c=this.isReady(),l=0;switch((n=this.K[r])===s&&(n=this.K[r]=this.W++),a===s&&(a=this.s[r]=0),this.s[r]=(this.s[r]+1)%this.c.length,typeof e){case"number":t===s&&(t=1),this.c[a].update([n,this.C++,1,t,i,1,0|e]);break;case"object":if("[object Uint32Array]"===(r=Object.prototype.toString.call(e))){for(o=[],r=0;r<e.length;r++)o.push(e[r]);e=o}else for("[object Array]"!==r&&(l=1),r=0;r<e.length&&!l;r++)"number"!=typeof e[r]&&(l=1);if(!l){if(t===s)for(r=t=0;r<e.length;r++)for(o=e[r];0<o;)t++,o>>>=1;this.c[a].update([n,this.C++,2,t,i,e.length].concat(e))}break;case"string":t===s&&(t=e.length),this.c[a].update([n,this.C++,3,t,i,e.length]),this.c[a].update(e);break;default:l=1}l&&q(new sjcl.exception.bug("random: addEntropy only supports number, array of numbers or string")),this.i[a]+=t,this.d+=t,c===this.m&&(this.isReady()!==this.m&&C("seeded",Math.max(this.j,this.d)),C("progress",this.getProgress()))},isReady:function(e){return e=this.I[e!==s?e:this.B],this.j&&this.j>=e?this.i[0]>this.R&&(new Date).valueOf()>this.O?this.u|this.t:this.t:this.d>=e?this.u|this.m:this.m},getProgress:function(e){return e=this.I[e||this.B],this.j>=e?1:this.d>e?1:this.d/e},startCollectors:function(){this.q||(this.a={loadTimeCollector:D(this,this.aa),mouseCollector:D(this,this.ba),keyboardCollector:D(this,this.$),accelerometerCollector:D(this,this.U),touchCollector:D(this,this.da)},window.addEventListener?(window.addEventListener("load",this.a.loadTimeCollector,u),window.addEventListener("mousemove",this.a.mouseCollector,u),window.addEventListener("keypress",this.a.keyboardCollector,u),window.addEventListener("devicemotion",this.a.accelerometerCollector,u),window.addEventListener("touchmove",this.a.touchCollector,u)):document.attachEvent?(document.attachEvent("onload",this.a.loadTimeCollector),document.attachEvent("onmousemove",this.a.mouseCollector),document.attachEvent("keypress",this.a.keyboardCollector)):q(new sjcl.exception.bug("can't attach event")),this.q=!0)},stopCollectors:function(){this.q&&(window.removeEventListener?(window.removeEventListener("load",this.a.loadTimeCollector,u),window.removeEventListener("mousemove",this.a.mouseCollector,u),window.removeEventListener("keypress",this.a.keyboardCollector,u),window.removeEventListener("devicemotion",this.a.accelerometerCollector,u),window.removeEventListener("touchmove",this.a.touchCollector,u)):document.detachEvent&&(document.detachEvent("onload",this.a.loadTimeCollector),document.detachEvent("onmousemove",this.a.mouseCollector),document.detachEvent("keypress",this.a.keyboardCollector)),this.q=u)},addEventListener:function(e,t){this.w[e][this.V++]=t},removeEventListener:function(e,t){var r,s,n=this.w[e],o=[];for(s in n)n.hasOwnProperty(s)&&n[s]===t&&o.push(s);for(r=0;r<o.length;r++)delete n[s=o[r]]},$:function(){E(1)},ba:function(e){var t,r;try{t=e.x||e.clientX||e.offsetX||0,r=e.y||e.clientY||e.offsetY||0}catch(e){r=t=0}0!=t&&0!=r&&sjcl.random.addEntropy([t,r],2,"mouse"),E(0)},da:function(e){e=e.touches[0]||e.changedTouches[0],sjcl.random.addEntropy([e.pageX||e.clientX,e.pageY||e.clientY],1,"touch"),E(0)},aa:function(){E(2)},U:function(e){if(e=e.accelerationIncludingGravity.x||e.accelerationIncludingGravity.y||e.accelerationIncludingGravity.z,window.orientation){var t=window.orientation;"number"==typeof t&&sjcl.random.addEntropy(t,1,"accelerometer")}e&&sjcl.random.addEntropy(e,2,"accelerometer"),E(0)}},sjcl.random=new sjcl.prng(6);e:try{var F,G,H,I;if(I="undefined"!=typeof module){var J;if(J=module.exports){var K;try{K=require("crypto")}catch(e){K=null}J=(G=K)&&G.randomBytes}I=J}if(I)F=G.randomBytes(128),F=new Uint32Array(new Uint8Array(F).buffer),sjcl.random.addEntropy(F,1024,"crypto['randomBytes']");else if("undefined"!=typeof window&&"undefined"!=typeof Uint32Array){if(H=new Uint32Array(32),window.crypto&&window.crypto.getRandomValues)window.crypto.getRandomValues(H);else{if(!window.msCrypto||!window.msCrypto.getRandomValues)break e;window.msCrypto.getRandomValues(H)}sjcl.random.addEntropy(H,1024,"crypto['getRandomValues']")}}catch(e){"undefined"!=typeof window&&window.console&&(console.log("There was an error collecting entropy from the browser:"),console.log(e))}sjcl.json={defaults:{v:1,iter:1e3,ks:128,ts:64,mode:"ccm",adata:"",cipher:"aes"},Y:function(e,t,r,s){r=r||{},s=s||{};var n,o=sjcl.json,i=o.e({iv:sjcl.random.randomWords(4,0)},o.defaults);return o.e(i,r),r=i.adata,"string"==typeof i.salt&&(i.salt=sjcl.codec.base64.toBits(i.salt)),"string"==typeof i.iv&&(i.iv=sjcl.codec.base64.toBits(i.iv)),(!sjcl.mode[i.mode]||!sjcl.cipher[i.cipher]||"string"==typeof e&&100>=i.iter||64!==i.ts&&96!==i.ts&&128!==i.ts||128!==i.ks&&192!==i.ks&&256!==i.ks||2>i.iv.length||4<i.iv.length)&&q(new sjcl.exception.invalid("json encrypt: invalid parameters")),"string"==typeof e?(e=(n=sjcl.misc.cachedPbkdf2(e,i)).key.slice(0,i.ks/32),i.salt=n.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.publicKey&&(n=e.kem(),i.kemtag=n.tag,e=n.key.slice(0,i.ks/32)),"string"==typeof t&&(t=sjcl.codec.utf8String.toBits(t)),"string"==typeof r&&(i.adata=r=sjcl.codec.utf8String.toBits(r)),n=new sjcl.cipher[i.cipher](e),o.e(s,i),s.key=e,i.ct=sjcl.mode[i.mode].encrypt(n,t,i.iv,r,i.ts),i},encrypt:function(e,t,r,s){var n=sjcl.json,o=n.Y.apply(n,arguments);return n.encode(o)},X:function(e,t,r,s){r=r||{},s=s||{};var n,o,i=sjcl.json;return n=(t=i.e(i.e(i.e({},i.defaults),t),r,!0)).adata,"string"==typeof t.salt&&(t.salt=sjcl.codec.base64.toBits(t.salt)),"string"==typeof t.iv&&(t.iv=sjcl.codec.base64.toBits(t.iv)),(!sjcl.mode[t.mode]||!sjcl.cipher[t.cipher]||"string"==typeof e&&100>=t.iter||64!==t.ts&&96!==t.ts&&128!==t.ts||128!==t.ks&&192!==t.ks&&256!==t.ks||!t.iv||2>t.iv.length||4<t.iv.length)&&q(new sjcl.exception.invalid("json decrypt: invalid parameters")),"string"==typeof e?(e=(o=sjcl.misc.cachedPbkdf2(e,t)).key.slice(0,t.ks/32),t.salt=o.salt):sjcl.ecc&&e instanceof sjcl.ecc.elGamal.secretKey&&(e=e.unkem(sjcl.codec.base64.toBits(t.kemtag)).slice(0,t.ks/32)),"string"==typeof n&&(n=sjcl.codec.utf8String.toBits(n)),o=new sjcl.cipher[t.cipher](e),n=sjcl.mode[t.mode].decrypt(o,t.ct,t.iv,n,t.ts),i.e(s,t),s.key=e,1===r.raw?n:sjcl.codec.utf8String.fromBits(n)},decrypt:function(e,t,r,s){var n=sjcl.json;return n.X(e,n.decode(t),r,s)},encode:function(e){var t,r="{",s="";for(t in e)if(e.hasOwnProperty(t))switch(t.match(/^[a-z0-9]+$/i)||q(new sjcl.exception.invalid("json encode: invalid property name")),r+=s+'"'+t+'":',s=",",typeof e[t]){case"number":case"boolean":r+=e[t];break;case"string":r+='"'+escape(e[t])+'"';break;case"object":r+='"'+sjcl.codec.base64.fromBits(e[t],0)+'"';break;default:q(new sjcl.exception.bug("json encode: unsupported type"))}return r+"}"},decode:function(e){(e=e.replace(/\s/g,"")).match(/^\{.*\}$/)||q(new sjcl.exception.invalid("json decode: this isn't json!")),e=e.replace(/^\{|\}$/g,"").split(/,/);var t,r,s={};for(t=0;t<e.length;t++)(r=e[t].match(/^\s*(?:(["']?)([a-z][a-z0-9]*)\1)\s*:\s*(?:(-?\d+)|"([a-z0-9+\/%*_.@=\-]*)"|(true|false))$/i))||q(new sjcl.exception.invalid("json decode: this isn't json!")),r[3]?s[r[2]]=parseInt(r[3],10):r[4]?s[r[2]]=r[2].match(/^(ct|adata|salt|iv)$/)?sjcl.codec.base64.toBits(r[4]):unescape(r[4]):r[5]&&(s[r[2]]="true"===r[5]);return s},e:function(e,t,r){if(e===s&&(e={}),t===s)return e;for(var n in t)t.hasOwnProperty(n)&&(r&&e[n]!==s&&e[n]!==t[n]&&q(new sjcl.exception.invalid("required parameter overridden")),e[n]=t[n]);return e},fa:function(e,t){var r,s={};for(r in e)e.hasOwnProperty(r)&&e[r]!==t[r]&&(s[r]=e[r]);return s},ea:function(e,t){var r,n={};for(r=0;r<t.length;r++)e[t[r]]!==s&&(n[t[r]]=e[t[r]]);return n}},sjcl.encrypt=sjcl.json.encrypt,sjcl.decrypt=sjcl.json.decrypt,sjcl.misc.ca={},sjcl.misc.cachedPbkdf2=function(e,t){var r,n=sjcl.misc.ca;return r=(t=t||{}).iter||1e3,(r=(n=n[e]=n[e]||{})[r]=n[r]||{firstSalt:t.salt&&t.salt.length?t.salt.slice(0):sjcl.random.randomWords(2,0)})[n=t.salt===s?r.firstSalt:t.salt]=r[n]||sjcl.misc.pbkdf2(e,n,t.iter),{key:r[n].slice(0),salt:n.slice(0)}};
//# sourceMappingURL=pkg-api_v2.min.js-vfl2421bM.map