define("metaserver/static/js/action_bar/action_bar_upload_menu",["require","exports","tslib","react","dig-components/icons","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/i18n","metaserver/static/js/dropbox/proto/pap_events/files_browser/shown_import_action_ui","metaserver/static/js/pap/analytics_client","metaserver/static/js/modules/core/exception","metaserver/static/js/file_imports/dropbox/stormcrow","metaserver/static/js/file_imports/components/upload_from_external_service_menu_item","metaserver/static/js/modules/clean/stormcrow/explicit_exposure_logging"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p,S){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUploadMenu=t.getUploadMenuSection=t.isUploadAction=t.UploadAction=void 0,o=i.__importDefault(o),r=i.__importStar(r);var u,T=l.pap_events.files_browser.Shown_ImportActionUi;(function(e){e.UPLOAD_FILES="upload-files",e.UPLOAD_FOLDER="upload-folder",e.UPLOAD_FROM_GOOGLE_DRIVE="upload_from_google_drive"})(u=t.UploadAction||(t.UploadAction={}));function m(t){if(!r.is_input_webkitdirectory_supported())return;const l=[];l.push({value:{type:n.ActionBarActionTypes.UPLOAD,menuItem:u.UPLOAD_FILES},description:(null==t?void 0:t.isInConsolidatedMenu)?c.intl.formatMessage({id:"qERWX+",defaultMessage:"Upload files"}):c.intl.formatMessage({id:"LNFEFg",defaultMessage:"Files"}),icon:o.default.createElement(s.UIIcon,{src:a.UploadFileLine})},{value:{type:n.ActionBarActionTypes.UPLOAD,menuItem:u.UPLOAD_FOLDER},description:(null==t?void 0:t.isInConsolidatedMenu)?c.intl.formatMessage({id:"ZYcSxL",defaultMessage:"Upload folder"}):c.intl.formatMessage({id:"kMDxiK",defaultMessage:"Folder"}),icon:o.default.createElement(s.UIIcon,{src:a.UploadFolderLine})});const{shouldShow:_,allowImport:m}=A.getFileImportsHoldbackState(null==t?void 0:t.fileImportsHoldback);if(_)switch(null==t?void 0:t.fileImportsEntryPoints){case"V1":case"V2":l.push({value:{type:n.ActionBarActionTypes.UPLOAD,menuItem:u.UPLOAD_FROM_GOOGLE_DRIVE},description:c.intl.formatMessage(p.UPLOAD_FROM_GOOGLE_DRIVE_FOLDER_STRING),menuItem:o.default.createElement(p.UploadFromGoogleDriveAction,null)}),d.logEvent(T.create({actionSurface:"browse",eventClass:T.EventClass.FILES_BROWSER})),S.logExposure({feature:"file_imports_entry_points",variant:null==t?void 0:t.fileImportsEntryPoints}),m&&new Promise((t,i)=>{e(["metaserver/static/js/file_imports/ui/entry"],t,i)}).then(i.__importStar).then(e=>{e.initImportStatusSnackbarOnPageLoad()});break;case"OFF":case void 0:break;default:0}return{menuItems:l}}t.isUploadAction=e=>Boolean(e)&&Object.values(u).includes(e),t.getUploadMenuSection=m,t.getUploadMenu=function(e){const t=m(e);if(t)return{type:n.ActionBarMenuType.DROPDOWN,menuSections:[t]}}})),define("metaserver/static/js/action_bar/action_bar_create_menu",["require","exports","tslib","classnames","react","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/cloud_docs/constants","metaserver/static/js/new_file_menu/new_file_icon","metaserver/static/js/new_file_menu/new_file_util","metaserver/static/js/onboarding_survey/lib/oa_pulsar_campaigns","metaserver/static/js/modules/core/i18n","metaserver/static/js/flows/browse_actions/create_automated_folder_action"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A){"use strict";var p;Object.defineProperty(t,"__esModule",{value:!0}),t.getCreateMenu=t.getCreateSectionWithSubmenus=void 0,o=i.__importDefault(o),s=i.__importDefault(s),(function(e){e[e.FOLDER=0]="FOLDER",e[e.SHARED_FOLDER=1]="SHARED_FOLDER",e[e.TEAM_FOLDER=2]="TEAM_FOLDER",e[e.AUTOMATED_FOLDER=3]="AUTOMATED_FOLDER",e[e.PAPER=4]="PAPER",e[e.PAPER_TEMPLATE=5]="PAPER_TEMPLATE",e[e.PAPER_BINDER=6]="PAPER_BINDER",e[e.SIMPLE_POINTER=7]="SIMPLE_POINTER",e[e.MICROSOFT_WORD=8]="MICROSOFT_WORD",e[e.MICROSOFT_EXCEL=9]="MICROSOFT_EXCEL",e[e.MICROSOFT_POWERPOINT=10]="MICROSOFT_POWERPOINT",e[e.GOOGLE_DOC=11]="GOOGLE_DOC",e[e.GOOGLE_SHEET=12]="GOOGLE_SHEET",e[e.GOOGLE_SLIDE=13]="GOOGLE_SLIDE",e[e.CREATE_PORTAL=14]="CREATE_PORTAL"})(p||(p={}));const S={[p.FOLDER]:{menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:n.FolderCreationAction.FOLDER},description:_.intl.formatMessage({id:"RW4ijB",defaultMessage:"Folder"}),icon:a.FolderLine}},[p.SHARED_FOLDER]:{condition:({showSharedFolderCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:n.FolderCreationAction.SHARED_FOLDER},className:o.default(d.OA_PULSAR_CLASS,d.OAPulsarAction.SHARED_FOLDER),description:_.intl.formatMessage({id:"7nnCz9",defaultMessage:"Shared folder"}),icon:a.AddFolderLine}},[p.TEAM_FOLDER]:{condition:({showTeamFolderCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:n.FolderCreationAction.TEAM_FOLDER},description:_.intl.formatMessage({id:"mfWC8r",defaultMessage:"New team folder"}),icon:a.TeamLine}},[p.AUTOMATED_FOLDER]:{condition:({showAutomatedFolderCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:n.FolderCreationAction.AUTOMATED_FOLDER},description:_.intl.formatMessage(A.CREATE_AUTOMATED_FOLDER_STRING),icon:a.AutomationLine,menuItem:s.default.createElement(A.CreateAutomatedFolderAction,null)}},[p.PAPER]:{condition:({showPaperCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.PaperNewFileTypes.PAPER},description:l.NewPaperDocLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewPaperDocLabel,iconName:"dropbox_paper"})}},[p.PAPER_TEMPLATE]:{condition:({showPaperCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.PaperNewFileTypes.PAPER_TEMPLATE},description:l.NewPaperTemplateLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewPaperTemplateLabel,iconName:"dropbox_paper_template"})}},[p.PAPER_BINDER]:{condition:({showBinderCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.PaperNewFileTypes.PAPER_BINDER},description:l.NewPaperBinderDocLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewPaperBinderDocLabel,iconName:"dropbox_paper_binder"})}},[p.SIMPLE_POINTER]:{menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.PointerFileTypes.SIMPLE_POINTER},description:l.NewSimplePointerLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewSimplePointerLabel,iconName:"shortcut"})}},[p.MICROSOFT_WORD]:{menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.MicrosoftFileTypes.WORD},description:l.NewMicrosoftWordDocLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewMicrosoftWordDocLabel,iconName:"microsoft_docx"})}},[p.MICROSOFT_EXCEL]:{menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.MicrosoftFileTypes.EXCEL},description:l.NewMicrosoftExcelWorkbookLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewMicrosoftExcelWorkbookLabel,iconName:"microsoft_xlsx"})}},[p.MICROSOFT_POWERPOINT]:{menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.MicrosoftFileTypes.POWERPOINT},description:l.NewMicrosoftPowerPointPresentationLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewMicrosoftPowerPointPresentationLabel,iconName:"microsoft_pptx"})}},[p.GOOGLE_DOC]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.GoogleFileTypes.GOOGLE_DSS_DOC},description:l.NewGoogleDocsLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewGoogleDocsLabel,iconName:"google_gdoc"})}},[p.GOOGLE_SHEET]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.GoogleFileTypes.GOOGLE_DSS_SHEET},description:l.NewGoogleSheetsLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewGoogleSheetsLabel,iconName:"google_gsheet"})}},[p.GOOGLE_SLIDE]:{condition:({showGoogleCreate:e})=>e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE,menuItem:r.GoogleFileTypes.GOOGLE_DSS_SLIDES},description:l.NewGoogleSlidesLabel,icon:s.default.createElement(c.NewFileIcon,{displayName:l.NewGoogleSlidesLabel,iconName:"google_gslides"})}},[p.CREATE_PORTAL]:{condition:({showCreateClientPortal:e})=>!!e,menuItem:{value:{type:n.ActionBarActionTypes.CREATE_PORTAL,menuItem:n.FolderCreationAction.CREATE_PORTAL},description:_.intl.formatMessage({id:"O8AD3z",defaultMessage:"Client portal"}),icon:a.AddLine}}},u=(e,t)=>e.map(e=>{const t=S[e],{menuItem:i}=t,o=i.description;return Object.assign(Object.assign({},t),{menuItem:Object.assign(Object.assign({},i),{description:o})})}).filter(({condition:e})=>!e||e(t)).map(({menuItem:e})=>e);t.getCreateSectionWithSubmenus=e=>{const{showOnlyFolderCreation:t}=e,i=(e=>({menuItems:u([p.FOLDER,p.SHARED_FOLDER,p.TEAM_FOLDER,p.AUTOMATED_FOLDER,p.CREATE_PORTAL],e)}))(e).menuItems;return t||(i.push({description:_.intl.formatMessage({id:"oKv5aq",defaultMessage:"Document"}),submenuSections:[{menuItems:u([p.PAPER,p.MICROSOFT_WORD,p.GOOGLE_DOC],e)}]},{description:_.intl.formatMessage({id:"/JpyiR",defaultMessage:"Presentation"}),submenuSections:[{menuItems:u([p.MICROSOFT_POWERPOINT,p.GOOGLE_SLIDE],e)}]},{description:_.intl.formatMessage({id:"9xjlyh",defaultMessage:"Spreadsheet"}),submenuSections:[{menuItems:u([p.MICROSOFT_EXCEL,p.GOOGLE_SHEET],e)}]}),i.push({description:_.intl.formatMessage({id:"rSeA97",defaultMessage:"More"}),submenuSections:[{menuItems:u([p.PAPER_TEMPLATE,p.PAPER_BINDER,p.SIMPLE_POINTER],e)}]})),{label:void 0,menuItems:i}},t.getCreateMenu=function(e){const i=[t.getCreateSectionWithSubmenus(e)];return{type:n.ActionBarMenuType.DROPDOWN,menuSections:i}}})),define("metaserver/static/js/action_bar/file_actions/archive_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/action_bar/action_bar_strings"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createArchiveActionSelector=t.archiveActionHandler=void 0;t.archiveActionHandler=(e,t)=>{n.handleArchive(a.getActionHandlerArgs(e,t))};const c={actionType:s.ActionBarActionTypes.ARCHIVE,isEnabled:!0,text:r.ARCHIVE_ACTION_STRING,icon:o.ArchiveLine},l=(e,t)=>a.hasContentManagerAndSuperAdmin(e,t)&&a.isSingleSelectionFolder(e,t)&&a.isLiveFilesOnly(e,t)&&a.isTeamSharedFolderSelected(e,t);t.createArchiveActionSelector=()=>i.createSelector(l,e=>e?c:void 0)})),define("metaserver/static/js/action_bar/file_actions/comment_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/action_bar/action_bar_strings"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCommentActionSelector=t.commentActionHandler=void 0;t.commentActionHandler=(e,t)=>{n.handleComment(a.getActionHandlerArgs(e,t))};const c=(e,t)=>a.isSingleSelectionFile(e,t)&&a.isLiveFilesOnly(e,t)&&!a.isCloudDocSelected(e,t)&&!a.isPnmLinkNodeSelected(e,t);t.createCommentActionSelector=()=>i.createSelector(c,e=>e?{actionType:s.ActionBarActionTypes.COMMENT,isEnabled:!0,text:r.COMMENT_ACTION_STRING,icon:o.CommentLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/copy_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/action_bar/file_actions/copy","metaserver/static/js/browse/models"],(function(e,t,i,o,s,a,n,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createCopyActionSelector=t.copyActionHandler=void 0;t.copyActionHandler=(e,t)=>{const i=n.context(e,t),{isOverFreeQuota:o,hasExcludedNsIds:s}=n.overQuotaData(e,t);r.handleCopy(n.getActionHandlerArgs(e,t),i,{isOverFreeQuota:o,hasExcludedNsIds:s})};const l=(e,t)=>n.isLiveFilesOnly(e,t)&&!n.isFileSharedWithMeSelected(e,t)&&!n.isTeamSharedFolderSelected(e,t)&&!n.isTeamMemberFolderSelected(e,t)&&!n.isPnmLinkNodeSelected(e,t)&&!n.isFamilySharedFolderSelected(e,t)&&!n.isVaultFolderSelected(e,t);t.createCopyActionSelector=()=>i.createSelector(n.selectedFiles,l,(e,t)=>t?{actionType:s.ActionBarActionTypes.COPY,isEnabled:e.some(e=>!c.File.isNoAccessSharedFolder(e)),text:a.COPY_ACTION_STRING,icon:o.CopyLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/delete_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/pnm/constants","metaserver/static/js/pnm/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers"],(function(e,t,i,o,s,a,n,r,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRemoveActionSelector=t.createDeleteActionSelector=t.deleteActionHandler=void 0;t.deleteActionHandler=(e,t)=>{const i=c.context(e,t);l.handleDelete(c.getActionHandlerArgs(e,t),i)};const d=(e,t)=>{const i=t.selectedFilesSelector(e);return 1===i.count()&&n.getLinkNodeAction(i.first().per_node_metadata)===a.PASSWORDS_POST_SETUP_ACTION},_=(e,t)=>!d(e,t)&&c.isLiveFilesOnly(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&!c.isTeamSharedFolderSelected(e,t)&&!c.isTeamMemberFolderSelected(e,t)&&!c.isPnmSuppressDeleteSelected(e,t)&&!c.isVaultFolderSelected(e,t)&&!A(e,t),A=(e,t)=>{const i=c.selectedFiles(e,t);if(c.isInsideBackupFolder(e,t)&&!i.count())return!0;const o=c.backupInfoByFile(e,t,i.first());return!!("cb"===(null==o?void 0:o.type)&&o.usesAnchors&&o.nestLevel>=2)};t.createDeleteActionSelector=()=>i.createSelector(c.context,c.selectedFiles,_,(e,t,i)=>i?{actionType:s.ActionBarActionTypes.DELETE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:r.DELETE_ACTION_STRING,icon:o.DeleteLine}:void 0);t.createRemoveActionSelector=()=>i.createSelector(c.context,c.selectedFiles,d,(e,t,i)=>i?{actionType:s.ActionBarActionTypes.REMOVE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:r.REMOVE_ACTIION_STRING,icon:o.DeleteLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/download_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/browse/models"],(function(e,t,i,o,s,a,n,r,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createDownloadActionSelector=t.downloadActionHandler=void 0,c=i.__importStar(c);t.downloadActionHandler=(e,t)=>{const i=r.context(e,t);c.handleDownload(r.getActionHandlerArgs(e,t),i)};const d=(e,t)=>r.isLiveFilesOnly(e,t)&&!r.isPnmLinkNodeSelected(e,t)&&(r.isSingleSelection(e,t)?!r.isCloudDocSelected(e,t):!r.isFileSharedWithMeSelected(e,t)&&!r.isCloudDocFileSharedWithMeSelected(e,t));t.createDownloadActionSelector=()=>o.createSelector(r.selectedFiles,d,(e,t)=>t?{actionType:a.ActionBarActionTypes.DOWNLOAD,isEnabled:e.some(e=>!l.File.isNoAccessSharedFolder(e)),text:n.DOWNLOAD_ACTION_STRING,icon:s.DownloadLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/events_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/browse/models"],(function(e,t,i,o,s,a,n,r,c,l,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createEventsActionSelector=t.eventsActionHandler=void 0,l=i.__importStar(l);t.eventsActionHandler=(e,t)=>{l.handleEvents(c.getActionHandlerArgs(e,t))};const _=(e,t)=>{const i=c.selectedFiles(e,t).first();return c.isSingleSelection(e,t)&&c.isLiveFilesOnly(e,t)&&(i.type===n.FileTypes.SHARED_FOLDER||i.type===n.FileTypes.TEAM_SHARED_FOLDER)};t.createEventsActionSelector=()=>o.createSelector(c.context,c.selectedFiles,_,(e,t,i)=>i?{actionType:a.ActionBarActionTypes.EVENTS,isEnabled:t.every(t=>d.File.canViewFileMembers(t,e)),text:r.EVENTS_ACTION_STRING,icon:s.ActivityLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/file_actions",["require","exports","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/memoize","metaserver/static/js/action_bar/file_actions/archive_action","metaserver/static/js/action_bar/file_actions/automated_folder_action","metaserver/static/js/action_bar/file_actions/comment_action","metaserver/static/js/action_bar/file_actions/copy_action","metaserver/static/js/action_bar/file_actions/delete_action","metaserver/static/js/action_bar/file_actions/download_action","metaserver/static/js/action_bar/file_actions/edit_pdf_action","metaserver/static/js/action_bar/file_actions/events_action","metaserver/static/js/action_bar/file_actions/file_conversion_action","metaserver/static/js/action_bar/file_actions/go_to_folder_action","metaserver/static/js/action_bar/file_actions/manage_as_admin_action","metaserver/static/js/action_bar/file_actions/move_action","metaserver/static/js/action_bar/file_actions/open_action","metaserver/static/js/action_bar/file_actions/convert_to_archive_action","metaserver/static/js/action_bar/file_actions/open_desktop_action","metaserver/static/js/action_bar/file_actions/permanent_delete_action","metaserver/static/js/action_bar/file_actions/rename_action","metaserver/static/js/action_bar/file_actions/request_files_action","metaserver/static/js/action_bar/file_actions/restore_action","metaserver/static/js/action_bar/file_actions/share_action","metaserver/static/js/action_bar/file_actions/share_copy_link_action","metaserver/static/js/action_bar/file_actions/share_modal_action","metaserver/static/js/action_bar/file_actions/star_action","metaserver/static/js/action_bar/file_actions/unstar_action","metaserver/static/js/action_bar/file_actions/version_history_action","metaserver/static/js/action_bar/file_actions/send_for_signature_action","metaserver/static/js/action_bar/file_actions/activity_action","metaserver/static/js/browse/browse_actions/browse_spaces_dropdown_action","metaserver/static/js/modules/clean/shallow_equal","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/action_bar/file_actions/request_approval_action","metaserver/static/js/action_bar/file_actions/add_to_collection_action","metaserver/static/js/action_bar/file_actions/save_new_version_action","metaserver/static/js/action_bar/file_actions/self_sign_action"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p,S,u,T,m,E,O,I,f,N,v,R,g,y,M,F,b,C,D,h,L,w,P,B,j){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createActionBarActionSelector=t.actionMenuToggleHandler=t.actionHandler=t.ActionMenuToggleHandlersMap=t.FileActionsHandlersMap=t.getTabletSidebarFileActionSelectors=t.getSidebarFileActionSelectors=t.getMobileFileActionsSelectors=t.getTabletFileActionsSelectors=t.getInlineFileActionsSelectors=t.getFileActionsSelectorsMap=void 0;t.getFileActionsSelectorsMap=()=>({[i.ActionBarActionTypes.RENAME]:I.createRenameActionSelector(),[i.ActionBarActionTypes.DOWNLOAD]:l.createDownloadActionSelector(),[i.ActionBarActionTypes.COMMENT]:n.createCommentActionSelector(),[i.ActionBarActionTypes.EVENTS]:_.createEventsActionSelector(),[i.ActionBarActionTypes.VERSION_HISTORY]:F.createVersionHistoryActionSelector(),[i.ActionBarActionTypes.COPY]:r.createCopyActionSelector(),[i.ActionBarActionTypes.MOVE]:u.createMoveActionSelector(),[i.ActionBarActionTypes.DELETE]:c.createDeleteActionSelector(),[i.ActionBarActionTypes.REMOVE]:c.createRemoveActionSelector(),[i.ActionBarActionTypes.RESTORE]:N.createRestoreActionSelector(),[i.ActionBarActionTypes.PERMANENT_DELETE]:O.createPermanentDeleteActionSelector(),[i.ActionBarActionTypes.STAR]:y.createStarActionSelector(),[i.ActionBarActionTypes.UNSTAR]:M.createUnstarActionSelector(),[i.ActionBarActionTypes.OPEN]:T.createOpenActionSelector(),[i.ActionBarActionTypes.ARCHIVE]:s.createArchiveActionSelector(),[i.ActionBarActionTypes.GO_TO_FOLDER]:p.createGoToFolderActionSelector(),[i.ActionBarActionTypes.MANAGE_AS_ADMIN]:S.createManageAsAdminActionSelector(),[i.ActionBarActionTypes.REQUEST_FILES]:f.createRequestFilesActionSelector(),[i.ActionBarActionTypes.OPEN_MAC_DESKTOP]:E.createOpenMacDesktopActionSelector(),[i.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP]:E.createOpenWindowsDesktopActionSelector(),[i.ActionBarActionTypes.SAVE_AS]:A.createFileConversionActionSelector(),[i.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION]:a.createAutomationFolderActionSelector("edit"),[i.ActionBarActionTypes.ADD_FOLDER_AUTOMATION]:a.createAutomationFolderActionSelector("add"),[i.ActionBarActionTypes.CONVERT_TO_ARCHIVE]:m.createConvertToArchiveActionSelector(),[i.ActionBarActionTypes.SHARE]:v.createShareActionSelector(!0),[i.ActionBarActionTypes.SHARE_COPY_LINK]:R.createShareCopyLinkActionSelector(),[i.ActionBarActionTypes.REQUEST_APPROVAL]:w.createRequestApprovalActionSelector(),[i.ActionBarActionTypes.SELF_SIGN_ACTION]:j.createSelfSignActionSelector(),[i.ActionBarActionTypes.SAVE_NEW_VERSION]:B.createSaveNewVersionActionSelector(),[i.ActionBarActionTypes.ACTIVITY]:C.createActivityActionSelector(),[i.ActionBarActionTypes.EDIT_PDF]:d.createEditPDFActionSelector()});t.getInlineFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[i.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelector(),[i.ActionBarActionTypes.SHARE_COPY_LINK]:R.createShareCopyLinkActionSelector(),[i.ActionBarActionTypes.SEND_FOR_SIGNATURE]:b.createSendForSignatureActionSelector()});t.getTabletFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[i.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelectorForTabletView()});t.getMobileFileActionsSelectors=()=>Object.assign(Object.assign({},t.getFileActionsSelectorsMap()),{[i.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelector()});t.getSidebarFileActionSelectors=()=>({[i.ActionBarActionTypes.SHARE]:v.createShareActionSelector()});t.getTabletSidebarFileActionSelectors=()=>({[i.ActionBarActionTypes.SHARE_MODAL]:g.createShareModalActionSelector()}),t.FileActionsHandlersMap={[i.ActionBarActionTypes.RENAME]:I.renameActionHandler,[i.ActionBarActionTypes.DOWNLOAD]:l.downloadActionHandler,[i.ActionBarActionTypes.COMMENT]:n.commentActionHandler,[i.ActionBarActionTypes.EVENTS]:_.eventsActionHandler,[i.ActionBarActionTypes.VERSION_HISTORY]:F.versionHistoryActionHandler,[i.ActionBarActionTypes.COPY]:r.copyActionHandler,[i.ActionBarActionTypes.MOVE]:u.moveActionHandler,[i.ActionBarActionTypes.DELETE]:c.deleteActionHandler,[i.ActionBarActionTypes.REMOVE]:c.deleteActionHandler,[i.ActionBarActionTypes.RESTORE]:N.restoreActionHandler,[i.ActionBarActionTypes.PERMANENT_DELETE]:O.permanentDeleteActionHandler,[i.ActionBarActionTypes.STAR]:y.starActionHandler,[i.ActionBarActionTypes.UNSTAR]:M.unstarActionHandler,[i.ActionBarActionTypes.OPEN]:T.openActionHandler,[i.ActionBarActionTypes.SHARE_MODAL]:g.shareModalActionHandler,[i.ActionBarActionTypes.ARCHIVE]:s.archiveActionHandler,[i.ActionBarActionTypes.GO_TO_FOLDER]:p.goToFolderActionHandler,[i.ActionBarActionTypes.MANAGE_AS_ADMIN]:S.manageAsAdminActionHandler,[i.ActionBarActionTypes.REQUEST_FILES]:f.requestFilesActionHandler,[i.ActionBarActionTypes.OPEN_MAC_DESKTOP]:E.openDesktopActionHandler,[i.ActionBarActionTypes.OPEN_WINDOWS_DESKTOP]:E.openDesktopActionHandler,[i.ActionBarActionTypes.SHARE_COPY_LINK]:R.shareCopyLinkActionHandler,[i.ActionBarActionTypes.SAVE_AS]:A.fileConversionActionHandler,[i.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION]:a.editAutomationFolderActionHandler,[i.ActionBarActionTypes.ADD_FOLDER_AUTOMATION]:a.addAutomationFolderActionHandler,[i.ActionBarActionTypes.CONVERT_TO_ARCHIVE]:m.convertToArchiveActionHandler,[i.ActionBarActionTypes.SEND_FOR_SIGNATURE]:b.sendForSignatureActionHandler,[i.ActionBarActionTypes.REQUEST_APPROVAL]:w.requestApprovalActionHandler,[i.ActionBarActionTypes.SELF_SIGN_ACTION]:j.selfSignActionHandler,[i.ActionBarActionTypes.SAVE_NEW_VERSION]:B.saveNewVersionActionHandler,[i.ActionBarActionTypes.ADD_TO_COLLECTION]:P.addToCollectionActionHandler,[i.ActionBarActionTypes.EDIT_PDF]:d.editPDFActionHandler},t.ActionMenuToggleHandlersMap={[i.ActionBarActionTypes.OPEN]:T.openActionMenuToggleHandler,[i.ActionBarActionTypes.SPACES_DROPDOWN]:D.spacesDropdownActionMenuToggleHandler,[i.ActionBarActionTypes.ACTIVITY]:C.openActivityMenuToggleHandler};const G={[i.ActionBarActionEventSource.BUTTON]:L.ActionSourceValue.BUTTON,[i.ActionBarActionEventSource.BUTTON_MENU]:L.ActionSourceValue.BUTTON_MENU,[i.ActionBarActionEventSource.OVERFLOW_MENU]:L.ActionSourceValue.OVERFLOW_MENU};t.actionHandler=(e,t,i,o)=>(s,a)=>{const n=i[e.type];if(n){n(a(),Object.assign(Object.assign({},t),{actionSource:G[e.source]}),{menuValue:e.menuItem,anchorRef:e.anchorRef,onHoverLocked:null==o?void 0:o.onHoverLocked,onActionFlowComplete:e.onActionFlowComplete})}};t.actionMenuToggleHandler=({type:e,isOpen:t},i,o)=>(s,a)=>{const n=o[e];if(n){n(a(),i,t)}};t.createActionBarActionSelector=()=>o.dedupe(H,(e,t,i,o)=>{const s={},{alwaysAtTopLevel:a,atTopLevelIfSpace:n,alwaysInOverflow:r}=o(e,t);return s.alwaysAtTopLevel=a?U(e,t,i,a):[],s.atTopLevelIfSpace=n?U(e,t,i,n):[],s.alwaysInOverflow=r?r.map(o=>U(e,t,i,o)):[[]],s});const H=(e,t)=>{var i;return h.shallowEqualArray(e.alwaysAtTopLevel,t.alwaysAtTopLevel)&&h.shallowEqualArray(e.atTopLevelIfSpace,t.atTopLevelIfSpace)&&!!(null===(i=e.alwaysInOverflow)||void 0===i?void 0:i.every((e,i)=>h.shallowEqualArray(e,t.alwaysInOverflow?t.alwaysInOverflow[i]:[])))},U=(e,t,i,o)=>{const s=[];return o.forEach(o=>{const a=i[o],n=a&&a(e,t);n&&s.push(n)}),s}})),define("metaserver/static/js/action_bar/file_actions/file_actions_selectors",["require","exports","tslib","reselect","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/filepath/filepath","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/action_bar/file_actions/file_actions_types","metaserver/static/js/browse/constants","metaserver/static/js/browse/models","metaserver/static/js/files_view/data/selectors/instance_selectors","metaserver/static/js/files_view/util","metaserver/static/js/search/constants","metaserver/static/js/modules/clean/sharing/gating_util","metaserver/static/js/modules/clean/unity/check_file_cache","metaserver/static/js/modules/clean/unity/features","metaserver/static/js/browse/data/selectors"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p,S,u,T){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.businessSpaceXgid=t.isBusinessSpaceFound=t.getAutoFolderEligibility=t.swapFollowAndTidy=t.isFolderTidyable=t.searchSidebarActionsMap=t.searchActionsMap=t.createSearchActionBarAccessibilityConfigSelector=t.copyActionBarActions=t.getSearchSidebarScenarioActions=t.getSearchInlineOverflowMenuActions=t.getSearchInlineScenarioActions=t.getInlineScenarioActions=t.getSearchScenarioActions=t.getActionHandlerArgs=t.isRightRailCollapsed=t.accessibilityConfig=t.hasLinkedMobile=t.browsePostTTIData=t.isSameDirectory=t.isCdmRoot=t.getFlowsFolderRule=t.flowsFolderRule=t.isVaultFolderSelected=t.isUnityOpenAvailable=t.isTeamSharedFolderSelected=t.isTeamMemberFolderSelected=t.isSingleSelectionFolder=t.isSingleSelectionFile=t.isSingleSelection=t.isSelectionWritable=t.isSelectionFoldersOnly=t.isSelectionFilesOnly=t.isSelectionFetchFolderSizeStatusOnly=t.isRestrictedPathSelected=t.isPnmSuppressShareSelected=t.isPnmSuppressMoveSelected=t.isPnmSuppressDeleteSelected=t.isPnmLinkNodeSelected=t.isPermanentDeleteDisabled=t.isNothingSelected=t.isLiveFilesOnly=t.isFileSharedWithMeSelected=t.isFamilySharedFolderSelected=t.isDeletedFilesOnly=t.isCloudDocSelected=t.isCloudDocFileSharedWithMeSelected=t.isAppFolderSelected=t.isNoAccessSharedFolderSelected=t.hasUnmountedOrMultipleNamespaces=t.hasNewOwnershipModel=t.hasContentManagerAndSuperAdmin=t.actionBarSelectionType=t.backupInfoByFile=t.isSelectedBackupFolder=t.isInsideBackupFolder=t.isCreatingSharedLink=t.experiments=t.overQuotaData=t.isGridView=t.viewType=t.currentFolderInfo=t.context=t.selectedFiles=t.user=t.actionSource=t.actionSurface=t.isSearchMode=t.defaultExperiments=t.defaultOverQuotaData=void 0,S=i.__importDefault(S),t.defaultOverQuotaData={isOverFreeQuota:!1,hasExcludedNsIds:!1},t.defaultExperiments={expVaultEnableViewOnlySharing:!1,expSpacesFssDropdown:!1,expTidyUpBrowse:!1,expTidyUpSmartPocEnabled:!1,expTidyUpIATester:!1,expFlowsAutomatedFolderUI:!1,expFlowsFileConversionUI:!1,expFlowsManualArchive:!1,expFlowsManualVideoRemuxUi:!1,expFlowsManualVideoGifUi:!1,expFssEntryPointForSpaces:!1,expPgEsignDiscoveryFileHover:!1,expFlowsApprovalFlowVariant:"OFF",expFlowsVersioningFlowVariant:"OFF",expFlowsApprovalAndVersioningNewBadgeVariant:"OFF",expFlowsApprovalCopyVariant:"OFF",expIsTransferEnabled:!1,expFlowsAudioConversionUi:!1,expFlowsBatchSaveAsUi:!1,expCollectionsInBrowse:!1,expSelfSignEntryPoint:"OFF",expSendForSignatureNaming:"OFF",expPDFEditEntryPoint:"OFF"};t.isSearchMode=(e,t)=>t.isSearchMode;t.actionSurface=(e,t)=>t.actionSurface;t.actionSource=(e,t)=>t.actionSource;t.user=(e,t)=>t.userSelector(e);t.selectedFiles=(e,t)=>t.selectedFilesSelector(e);t.context=(e,t)=>t.contextSelector(e);t.currentFolderInfo=(e,t)=>t.currentFolderInfo(e);t.viewType=(e,t)=>d.selectViewType(e,{instanceId:t.isSearchMode?A.SEARCH_FILES_VIEW_ID:c.BROWSE_FILES_VIEW_ID});t.isGridView=(e,t)=>{const i=t.isSearchMode?A.SEARCH_FILES_VIEW_ID:c.BROWSE_FILES_VIEW_ID;return d.selectIsGridView(e,{instanceId:i})};t.overQuotaData=(e,t)=>t.overQuotaDataSelector(e);t.experiments=(e,t)=>t.experimentSelector(e);t.isCreatingSharedLink=(e,t)=>Boolean(t.isCreatingSharedLinkSelector);t.isInsideBackupFolder=(e,t)=>t.isInsideBackupFolder(e);t.isSelectedBackupFolder=(e,t)=>t.isSelectedBackupFolder(e);t.backupInfoByFile=(e,t,i)=>t.backupInfoByFile(e)(i),t.actionBarSelectionType=o.createSelector(t.selectedFiles,t.isInsideBackupFolder,t.isSelectedBackupFolder,(e,t,i)=>i?r.ActionBarSelectionType.BACKUP_FOLDER:t?r.ActionBarSelectionType.BACKUP_CONTENT:0===e.count()?r.ActionBarSelectionType.NONE:e.some(e=>e.type===n.FileTypes.VAULT_FOLDER)?r.ActionBarSelectionType.VAULT:1===e.count()?e.first().is_dir?r.ActionBarSelectionType.FOLDER:r.ActionBarSelectionType.FILE:r.ActionBarSelectionType.MULTIPLE),t.hasContentManagerAndSuperAdmin=o.createSelector(t.user,e=>p.GoldenGate.hasContentManagerAndSuperAdmin(e.id)),t.hasNewOwnershipModel=o.createSelector(t.user,e=>p.GoldenGate.hasNewOwnershipModel(e.id)),t.hasUnmountedOrMultipleNamespaces=o.createSelector(t.selectedFiles,e=>{const t=e.first();return e.some(e=>e.is_unmounted||e.ns_id!==t.ns_id)}),t.isNoAccessSharedFolderSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>l.File.isNoAccessSharedFolder(e))),t.isAppFolderSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.type===n.FileTypes.SANDBOX)),t.isCloudDocFileSharedWithMeSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.is_cloud_doc&&e instanceof l.FileSharedWithMe)),t.isCloudDocSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.is_cloud_doc)),t.isDeletedFilesOnly=o.createSelector(t.selectedFiles,t.isInsideBackupFolder,(e,t)=>t?!!e.count()&&e.every(e=>e.isDeleted):e.every(e=>e.isDeleted||e.is_unmounted)),t.isFamilySharedFolderSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.type===n.FileTypes.FAMILY_SHARED_FOLDER)),t.isFileSharedWithMeSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e instanceof l.FileSharedWithMe)),t.isLiveFilesOnly=o.createSelector(t.selectedFiles,e=>e.every(e=>!e.isDeleted&&!e.is_unmounted)),t.isNothingSelected=o.createSelector(t.selectedFiles,e=>0===e.count()),t.isPermanentDeleteDisabled=o.createSelector(t.selectedFiles,t.context,(e,t)=>t.permanentDeletionDisabledStateByNSID[t.currentNSID]||!1),t.isPnmLinkNodeSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.link_node)})),t.isPnmSuppressDeleteSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_delete)})),t.isPnmSuppressMoveSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>{var t;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_move)})),t.isPnmSuppressShareSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>{var t,i;return!!(null===(t=e.per_node_metadata)||void 0===t?void 0:t.suppress_ns_partition)||!!(null===(i=e.per_node_metadata)||void 0===i?void 0:i.suppress_shared_link)})),t.isRestrictedPathSelected=o.createSelector(t.selectedFiles,t.context,(e,t)=>e.some(e=>!l.File.canViewFileMembers(e,t))),t.isSelectionFetchFolderSizeStatusOnly=o.createSelector(t.selectedFiles,e=>e.every(e=>null==e.fetchFolderSizesStatus)),t.isSelectionFilesOnly=o.createSelector(t.selectedFiles,e=>e.every(e=>e.type===n.FileTypes.FILE)),t.isSelectionFoldersOnly=o.createSelector(t.selectedFiles,e=>e.every(e=>e.is_dir)),t.isSelectionWritable=o.createSelector(t.selectedFiles,t.context,(e,t)=>t.isCurrentPathWriteable()&&!e.some(e=>e.read_only)),t.isSingleSelection=o.createSelector(t.selectedFiles,e=>1===e.count()),t.isSingleSelectionFile=o.createSelector(t.selectedFiles,e=>1===e.count()&&!e.first().is_dir),t.isSingleSelectionFolder=o.createSelector(t.selectedFiles,e=>1===e.count()&&e.first().is_dir),t.isTeamMemberFolderSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.type===n.FileTypes.TEAM_MEMBER_FOLDER)),t.isTeamSharedFolderSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.type===n.FileTypes.TEAM_SHARED_FOLDER));t.isUnityOpenAvailable=(e,i)=>{const o=t.selectedFiles(e,i).first();return t.isSingleSelection(e,i)&&!t.isFileSharedWithMeSelected(e,i)&&u.UnityFeatures.isUnitySupported()&&(null===S.default||void 0===S.default?void 0:S.default.is_cached_and_locally_available(o.ns_id,o.ns_path))},t.isVaultFolderSelected=o.createSelector(t.selectedFiles,e=>e.some(e=>e.type===n.FileTypes.VAULT_FOLDER));t.flowsFolderRule=(e,t,i)=>t.flowsFolderRule(e,i);t.getFlowsFolderRule=(e,i)=>{const o=t.selectedFiles(e,i).first(),s=t.currentFolderInfo(e,i);return o&&t.flowsFolderRule(e,i,o.fq_path)||!o&&s&&t.flowsFolderRule(e,i,s.fq_path)||void 0},t.isCdmRoot=o.createSelector(t.user,t.context,(e,t)=>e.is_cdm_member&&"/"===t.currentFQPath),t.isSameDirectory=o.createSelector(t.selectedFiles,e=>{const t=e.toArray().map(e=>e.fq_path);return a.inSameDirectory(t)});t.browsePostTTIData=(e,t)=>{if(t.browsePostTTIData)return t.browsePostTTIData(e)};t.hasLinkedMobile=(e,t)=>{if(t.hasLinkedMobile)return t.hasLinkedMobile(e)};t.accessibilityConfig=(e,t)=>{if(t.accessibilityConfig)return t.accessibilityConfig(e)};t.isRightRailCollapsed=(e,t)=>t.rightRailCollapsedState(e),t.getActionHandlerArgs=o.createSelector(t.user,t.selectedFiles,t.viewType,t.isSearchMode,t.actionSurface,t.actionSource,t.context,t.isRightRailCollapsed,(e,t,i,o,s,a,n,r)=>({user:e,files:t,isSearchMode:o,viewType:i,actionSurface:s,actionSource:a,context:n,rightRailState:r?"collapsed":"opened"})),t.getSearchScenarioActions=o.createSelector(t.actionBarSelectionType,e=>t.searchActionsMap[e]);t.getInlineScenarioActions=(e,t,i=!1)=>{const o={};if(o.alwaysInOverflow=e.alwaysInOverflow,!t){const e=[];i?e.push(s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.SHARE_MODAL):e.push(s.ActionBarActionTypes.SHARE_MODAL,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.ADD_TO_COLLECTION),o.alwaysAtTopLevel=e}return o},t.getSearchInlineScenarioActions=o.createSelector(t.actionBarSelectionType,t.isSelectedBackupFolder,(e,i)=>t.getInlineScenarioActions(t.searchActionsMap[e],i,!1)),t.getSearchInlineOverflowMenuActions=o.createSelector(t.actionBarSelectionType,e=>t.getInlineScenarioActions(t.searchActionsMap[e],!0,!1)),t.getSearchSidebarScenarioActions=o.createSelector(t.actionBarSelectionType,e=>t.searchSidebarActionsMap[e]);t.copyActionBarActions=e=>{const{alwaysAtTopLevel:t,atTopLevelIfSpace:i,alwaysInOverflow:o}=e,s={};return s.alwaysAtTopLevel=null==t?void 0:t.slice(),s.atTopLevelIfSpace=null==i?void 0:i.slice(),s.alwaysInOverflow=null==o?void 0:o.map(e=>e.slice()),s};t.createSearchActionBarAccessibilityConfigSelector=()=>o.createSelector(t.selectedFiles,e=>{if(0!==e.size)return{primaryActionContext:void 0,secondaryActionsContext:{firstEntryAccessibilityHint:_.getFilename(e.first()),noOfEntries:e.size}}}),t.searchActionsMap={[r.ActionBarSelectionType.NONE]:{},[r.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.VAULT_LOCK,s.ActionBarActionTypes.VAULT_UNLOCK,s.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.EDIT_PDF,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.SEND_FOR_SIGNATURE,s.ActionBarActionTypes.REQUEST_APPROVAL,s.ActionBarActionTypes.SELF_SIGN_ACTION,s.ActionBarActionTypes.SAVE_AS],[s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.REMOVE,s.ActionBarActionTypes.RENAME,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY],[s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.STAR,s.ActionBarActionTypes.UNSTAR,s.ActionBarActionTypes.PIN_TO,s.ActionBarActionTypes.PIN_TO_ROOT,s.ActionBarActionTypes.UNPIN],[s.ActionBarActionTypes.VERSION_HISTORY,s.ActionBarActionTypes.FILE_LOCK,s.ActionBarActionTypes.FILE_UNLOCK,s.ActionBarActionTypes.FILE_REQUEST_UNLOCK]]},[r.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.SHARE_COPY_LINK,s.ActionBarActionTypes.OPEN,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.EDIT_FOLDER_AUTOMATION,s.ActionBarActionTypes.ADD_FOLDER_AUTOMATION],[s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RENAME,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY],[s.ActionBarActionTypes.STAR,s.ActionBarActionTypes.UNSTAR,s.ActionBarActionTypes.UNPIN,s.ActionBarActionTypes.PIN_TO,s.ActionBarActionTypes.PIN_TO_ROOT],[s.ActionBarActionTypes.SPACES_REDIRECT,s.ActionBarActionTypes.FOLLOW,s.ActionBarActionTypes.FOLLOWING,s.ActionBarActionTypes.TIDY_UP,s.ActionBarActionTypes.REQUEST_FILES,s.ActionBarActionTypes.REWIND]]},[r.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.CONVERT_TO_ARCHIVE],alwaysInOverflow:[[s.ActionBarActionTypes.SHARE,s.ActionBarActionTypes.DOWNLOAD,s.ActionBarActionTypes.ADD_TO_COLLECTION,s.ActionBarActionTypes.DELETE,s.ActionBarActionTypes.RESTORE,s.ActionBarActionTypes.PERMANENT_DELETE,s.ActionBarActionTypes.MOVE,s.ActionBarActionTypes.COPY]]},[r.ActionBarSelectionType.VAULT]:{},[r.ActionBarSelectionType.BACKUP_CONTENT]:{alwaysAtTopLevel:[s.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[s.ActionBarActionTypes.REWIND,s.ActionBarActionTypes.VERSION_HISTORY]},[r.ActionBarSelectionType.BACKUP_FOLDER]:{alwaysAtTopLevel:[s.ActionBarActionTypes.DOWNLOAD],atTopLevelIfSpace:[s.ActionBarActionTypes.REWIND,s.ActionBarActionTypes.DELETE]}},t.searchSidebarActionsMap={[r.ActionBarSelectionType.NONE]:{},[r.ActionBarSelectionType.FILE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE]},[r.ActionBarSelectionType.FOLDER]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE]},[r.ActionBarSelectionType.MULTIPLE]:{atTopLevelIfSpace:[s.ActionBarActionTypes.SHARE]},[r.ActionBarSelectionType.VAULT]:{}},t.isFolderTidyable=o.createSelector(t.isNothingSelected,T.unsortedFiles,(e,t)=>{if(e){const e=t,i=0===e.count(),o=e.every(e=>e.is_dir);return!i&&!o}return!1}),t.swapFollowAndTidy=o.createSelector(t.isFolderTidyable,t.experiments,(e,t)=>!!t.expTidyUpBrowse&&e),t.getAutoFolderEligibility=o.createSelector(t.context,t.currentFolderInfo,(e,t)=>({isCurrentFolderEligibleForAutomation:t&&e.isInFolderMode&&!e.isCurrentlyInRoot&&!e.isInsideTeamFolderRoot&&!e.isInsideVaultFolder&&t.type!==n.FileTypes.TEAM_MEMBER_FOLDER&&!l.File.isReadOnlySharedFolder(t),isSubfolderEligibleForAutomation:t&&!e.isInsideVaultFolder&&!l.File.isReadOnlySharedFolder(t)}));t.isBusinessSpaceFound=(e,t)=>!!t.isBusinessSpaceFound&&t.isBusinessSpaceFound(e);t.businessSpaceXgid=(e,t)=>t.businessSpaceXgid?t.businessSpaceXgid(e):""})),define("metaserver/static/js/action_bar/file_actions/move_action",["require","exports","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/action_bar/file_actions/move"],(function(e,t,i,o,s,a,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createMoveActionSelector=t.moveActionHandler=void 0;t.moveActionHandler=(e,t)=>{const i=n.context(e,t),{isOverFreeQuota:o,hasExcludedNsIds:s}=n.overQuotaData(e,t);r.handleMove(n.getActionHandlerArgs(e,t),i,{isOverFreeQuota:o,hasExcludedNsIds:s})};const c=(e,t)=>n.isLiveFilesOnly(e,t)&&!n.isFileSharedWithMeSelected(e,t)&&!n.isTeamSharedFolderSelected(e,t)&&!n.isTeamMemberFolderSelected(e,t)&&!n.isPnmLinkNodeSelected(e,t)&&!n.isPnmSuppressMoveSelected(e,t)&&!n.isVaultFolderSelected(e,t);t.createMoveActionSelector=()=>i.createSelector(n.context,n.selectedFiles,c,(e,t,i)=>i?{actionType:s.ActionBarActionTypes.MOVE,isEnabled:e.isCurrentPathWriteable()&&!t.some(e=>e.read_only),text:a.MOVE_ACTION_STRING,icon:o.MoveLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/open_action",["require","exports","tslib","react","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/file_store/utils","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/modules/clean/react/extensions/extensions_menu_component_v2","metaserver/static/js/modules/clean/react/file_viewer/unity/with_unity","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/action_bar/file_actions/open_desktop_action","metaserver/static/js/action_bar/file_actions/go_to_folder_action","metaserver/static/js/reel/lib/utils"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p,S,u,T,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.openActionMenuToggleHandler=t.createOpenActionSelector=t.openActionHandler=void 0,o=i.__importDefault(o),d=i.__importStar(d);const E={surface:"action-bar"};t.openActionHandler=(e,t,i)=>{const o=null==i?void 0:i.menuValue;d.handleExtensionClick(l.getActionHandlerArgs(e,t),t.actionSurface,(null==o?void 0:o.actionName)||(null==o?void 0:o.userAction)),null==o||o.handler()};const O=(e,t)=>()=>{T.goToFolderActionHandler(e,t)},I=s.createSelector(l.getActionHandlerArgs,e=>({openInNewTabActionHandler:()=>{d.handleOpenInNewTab(e)},openDesktopActionHandler:()=>{S.handleOpenInDesktop(e)},replayActionHandler:()=>{d.handleReplay(e)},previewActionHandler:()=>{d.handlePreview(e,p.ActionSourceValue.OVERFLOW_MENU)}})),f=(e,t)=>l.isSingleSelection(e,t)&&l.isLiveFilesOnly(e,t)&&!l.isFileSharedWithMeSelected(e,t)&&!l.isTeamSharedFolderSelected(e,t)&&!l.isTeamMemberFolderSelected(e,t)&&!l.isPnmLinkNodeSelected(e,t)&&!l.context(e,t).isInsideVaultFolder,N=[".aac",".aif",".aiff",".flac",".m4a",".m4r",".mp3",".oga",".ogg",".wav",".wma"].concat([".3gp",".3gpp",".3gpp2",".asf",".avi",".dv",".flv",".m2t",".m2ts",".m4v",".mkv",".mov",".mp4",".mpeg",".mpg",".mts",".mxf",".oggtheora",".ogv",".rm",".ts",".vob",".webm",".wmv"]);t.createOpenActionSelector=()=>s.createSelector(l.user,l.selectedFiles,f,u.showOpenDesktopAction,I,O,T.goToFolderAction,l.isSearchMode,l.getAutoFolderEligibility,(e,t,i,s,r,l,d,_,A)=>{const p=t.first(),S=i&&!p.is_dir?r.previewActionHandler:void 0,u=m.reelOpenWithEnabled()&&i&&N.includes(p.ext)?r.replayActionHandler:void 0,T=i&&s?r.openDesktopActionHandler:void 0,O=i&&d&&_?l:void 0,I=i?r.openInNewTabActionHandler:void 0;return i?{actionType:n.ActionBarActionTypes.OPEN,isEnabled:!0,text:_?c.EXP_OPEN_ACTION_STRING:c.EXP_OPEN_IN_ACTION_STRING,icon:a.OpenLine,menu:{type:n.ActionBarMenuType.CUSTOM_DROPDOWN,menuContent:o.default.createElement(v,{user:e,file:p,telemetryContext:E,isInActionBar:!0,previewActionHandler:S,replayActionHandler:u,openInNewTabActionHandler:I,openDesktopActionHandler:T,goToFolderActionHandler:O,isCurrentFolderEligibleForAutomation:A.isCurrentFolderEligibleForAutomation,isSubfolderEligibleForAutomation:A.isSubfolderEligibleForAutomation})}}:void 0});const v=e=>r.isBrowseFile(e.file)?o.default.createElement(A.WithUnity,{file:e.file,user:e.user,render:t=>o.default.createElement(_.ExtensionsPopoverContent,Object.assign({},e,{unityInfo:t}))}):o.default.createElement(_.ExtensionsPopoverContent,Object.assign({},e));v.displayName="OpenMenuContent";t.openActionMenuToggleHandler=(e,t,i)=>{i&&d.handleExtensionDropdownOpen(l.getActionHandlerArgs(e,t),t.actionSurface)}})),define("metaserver/static/js/action_bar/file_actions/permanent_delete_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers"],(function(e,t,i,o,s,a,n,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPermanentDeleteActionSelector=t.permanentDeleteActionHandler=void 0,c=i.__importStar(c);t.permanentDeleteActionHandler=(e,t)=>{const i=r.context(e,t);c.handlePermanentDelete(r.getActionHandlerArgs(e,t),i)};const l=(e,t)=>r.isDeletedFilesOnly(e,t)&&!r.hasUnmountedOrMultipleNamespaces(e,t)&&!r.isPermanentDeleteDisabled(e,t),d={actionType:a.ActionBarActionTypes.PERMANENT_DELETE,isEnabled:!0,text:n.PERMANENT_DELETE_ACTION_STRING,icon:s.DeleteForeverLine};t.createPermanentDeleteActionSelector=()=>o.createSelector(l,e=>e?d:void 0)})),define("metaserver/static/js/action_bar/file_actions/rename_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/modules/clean/filetypes","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers"],(function(e,t,i,o,s,a,n,r,c,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRenameActionSelector=t.renameActionHandler=void 0,l=i.__importStar(l);t.renameActionHandler=(e,t)=>{c.selectedFiles(e,t).first().type===n.FileTypes.TEAM_SHARED_FOLDER?l.handleRenameTeamFolder(c.getActionHandlerArgs(e,t)):l.handleRename(c.getActionHandlerArgs(e,t))};const d=(e,t)=>c.isSingleSelection(e,t)&&c.isLiveFilesOnly(e,t)&&(c.isTeamSharedFolderSelected(e,t)?c.hasContentManagerAndSuperAdmin(e,t):!(c.isPnmSuppressMoveSelected(e,t)||c.isPnmLinkNodeSelected(e,t)||c.isVaultFolderSelected(e,t)||c.isFileSharedWithMeSelected(e,t)));t.createRenameActionSelector=()=>o.createSelector(d,c.context,c.selectedFiles,(e,t,i)=>e?{actionType:a.ActionBarActionTypes.RENAME,isEnabled:t.isCurrentPathWriteable()&&!i.some(e=>e.read_only),text:r.RENAME_ACTION_STRING,icon:s.CursorLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/restore_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers"],(function(e,t,i,o,s,a,n,r,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createRestoreActionSelector=t.showRestoreAction=t.restoreActionHandler=void 0,c=i.__importStar(c);t.restoreActionHandler=(e,t)=>{const i=r.context(e,t);c.handleRestore(r.getActionHandlerArgs(e,t),i)};t.showRestoreAction=(e,t)=>{if(r.isNothingSelected(e,t)||!r.isDeletedFilesOnly(e,t)||r.hasUnmountedOrMultipleNamespaces(e,t))return!1;const i=r.selectedFiles(e,t).first().target_ns;return!(r.isSingleSelectionFolder(e,t)&&i&&0!==i)||r.context(e,t).currentNSAllowsNesting};t.createRestoreActionSelector=()=>o.createSelector(t.showRestoreAction,r.context,r.selectedFiles,(e,t,i)=>e?{actionType:a.ActionBarActionTypes.RESTORE,isEnabled:t.isCurrentPathWriteable()&&!i.some(e=>e.read_only),text:n.RESTORE_ACTION_STRING,icon:s.RestoreLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/share_action",["require","exports","tslib","react","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/action_bar/file_actions/share","metaserver/static/js/browse/global_actions/browse_global_actions_handlers","metaserver/static/js/browse/global_actions/browse_global_actions_helpers","metaserver/static/js/browse/models","metaserver/static/js/modules/clean/react/extensions/data/types","metaserver/static/js/modules/clean/react/extensions/split_share_button","metaserver/static/js/modules/clean/web_user_action_events"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p,S,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createShareActionSelector=t.shouldShowShareAction=t.isFssShareEnabled=void 0,o=i.__importDefault(o),d=i.__importStar(d);const T={surface:"action-bar"};t.isFssShareEnabled=(e,t)=>m(e,t);t.shouldShowShareAction=(e,t)=>m(e,t,!0);const m=(e,t,i=!1)=>{const o=c.context(e,t),{expVaultEnableViewOnlySharing:s}=c.experiments(e,t);return!c.isInsideBackupFolder(e,t)&&(c.isNothingSelected(e,t)?!(c.isCdmRoot(e,t)||o.isCurrentlyInRoot||o.isInsideSandboxFolder||o.isInsideVaultFolder||o.isInFamilySharedFolder):(i||c.isSingleSelection(e,t))&&c.isLiveFilesOnly(e,t)&&!c.isPnmSuppressShareSelected(e,t)&&!c.isPnmLinkNodeSelected(e,t)&&!c.isVaultFolderSelected(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&(!o.isInsideVaultFolder||s)&&!c.isTeamMemberFolderSelected(e,t)&&!c.isAppFolderSelected(e,t))};t.createShareActionSelector=(e=!1)=>s.createSelector(t.shouldShowShareAction,c.user,c.selectedFiles,c.context,c.getActionHandlerArgs,c.currentFolderInfo,c.isRightRailCollapsed,(t,i,s,c,m,E,O)=>{if(!t)return;if(0===s.count()&&!E)return;const I=0===s.count()?{files:E?[E]:[],logShareButtonClick:_.getLogSplitShareButtonFunction(i,O),onShowShare:()=>{d.handleSharedFolderClick(i,c)},onDropdownOpen:_.getLogOpenSplitShareFunction(i,O)}:{files:s.toArray(),onShowShare:l.handleSplitShareClick(m,c),onDropdownOpen:l.handleSplitShareOpen(m),logShareButtonClick:l.handleSplitShareLogging(m),onPresentInZoom:l.handlePresentInZoom(m)},f={files:I.files,user:i,variant:"opacity",triggerType:p.TriggerType.SidebarPrimaryButton,onShowShare:I.onShowShare,onDropdownOpen:I.onDropdownOpen,logShareButtonClick:I.logShareButtonClick,onPresentInZoom:I.onPresentInZoom,context:T,shouldUsePortalPopover:!0,showLeftDigIcon:!0,retrievalSource:m.isSearchMode?u.RetrievalSourceValue.SEARCH:u.RetrievalSourceValue.BROWSE,actionSurface:m.actionSurface},N=e&&s.count()>1;return{actionType:n.ActionBarActionTypes.SHARE,isEnabled:0===s.count()||s.every(e=>A.File.canViewFileMembers(e,c)),text:N?r.SHARE_ALL_SELECTED_ACTION_STRING:r.SHARE_ACTION_STRING,icon:a.ShareArrowLine,button:e?void 0:o.default.createElement(S.SplitShareButton,Object.assign({},f,{renderMenuOnly:!1,expActionBarRedesignEnabled:!0})),menu:e?{type:n.ActionBarMenuType.CUSTOM_DROPDOWN,menuContent:o.default.createElement(S.SplitShareButton,Object.assign({},f,{renderMenuOnly:!0}))}:void 0}})})),define("metaserver/static/js/action_bar/file_actions/star_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/starred/browse_exports","metaserver/static/js/browse/models","metaserver/static/js/modules/constants/web_experience_constants","metaserver/static/js/starred/redux/selectors"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createStarActionSelector=t.starActionHandler=void 0,c=i.__importStar(c);t.starActionHandler=(e,t)=>{c.handleStar(r.getActionHandlerArgs(e,t))};const p=_.STARRED_STORE_REDUX?(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&!A.getIsStarred(e,r.selectedFiles(e,t).first().file_id):(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&!l.StarredStore.getIsStarred({id:r.selectedFiles(e,t).first().file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID});t.createStarActionSelector=()=>o.createSelector(p,r.selectedFiles,(e,t)=>e?{actionType:a.ActionBarActionTypes.STAR,isEnabled:!d.File.isNoAccessSharedFolder(t.first()),text:n.STAR_ACTION_STRING,icon:s.StarLine}:void 0)})),define("metaserver/static/js/action_bar/file_actions/unstar_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/starred/browse_exports","metaserver/static/js/starred/redux/selectors","metaserver/static/js/modules/constants/web_experience_constants"],(function(e,t,i,o,s,a,n,r,c,l,d,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createUnstarActionSelector=t.unstarActionHandler=void 0,c=i.__importStar(c);t.unstarActionHandler=(e,t)=>{c.handleUnstar(r.getActionHandlerArgs(e,t))};const A={actionType:a.ActionBarActionTypes.UNSTAR,isEnabled:!0,text:n.UNSTAR_ACTION_STRING,icon:s.StarFill},p=_.STARRED_STORE_REDUX?(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&d.getIsStarred(e,r.selectedFiles(e,t).first().file_id):(e,t)=>r.isSingleSelection(e,t)&&r.isLiveFilesOnly(e,t)&&!r.isFileSharedWithMeSelected(e,t)&&!r.context(e,t).isInsideVaultFolder&&l.StarredStore.getIsStarred({id:r.selectedFiles(e,t).first().file_id,type:l.HOME_RESOURCE_ID_TYPE.ENCODED_FILE_OBJ_ID});t.createUnstarActionSelector=()=>o.createSelector(p,e=>e?A:void 0)})),define("metaserver/static/js/action_bar/file_actions/version_history_action",["require","exports","tslib","reselect","dig-components/icons/src","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/cloud_docs/constants","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/action_bar/file_actions/file_actions_selectors","metaserver/static/js/browse/file_actions/action_handlers","metaserver/static/js/modules/core/i18n","metaserver/static/js/action_bar/action_bar_activity_menu"],(function(e,t,i,o,s,a,n,r,c,l,d,_){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createVersionHistoryActionMenuItem=t.createVersionHistoryActionSelector=t.showVersionHistoryAction=t.versionHistoryActionHandler=void 0,l=i.__importStar(l);t.versionHistoryActionHandler=(e,t)=>{l.handleVersions(c.getActionHandlerArgs(e,t))};const A={actionType:a.ActionBarActionTypes.VERSION_HISTORY,isEnabled:!0,text:r.VERSION_HISTORY_ACTION_STRING,icon:s.ClockLine};t.showVersionHistoryAction=(e,t)=>{const i=c.selectedFiles(e,t).first();return c.isSingleSelectionFile(e,t)&&c.isLiveFilesOnly(e,t)&&!c.isFileSharedWithMeSelected(e,t)&&(!c.isCloudDocSelected(e,t)||!n.isPointerByExtension(i.ns_path))&&!c.isPnmLinkNodeSelected(e,t)};t.createVersionHistoryActionSelector=()=>o.createSelector(t.showVersionHistoryAction,e=>e?A:void 0);t.createVersionHistoryActionMenuItem=(e,i)=>t.showVersionHistoryAction(e,i)?{value:{type:a.ActionBarActionTypes.VERSION_HISTORY,menuItem:_.ActivityAction.VERSION_HISTORY},description:d.intl.formatMessage(r.VERSION_HISTORY_ACTION_STRING),icon:s.ClockLine,isEnabled:!0}:void 0})),define("metaserver/static/js/action_bar/action_bar_strings",["require","exports","react-intl"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EDIT_PDF_ACTION_STRING=t.FIND_DUPLICATES_ACTION_STRING=t.SELF_SIGN_ACTION_V2_STRING=t.SELF_SIGN_ACTION_V1_STRING=t.CREATE_PORTAL_ACTION_STRING=t.DELETE_PORTAL_ACTION_STRING=t.ADD_TO_COLLECTION_STRING=t.ACTION_DISABLED_STRING=t.ACTIVITY_ACTION_STRING=t.SAVE_NEW_VERSION_STRING=t.REQUEST_APPROVAL_TOOLTIP=t.SEND_FOR_SIGNATURE_ACTION_V2_STRING=t.SEND_FOR_SIGNATURE_ACTION_V1_STRING=t.SEND_FOR_SIGNATURE_ACTION_STRING=t.ORGANIZE_ACTION_STRING=t.APPLY_NAMING_CONVENTION_ACTION_STRING=t.EDIT_FOLDER_AUTOMATION_STRING=t.ADD_FOLDER_AUTOMATION_STRING=t.TIDY_UP_ACTION_STRING=t.CONVERT_TO_ARCHIVE_ACTION_STRING=t.FILE_CONVERSION_STRING=t.FOLLOWING_ACTION_STRING=t.FOLLOW_ACTION_STRING=t.SHARE_COPY_LINK_ACTION_TOOLTIP=t.SHARE_COPY_LINK_ACTION_STRING=t.EXP_OPEN_IN_APP_ACTION_STRING=t.OPEN_IN_APP_ACTION_STRING=t.OPEN_WINDOWS_DESKTOP_ACTION_STRING=t.OPEN_MAC_DESKTOP_ACTION_STRING=t.PREVIEW_ACTION_STRING=t.ADD_CONTENT_ACTION_STRING=t.GO_TO_FOLDER_ACTION_STRING=t.SHARE_ALL_SELECTED_ACTION_STRING=t.SHARE_ACTION_STRING=t.SPACES_PROJECTS_RENAME_DROPDOWN_ACTION_STRING=t.ADD_BACKUP_TO_TRANSFER_ACTION_STRING=t.ADD_TO_TRANSFER_ACTION_STRING=t.HIDE_DELETED_FILES_ACTION_STRING=t.SHOW_DELETED_FILES_ACTION_STRING=t.RE_ADD_SHARED_FOLDER_ACTION_STRING=t.UNSTAR_ACTION_STRING=t.STAR_ACTION_STRING=t.PERMANENT_DELETE_ACTION_STRING=t.RESTORE_ACTION_STRING=t.PIN_TO_ROOT_ACTION_STRING=t.PIN_TO_ACTION_STRING=t.UNPIN_ACTION_STRING=t.VERSION_HISTORY_ACTION_STRING=t.MANAGE_AS_ADMIN_ACTION_STRING=t.CALCULATE_FOLDER_SIZE_ACTION_STRING=t.EVENTS_ACTION_STRING=t.FILE_REQUEST_UNLOCK_ACTION_STRING=t.FILE_UNLOCK_ACTION_STRING=t.FILE_LOCK_ACTION_STRING=t.VAULT_LOCK_STRING=t.VAULT_UNLOCK_STRING=t.TRANSFER_ACTION_STRING=t.COMMENT_ACTION_STRING=t.ARCHIVE_ACTION_STRING=t.REWIND_ACTION_STRING=t.FOLDER_HISTORY_ACTION_STRING=t.COPY_ACTION_STRING=t.REMOVE_ACTIION_STRING=t.DELETE_ACTION_STRING=t.RENAME_ACTION_STRING=t.MOVE_ACTION_STRING=t.PASTE_ACTION_STRING=t.EXP_OPEN_IN_NEW_TAB_ACTION_STRING=t.EXP_OPEN_IN_ACTION_STRING=t.EXP_OPEN_ACTION_STRING=t.OPEN_ACTION_STRING=t.REQUEST_FILES_ACTION_STRING=t.DOWNLOAD_ACTION_STRING=t.UPLOAD_ACTION_STRING=t.NEW_ACTION_STRING=t.ADD_ACTION_STRING=t.CREATE_ACTION_STRING=void 0,t.CREATE_ACTION_STRING=i.defineMessage({id:"nMBhV+",defaultMessage:"Create"}),t.ADD_ACTION_STRING=i.defineMessage({id:"/6ordy",defaultMessage:"Add"}),t.NEW_ACTION_STRING=i.defineMessage({id:"5o4J9F",defaultMessage:"New"}),t.UPLOAD_ACTION_STRING=i.defineMessage({id:"yZqpE+",defaultMessage:"Upload"}),t.DOWNLOAD_ACTION_STRING=i.defineMessage({id:"3xAi9D",defaultMessage:"Download"}),t.REQUEST_FILES_ACTION_STRING=i.defineMessage({id:"67epwi",defaultMessage:"Request files"}),t.OPEN_ACTION_STRING=i.defineMessage({id:"alhtiG",defaultMessage:"Open"}),t.EXP_OPEN_ACTION_STRING=i.defineMessage({id:"alhtiG",defaultMessage:"Open"}),t.EXP_OPEN_IN_ACTION_STRING=i.defineMessage({id:"MysX8v",defaultMessage:"Open in"}),t.EXP_OPEN_IN_NEW_TAB_ACTION_STRING=i.defineMessage({id:"N6Txco",defaultMessage:"Open in new tab"}),t.PASTE_ACTION_STRING=i.defineMessage({id:"eF4sif",defaultMessage:"Paste"}),t.MOVE_ACTION_STRING=i.defineMessage({id:"GtD4wV",defaultMessage:"Move"}),t.RENAME_ACTION_STRING=i.defineMessage({id:"DyrBQI",defaultMessage:"Rename"}),t.DELETE_ACTION_STRING=i.defineMessage({id:"nOBhEP",defaultMessage:"Delete"}),t.REMOVE_ACTIION_STRING=i.defineMessage({id:"efT3qC",defaultMessage:"Remove"}),t.COPY_ACTION_STRING=i.defineMessage({id:"6MJeaA",defaultMessage:"Copy"}),t.FOLDER_HISTORY_ACTION_STRING=i.defineMessage({id:"hunQnq",defaultMessage:"Folder history"}),t.REWIND_ACTION_STRING=i.defineMessage({id:"e3V4bo",defaultMessage:"Rewind this folder"}),t.ARCHIVE_ACTION_STRING=i.defineMessage({id:"uH1oiy",defaultMessage:"Archive"}),t.COMMENT_ACTION_STRING=i.defineMessage({id:"XAo7sk",defaultMessage:"Add comment"}),t.TRANSFER_ACTION_STRING=i.defineMessage({id:"oiRsvq",defaultMessage:"Send a copy"}),t.VAULT_UNLOCK_STRING=i.defineMessage({id:"7KlMwN",defaultMessage:"Unlock vault"}),t.VAULT_LOCK_STRING=i.defineMessage({id:"LQt5WS",defaultMessage:"Lock vault"}),t.FILE_LOCK_ACTION_STRING=i.defineMessage({id:"ljfv4E",defaultMessage:"Lock editing"}),t.FILE_UNLOCK_ACTION_STRING=i.defineMessage({id:"lIUM0e",defaultMessage:"Unlock editing"}),t.FILE_REQUEST_UNLOCK_ACTION_STRING=i.defineMessage({id:"lIkHQt",defaultMessage:"Ask to unlock"}),t.EVENTS_ACTION_STRING=i.defineMessage({id:"kLiPVQ",defaultMessage:"Events"}),t.CALCULATE_FOLDER_SIZE_ACTION_STRING=i.defineMessage({id:"W7oflT",defaultMessage:"Calculate size"}),t.MANAGE_AS_ADMIN_ACTION_STRING=i.defineMessage({id:"vECsXs",defaultMessage:"View in admin console"}),t.VERSION_HISTORY_ACTION_STRING=i.defineMessage({id:"T/KgJj",defaultMessage:"Version history"}),t.UNPIN_ACTION_STRING=i.defineMessage({id:"UPrzRq",defaultMessage:"Unpin"}),t.PIN_TO_ACTION_STRING=i.defineMessage({id:"BgBbVR",defaultMessage:"Pin to..."}),t.PIN_TO_ROOT_ACTION_STRING=i.defineMessage({id:"XGL6ZT",defaultMessage:"Pin"}),t.RESTORE_ACTION_STRING=i.defineMessage({id:"GQqYaL",defaultMessage:"Restore"}),t.PERMANENT_DELETE_ACTION_STRING=i.defineMessage({id:"KkjU0R",defaultMessage:"Permanently delete"}),t.STAR_ACTION_STRING=i.defineMessage({id:"0BUrj7",defaultMessage:"Star"}),t.UNSTAR_ACTION_STRING=i.defineMessage({id:"5e94v2",defaultMessage:"Unstar"}),t.RE_ADD_SHARED_FOLDER_ACTION_STRING=i.defineMessage({id:"O0cs6d",defaultMessage:"Re-add shared folder"}),t.SHOW_DELETED_FILES_ACTION_STRING=i.defineMessage({id:"SH7HST",defaultMessage:"Show deleted files"}),t.HIDE_DELETED_FILES_ACTION_STRING=i.defineMessage({id:"3H2+TZ",defaultMessage:"Hide deleted files"}),t.ADD_TO_TRANSFER_ACTION_STRING=i.defineMessage({id:"mjG96z",defaultMessage:"Transfer"}),t.ADD_BACKUP_TO_TRANSFER_ACTION_STRING=i.defineMessage({id:"KHusM/",defaultMessage:"Send a copy"}),t.SPACES_PROJECTS_RENAME_DROPDOWN_ACTION_STRING=i.defineMessage({id:"0tQPtN",defaultMessage:"Add to project"}),t.SHARE_ACTION_STRING=i.defineMessage({id:"Wi4w+P",defaultMessage:"Share"}),t.SHARE_ALL_SELECTED_ACTION_STRING=i.defineMessage({id:"M9tYme",defaultMessage:"Share all selected"}),t.GO_TO_FOLDER_ACTION_STRING=i.defineMessage({id:"mppZEu",defaultMessage:"Go to folder"}),t.ADD_CONTENT_ACTION_STRING=i.defineMessage({id:"SzVUpr",defaultMessage:"Add"}),t.PREVIEW_ACTION_STRING=i.defineMessage({id:"L+ww/y",defaultMessage:"Preview"}),t.OPEN_MAC_DESKTOP_ACTION_STRING=i.defineMessage({id:"x31E2S",defaultMessage:"Show in Finder"}),t.OPEN_WINDOWS_DESKTOP_ACTION_STRING=i.defineMessage({id:"knPNIT",defaultMessage:"Show in File Explorer"}),t.OPEN_IN_APP_ACTION_STRING=i.defineMessage({id:"dvphCf",defaultMessage:"Open"}),t.EXP_OPEN_IN_APP_ACTION_STRING=i.defineMessage({id:"iJWsRK",defaultMessage:"Open in"}),t.SHARE_COPY_LINK_ACTION_STRING=i.defineMessage({id:"pIM+Sj",defaultMessage:"Copy link"}),t.SHARE_COPY_LINK_ACTION_TOOLTIP=i.defineMessage({id:"z1g0V5",defaultMessage:"Copy shared link"}),t.FOLLOW_ACTION_STRING=i.defineMessage({id:"GNolQQ",defaultMessage:"Follow"}),t.FOLLOWING_ACTION_STRING=i.defineMessage({id:"spCwO+",defaultMessage:"Following"}),t.FILE_CONVERSION_STRING=i.defineMessage({id:"MhWh/C",defaultMessage:"Save as..."}),t.CONVERT_TO_ARCHIVE_ACTION_STRING=i.defineMessage({id:"vruy3+",defaultMessage:"Zip"}),t.TIDY_UP_ACTION_STRING=i.defineMessage({id:"x1f5gL",defaultMessage:"Multi-file organize"}),t.ADD_FOLDER_AUTOMATION_STRING=i.defineMessage({id:"0gE6qt",defaultMessage:"Add automation"}),t.EDIT_FOLDER_AUTOMATION_STRING=i.defineMessage({id:"Xrep7o",defaultMessage:"Edit automation"}),t.APPLY_NAMING_CONVENTION_ACTION_STRING=i.defineMessage({id:"zlxWBG",defaultMessage:"Set naming convention"}),t.ORGANIZE_ACTION_STRING=i.defineMessage({id:"pAFgMn",defaultMessage:"Organize"}),t.SEND_FOR_SIGNATURE_ACTION_STRING=i.defineMessage({id:"L7z983",defaultMessage:"Send for signature"}),t.SEND_FOR_SIGNATURE_ACTION_V1_STRING=i.defineMessage({id:"4pZ3p7",defaultMessage:"Request signature"}),t.SEND_FOR_SIGNATURE_ACTION_V2_STRING=i.defineMessage({id:"lbICcn",defaultMessage:"Send signature request"}),t.REQUEST_APPROVAL_TOOLTIP=i.defineMessage({id:"sg9zj0",defaultMessage:"Keep track of feedback and approvals from stakeholders all in one place."}),t.SAVE_NEW_VERSION_STRING=i.defineMessage({id:"fKKWug",defaultMessage:"Save new version"}),t.ACTIVITY_ACTION_STRING=i.defineMessage({id:"hkINWZ",defaultMessage:"Activity"}),t.ACTION_DISABLED_STRING=i.defineMessage({id:"0IftsN",defaultMessage:"You don't have permission to make changes to this file"}),t.ADD_TO_COLLECTION_STRING=i.defineMessage({id:"rl/uzK",defaultMessage:"Add to collection"}),t.DELETE_PORTAL_ACTION_STRING=i.defineMessage({id:"LVmuwV",defaultMessage:"Delete portal"}),t.CREATE_PORTAL_ACTION_STRING=i.defineMessage({id:"yIjMVJ",defaultMessage:"Create portal"}),t.SELF_SIGN_ACTION_V1_STRING=i.defineMessage({id:"5b2GuK",defaultMessage:"Self-sign"}),t.SELF_SIGN_ACTION_V2_STRING=i.defineMessage({id:"x6z5A7",defaultMessage:"Add my signature"}),t.FIND_DUPLICATES_ACTION_STRING=i.defineMessage({id:"LGboti",defaultMessage:"Find Duplicates"}),t.EDIT_PDF_ACTION_STRING=i.defineMessage({id:"7hZE74",defaultMessage:"Edit"})})),define("metaserver/static/js/browse/browse_action_toolbar_v2",["require","exports","tslib","react","classnames","react-redux","typescript/component_libraries/retrieval-components/src/simple-action-bar/index","typescript/component_libraries/retrieval-components/src/simple-action-bar/action_bar_types","metaserver/static/js/action_bar/file_actions/file_actions","metaserver/static/js/browse/action_logger","metaserver/static/js/browse/browse_actions/browse_actions","metaserver/static/js/browse/data/selectors","metaserver/static/js/browse/logger_util","metaserver/static/js/modules/clean/web_user_action_events","metaserver/static/js/modules/core/i18n","metaserver/static/js/folder_subscriptions/data/folder_subscription_controller","metaserver/static/js/browse/browse_view_mode_toggle","metaserver/static/js/browse/browse_sharing_view","metaserver/static/js/growth/ui/open_in_mobile_modal_controller","metaserver/static/js/file_info/utils","metaserver/static/js/browse/selection_indicator","metaserver/static/js/browse/data/action_creators/index","metaserver/static/js/growth/ui/personalization/full_funnel_activation/jtbd_upload_button_tooltip","metaserver/static/js/growth/ui/personalization/full_funnel_activation/jtbd_create_button_tooltip"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p,S,u,T,m,E,O,I,f,N,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowseActionToolbarV2=t.getActionBarActions=void 0,o=i.__importDefault(o),s=i.__importDefault(s),l=i.__importStar(l),_=i.__importStar(_);const R=d.createBrowseActionBarAccessibilityConfigSelector(),g={selectedFilesSelector:_.selectedFiles,userSelector:_.user,contextSelector:_.context,overQuotaDataSelector:d.overQuotaDataSelector,experimentSelector:d.experimentSelector,isSearchMode:!1,actionSurface:p.ActionSurfaceLogValue.ACTION_BAR,currentFolderInfo:_.getCurrentFolderInfo,flowsFolderRule:_.flowsFolderRule,browsePostTTIData:_.browsePostTTIData,browsePostTTIExperiments:_.browsePostTTIExperiments,hasLinkedMobile:_.hasLinkedMobile,accessibilityConfig:e=>R(e,g),rightRailCollapsedState:_.isRightRailCollapsed,isInsideBackupFolder:_.isInsideBackupFolder,isSelectedBackupFolder:_.isSelectedBackupFolder,backupInfoByFile:_.backupInfoByFile,isBusinessSpaceFound:d.isBusinessSpaceFoundSelector,businessSpaceXgid:d.businessSpaceXgidSelector},y=d.getBrowseFileActionSelectors();t.getActionBarActions=c.createActionBarActionSelector();const M={handleAction:c.actionHandler,handleActionMenuToggle:c.actionMenuToggleHandler,setOverflowMenuCoordinates:f.setOverflowMenuCoordinates,setOverflowMenuOpenRequest:f.setOverflowMenuOpenRequest,setOverflowMenuCloseRequest:f.setOverflowMenuCloseRequest,setCreateMenuOpenRequest:f.setCreateMenuOpenRequest};class F extends o.default.Component{constructor(){super(...arguments),this.state={overflowMenuOpenRequest:void 0},this.actionHandler={handleAction:(e,t)=>{e.event.stopPropagation(),g.actionSurface=t?p.ActionSurfaceLogValue.RIGHT_CLICK_MENU:p.ActionSurfaceLogValue.OVERFLOW_MENU,this.props.handleAction(e,g,d.BrowseFileActionHandlers)},handleMenuToggle:({type:e,isOpen:t})=>{this.props.handleActionMenuToggle({type:e,isOpen:t},g,d.BrowseActionMenuToggleHandlers)}},this.onOverflowMenuToggle=e=>{if(e.isOpen){const{num_files_selected:e,num_folders_selected:t}=A.countFilesAndFolders(this.props.selectedFiles);l.logBrowseAction({uid:this.props.user.id,action:p.WebUserActionLogEvent.OPEN_OVERFLOW_MENU,num_files_selected:e,num_folders_selected:t,action_surface:this.props.overflowMenuCoordinates?p.ActionSurfaceLogValue.RIGHT_CLICK_MENU:p.ActionSurfaceLogValue.ACTION_BAR}),this.props.setOverflowMenuCloseRequest()}else this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest()},this.resetOverflowMenuCoordinates=e=>{this.props.overflowMenuCoordinates&&(this.props.setOverflowMenuCoordinates(),this.props.setOverflowMenuCloseRequest({autoFocus:!1}))}}render(){const{browseActionBarActions:e,accessibilityConfig:t,responsive:i,path:a,selectedFiles:c,user:l,showSharingView:d,withoutFolderOverviewAbove:_,selectedOrCurrentFolder:A,showBrowseViewToggle:p,overflowMenuTitle:O,canShowSelectionIndicatorInToolbar:f,isRightRailCollapsed:R,overflowMenuOpenRequest:g,overflowMenuCloseRequest:y,overflowMenuCoordinates:M,createMenuOpenRequest:F,setCreateMenuOpenRequest:b}=this.props,C=i.isResponsive?i.isMatchedLarge?r.ResponsiveSize.DESKTOP:i.isMatchedMedium?r.ResponsiveSize.TABLET:r.ResponsiveSize.MOBILE:r.ResponsiveSize.DESKTOP,D=f?o.default.createElement("div",{className:"family-brws-selection-view-mode-container"},o.default.createElement(I.SelectionIndicator,{responsive:i,selectedFilesCount:c.size,rightRailCollapsed:R}),o.default.createElement(T.BrowseViewModeToggle,{user:l,className:"brws-action-toolbar-view-mode-toggle"})):o.default.createElement(T.BrowseViewModeToggle,{user:l,className:"brws-action-toolbar-view-mode-toggle"});return o.default.createElement("div",{className:s.default("brws-action-toolbar",{"brws-action-toolbar--without-folder-overview":_}),style:{width:this.props.fixedWidth},onClick:this.resetOverflowMenuCoordinates},o.default.createElement(u.FolderSubscriptionController,{path:a,selectedFiles:c}),o.default.createElement(n.ActionBar,{className:"brws-action-toolbar-actionbar",actionHandler:this.actionHandler,actions:e,intl:S.intl,responsive:!0,responsiveSize:C,accessibilityConfig:t,handleOverflowMenuToggle:this.onOverflowMenuToggle,overflowMenuOpenRequest:g,overflowMenuCloseRequest:y,overflowMenuTitle:O,expActionBarRedesignEnabled:!0,overflowMenuCoordinates:M,hideOverflowMenuHeader:!1,resolveOverflowMenuOpenRequest:()=>{this.props.setOverflowMenuOpenRequest(void 0)},canShowSelectionIndicatorInToolbar:f,createMenuOpenRequest:F,resolveCreateMenuOpenRequest:()=>{b()}}),d&&o.default.createElement("div",{className:"brws-action-toolbar-sharing-view-container"},o.default.createElement(m.BrowseSharingView,{useCompactMode:C!==r.ResponsiveSize.DESKTOP})),p&&D,o.default.createElement(E.OpenInMobileModalController,{folder:A}),o.default.createElement(N.JtbdUploadButtonTooltipController,{actionBarActionDefinitions:e,responsiveSize:C}),o.default.createElement(v.JtbdCreateButtonTooltipController,{actionBarActionDefinitions:e,responsiveSize:C}))}}F.displayName="BrowseActionToolbarController";const b=a.connect((e,i)=>{const o=_.user(e),s=_.context(e),a=_.selectedFiles(e).toList(),n=O.getTitle(a,o,s,S.intl),r=i.responsive.isResponsive&&!i.responsive.isMatchedLarge&&!i.responsive.isMatchedMedium,c=i.responsive.isResponsive&&!i.responsive.isMatchedLarge&&i.responsive.isMatchedMedium,l=r?d.BrowseMobileFileActionSelectors:c?d.BrowseTabletFileActionSelectors:y,A=g.accessibilityConfig?g.accessibilityConfig(e):void 0,p=g.selectedFilesSelector(e),u=1===p.count()&&p.first().is_dir?p.first():g.currentFolderInfo(e);return{browseActionBarActions:t.getActionBarActions(e,g,l,d.getBrowseScenarioActions),user:o,accessibilityConfig:A,selectedFiles:_.selectedFiles(e),path:_.path(e),showBrowseViewToggle:_.showBrowseViewToggleInToolbar(e),showSharingView:_.showShareViewInToolbar(e,i.responsive),fileActionsExperiments:g.experimentSelector(e),selectedOrCurrentFolder:u,overflowMenuTitle:n,canShowSelectionIndicatorInToolbar:_.showSelectionIndicatorInToolbar(e),isRightRailCollapsed:_.isRightRailCollapsed(e),overflowMenuOpenRequest:_.overflowMenuOpenRequest(e),overflowMenuCloseRequest:_.overflowMenuCloseRequest(e),overflowMenuCoordinates:_.overflowMenuCoordinates(e),createMenuOpenRequest:_.createMenuOpenRequest(e)}},M);t.BrowseActionToolbarV2=b(F)})),define("metaserver/static/js/action_bar/file_actions/portable/delete/strings",["require","exports","react-intl","react"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BACKUP_DELETE_CONTENT_ANCHORS=t.BACKUP_DELETE_TITLE_ANCHORS=t.BACKUP_DELETE_CONTENT_WIN=t.BACKUP_DELETE_CONTENT_MAC=t.BACKUP_DELETE_TITLE=void 0,t.BACKUP_DELETE_TITLE=i.defineMessage({id:"uI4EPd",defaultMessage:"Are you sure you want to delete this from your Dropbox <u>and</u> your computer?"}),t.BACKUP_DELETE_CONTENT_MAC=i.defineMessage({id:"GDyzdI",defaultMessage:"If not, go to your file or folder in Finder, make sure it’s locally available, and right click it and click <b>Don’t sync to dropbox.com</b>."}),t.BACKUP_DELETE_CONTENT_WIN=i.defineMessage({id:"3y4uyY",defaultMessage:"If not, go to your file or folder in File Explorer, make sure it’s locally available, and right click it and click <b>Don’t sync to dropbox.com</b>."}),t.BACKUP_DELETE_TITLE_ANCHORS=i.defineMessage({id:"E1Y709",defaultMessage:"Delete {folderName} folder from {backupName} backup?"}),t.BACKUP_DELETE_CONTENT_ANCHORS=i.defineMessage({id:"0+lqm3",defaultMessage:"{folderName} will be deleted and removed from Dropbox Backup. This change might take a while to occur. Don’t worry—this folder will still live on your computer."})})),define("metaserver/static/js/modules/clean/react/async_overquota_modal_controller",["require","exports","tslib"],(function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showOverquota=void 0,t.showOverquota=function(t,o,s){return i.__awaiter(this,void 0,void 0,(function*(){const{showOverquota:a}=yield new Promise((t,i)=>{e(["metaserver/static/js/overquota/overquota_modal_controller"],t,i)}).then(i.__importStar);a({oqa:t,tagline:o,headline:s})}))}}));var __createBinding=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),__setModuleDefault=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),__importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return __setModuleDefault(t,e),t};define("metaserver/static/js/modules/clean/react/async_fileops_modals",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showNamingConventionsModal=t.showTidyUpDialog=t.showMoveDialog=t.showAdminUpload=void 0,t.showAdminUpload=function(t){var i;i=({showAdminUpload:e})=>e(t),new Promise((t,i)=>{e(["metaserver/static/js/modules/clean/react/fileops_modals"],t,i)}).then(__importStar).then(i)},t.showMoveDialog=function(t){new Promise((t,i)=>{e(["metaserver/static/js/folder_dialog/move_dialog_modal"],t,i)}).then(__importStar).then(({MoveDialogModal:e})=>e.show(t))},t.showTidyUpDialog=function(t){new Promise((t,i)=>{e(["metaserver/static/js/tidy_up/modal/tidy_up_modal"],t,i)}).then(__importStar).then(({showTidyUpModal:e})=>e(t))},t.showNamingConventionsModal=function(t){new Promise((t,i)=>{e(["metaserver/static/js/naming_conventions/naming_conventions_modal"],t,i)}).then(__importStar).then(({showNamingConventionsModal:e})=>e(t))}})),define("metaserver/static/js/action_bar/file_actions/portable/copy",["require","exports","tslib","apex-metrics/index","lodash","metaserver/static/js/file_actions/metrics","metaserver/static/js/logging/hive/schemas/web-modal-activity","metaserver/static/js/metrics/index","metaserver/static/js/modules/clean/react/async_fileops_modals","metaserver/static/js/modules/clean/react/async_overquota_modal_controller","metaserver/static/js/modules/clean/react/fileops_actions","metaserver/static/js/folder_dialog/api","metaserver/static/js/folder_dialog/constants","metaserver/static/js/modules/clean/viewer"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.portableCopy=void 0,s=i.__importStar(s),c=i.__importStar(c),l=i.__importStar(l),d=i.__importStar(d);t.portableCopy=({currentFQPath:e,exceptions:t,filesPath:S,source:u,user:T,createNewFolderInMoveDialog:m},E={})=>i.__awaiter(void 0,void 0,void 0,(function*(){if(t.isOverFreeQuota&&!t.hasExcludedNsIds)return void l.showOverquota("wb_oq_mv_cp");const i=r.getMetricsReporter(),O={surface:u,batchSizeBucket:a.bucketForBatchSize(S.length),contentType:a.batchContentType(S)},I={totalLatency:i.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"copy/batch/latency_total_ms"},O),averageLatency:i.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"copy/batch/latency_average_ms"},O),completed:i.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"copy/batch/completed"},O)};let f=0;const N=(e,t)=>{var i;null===(i=E.onSuccess)||void 0===i||i.call(E,e,t),I.totalLatency.recordDuration(Date.now()-f,o.TimeUnit.MILLISECONDS),I.averageLatency.recordDuration((Date.now()-f)/S.length,o.TimeUnit.MILLISECONDS),I.completed.record(1)},v=()=>{var e;null===(e=E.onError)||void 0===e||e.call(E),I.totalLatency.recordDuration(Date.now()-f,o.TimeUnit.MILLISECONDS),I.averageLatency.recordDuration((Date.now()-f)/S.length,o.TimeUnit.MILLISECONDS),I.completed.record(0)},R=()=>{var e;return null===(e=E.onRequestNotSent)||void 0===e?void 0:e.call(E)},g=()=>{var e;return null===(e=E.onUndo)||void 0===e?void 0:e.call(E)};c.showMoveDialog({operation:A.Operation.COPY,modalName:n.ModalName.COPY,user:T,apiClient:{moveToFolder:(e,t,i)=>(f=Date.now(),d.copyFiles({user:T,files:S,onSuccess:N,onRequestNotSent:R,onUndo:g,onError:v,newPath:e,checkFSWs:!0,useApiV2:!0,isLockedVaultFolder:i}),Promise.resolve()),getFolderContents:p.Viewer.get_viewer().is_team_assume_user_session?_.getFolderContents:_.getFolderContentsAPIv2,getFolderSuggestion:_.getFolderSuggestion},entries:S,initialFolderSelection:e,onSuccess:s.noop,onCancel:s.noop,showFolderSuggestion:!0,createNewFolderInMoveDialog:m})}))})),define("metaserver/static/js/action_bar/file_actions/portable/delete/delete",["require","exports","tslib","metaserver/static/js/action_bar/file_actions/portable/delete/delete_modal","metaserver/static/js/files_view/file_actions/api_v2"],(function(e,t,i,o,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.portableDelete=void 0;t.portableDelete=({user:e,filesPath:t,fq_path:a},{onSuccess:n,onError:r,onNetworkRequest:c})=>{o.showDeleteFileModal({onConfirm:()=>i.__awaiter(void 0,void 0,void 0,(function*(){null==c||c();const i=yield s.deleteFiles(t,e.id,!0);i.isError||"success"!==i.result.entries[0][".tag"]?null==r||r(i.isError?i:s.createUndefinedRpcResult()):null==n||n()})),fq_path:a,totalFilesCount:t.length,user:e})}})),define("metaserver/static/js/action_bar/file_actions/portable/delete/delete_modal",["require","exports","tslib","dig-components/modal","metaserver/static/js/components/ui/modal","react","metaserver/static/js/modules/core/i18n","dig-components/typography","dig-components/buttons","metaserver/static/js/modules/clean/filepath/filepath","metaserver/static/js/action_bar/action_bar_strings","metaserver/static/js/modules/clean/sync_everything/constants","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/action_bar/file_actions/portable/delete/strings"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.showDeleteFileModal=t.DeleteFileModal=void 0,a=i.__importDefault(a),l=i.__importStar(l),A=i.__importStar(A);t.DeleteFileModal=({user:e,fq_path:t,totalFilesCount:i,onConfirm:s})=>{const[S,u]=a.default.useState(!0),T=()=>u(!1),m=e.is_cdm_member,E=n.intl.formatMessage({id:"FMtrmh",defaultMessage:"{fileCount, plural, one {# file} few {# files} many {# files} other {# files}}"},{fileCount:i}),O=1===i?l.filename(t):E,I=_.isBackupBrowse()&&!_.isInsideEDB(t),f={filename:O,b:e=>a.default.createElement(r.Text,{isBold:!0},e),u:e=>a.default.createElement("span",{style:{textDecoration:"underline"}},e)},N=n.intl.formatMessage({id:"yDuoGW",defaultMessage:"Cancel"}),v=n.intl.formatMessage(d.DELETE_ACTION_STRING);return a.default.createElement(o.Modal,{open:S,isCentered:!0,onRequestClose:T},a.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-standard",className:"naming-conventions__header"},a.default.createElement(r.Title,null,I?n.intl.formatMessage(p.BACKUP_DELETE_TITLE,f):n.intl.formatMessage(d.DELETE_ACTION_STRING))),a.default.createElement(o.Modal.Body,{hasVerticalSpacing:!1,className:"uxa-modal",id:"delete-file-modal"},a.default.createElement(r.Text,null,I?A.mac?n.intl.formatMessage(p.BACKUP_DELETE_CONTENT_MAC,f):n.intl.formatMessage(p.BACKUP_DELETE_CONTENT_WIN,f):m?n.intl.formatMessage({id:"emsobI",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your team member folder?"},f):n.intl.formatMessage({id:"8TOnv7",defaultMessage:"Are you sure you want to delete <b>{filename}</b> from your Dropbox?"},f))),a.default.createElement(o.Modal.Footer,null,a.default.createElement(c.Button,{variant:"opacity",onClick:T},N),a.default.createElement(c.Button,{variant:"primary",onClick:()=>{s(),T()}},v)))},t.showDeleteFileModal=function(e){s.Modal.showInstance(a.default.createElement(t.DeleteFileModal,Object.assign({},e)))}})),define("metaserver/static/js/action_bar/file_actions/portable/delete/snackbars",["require","exports","metaserver/static/js/files_view/file_actions/snackbars","metaserver/static/js/modules/clean/react/snackbar"],(function(e,t,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deleteFailedSnackBar=t.deleteCompleteSnackBar=t.deleteSnackBarInProgress=void 0;t.deleteSnackBarInProgress=(e,t=1)=>o.Snackbar.sync(i.deleteInProgress(t),!1,e,!0);t.deleteCompleteSnackBar=(e,t=1)=>o.Snackbar.complete(i.deleteCompleteSuccess(t,t),e,!0);t.deleteFailedSnackBar=(e,t,s=1)=>{e.error&&o.Snackbar.fail(i.deleteError(s,e.error),t,!0)}})),define("metaserver/static/js/action_bar/file_actions/portable/move",["require","exports","tslib","apex-metrics/index","lodash","metaserver/static/js/file_actions/metrics","metaserver/static/js/logging/hive/schemas/web-modal-activity","metaserver/static/js/metrics/index","metaserver/static/js/modules/clean/react/async_fileops_modals","metaserver/static/js/modules/clean/react/async_overquota_modal_controller","metaserver/static/js/modules/clean/react/fileops_actions","metaserver/static/js/folder_dialog/api","metaserver/static/js/folder_dialog/constants","metaserver/static/js/modules/clean/viewer"],(function(e,t,i,o,s,a,n,r,c,l,d,_,A,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.portableMove=void 0,s=i.__importStar(s),c=i.__importStar(c),l=i.__importStar(l),d=i.__importStar(d);t.portableMove=({currentFQPath:e,exceptions:t,filesPath:S,source:u,user:T,createNewFolderInMoveDialog:m},E={})=>i.__awaiter(void 0,void 0,void 0,(function*(){if(t.isOverFreeQuota&&!t.hasExcludedNsIds)return void l.showOverquota("wb_oq_mv_cp");const i=r.getMetricsReporter(),O={surface:u,batchSizeBucket:a.bucketForBatchSize(S.length),contentType:a.batchContentType(S)},I={totalLatency:i.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"move/batch/latency_total_ms"},O),averageLatency:i.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"move/batch/latency_average_ms"},O),completed:i.createStats({ns:a.FILE_ACTIONS_AMP_NAMESPACE,name:"move/batch/completed"},O)};let f=0;const N=(e,t)=>{var i;null===(i=E.onSuccess)||void 0===i||i.call(E,e,t),I.totalLatency.recordDuration(Date.now()-f,o.TimeUnit.MILLISECONDS),I.averageLatency.recordDuration((Date.now()-f)/S.length,o.TimeUnit.MILLISECONDS),I.completed.record(1)},v=()=>{var e;null===(e=E.onError)||void 0===e||e.call(E),I.totalLatency.recordDuration(Date.now()-f,o.TimeUnit.MILLISECONDS),I.averageLatency.recordDuration((Date.now()-f)/S.length,o.TimeUnit.MILLISECONDS),I.completed.record(0)},R=()=>{var e;return null===(e=E.onRequestNotSent)||void 0===e?void 0:e.call(E)},g=E.onUndo;c.showMoveDialog({operation:A.Operation.MOVE,modalName:n.ModalName.MOVE,user:T,apiClient:{moveToFolder:(t,i,o)=>(f=Date.now(),d.moveFiles({user:T,files:S,path:"browse"===u?e:void 0,onSuccess:N,onRequestNotSent:R,onUndo:g,onError:v,newPath:t,checkFSWs:!0,isLockedVaultFolder:o}),Promise.resolve()),getFolderContents:p.Viewer.get_viewer().is_team_assume_user_session?_.getFolderContents:_.getFolderContentsAPIv2,getFolderSuggestion:_.getFolderSuggestion},entries:S,initialFolderSelection:e,onSuccess:s.noop,onCancel:s.noop,showFolderSuggestion:!0,createNewFolderInMoveDialog:m})}))}));
//# sourceMappingURL=pkg-action-bar.min.js-vflwxN_NS.map