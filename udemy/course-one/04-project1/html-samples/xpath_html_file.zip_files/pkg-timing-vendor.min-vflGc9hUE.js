define("apex-metrics/index",["require","exports","tslib","apex-metrics/clock","apex-metrics/executor","apex-metrics/instant","apex-metrics/internal","apex-metrics/metrics","apex-metrics/metrics_reporter","apex-metrics/no_op","apex-metrics/types","apex-metrics/validate","apex-metrics/murmur","apex-metrics/hyperloglog"],(function(e,t,r,s,i,n,a,o,c,u,l,h,p,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),r.__exportStar(s,t),r.__exportStar(i,t),r.__exportStar(n,t),r.__exportStar(a,t),r.__exportStar(o,t),r.__exportStar(c,t),r.__exportStar(u,t),r.__exportStar(l,t),r.__exportStar(h,t),r.__exportStar(p,t),r.__exportStar(m,t)})),define("apex-metrics/clock",["require","exports","apex-metrics/types"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BrowserPerformanceClock=void 0;t.BrowserPerformanceClock=class{now(){return{value:performance.now(),unit:r.TimeUnit.MILLISECONDS}}}})),define("apex-metrics/executor",["require","exports","apex-metrics/instant"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SetTimeoutExecutor=void 0;t.SetTimeoutExecutor=class{constructor(e){this.jitterStrategy=e}executeEvery(e,t){const s=r.Instant.toMilliseconds(e),i=r.Instant.toMilliseconds(this.jitterStrategy());setTimeout(()=>{t()&&this.executeEvery(e,t)},s+i)}}})),define("apex-metrics/instant",["require","exports","apex-metrics/types"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Instant=void 0;t.Instant=class{static toMilliseconds(e){switch(e.unit){case r.TimeUnit.NANOSECONDS:return e.value/1e6;case r.TimeUnit.MILLISECONDS:return e.value;case r.TimeUnit.SECONDS:return 1e3*e.value;case r.TimeUnit.MINUTES:return 6e4*e.value;case r.TimeUnit.HOURS:return 36e5*e.value;case r.TimeUnit.DAYS:return 24*e.value*36e5}}}})),define("apex-metrics/internal",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("apex-metrics/metrics",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})})),define("apex-metrics/metrics_reporter",["require","exports","apex-metrics/instant","apex-metrics/validate","apex-metrics/hyperloglog"],(function(e,t,r,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsReporterImpl=void 0;class n{constructor(e,t,r,s={}){this.sink=e,this.clock=t,this.originId=r,this.tags=s}static root(e,t,r=""){return new n(e,t,r)}child(e){return new n(this.sink,this.clock,this.originId,Object.assign(Object.assign({},this.tags),s.validateTags(e)))}createStats(e,t={}){return new a(s.validateMetric(e),Object.assign(Object.assign({},this.tags),s.validateTags(t)),this.sink)}createCounter(e,t={}){return new o(s.validateMetric(e),Object.assign(Object.assign({},this.tags),s.validateTags(t)),this.sink)}createTimer(e,t={}){return new c(s.validateMetric(e),Object.assign(Object.assign({},this.tags),s.validateTags(t)),this.sink,this.clock)}createSet(e,t={}){return new u(s.validateMetric(e),Object.assign(Object.assign({},this.tags),s.validateTags(t)),this.sink,this.originId)}}t.MetricsReporterImpl=n;class a{constructor(e,t,r){this.metric=e,this.tags=t,this.sink=r}record(e){l(e,this.metric,this.tags,this.sink)}recordDuration(e,t){l(r.Instant.toMilliseconds({value:e,unit:t}),this.metric,this.tags,this.sink)}}class o{constructor(e,t,r,s=0){this.metric=e,this.tags=t,this.sink=r,this.value=s}decrement(e=1){this.value-=e}increment(e=1){this.value+=e}reset(e=0){this.value=e}record(){l(this.value,this.metric,this.tags,this.sink),this.reset()}}class c{constructor(e,t,s,i,n=0){this.metric=e,this.tags=t,this.sink=s,this.clock=i,this.value=n,this.value=r.Instant.toMilliseconds(this.clock.now())}record(){l(r.Instant.toMilliseconds(this.clock.now())-this.value,this.metric,this.tags,this.sink),this.reset()}reset(){this.value=r.Instant.toMilliseconds(this.clock.now())}}class u{constructor(e,t,r,s){this.metric=e,this.tags=t,this.sink=r,this.originId=s}observe(e){if("string"!=typeof e)throw new Error("value must be a string");const t=i.hash(e);this.sink.recordSetSpan({namespace:this.metric.ns,metricName:this.metric.name,tags:this.tags,samples:[t],type:"set"})}observeOriginId(){this.observe(this.originId)}}function l(e,t,r,s){if("number"!=typeof e)throw new Error("value must be a number");s.recordSpan({namespace:t.ns,metricName:t.name,tags:r,samples:[e],type:"histogram"})}})),define("apex-metrics/no_op",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NoOpExecutor=t.NoOpSink=void 0;t.NoOpSink=class{recordSpan(){}recordSetSpan(){}};t.NoOpExecutor=class{executeEvery(){}}})),define("apex-metrics/types",["require","exports"],(function(e,t){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.TimeUnit=void 0,(r=t.TimeUnit||(t.TimeUnit={}))[r.NANOSECONDS=0]="NANOSECONDS",r[r.MILLISECONDS=1]="MILLISECONDS",r[r.SECONDS=2]="SECONDS",r[r.MINUTES=3]="MINUTES",r[r.HOURS=4]="HOURS",r[r.DAYS=5]="DAYS"})),define("apex-metrics/validate",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateMetricName=t.validateNamespace=t.validateTags=t.validateMetric=void 0;const r=new RegExp("^[^0-9a-zA-Z]+"),s=new RegExp("[^0-9a-zA-Z._-]","g"),i=s,n=new RegExp("[^0-9a-zA-Z/._-]","g"),a=s;function o(e){return u(e,"namespace",256,r,i)}function c(e){return u(e,"metric name",256,r,n)}function u(e,t,r,s,i){const n=[];if("string"!=typeof e&&n.push("identifier is not a string"),s&&s.test(e)&&n.push("invalid prefix"),i&&i.test(e)&&n.push("invalid characters"),e.length>r&&n.push(`exceeds ${r} characters`),0===e.length&&n.push("is empty"),0!==n.length)throw new Error(`${t} identifier '${e}' is invalid: ${n}`);return e}t.validateMetric=function(e){return{ns:o(e.ns),name:c(e.name)}},t.validateTags=function(e){const t={};for(const s in e)if(e.hasOwnProperty(s)){t[u(s,"tag name",256,r,a)]=u(e[s],"tag value",256)}return t},t.validateNamespace=o,t.validateMetricName=c})),define("apex-metrics/hyperloglog",["require","exports","apex-metrics/murmur"],(function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stripCompress=t.HyperLogLog=t.hash=void 0;const s=Math.pow(2,32),i=[1,.5,.25,.125,.0625,.03125,.015625,.0078125,.00390625,.001953125,.0009765625,.00048828125,.000244140625,.0001220703125,6103515625e-14,30517578125e-15,152587890625e-16,762939453125e-17,3814697265625e-18,19073486328125e-19,9.5367431640625e-7,4.76837158203125e-7,2.384185791015625e-7,1.1920928955078125e-7,5.960464477539063e-8,2.9802322387695312e-8,1.4901161193847656e-8,7.450580596923828e-9,3.725290298461914e-9,1.862645149230957e-9,9.313225746154785e-10,4.656612873077393e-10,2.3283064365386963e-10],n=Math.pow(2,5);t.hash=function(e){return r.hash32(r.stringToUtf8ByteArray(e),538513424)};function a(e){if(8!=e.length)throw new Error("Number of registers in stripCompress routine is not 8");const t=[];let r=0;for(let t=0;t<8;t++){if(r*=n,e[t]>=n)throw new Error("Register in HLL greater than max allowed value");r+=e[t]}for(let e=0;e<5;e++)t.unshift(Number(r%256)),r=Math.floor(r/256);return t}t.HyperLogLog=class{constructor(e=[]){this.registers=new Array(512).fill(0),e.forEach(e=>this.add(e))}add(e){if(e>=s)throw new Error("add only accepts 32-bit unsigned integers");const t=(function(e,t){let r=1;for(;(2147483648&e)>>>0==0&&r<=t;)r++,e=e<<1>>>0;return r})(e<<9>>>0,23),r=e>>>23;t>this.registers[r]&&(this.registers[r]=t)}count(){let e=this.registers.reduce((e,t)=>e+i[t],0),t=this.registers.reduce((e,t)=>e+(0==t?1:0),0);if(512==t)return 0;let r=188686.82445861166/e;return r<=1280?t>0&&(r=512*Math.log(512/t)):r>1/30*s&&(r=-s*Math.log(1-r/s)),r}merge(e){for(let t=0;t<512;t++){const r=e.registers[t];r>this.registers[t]&&(this.registers[t]=r)}}compressed(){const e=[];for(let t=0;t<64;t++){const r=a(this.registers.slice(8*t,8*(t+1)));for(const t of r)e.push(t)}return String.fromCharCode(...e)}},t.stripCompress=a})),define("apex-metrics/murmur",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.stringToUtf8ByteArray=t.hash32=void 0;function r(e){if(4!=e.length)throw new Error("strToUint32 expected length 4 byte array");return e[0]+(e[1]<<8)+(e[2]<<16)+(e[3]<<24)}t.hash32=function(e,t){let s=t;const i=Math.floor(e.length/4);for(let t=0;t<i;t++){let i=r(e.slice(4*t,4*t+4));i=Math.imul(i,3432918353),i=(i<<15>>>0|i>>>17)>>>0,i=Math.imul(i,461845907),s^=i,s>>>=0,s=(s<<13>>>0|s>>>19)>>>0,s=Math.imul(s,5)+3864292196>>>0}let n=e.slice(4*i),a=0;const o=3&n.length;return 3==o&&(a^=n[2]<<16>>>0,a>>>=0),o>=2&&(a^=n[1]<<8>>>0,a>>>=0),o>=1&&(a^=n[0],a=Math.imul(a,3432918353),a=(a<<15>>>0|a>>>17)>>>0,a=Math.imul(a,461845907),s^=a,s>>>=0),s^=e.length,s>>>=0,s^=s>>>16,s>>>=0,s=Math.imul(s,2246822507),s^=s>>>13,s>>>=0,s=Math.imul(s,3266489909),s^=s>>>16,s>>>=0,s},t.stringToUtf8ByteArray=function(e){const t=[];let r=0;for(let s=0;s<e.length;s++){const i=e.charCodeAt(s);i<128?t[r++]=i:i<2048?(t[r++]=i>>6|192,t[r++]=63&i|128):(t[r++]=i>>12|224,t[r++]=i>>6&63|128,t[r++]=63&i|128)}return t}}));
//# sourceMappingURL=pkg-timing-vendor.min.js-vflmnZQIN.map