define("typescript/libraries/file-viewer/src/core/config",["require","exports","typescript/libraries/file-viewer/src/core/data/models"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoginOrRegisterKind=t.CommentTextVariant=t.AuthMode=t.DEFAULT_FILE_CONFIG=t.DEFAULT_CONFIG=t.DEFAULT_OTHER_SIZE_LIMITS=void 0;const r=1048576,o=160*r,i=200*r,n=288*r,s=1024*r;t.DEFAULT_OTHER_SIZE_LIMITS={".3fr":i,".ai":268435456,".arw":i,".azw4":31457280,".binder":i,".bmp":i,".cr2":i,".cr3":i,".crw":i,".csv":41943040,".dcr":i,".dcs":i,".djvu":31457280,".dng":i,".doc":o,".docm":o,".docx":o,".dot":o,".dotx":o,".dwg":104857600,".eps":268435456,".epub":31457280,".erf":i,".gdoc":o,".gif":i,".glsides":n,".gsheet":41943040,".heic":104857600,".jpeg":i,".jpg":i,".kdc":i,".key":s,".kth":s,".mef":i,".mobi":31457280,".mos":i,".mrw":i,".nef":i,".nrw":i,".numbers":s,".odg":o,".odp":o,".ods":41943040,".odt":o,".orf":i,".otf":33554432,".pages":s,".paper":i,".papert":i,".pdf":524288e3,".pef":i,".png":i,".ppm":i,".pps":n,".ppsm":n,".ppsx":n,".ppt":n,".pptm":n,".pptx":n,".ps":268435456,".psd":s,".r3d":i,".raf":i,".rtf":o,".rw2":i,".rwl":i,".sketch":s,".sr2":i,".svg":50331648,".svgz":50331648,".tif":i,".tiff":i,".ttf":33554432,".vtt":104857600,".webp":i,".wpd":o,".x3f":i,".xd":s},t.DEFAULT_CONFIG={other_size_limits:t.DEFAULT_OTHER_SIZE_LIMITS,archive_size_limit:536870912,text_size_limit:8388608,linkfile_size_limit:10485760,excel_size_limit:41943040,annotations:!1,ax_annotations:!1,enable_documentation_pane:!1,enable_excel_headers:!0,enable_fullscreen:!1,enable_navigation_bar:!0,excel_support:{support:"unsupported",embed_support:"unsupported"},file_flipping:!1,force_no_toolbar:!1,html_support:!1,img_size_optimization:!1,load_image_only:!1,keyboard_shortcuts:!0,preview_content_only:!1,show_cloud_doc_preview:!0,show_titlebar:!0,titlebar_logo_config:{show_logo:!1,base_url:""},mobile_web:!1,transparent_background:!1,log_views_to_pass:!0,preview_types:{[a.PreviewType.SsrDoc]:{scaleToFit:"width_and_height"}},partial_prewarm_allowed:!1,enable_fvsdk_dynamic_actions:!1,comments2_usability_revamp:!1,enable_toolbar_file_counter:!1,fvsdk_use_native_lazy_loading:"OFF",fvsdk_excel_ms_embed_phase:"OFF",bt_self_sign_entry_point:"OFF",tags_section_variant:"OFF",preload_collection_previews:!1,drag_section_annotation:!1,fvsdk_find_text_phase:"OFF",new_quips_docs:!1,fvsdk_fastforward_rewind:"OFF"},t.DEFAULT_FILE_CONFIG={download_button:void 0,cloud_open_with_buttons:[],enable_share_button:!1,enable_print:!1,enable_pass:!1,enable_open_button:!1,enable_restore_button:!1,enable_view_on_dropbox_button:!1},(function(e){e[e.LOGIN=0]="LOGIN",e[e.REGISTER=1]="REGISTER"})(t.AuthMode||(t.AuthMode={})),(function(e){e.DEFAULT="",e.POST="post_comment_variant",e.SUBSCRIBE="subscribe_variant"})(t.CommentTextVariant||(t.CommentTextVariant={})),(function(e){e.COMMENT="comment",e.DOWNLOAD="download",e.IMMEDIATE="immediate",e.SIDEBAR="sidebar",e.POSTDOWNLOAD="postdownload"})(t.LoginOrRegisterKind||(t.LoginOrRegisterKind={}))})),define("metaserver/static/js/previews/api",["require","exports","metaserver/static/js/api_v2/user_client","metaserver/static/js/api_v2/noauth_client"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchPreviewData=t.MAX_REQUEST_SIZE=void 0,t.MAX_REQUEST_SIZE=50,t.fetchPreviewData=function(e,t,o=!1){if(!t)return Promise.reject(new Error("user not logged in, no support for un-auth'd users yet"));const i={files:e.map(e=>({ns_id:e.ns_id,sj_id:e.sjid})),include_dimensions:o};return t?(new a.UserApiV2Client).ns("previews").rpc("get_preview_data_batch",i,{subjectUserId:t.id}):(new r.NoAuthApiV2Client).ns("previews").rpc("get_preview_data_batch",i,{})}})),define("metaserver/static/js/previews/data/actions",["require","exports","tslib","lodash","metaserver/static/js/previews/data/types","metaserver/static/js/redux/constants","metaserver/static/js/previews/data/util","metaserver/static/js/previews/api","metaserver/static/js/file_store/utils"],(function(e,t,a,r,o,i,n,s,l){"use strict";function d(e){return{type:o.ActionTypes.UpdatePreviewData,payload:e}}function c(e,t){const a=t.results.reduce((e,t)=>(e[l.getFileRevisionId({ns_id:t.file.ns_id,sjid:t.file.sj_id})]=t,e),{});return{type:o.ActionTypes.UpdatePreviewData,payload:e.reduce((e,t)=>{const r=a[t],o={data:null==r?void 0:r.preview,status:i.ApiClientStatus.Success};return e[t]=o,e},{})}}function p(e){return{type:o.ActionTypes.UpdatePreviewData,payload:r.mapValues(e,e=>({data:void 0,status:i.ApiClientStatus.Error}))}}Object.defineProperty(t,"__esModule",{value:!0}),t.apiRequestErrorAction=t.apiRequestSuccessAction=t.apiRequestInFlightAction=t.updatePreviewData=t.buildPreviewData=t.fetchPreviewUrl=t.fetchPreviewData=t.populateFilesPreviewData=void 0,t.populateFilesPreviewData=function(e){const t={};return e.forEach(e=>{const a=l.getFileRevisionId(e),r=e.preview;r&&(t[a]={data:r,status:i.ApiClientStatus.Success})}),{type:o.ActionTypes.UpdatePreviewData,payload:t}},t.fetchPreviewData=function(e,r,o,d){return(u,m)=>a.__awaiter(this,void 0,void 0,(function*(){const f=n.filterFilesMissingPreviewData(m(),e,o);if(0===f.length)return;const v=n.chunkFiles(f,s.MAX_REQUEST_SIZE).map(e=>(function(e,r,o,n){return a.__awaiter(this,void 0,void 0,(function*(){const a=(function(e){return e.reduce((e,t)=>(e[l.getFileRevisionId(t)]={data:void 0,status:i.ApiClientStatus.Request},e),{})})(r);e(t.apiRequestInFlightAction(a));try{const t=yield s.fetchPreviewData(r,o,n);return e(c(Object.keys(a),t))}catch(t){return e(p(a))}}))})(u,e,r,d));return Promise.all(v)}))},t.fetchPreviewUrl=function(e,t){return s.fetchPreviewData([e],t).then(e=>{if(e.results.length>0){const t=e.results[0].preview;if(t&&t.preview_url)return t.preview_url}})},t.buildPreviewData=function(e,t){return e.reduce((e,a)=>(e[l.getFileRevisionId(a)]={data:a.preview,status:t},e),{})},t.updatePreviewData=d,t.apiRequestInFlightAction=d,t.apiRequestSuccessAction=c,t.apiRequestErrorAction=p})),define("metaserver/static/js/previews/data/reducer",["require","exports","metaserver/static/js/previews/data/types"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reducer=t.initialState=void 0,t.initialState={filePreviews:{}},t.reducer=function(e=t.initialState,r){switch(r.type){case a.ActionTypes.UpdatePreviewData:return Object.assign(Object.assign({},e),{filePreviews:Object.assign(Object.assign({},e.filePreviews),r.payload)});default:return e}}})),define("metaserver/static/js/previews/data/selectors",["require","exports","metaserver/static/js/redux/constants","metaserver/static/js/redux/selectors","metaserver/static/js/file_store/utils","metaserver/static/js/redux/namespaces"],(function(e,t,a,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getApiDataForFiles=t.getApiDataForFile=void 0;const n={data:void 0,status:a.ApiClientStatus.Error};function s(e,t){const a=(function(e){return r.getStateAtNamespace(e,i.PREVIEW_NAMESPACE_KEY)})(e);if(!a||!t)return n;const s=o.getFileRevisionId(t),l=a.filePreviews[s];return l&&l.status?l:n}t.getApiDataForFile=s,t.getApiDataForFiles=function(e,t){return t.reduce((t,a)=>(t[o.getFileRevisionId(a)]=s(e,a),t),{})}})),define("metaserver/static/js/previews/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionTypes=void 0,(function(e){e.UpdatePreviewData="FileViewer/Previews/UpdatePreviewData"})(t.ActionTypes||(t.ActionTypes={}))})),define("metaserver/static/js/previews/data/util",["require","exports","tslib","lodash","metaserver/static/js/previews/data/selectors","metaserver/static/js/file_store/utils","metaserver/static/js/redux/constants"],(function(e,t,a,r,o,i,n){"use strict";function s(e,t){const a=o.getApiDataForFile(e,t);return a?a.status:void 0}Object.defineProperty(t,"__esModule",{value:!0}),t.chunkFiles=t.previewDataStatus=t.previewDataInFlight=t.previewDataPresentForFile=t.filterFilesMissingPreviewData=void 0,r=a.__importStar(r),t.filterFilesMissingPreviewData=function(e,t,a=!1){if(a)return t;const s=o.getApiDataForFiles(e,t);return r.filter(t,e=>{const t=i.getFileRevisionId(e);return!e.is_dir&&(!s[t]||!s[t].data&&s[t].status===n.ApiClientStatus.Error)})},t.previewDataPresentForFile=function(e,t){const a=o.getApiDataForFile(e,t);return!(!a||!a.data||a.status===n.ApiClientStatus.Error)},t.previewDataInFlight=function(e,t){return s(e,t)===n.ApiClientStatus.Request},t.previewDataStatus=s,t.chunkFiles=function(e,t){if(e.length<=0)return[];if(e.length<t)return[e];const a=Array(Math.ceil(e.length/t));let r=0,o=0;for(;r<e.length;)a[o++]=e.slice(r,r+=t);return a}})),define("metaserver/static/js/modules/clean/open_in_mobile_app",["require","exports","tslib","react","dig-components/typography","metaserver/static/js/modules/clean/clipboard_v3","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/clean/analytics","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/assert","spectrum-sharing/utils/sharing_constants"],(function(e,t,a,r,o,i,n,s,l,d,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.cleanup=t.open_android_intent=t.open_ios=t.open_on_click=t.registerLoggingHandlers=t.CopyUrlLabelText=void 0,r=a.__importDefault(r),s=a.__importStar(s),l=a.__importStar(l),d=a.__importStar(d);function u(){return d.iOS&&(window.location.pathname.startsWith("/s/")||window.location.pathname.startsWith("/sh/")||window.location.pathname.startsWith("/scl/"))}t.CopyUrlLabelText=e=>u()?r.default.createElement(o.Text,Object.assign({color:"faint",tagName:"div"},e),n.intl.formatMessage({id:"EvntjN",defaultMessage:"Tapping Get the app will copy a link and open the content in the app"})):null,t.CopyUrlLabelText.displayName="CopyUrlLabelText";let m=void 0;let f=!1;let v=()=>{},g=()=>{};t.registerLoggingHandlers=(e,t)=>{v=e,g=t};t.open_on_click=(e,a,r,o,i,n)=>{const s=r=>{r.preventDefault(),n?t.open_android_intent(n):t.open_ios(e,a,o)};r&&r.addEventListener("click",s)};t.open_ios=(e,t,a)=>{return u()&&i.copyToClipboard(window.location.href),a?void(((null==(r=t)?void 0:r.startsWith("https://itunes.apple.com/"))||(null==r?void 0:r.startsWith("https://app.adjust.com/")))&&(g(),l.unsafeRedirect(r))):((e,t,a)=>{if(v(),f)return;let r=!1;m=()=>r=!0,document.addEventListener("visibilitychange",m);let o=!1;const i=()=>o=!0;window.addEventListener("pagehide",i),null!=a&&s.ShareTibEventLogger.log_unauth("CLICK_MOBILE_OPEN",p.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:a}),(function(){const t=document.createElement("iframe");t.src=e||"",t.style.display="none",document.body.append(t)})();const n=Date.now();setTimeout(()=>{f=!1,m&&document.removeEventListener("visibilitychange",m),window.removeEventListener("pagehide",i),!o&&!r&&Date.now()<n+4700&&(null!=a&&s.ShareTibEventLogger.log_unauth("CLICK_MOBILE_INSTALL",p.SHARE_ACTION_ORIGIN_TYPE.WEB_MOBILE,{scl_url:a}),t&&window.location.replace(t))},3200),f=!0})(e,t);var r};t.open_android_intent=e=>{c.assert(e.startsWith("intent://www.dropbox.com/sm/launch_intent_or_fallback_page"),"intentUrl must use intent:// protocol"),v&&v(),window.location.href=e};t.cleanup=()=>{if(m)return document.removeEventListener("visibilitychange",m)}})),define("metaserver/static/js/file_store/actions",["require","exports","tslib","metaserver/static/js/file_store/types","metaserver/static/js/file_store/utils","lodash"],(function(e,t,a,r,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.putFiles=t.putFile=void 0,i=a.__importStar(i),t.putFile=function(e,t){return{type:r.FileNamespaceActions.PutFile,payload:{file:e,fileId:null!=t?t:o.getFileStoreId(e)}}},t.putFiles=function(e){const t=i.keyBy(e,o.getFileStoreId);return{type:r.FileNamespaceActions.PutFileMap,payload:t}}})),define("metaserver/static/js/file_store/reducer",["require","exports","metaserver/static/js/file_store/types"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileNamespaceReducer=t.defaultFileState=void 0,t.defaultFileState={},t.fileNamespaceReducer=function(e=t.defaultFileState,r){switch(r.type){case a.FileNamespaceActions.PutFile:return Object.assign(Object.assign({},e),{[r.payload.fileId]:r.payload.file});case a.FileNamespaceActions.PutFileMap:return Object.assign(Object.assign({},e),r.payload)}return e}})),define("metaserver/static/js/file_store/selectors",["require","exports","metaserver/static/js/file_store/reducer","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors"],(function(e,t,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFile=void 0,t.getFile=function(e,t){return t?(function(e){return o.getStateAtNamespace(e,r.FILE_NAMESPACE_KEY)||a.defaultFileState})(e)[t]:void 0}})),define("metaserver/static/js/file_store/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileNamespaceActions=void 0,(function(e){e.PutFile="PUT_FILE",e.PutFileMap="PUT_FILE_MAP"})(t.FileNamespaceActions||(t.FileNamespaceActions={}))})),define("metaserver/static/js/open_in_app/types",["require","exports","metaserver/static/js/dropbox/proto/js_init_data/file_viewer/experiments"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.areUrlsAndroid=t.areUrlsIOS=t.OpenInMobileAppPlatform=void 0,t.OpenInMobileAppPlatform=a.file_viewer.OpenInMobileAppPlatform,t.areUrlsIOS=function(e){return e.platform===t.OpenInMobileAppPlatform.IPAD||e.platform===t.OpenInMobileAppPlatform.IPHONE},t.areUrlsAndroid=function(e){return e.platform===t.OpenInMobileAppPlatform.ANDROID_MARKET}})),define("metaserver/static/js/dropbox/proto/js_init_data/file_viewer/experiments",["require","exports","tslib","protobufjs/minimal"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.file_viewer=void 0;const o=(r=a.__importStar(r)).Reader,i=r.Writer,n=r.util,s=r.roots.default||(r.roots.default={});var l;t.default=s,t.file_viewer=s.file_viewer=((l=s.file_viewer||{}).FileViewerConfiguration=(function(e){function e(e){if(this.watermarkingByUserId={},this.watermarkTrialVariantByUserId={},e)for(let t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.wopiButtonVisible=!1,e.prototype.watermarkingByUserId=n.emptyObject,e.prototype.watermarkTrialVariantByUserId=n.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.wopiButtonVisible&&Object.hasOwnProperty.call(e,"wopiButtonVisible")&&t.uint32(32).bool(e.wopiButtonVisible),null!=e.watermarkingByUserId&&Object.hasOwnProperty.call(e,"watermarkingByUserId"))for(let a=Object.keys(e.watermarkingByUserId),r=0;r<a.length;++r)t.uint32(50).fork().uint32(8).int64(a[r]).uint32(16).bool(e.watermarkingByUserId[a[r]]).ldelim();if(null!=e.watermarkTrialVariantByUserId&&Object.hasOwnProperty.call(e,"watermarkTrialVariantByUserId"))for(let a=Object.keys(e.watermarkTrialVariantByUserId),r=0;r<a.length;++r)t.uint32(58).fork().uint32(8).int64(a[r]).uint32(18).string(e.watermarkTrialVariantByUserId[a[r]]).ldelim();return t},e.decode=function(e,t){e instanceof o||(e=o.create(e));let a,r,i=void 0===t?e.len:e.pos+t,l=new s.file_viewer.FileViewerConfiguration;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 4:l.wopiButtonVisible=e.bool();break;case 6:{l.watermarkingByUserId===n.emptyObject&&(l.watermarkingByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.watermarkingByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 7:{l.watermarkTrialVariantByUserId===n.emptyObject&&(l.watermarkTrialVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.watermarkTrialVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}default:e.skipType(7&t)}}return l},e.getTypeUrl=function(){return"type.googleapis.com/file_viewer.FileViewerConfiguration"},e})(l.FileViewerConfiguration||{}),l.FileViewerFeatureExperiments=(function(e){function e(e){if(e)for(let t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.partialPrewarmAllowed=!1,e.prototype.fvsdkAxAnnotations=!1,e.prototype.enableFvsdkPdfEditor="",e.prototype.enableFvsdkDynamicActions=!1,e.prototype.fvsdkExcel2Phase="",e.prototype.comments2UsabilityRevamp=!1,e.prototype.enableAddToCollection=!1,e.prototype.fvsdkTtiAaExperiment="",e.prototype.fvsdkReadableDocZoom=!1,e.prototype.fvsdkUseNativeLazyLoading="",e.prototype.fvsdkExcelMsEmbedPhase="",e.prototype.btSelfSignEntryPoint="",e.prototype.fvsdkToolbarFileCounter=!1,e.prototype.tagsSectionVariant="",e.prototype.enableFvsdkPhotoEditor="",e.prototype.newQuipsBrowse=!1,e.prototype.preloadCollectionPreviews=!1,e.prototype.enablePreviewsCropRotate="",e.prototype.dragSectionAnnotation=!1,e.prototype.docsendAnalyticsAddOn="",e.prototype.fvsdkFindTextPhase="",e.prototype.newQuipsDocs=!1,e.prototype.btSendForSignatureNaming="",e.prototype.fvsdkFastforwardRewind="",e.prototype.btSignaturesActionbarDropdown="",e.prototype.imgSizeOptimization=!1,e.create=function(t){return new e(t)},e.encode=function(e,t){return t||(t=i.create()),null!=e.partialPrewarmAllowed&&Object.hasOwnProperty.call(e,"partialPrewarmAllowed")&&t.uint32(8).bool(e.partialPrewarmAllowed),null!=e.fvsdkAxAnnotations&&Object.hasOwnProperty.call(e,"fvsdkAxAnnotations")&&t.uint32(40).bool(e.fvsdkAxAnnotations),null!=e.enableFvsdkPdfEditor&&Object.hasOwnProperty.call(e,"enableFvsdkPdfEditor")&&t.uint32(82).string(e.enableFvsdkPdfEditor),null!=e.enableFvsdkDynamicActions&&Object.hasOwnProperty.call(e,"enableFvsdkDynamicActions")&&t.uint32(136).bool(e.enableFvsdkDynamicActions),null!=e.fvsdkExcel2Phase&&Object.hasOwnProperty.call(e,"fvsdkExcel2Phase")&&t.uint32(162).string(e.fvsdkExcel2Phase),null!=e.comments2UsabilityRevamp&&Object.hasOwnProperty.call(e,"comments2UsabilityRevamp")&&t.uint32(168).bool(e.comments2UsabilityRevamp),null!=e.enableAddToCollection&&Object.hasOwnProperty.call(e,"enableAddToCollection")&&t.uint32(184).bool(e.enableAddToCollection),null!=e.fvsdkTtiAaExperiment&&Object.hasOwnProperty.call(e,"fvsdkTtiAaExperiment")&&t.uint32(194).string(e.fvsdkTtiAaExperiment),null!=e.fvsdkReadableDocZoom&&Object.hasOwnProperty.call(e,"fvsdkReadableDocZoom")&&t.uint32(216).bool(e.fvsdkReadableDocZoom),null!=e.fvsdkUseNativeLazyLoading&&Object.hasOwnProperty.call(e,"fvsdkUseNativeLazyLoading")&&t.uint32(226).string(e.fvsdkUseNativeLazyLoading),null!=e.fvsdkExcelMsEmbedPhase&&Object.hasOwnProperty.call(e,"fvsdkExcelMsEmbedPhase")&&t.uint32(234).string(e.fvsdkExcelMsEmbedPhase),null!=e.btSelfSignEntryPoint&&Object.hasOwnProperty.call(e,"btSelfSignEntryPoint")&&t.uint32(250).string(e.btSelfSignEntryPoint),null!=e.fvsdkToolbarFileCounter&&Object.hasOwnProperty.call(e,"fvsdkToolbarFileCounter")&&t.uint32(256).bool(e.fvsdkToolbarFileCounter),null!=e.tagsSectionVariant&&Object.hasOwnProperty.call(e,"tagsSectionVariant")&&t.uint32(266).string(e.tagsSectionVariant),null!=e.enableFvsdkPhotoEditor&&Object.hasOwnProperty.call(e,"enableFvsdkPhotoEditor")&&t.uint32(274).string(e.enableFvsdkPhotoEditor),null!=e.newQuipsBrowse&&Object.hasOwnProperty.call(e,"newQuipsBrowse")&&t.uint32(280).bool(e.newQuipsBrowse),null!=e.preloadCollectionPreviews&&Object.hasOwnProperty.call(e,"preloadCollectionPreviews")&&t.uint32(288).bool(e.preloadCollectionPreviews),null!=e.enablePreviewsCropRotate&&Object.hasOwnProperty.call(e,"enablePreviewsCropRotate")&&t.uint32(298).string(e.enablePreviewsCropRotate),null!=e.dragSectionAnnotation&&Object.hasOwnProperty.call(e,"dragSectionAnnotation")&&t.uint32(304).bool(e.dragSectionAnnotation),null!=e.docsendAnalyticsAddOn&&Object.hasOwnProperty.call(e,"docsendAnalyticsAddOn")&&t.uint32(314).string(e.docsendAnalyticsAddOn),null!=e.fvsdkFindTextPhase&&Object.hasOwnProperty.call(e,"fvsdkFindTextPhase")&&t.uint32(322).string(e.fvsdkFindTextPhase),null!=e.newQuipsDocs&&Object.hasOwnProperty.call(e,"newQuipsDocs")&&t.uint32(328).bool(e.newQuipsDocs),null!=e.btSendForSignatureNaming&&Object.hasOwnProperty.call(e,"btSendForSignatureNaming")&&t.uint32(338).string(e.btSendForSignatureNaming),null!=e.fvsdkFastforwardRewind&&Object.hasOwnProperty.call(e,"fvsdkFastforwardRewind")&&t.uint32(346).string(e.fvsdkFastforwardRewind),null!=e.btSignaturesActionbarDropdown&&Object.hasOwnProperty.call(e,"btSignaturesActionbarDropdown")&&t.uint32(362).string(e.btSignaturesActionbarDropdown),null!=e.imgSizeOptimization&&Object.hasOwnProperty.call(e,"imgSizeOptimization")&&t.uint32(368).bool(e.imgSizeOptimization),t},e.decode=function(e,t){e instanceof o||(e=o.create(e));let a=void 0===t?e.len:e.pos+t,r=new s.file_viewer.FileViewerFeatureExperiments;for(;e.pos<a;){let t=e.uint32();switch(t>>>3){case 1:r.partialPrewarmAllowed=e.bool();break;case 5:r.fvsdkAxAnnotations=e.bool();break;case 10:r.enableFvsdkPdfEditor=e.string();break;case 17:r.enableFvsdkDynamicActions=e.bool();break;case 20:r.fvsdkExcel2Phase=e.string();break;case 21:r.comments2UsabilityRevamp=e.bool();break;case 23:r.enableAddToCollection=e.bool();break;case 24:r.fvsdkTtiAaExperiment=e.string();break;case 27:r.fvsdkReadableDocZoom=e.bool();break;case 28:r.fvsdkUseNativeLazyLoading=e.string();break;case 29:r.fvsdkExcelMsEmbedPhase=e.string();break;case 31:r.btSelfSignEntryPoint=e.string();break;case 32:r.fvsdkToolbarFileCounter=e.bool();break;case 33:r.tagsSectionVariant=e.string();break;case 34:r.enableFvsdkPhotoEditor=e.string();break;case 35:r.newQuipsBrowse=e.bool();break;case 36:r.preloadCollectionPreviews=e.bool();break;case 37:r.enablePreviewsCropRotate=e.string();break;case 38:r.dragSectionAnnotation=e.bool();break;case 39:r.docsendAnalyticsAddOn=e.string();break;case 40:r.fvsdkFindTextPhase=e.string();break;case 41:r.newQuipsDocs=e.bool();break;case 42:r.btSendForSignatureNaming=e.string();break;case 43:r.fvsdkFastforwardRewind=e.string();break;case 45:r.btSignaturesActionbarDropdown=e.string();break;case 46:r.imgSizeOptimization=e.bool();break;default:e.skipType(7&t)}}return r},e.getTypeUrl=function(){return"type.googleapis.com/file_viewer.FileViewerFeatureExperiments"},e})(l.FileViewerFeatureExperiments||{}),l.FileViewerFlowExperiments=(function(e){function e(e){if(this.manualFileConversionByUserId={},this.manualVideoRemuxByUserId={},this.manualVideoGifByUserId={},this.automatedAdoptionByUserId={},this.automatedAdoptionV2ByUserId={},this.automatedAdoptionVariantByUserId={},this.approvalFlowByUserId={},this.approvalFlowVariantByUserId={},this.manualAudioConversionByUserId={},this.conversionMenuVariantByUserId={},this.approvalMenuVariantByUserId={},this.versioningFlowVariantByUserId={},this.approvalAndVersioningNewBadgeByUserId={},this.approvalCopyVariantByUserId={},this.approvalPdfEditingToastByUserId={},e)for(let t=Object.keys(e),a=0;a<t.length;++a)null!=e[t[a]]&&(this[t[a]]=e[t[a]])}return e.prototype.manualFileConversionByUserId=n.emptyObject,e.prototype.manualVideoRemuxByUserId=n.emptyObject,e.prototype.manualVideoGifByUserId=n.emptyObject,e.prototype.automatedAdoptionByUserId=n.emptyObject,e.prototype.automatedAdoptionV2ByUserId=n.emptyObject,e.prototype.automatedAdoptionVariantByUserId=n.emptyObject,e.prototype.approvalFlowByUserId=n.emptyObject,e.prototype.approvalFlowVariantByUserId=n.emptyObject,e.prototype.manualAudioConversionByUserId=n.emptyObject,e.prototype.flowsApprovalInShareModalEnabled=!1,e.prototype.conversionMenuVariantByUserId=n.emptyObject,e.prototype.approvalMenuVariantByUserId=n.emptyObject,e.prototype.versioningFlowVariantByUserId=n.emptyObject,e.prototype.approvalAndVersioningNewBadgeByUserId=n.emptyObject,e.prototype.approvalCopyVariantByUserId=n.emptyObject,e.prototype.approvalPdfEditingToastByUserId=n.emptyObject,e.create=function(t){return new e(t)},e.encode=function(e,t){if(t||(t=i.create()),null!=e.manualFileConversionByUserId&&Object.hasOwnProperty.call(e,"manualFileConversionByUserId"))for(let a=Object.keys(e.manualFileConversionByUserId),r=0;r<a.length;++r)t.uint32(18).fork().uint32(8).int64(a[r]).uint32(16).bool(e.manualFileConversionByUserId[a[r]]).ldelim();if(null!=e.manualVideoRemuxByUserId&&Object.hasOwnProperty.call(e,"manualVideoRemuxByUserId"))for(let a=Object.keys(e.manualVideoRemuxByUserId),r=0;r<a.length;++r)t.uint32(26).fork().uint32(8).int64(a[r]).uint32(16).bool(e.manualVideoRemuxByUserId[a[r]]).ldelim();if(null!=e.manualVideoGifByUserId&&Object.hasOwnProperty.call(e,"manualVideoGifByUserId"))for(let a=Object.keys(e.manualVideoGifByUserId),r=0;r<a.length;++r)t.uint32(34).fork().uint32(8).int64(a[r]).uint32(16).bool(e.manualVideoGifByUserId[a[r]]).ldelim();if(null!=e.automatedAdoptionByUserId&&Object.hasOwnProperty.call(e,"automatedAdoptionByUserId"))for(let a=Object.keys(e.automatedAdoptionByUserId),r=0;r<a.length;++r)t.uint32(42).fork().uint32(8).int64(a[r]).uint32(16).bool(e.automatedAdoptionByUserId[a[r]]).ldelim();if(null!=e.automatedAdoptionV2ByUserId&&Object.hasOwnProperty.call(e,"automatedAdoptionV2ByUserId"))for(let a=Object.keys(e.automatedAdoptionV2ByUserId),r=0;r<a.length;++r)t.uint32(50).fork().uint32(8).int64(a[r]).uint32(16).bool(e.automatedAdoptionV2ByUserId[a[r]]).ldelim();if(null!=e.automatedAdoptionVariantByUserId&&Object.hasOwnProperty.call(e,"automatedAdoptionVariantByUserId"))for(let a=Object.keys(e.automatedAdoptionVariantByUserId),r=0;r<a.length;++r)t.uint32(58).fork().uint32(8).int64(a[r]).uint32(18).string(e.automatedAdoptionVariantByUserId[a[r]]).ldelim();if(null!=e.approvalFlowByUserId&&Object.hasOwnProperty.call(e,"approvalFlowByUserId"))for(let a=Object.keys(e.approvalFlowByUserId),r=0;r<a.length;++r)t.uint32(66).fork().uint32(8).int64(a[r]).uint32(16).bool(e.approvalFlowByUserId[a[r]]).ldelim();if(null!=e.approvalFlowVariantByUserId&&Object.hasOwnProperty.call(e,"approvalFlowVariantByUserId"))for(let a=Object.keys(e.approvalFlowVariantByUserId),r=0;r<a.length;++r)t.uint32(74).fork().uint32(8).int64(a[r]).uint32(18).string(e.approvalFlowVariantByUserId[a[r]]).ldelim();if(null!=e.manualAudioConversionByUserId&&Object.hasOwnProperty.call(e,"manualAudioConversionByUserId"))for(let a=Object.keys(e.manualAudioConversionByUserId),r=0;r<a.length;++r)t.uint32(82).fork().uint32(8).int64(a[r]).uint32(16).bool(e.manualAudioConversionByUserId[a[r]]).ldelim();if(null!=e.flowsApprovalInShareModalEnabled&&Object.hasOwnProperty.call(e,"flowsApprovalInShareModalEnabled")&&t.uint32(88).bool(e.flowsApprovalInShareModalEnabled),null!=e.conversionMenuVariantByUserId&&Object.hasOwnProperty.call(e,"conversionMenuVariantByUserId"))for(let a=Object.keys(e.conversionMenuVariantByUserId),r=0;r<a.length;++r)t.uint32(98).fork().uint32(8).int64(a[r]).uint32(18).string(e.conversionMenuVariantByUserId[a[r]]).ldelim();if(null!=e.approvalMenuVariantByUserId&&Object.hasOwnProperty.call(e,"approvalMenuVariantByUserId"))for(let a=Object.keys(e.approvalMenuVariantByUserId),r=0;r<a.length;++r)t.uint32(106).fork().uint32(8).int64(a[r]).uint32(18).string(e.approvalMenuVariantByUserId[a[r]]).ldelim();if(null!=e.versioningFlowVariantByUserId&&Object.hasOwnProperty.call(e,"versioningFlowVariantByUserId"))for(let a=Object.keys(e.versioningFlowVariantByUserId),r=0;r<a.length;++r)t.uint32(114).fork().uint32(8).int64(a[r]).uint32(18).string(e.versioningFlowVariantByUserId[a[r]]).ldelim();if(null!=e.approvalAndVersioningNewBadgeByUserId&&Object.hasOwnProperty.call(e,"approvalAndVersioningNewBadgeByUserId"))for(let a=Object.keys(e.approvalAndVersioningNewBadgeByUserId),r=0;r<a.length;++r)t.uint32(122).fork().uint32(8).int64(a[r]).uint32(18).string(e.approvalAndVersioningNewBadgeByUserId[a[r]]).ldelim();if(null!=e.approvalCopyVariantByUserId&&Object.hasOwnProperty.call(e,"approvalCopyVariantByUserId"))for(let a=Object.keys(e.approvalCopyVariantByUserId),r=0;r<a.length;++r)t.uint32(130).fork().uint32(8).int64(a[r]).uint32(18).string(e.approvalCopyVariantByUserId[a[r]]).ldelim();if(null!=e.approvalPdfEditingToastByUserId&&Object.hasOwnProperty.call(e,"approvalPdfEditingToastByUserId"))for(let a=Object.keys(e.approvalPdfEditingToastByUserId),r=0;r<a.length;++r)t.uint32(138).fork().uint32(8).int64(a[r]).uint32(16).bool(e.approvalPdfEditingToastByUserId[a[r]]).ldelim();return t},e.decode=function(e,t){e instanceof o||(e=o.create(e));let a,r,i=void 0===t?e.len:e.pos+t,l=new s.file_viewer.FileViewerFlowExperiments;for(;e.pos<i;){let t=e.uint32();switch(t>>>3){case 2:{l.manualFileConversionByUserId===n.emptyObject&&(l.manualFileConversionByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.manualFileConversionByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 3:{l.manualVideoRemuxByUserId===n.emptyObject&&(l.manualVideoRemuxByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.manualVideoRemuxByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 4:{l.manualVideoGifByUserId===n.emptyObject&&(l.manualVideoGifByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.manualVideoGifByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 5:{l.automatedAdoptionByUserId===n.emptyObject&&(l.automatedAdoptionByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.automatedAdoptionByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 6:{l.automatedAdoptionV2ByUserId===n.emptyObject&&(l.automatedAdoptionV2ByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.automatedAdoptionV2ByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 7:{l.automatedAdoptionVariantByUserId===n.emptyObject&&(l.automatedAdoptionVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.automatedAdoptionVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 8:{l.approvalFlowByUserId===n.emptyObject&&(l.approvalFlowByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.approvalFlowByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 9:{l.approvalFlowVariantByUserId===n.emptyObject&&(l.approvalFlowVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.approvalFlowVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 10:{l.manualAudioConversionByUserId===n.emptyObject&&(l.manualAudioConversionByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.manualAudioConversionByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 11:l.flowsApprovalInShareModalEnabled=e.bool();break;case 12:{l.conversionMenuVariantByUserId===n.emptyObject&&(l.conversionMenuVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.conversionMenuVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 13:{l.approvalMenuVariantByUserId===n.emptyObject&&(l.approvalMenuVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.approvalMenuVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 14:{l.versioningFlowVariantByUserId===n.emptyObject&&(l.versioningFlowVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.versioningFlowVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 15:{l.approvalAndVersioningNewBadgeByUserId===n.emptyObject&&(l.approvalAndVersioningNewBadgeByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.approvalAndVersioningNewBadgeByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 16:{l.approvalCopyVariantByUserId===n.emptyObject&&(l.approvalCopyVariantByUserId={});let t=e.uint32()+e.pos;for(a=0,r="";e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.string();break;default:e.skipType(7&t)}}l.approvalCopyVariantByUserId["object"==typeof a?n.longToHash(a):a]=r;break}case 17:{l.approvalPdfEditingToastByUserId===n.emptyObject&&(l.approvalPdfEditingToastByUserId={});let t=e.uint32()+e.pos;for(a=0,r=!1;e.pos<t;){let t=e.uint32();switch(t>>>3){case 1:a=e.int64();break;case 2:r=e.bool();break;default:e.skipType(7&t)}}l.approvalPdfEditingToastByUserId["object"==typeof a?n.longToHash(a):a]=r;break}default:e.skipType(7&t)}}return l},e.getTypeUrl=function(){return"type.googleapis.com/file_viewer.FileViewerFlowExperiments"},e})(l.FileViewerFlowExperiments||{}),l.OpenInMobileAppPlatform=(function(){const e={},t=Object.create(e);return t[e[0]="UNUSED"]=0,t[e[1]="UNSUPPORTED"]=1,t[e[2]="IPHONE"]=2,t[e[3]="ANDROID_MARKET"]=3,t[e[4]="IPAD"]=4,t})(),l)})),define("metaserver/static/js/file_viewer/sdk_file_viewer/experiments",["require","exports","metaserver/static/js/modules/constants/file_viewer_configuration","metaserver/static/js/modules/constants/file_viewer_feature_experiments","metaserver/static/js/modules/constants/file_viewer_flows_experiments","metaserver/static/js/dropbox/proto/js_init_data/file_viewer/experiments","metaserver/static/js/proto_utils/unpack"],(function(e,t,a,r,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileViewerFlowExperiments=t.fileViewerFeatureExperiments=t.fileViewerConfiguration=void 0,t.fileViewerConfiguration=n.unpackProto(a.proto,i.file_viewer.FileViewerConfiguration),t.fileViewerFeatureExperiments=n.unpackProto(r.proto,i.file_viewer.FileViewerFeatureExperiments),t.fileViewerFlowExperiments=n.unpackProto(o.proto,i.file_viewer.FileViewerFlowExperiments)})),define("metaserver/static/js/modules/clean/react/file_viewer/app_download_interstitial/app_download_interstitial",["require","exports","tslib","classnames","react","spectrum/button/index","metaserver/static/js/spectrum-content-icon-compatibility/index","metaserver/static/js/spectrum-content-icon-compatibility/index","spectrum/icon_form/index","metaserver/static/js/open_in_app/types","metaserver/static/js/modules/clean/static_urls","metaserver/static/js/modules/core/i18n","metaserver/static/js/components/ui/css","metaserver/static/js/open_in_app/actions","metaserver/static/js/modules/clean/open_in_mobile_app"],(function(e,t,a,r,o,i,n,s,l,d,c,p,u,m,f){"use strict";function v({onClose:e}){return o.default.createElement("header",null,o.default.createElement("h1",{className:"DropboxLogo"},o.default.createElement("img",{src:c.static_url("/static/images/index/rebrand/logos/glyphs/glyph_blue-vfla3iXuq.svg"),className:"DropboxLogo--glyph",alt:"Dropbox"}),o.default.createElement("img",{src:c.static_url("/static/images/index/rebrand/logos/wordmarks/wordmark_black-vflmhE3RY.svg"),className:"Dropbox--wordmark",alt:"Dropbox"})),o.default.createElement("button",{className:"button-as-link app-download-interstitial-close","aria-label":"Close",onClick:e},o.default.createElement(l.IconForm,{name:"cancel"})))}function g({appUrls:e,onContinue:t,onAppDownload:a}){const r=o.default.useCallback(()=>{null==a||a(),m.openInApp(e)},[e,a]);return o.default.createElement("div",{className:"app-download-interstitial-ctas"},o.default.createElement(f.CopyUrlLabelText,{className:"app-download-interstial-copy-notification"}),o.default.createElement(i.Button,{className:"app-download-interstitial-cta",size:"large",href:y(e),onClick:r},p.intl.formatMessage({id:"81NCFj",defaultMessage:"Get the app"})),o.default.createElement(i.Button,{className:"app-download-interstitial-cta",size:"large",variant:"secondary",onClick:t},p.intl.formatMessage({id:"OGP7zL",defaultMessage:"Or continue to website"})))}function _({fileOrFolderName:e,isFolder:t,ownerName:a,ownerTeamName:r}){return o.default.createElement("section",{className:"app-download-interstitial-content"},o.default.createElement("header",null,o.default.createElement("h2",null,p.intl.formatMessage({id:"PHaeBQ",defaultMessage:"Get a better view with our mobile app"}))),o.default.createElement("div",{className:"app-download-interstitial-content-thumbnail"},t?o.default.createElement(s.IconContent,{name:"folder_shared-large"}):o.default.createElement(n.FileIcon,{path:e,variant:"large"}),o.default.createElement("p",{className:"app-download-interstitial-filename"},e),o.default.createElement("p",{className:"app-download-interstitial-owner"},(l=r,(i=a)&&l?p.intl.formatMessage({id:"pYAdxo",defaultMessage:"{owner} ({team}) shared this with you."},{owner:i,team:l}):i&&!l?p.intl.formatMessage({id:"UpPnqL",defaultMessage:"{owner} shared this with you."},{owner:i}):!i&&l?p.intl.formatMessage({id:"YVlUTG",defaultMessage:"{team} shared this with you."},{team:l}):p.intl.formatMessage({id:"esqj6U",defaultMessage:"This file was shared with you."})))));var i,l}function y(e){if(e){if(d.areUrlsIOS(e))return e.iOSAppStoreUrl;if(d.areUrlsAndroid(e))return e.androidAppUrl}}Object.defineProperty(t,"__esModule",{value:!0}),t.AppDownloadInterstitial=void 0,r=a.__importDefault(r),o=a.__importDefault(o);const b=u.requireCssWithComponent(e=>{const{className:t,open_in_app_data:a,fileOrFolderName:i,isFolder:n,onClose:s,onContinue:l,onAppDownload:d,ownerName:c,ownerTeamName:p}=e;return o.default.createElement("section",{className:r.default("app-download-interstitial-container",t)},o.default.createElement(v,{onClose:s}),o.default.createElement(_,{isFolder:n,fileOrFolderName:i,ownerName:c,ownerTeamName:p}),o.default.createElement(g,{onContinue:l,onAppDownload:d,appUrls:a}))},["/static/css/index/obsidian/logo-vflbo_vhR.css","/static/css/file_viewer/app_download_interstitial-vfl-ps0OO.css","/static/css/dig-components/index.web-vflkNfl3z.css"]);t.AppDownloadInterstitial=b})),define("metaserver/static/js/open_in_app/actions",["require","exports","tslib","metaserver/static/js/open_in_app/types","metaserver/static/js/modules/clean/open_in_mobile_app"],(function(e,t,a,r,o){"use strict";function i(){const e=(navigator.userAgent||"").match(/OS (\d+)_(\d+)_?(\d+)?/);return!e||parseInt(e[1],10)>=9}Object.defineProperty(t,"__esModule",{value:!0}),t.cleanUp=t.openImmediately=t.openInApp=t.isIOS9OrHigher=void 0,o=a.__importStar(o),t.isIOS9OrHigher=i,t.openInApp=function(e){r.areUrlsIOS(e)?o.open_ios(e.iOSAppUrl,e.iOSAppStoreUrl,i()):r.areUrlsAndroid(e)&&o.open_android_intent(e.androidAppUrl)},t.openImmediately=function(e){let t;if(r.areUrlsIOS(e))t=e.iOSAppUrl;else{if(!r.areUrlsAndroid(e))return;t=e.androidAppUrl}const a=document.createElement("iframe");a.setAttribute("class","open-in-app-transport"),a.setAttribute("src",t),a.setAttribute("style","display: none"),document.body.appendChild(a)},t.cleanUp=function(){o.cleanup()}})),define("metaserver/static/js/open_in_app/ui/banner",["require","exports","tslib","react","metaserver/static/js/open_in_app/actions","metaserver/static/js/open_in_app/types","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/core/browser","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/clean/open_in_mobile_app","dig-components/icons","dig-components/icons/src","dig-components/buttons","metaserver/static/js/open_in_app/ui/banner.module.css"],(function(e,t,a,r,o,i,n,s,l,d,c,p,u,m){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.OpenInAppBanner=void 0,r=a.__importDefault(r),s=a.__importStar(s),l=a.__importStar(l),m=a.__importStar(m);class f extends r.default.Component{constructor(){super(...arguments),this.state={closed:!1},this.handleAppRedirect=()=>{var e;this.props.onClick&&this.props.onClick(),this.props.isMountedFile&&(null===(e=this.props.urls)||void 0===e?void 0:e.platform)===i.OpenInMobileAppPlatform.ANDROID_MARKET?s.redirect(this.props.urls.androidAppUrl):o.openInApp(this.props.urls)},this.dismiss=()=>{this.setState({closed:!0});const{onClose:e}=this.props;e&&e()}}componentWillUnmount(){o.cleanUp()}render(){const{closed:e}=this.state;if(e||!this.props.urls)return null;const t=l.iOS&&o.isIOS9OrHigher();return r.default.createElement("div",{className:m.banner},r.default.createElement("div",{className:m.textContainer},r.default.createElement(u.Button,{onClick:this.handleAppRedirect,variant:"transparent",hasNoUnderline:!0},t?n.intl.formatMessage({id:"ye+BbQ",defaultMessage:"Get the Dropbox App"}):this.props.isMountedFile&&this.props.urls.platform===i.OpenInMobileAppPlatform.ANDROID_MARKET?n.intl.formatMessage({id:"gxO/+x",defaultMessage:"Open App"}):n.intl.formatMessage({id:"pezXnL",defaultMessage:"View In App"})),r.default.createElement(d.CopyUrlLabelText,{className:m.copyNotification,color:"standard",size:"small"})),r.default.createElement(u.IconButton,{variant:"transparent",className:m.closeButton,size:"large","aria-label":n.intl.formatMessage({id:"LwqLT7",defaultMessage:"Close"}),onClick:this.dismiss},r.default.createElement(c.UIIcon,{src:p.CloseLine})))}}t.OpenInAppBanner=f,f.displayName="OpenInAppBanner"})),define("metaserver/static/js/open_in_app/ui/banner.module.css",["require","exports","css!metaserver/static/js/open_in_app/ui/banner.module.out.css"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.closeButton=t.copyNotification=t.textContainer=t.banner=void 0,t.banner="_banner_1qu5f_1",t.textContainer="_text-container_1qu5f_9",t.copyNotification="_copy-notification_1qu5f_14",t.closeButton="_close-button_1qu5f_18";t.default={banner:"_banner_1qu5f_1",textContainer:"_text-container_1qu5f_9",copyNotification:"_copy-notification_1qu5f_14",closeButton:"_close-button_1qu5f_18"}})),define("metaserver/static/js/comments2/util",["require","exports","tslib","lodash","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/constants/comments2","typescript/libraries/comments2/src/components/annotation_utils","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/browser"],(function(e,t,a,r,o,i,n,s,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseActiveCommentFromUrl=t.createFullRectangle=t.isFullImageAnnotation=t.isFullPageAnnotation=t.getThreadForNumberedAnnotationAtPoint=t.useBolt=t.isTimecodeAnnotation=t.canShowUnreadPill=t.isComments2Mobile=t.getAnnotationInfoForThread=t.findCommentThread=t.isContextSame=t.isStreamSame=t.isUserSame=t.createBackoff=void 0,r=a.__importStar(r),l=a.__importStar(l);function d(e){return(t,a)=>void 0===t||void 0===a?t===a:e(t,a)}function c(...e){return d((t,a)=>e.every(e=>t[e]===a[e]))}function p(e){return void 0!==e&&("audio"===e.type||"video"===e.type)}function u(e,t,a){return t<=e&&e<=a}t.createBackoff=function(e=1e3,t=3e5){let a,r=0;return{resetBackoff:()=>{r=0,null!=a&&clearTimeout(a)},backoff:o=>a=setTimeout(o,Math.random()*Math.min(e*(Math.pow(2,r++)-1),t))}},t.isUserSame=c("id"),t.isStreamSame=c("type","id"),t.isContextSame=d((e,a)=>t.isStreamSame(e.stream,a.stream)&&t.isUserSame(e.viewer,a.viewer)),t.findCommentThread=function(e,t){for(const a of e){const e=r.find(a.comments,{id:t});if(e)return{comment:e,thread:a}}return null},t.getAnnotationInfoForThread=function({annotation:e}){if(p(e))return{playerCurrentTime:e.time,playerCurrentTimeSec:n.isVideoAnnotation(e)?e.timeSec:void 0,annotationMayBeOffscreen:!1}},t.isComments2Mobile=o.is_mobile_or_tablet,t.canShowUnreadPill=function(){return!s.msie},t.isTimecodeAnnotation=p,t.useBolt=function(){return!i.COMMENTS2_DISABLE_BOLT};const m=(e,t,a)=>Math.min(...(e=>"image"===e.annotation.type?[e.annotation.region]:e.annotation.regions)(e).map(e=>(function(e,t,a){const r=e.x+e.width,o=e.y+e.height,i=(e,t)=>e<t?e:1/0;if(u(t.x,e.x,r)&&u(t.y,e.y,o)){const n=16/a.width,s=16/a.height;return Math.min(i(Math.min(t.x-e.x,r-t.x),n),i(Math.min(t.y-e.y,o-t.y),s))}return 1/0})(e,t,a)));function f({x:e,y:t,width:a,height:r}){return 0===e&&0===t&&1===a&&1===r}t.getThreadForNumberedAnnotationAtPoint=function(e,t,a){return r=t=>m(t,e,a),t.reduce(({minRank:e,minElem:t},a)=>{const o=r(a);return e<=o?{minRank:e,minElem:t}:{minRank:o,minElem:a}},{minRank:1/0,minElem:void 0}).minElem;var r},t.isFullPageAnnotation=function(e){return 1===e.regions.length&&f(e.regions[0])},t.isFullImageAnnotation=function(e){return f(e.region)},t.createFullRectangle=function(){return{x:0,y:0,width:1,height:1}},t.parseActiveCommentFromUrl=function(){const e=/comment_id=(.*)/.exec(l.get_uri().getFragment());return e?e[1]:void 0}})),define("metaserver/static/js/action_bar/file_actions/portable/star/portable_star",["require","exports","tslib","metaserver/static/js/api_v2/user_client"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.star=void 0;t.star=({userId:e,fileId:t,newStarredValue:o},{onSuccess:i,onError:n})=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=new r.UserApiV2Client;try{yield a.ns("starred").rpc("update_item_v2",{id:t,is_starred:o},{subjectUserId:e}),null==i||i()}catch(e){null==n||n()}}))})),define("metaserver/static/js/home/starred/conditional_interface",["require","exports","metaserver/static/js/home/starred/starred_resource_store","metaserver/static/js/starred/star","metaserver/static/js/home/recents/recent_activity_starred","metaserver/static/js/home/starred/starred_view","metaserver/static/js/starred/id_type_pair","metaserver/static/js/files_page/data/store","metaserver/static/js/files_page/data/action_creators","metaserver/static/js/starred/redux/store","metaserver/static/js/starred/redux/slice"],(function(e,t,a,r,o,i,n,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StarredActions=t.fetchMissingStarredStatuses=t.getStoreForStarred=t.filesPageAppInit=t.getStoreForFilesPage=t.idTypePairToString=t.StarredView=t.getIdTypePairFromRecentItem=t.Star=t.getStarredResourceStore=void 0,Object.defineProperty(t,"getStarredResourceStore",{enumerable:!0,get:function(){return a.getStarredResourceStore}}),Object.defineProperty(t,"Star",{enumerable:!0,get:function(){return r.Star}}),Object.defineProperty(t,"getIdTypePairFromRecentItem",{enumerable:!0,get:function(){return o.getIdTypePairFromRecentItem}}),Object.defineProperty(t,"StarredView",{enumerable:!0,get:function(){return i.StarredView}}),Object.defineProperty(t,"idTypePairToString",{enumerable:!0,get:function(){return n.idTypePairToString}}),Object.defineProperty(t,"getStoreForFilesPage",{enumerable:!0,get:function(){return s.getStoreForFilesPage}}),Object.defineProperty(t,"filesPageAppInit",{enumerable:!0,get:function(){return l.appInit}}),Object.defineProperty(t,"getStoreForStarred",{enumerable:!0,get:function(){return d.getStoreForStarred}}),Object.defineProperty(t,"fetchMissingStarredStatuses",{enumerable:!0,get:function(){return c.fetchMissingStarredStatuses}}),Object.defineProperty(t,"StarredActions",{enumerable:!0,get:function(){return c.StarredActions}})})),define("metaserver/static/js/starred/star",["require","exports","tslib","classnames","react","react-redux","dig-components/icons","dig-components/icons/src","dig-components/tooltips","metaserver/static/js/components/ui/css","metaserver/static/js/starred/actions","metaserver/static/js/starred/starred_activity_logger","metaserver/static/js/starred/store","metaserver/static/js/starred/redux/selectors","metaserver/static/js/starred/redux/slice","metaserver/static/js/starred/redux/types","metaserver/static/js/modules/core/i18n","metaserver/static/js/common/uuid","metaserver/static/js/modules/constants/web_experience_constants"],(function(e,t,a,r,o,i,n,s,l,d,c,p,u,m,f,v,g,_,y){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Star=void 0,r=a.__importDefault(r),o=a.__importDefault(o);class b extends o.default.PureComponent{constructor(e){super(e),this.onStoreUpdate=()=>{const e=this.getStateFromStore();this.setState(e)},this.onClick=e=>{const{isStarred:t,isLoading:a}=this.state;if(e.stopPropagation(),e.preventDefault(),!a){const e=!t,{id:a,idType:r,isDir:o,itemName:i,onStarClick:n,source:s,user:l}=this.props;p.starredActivityLogger.logClick(l,a,r,o,s,e),n&&n(e),c.StarredActions.updateWithSnackbar(l.role,a,r,e,i)}},this.state=this.getStateFromStore(),this.removeStoreListener=u.StarredStore.addListener(this.onStoreUpdate)}componentWillUnmount(){this.removeStoreListener&&this.removeStoreListener()}UNSAFE_componentWillReceiveProps(e){this.props.id===e.id&&this.props.idType===e.idType||this.setState(this.getStateFromStore(e))}getStateFromStore(e=this.props){const t={id:e.id,type:e.idType};return{isLoading:u.StarredStore.getIsLoading(t),isStarred:u.StarredStore.getIsStarred(t),starID:_.generateUUID("star-")}}getTooltipContent(){const{isStarred:e}=this.state;return this.props.isReadOnly?e?g.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:e?g.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):g.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"})}render(){const{isStarred:e,isLoading:t}=this.state,{starButtonClassName:a,alwaysShowUnstarred:i}=this.props;if(void 0===e)return null;if(this.props.isReadOnly&&!e)return null;const d={star__toggle:!0,"star__toggle--starred":e,"star__toggle--unstarred":!e&&!this.props.isTabbing&&!i,"star__toggle--loading":t},c=this.getTooltipContent();return o.default.createElement(l.Tooltip,{title:c,placement:this.props.tooltipPlacement||"top"},o.default.createElement("button",{className:r.default(d,a),role:"button","aria-pressed":e,"aria-label":c,onClick:this.onClick,onDoubleClick:this.onClick,disabled:this.props.isReadOnly,tabIndex:this.props.tabIndex,id:this.state.starID,"aria-labelledby":r.default(this.state.starID,this.props.ariaLabelledBy)},o.default.createElement("span",{hidden:!0},c),o.default.createElement(n.UIIcon,{src:e?s.StarFill:s.StarLine})))}}b.displayName="Star";const h=({user:e,id:t,idType:a,isDir:d,source:c,itemName:u,onStarClick:y,tooltipPlacement:b,isReadOnly:h,isTabbing:w,tabIndex:A,starButtonClassName:I,alwaysShowUnstarred:S,ariaLabelledBy:O})=>{const E=i.useSelector(e=>m.getFileStarredData(e,t));let j=!1,P=!0;(null==E?void 0:E.loadingState)===v.StarredLoadingStateEnum.LOAD_SUCCESS&&(j=E.isStarred,P=!1);const[k]=o.default.useState(()=>_.generateUUID("star-")),T=i.useDispatch(),U=o.default.useMemo(()=>h?j?g.intl.formatMessage({id:"LAVXPn",defaultMessage:"Starred"}):null:j?g.intl.formatMessage({id:"XQNf7s",defaultMessage:"Remove from Starred"}):g.intl.formatMessage({id:"iGfiaV",defaultMessage:"Add to Starred"}),[j,h]),C=o.default.useCallback(r=>{if(r.stopPropagation(),r.preventDefault(),!P){const r=!j;p.starredActivityLogger.logClick(e,t,a,d,c,r),y&&y(r),T(f.updateStarredStatus({id:t,idType:a,newStatus:r,itemName:u,showSnackbar:!0}))}},[P,j]);if(void 0===j)return null;if(h&&!j)return null;const F={star__toggle:!0,"star__toggle--starred":j,"star__toggle--unstarred":!j&&!w&&!S,"star__toggle--loading":P};return o.default.createElement(l.Tooltip,{title:U,placement:b||"top"},o.default.createElement("button",{className:r.default(F,I),role:"button","aria-pressed":j,"aria-label":U,onClick:C,onDoubleClick:C,disabled:h,tabIndex:A,id:k,"aria-labelledby":r.default(k,O)},o.default.createElement("span",{hidden:!0},U),o.default.createElement(n.UIIcon,{src:j?s.StarFill:s.StarLine})))};h.displayName="StarReduxFc";const w=e=>y.STARRED_STORE_REDUX?o.default.createElement(h,Object.assign({},e)):o.default.createElement(b,Object.assign({},e));w.displayName="_Star",t.Star=d.requireCssWithComponent(w,["/static/css/starred/star-vflRNeO9W.css"])})),define("metaserver/static/js/starred/starred_activity_logger",["require","exports","metaserver/static/js/home/api","metaserver/static/js/home/starred/constants","metaserver/static/js/starred/constants","metaserver/static/js/modules/clean/web_user_action_logger","metaserver/static/js/modules/clean/web_user_action_events"],(function(e,t,a,r,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.starredActivityLogger=t.StarredActivityLogger=void 0;const s=[o.StarredSource.HOME_STARRED,o.StarredSource.HOME_RECENTS];class l{logClick(e,t,o,l,d,c){if("BROWSE"===d)return Promise.resolve();const p=[];if(s.includes(d)){const i=c?r.StarredLoggingTypes.CLICK_STAR:r.StarredLoggingTypes.CLICK_UNSTAR;p.push(a.logHomeActivity({eventName:i,role:e.role,extra:{resource_id:t,id_type:o,is_dir:l}}))}const u=c?n.WebUserActionLogEvent.STAR:n.WebUserActionLogEvent.REMOVE_STAR;return p.push(i.WebUserActionLog.log(e.id,u,{resource_id:t,id_type:o,is_dir:l,role:e.role,source:d})),Promise.all(p)}}t.StarredActivityLogger=l,t.starredActivityLogger=new l})),define("typescript/component_libraries/files_components/src/common/format_bytes",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.formatBytes=t.SWITCH_UNIT_THRESHOLD=void 0,t.SWITCH_UNIT_THRESHOLD=900,t.formatBytes=function(e,a,r=2,o=!0,i=!0,n=!0){a=n?parseFloat(a):Math.max(0,parseFloat(a));const s=Math.abs(a);let l,d;return s<1024?(r=0,l=a,d=e.formatMessage({id:"se/5fs",defaultMessage:"{count, plural, one{byte} other{bytes}}"},{count:a}),o=!0):s<1024*t.SWITCH_UNIT_THRESHOLD?(l=a/1024,d=e.formatMessage({id:"fcOrPH",defaultMessage:"KB"})):s<1048576*t.SWITCH_UNIT_THRESHOLD?(l=a/1048576,d=e.formatMessage({id:"UFZYVH",defaultMessage:"MB"})):s<1073741824*t.SWITCH_UNIT_THRESHOLD||0===r&&a<1099511627776?(l=a/1073741824,d=e.formatMessage({id:"5nCO1R",defaultMessage:"GB"})):(l=a/1099511627776,d=e.formatMessage({id:"4rrpQj",defaultMessage:"TB"})),`${e.formatNumber(l,{maximumFractionDigits:r,minimumFractionDigits:i?0:r})}${o?" ":""}${d}`}})),define("metaserver/static/js/comments2/data/mentions_api",["require","exports","tslib","lodash","metaserver/static/js/contacts/bloodhound_contacts_v2","metaserver/static/js/contacts/data_v2","metaserver/static/js/comments2/transforms"],(function(e,t,a,r,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mentionsApi=t.MentionsApiImpl=void 0,r=a.__importStar(r);class s{constructor(e,t=!1){this.cache={},this.filterContact=e=>{const t=!!e.group_id,a=!this.allowMentionSelf&&e.email===this.user.email;return!(t||a)},this.updateCache=(e,t,a)=>{let r;const o=t.map(n.contactToIMentionUser);if(a){r=[...this.cache[e]||[],...o]}else r=o;return this.cache=Object.assign(Object.assign({},this.cache),{[e]:r}),this.cache},this.user=e,this.allowMentionSelf=t,this.dataSource=new i.ContactsDataSourceV2(e,this.filterContact)}query(e,t,a){this.dataSource.search(e,a=>{t(this.updateCache(e,a,!1))},r=>{(a||t)(this.updateCache(e,r,!0))})}getMatchesWithStarterSuggestions(){const e=o.BloodhoundContactsV2.getAll(this.user).filter(this.filterContact).map(n.contactToIMentionUser),t=r.sortBy(e.slice(0,50),e=>e.name||e.email);return this.cache=Object.assign(Object.assign({},this.cache),{"":t}),this.cache}}t.MentionsApiImpl=s,t.mentionsApi=function(e,t){return e?new s(e,t):{cache:{},query:()=>{},getMatchesWithStarterSuggestions:()=>({})}}})),define("metaserver/static/js/comments2/transforms",["require","exports","tslib","metaserver/static/js/modules/core/user_i18n"],(function(e,t,a,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.contactToIMentionUser=t.sharingTextAndUsersToICommentContent=t.dbxUserToIUser=void 0,r=a.__importStar(r),t.dbxUserToIUser=function(e){return{id:e.account_id,name:{display:e.display_name,initials:r.getInitials(e.display_name),public:r.getShortName(e.display_name)},photoUrl:e.photo_circle_url}},t.sharingTextAndUsersToICommentContent=function(e,t){if(!t.length)return{metadata:[],text:e};const a=[],o=[];let i=0;for(const e of t){let t,n;"accountId"in e?(t=r.getShortName(e.displayName),n={type:"id",identifier:e.accountId}):(t=e.email,n={type:"email",identifier:e.email}),t&&(t="@"+t,a.push(t),o.push({location:{start:i,end:i+t.length},type:"mention",user:n}),i+=t.length+1)}return a.push(e),{text:a.join(" "),metadata:o}},t.contactToIMentionUser=function(e){return{id:e.dbx_account_id,email:e.email,name:{display:e.name,initials:r.getInitials(e.name),public:r.getShortName(e.name)},photoUrl:e.photo_url||e.avatar_url}}})),define("typescript/libraries/comments2/src/l10n",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getCommentsStrings=void 0,t.getCommentsStrings=function(e){return{intl:e}}})),define("typescript/component_libraries/flows/src/components/contact-typeahead/index",["require","exports","tslib","react","dig-components/typeahead","dig-components/text_fields","dig-components/form_row","dig-components/chips","dig-components/avatar","react-intl","dig-components/typography","dig-components/tooltips"],(function(e,t,a,r,o,i,n,s,l,d,c,p){"use strict";var u;Object.defineProperty(t,"__esModule",{value:!0}),t.TypeaheadEmailSuggestion=t.TypeaheadSuggestion=t.ContactTypeahead=t.getContactKey=t.ValidationResult=void 0,r=a.__importStar(r),(u=t.ValidationResult||(t.ValidationResult={})).OK="OK",u.DUPLICATE="DUPLICATE",u.INVALID="INVALID",u.OVER_RECIPIENTS_LIMIT="OVER_RECIPIENTS_LIMIT",t.getContactKey=function(e){return`CONTACT-${e.email}`};const m=/[ ,]+/,f=/^['&A-Za-z0-9\._%+-]+@[A-Za-z0-9-][A-Za-z0-9\.-]*\.[A-Za-z]{2,15}$/i;t.ContactTypeahead=e=>{const[a,d]=r.useState(""),[u,g]=r.useState(!1),[_,y]=r.useState(!1),[b,h]=r.useState(!1),w=r.useRef(null),{noMatches:A,selectFromSuggestionErrMsg:I}=v();r.useEffect(()=>{e.recipients.length>e.recipientNumLimit?y(!0):y(!1),e.recipients.length>0&&e.recipients.filter(e=>e.validationResult!==t.ValidationResult.OK).length>0?g(!0):g(!1)},[e.recipients,e.recipientNumLimit]);const S=t=>{const a=e.recipients.filter(e=>e.email!==t.email);e.onRecipientsChange(a)},O=a=>{if(e.recipients.length>e.recipientNumLimit)return t.ValidationResult.OVER_RECIPIENTS_LIMIT;return e.recipients.find(e=>a.email===e.email)?t.ValidationResult.DUPLICATE:f.test(a.email)?t.ValidationResult.OK:t.ValidationResult.INVALID},E=(a,r,o)=>{if(e.onQueryChange(""),d(""),!a)return!1;if(!a&&!o)return!1;const i=a?[a]:o.split(m).filter(Boolean).map(e=>({email:e})),n={},s=[...e.recipients];for(const e of i){if(e.email in n)continue;const a=O(e);if(a===t.ValidationResult.OVER_RECIPIENTS_LIMIT)break;a!==t.ValidationResult.DUPLICATE&&(n[e.email]=null,e.validationResult=a,s.push(e))}return s.length>e.recipients.length&&e.onRecipientsChange(s),0===s.filter(e=>e.validationResult!==t.ValidationResult.OK).length},j=t=>{E(t,0,a),e.onTypeAheadSelection&&e.onTypeAheadSelection(t)},P=t=>{const a=t.currentTarget.value;d(a),e.onQueryChange(a)},k=t=>{if(8===t.keyCode&&""===a&&e.recipients.length>0&&S(e.recipients[e.recipients.length-1]),(9==t.keyCode||13===t.keyCode)&&""!==a){let t=null;e.suggestions.length>0?t=e.suggestions[0]:f.test(a)&&(t={email:a}),E(t,0,a)}},T=()=>{e.onFocus&&e.onFocus(),h(!0)},U="flows-typeahead__input",C=e.recipients.length>=e.recipientNumLimit,F=()=>r.default.createElement(o.Typeahead.Wrapper,{onSelection:j},({getTriggerProps:d,getContentProps:c})=>r.default.createElement(r.default.Fragment,null,r.default.createElement(i.TextInput.Container,{isInvalid:u||_||!b&&!!a,ref:w},r.default.createElement(i.TextInput.ChipsContainer,null,!!e.recipients.length&&e.recipients.map((e,a)=>r.default.createElement(s.InputChip,{key:a,size:"small",isAlert:e.validationResult!==t.ValidationResult.OK,onDelete:()=>S(e),withAvatarLeft:e.avatarUrl&&r.default.createElement(l.Avatar,{hasNoOutline:!0,size:"xsmall",src:e.avatarUrl})},e.name||e.email)),r.default.createElement(i.TextInput.Input,Object.assign({autoFocus:!0,id:U,placeholder:C?void 0:e.placeholder,"aria-label":e.placeholder,value:a},d({onChange:P,onKeyDown:k}),{disabled:C,onBlur:()=>h(!1),onFocus:T,style:{fontSize:"12px"},autoComplete:"off"})))),!b&&a&&r.default.createElement(n.FormHelperText,{isInvalid:!0},I),r.default.createElement(o.Typeahead.Container,Object.assign({},c(),{triggerRef:{current:w.current},isEmptyQuery:Boolean(a)&&0==e.suggestions.length&&!f.test(a),emptyPrompt:r.default.createElement(o.Typeahead.EmptyPrompt,{placeholderText:A}),onBlur:()=>h(!1),onFocus:()=>h(!0)}),e.suggestions.length>0?r.default.createElement(o.Typeahead.Results,{results:e.suggestions,renderRow:e.renderTypeaheadSuggestion}):Boolean(a)&&r.default.createElement(o.Typeahead.Results,{results:[{email:a}],renderRow:e=>r.default.createElement(t.TypeaheadEmailSuggestion,{suggestion:e})}))));return r.default.createElement(r.default.Fragment,null,e.label&&r.default.createElement(n.FormLabel,{htmlFor:U},r.default.createElement(c.Text,{isBold:!0,size:"small",tagName:"label"},e.label),e.labelSubtext),C&&e.maxNumTooltip?r.default.createElement(p.Tooltip,{title:e.maxNumTooltip},r.default.createElement("span",{style:{display:"inline-block",width:"100%"},tabIndex:0},F())):F())},t.ContactTypeahead.displayName="ContactTypeahead";t.TypeaheadSuggestion=({suggestion:e,getInitials:t})=>{const a=t(e.name||e.email);return r.default.createElement(o.Typeahead.Row,{key:e.email,value:e,withTitle:e.name,withSubtitle:e.email,withLeftAccessory:r.default.createElement(l.Avatar,{src:e.avatarUrl,backgroundColor:l.avatarColorForUserIdentifier(a),hasNoOutline:!0},a),onKeyDown:e=>{e.nativeEvent.stopImmediatePropagation()}})},t.TypeaheadSuggestion.displayName="TypeaheadSuggestion";function v(){const e=d.useIntl();return{noMatches:e.formatMessage({id:"T2ynaE",defaultMessage:"No matches"}),selectFromSuggestionErrMsg:e.formatMessage({id:"4gphPK",defaultMessage:"Please select an assignee"}),inviteEmailMsg:t=>e.formatMessage({id:"E9a3yV",defaultMessage:"Invite {email}"},{email:t})}}t.TypeaheadEmailSuggestion=({suggestion:e})=>{const{inviteEmailMsg:t}=v();return r.default.createElement(o.Typeahead.Row,{key:e.email,value:e,withTitle:t(e.email)})},t.TypeaheadEmailSuggestion.displayName="TypeaheadEmailSuggestion"})),define("metaserver/static/js/flows/approval/api",["require","exports","metaserver/static/js/api_v2/user_client"],(function(e,t,a){"use strict";function r(e,t,r,o,i,n){const s={file_id:t,comment:{content:n},thread_id:r,status:{".tag":o},approval_type:{".tag":i}};return(new a.UserApiV2Client).ns("flows").rpc("respond_to_approval",s,{subjectUserId:e})}function o(e,t,r,o,i){const n={file_id:t,comment_id:r,comment:{content:i},status:{".tag":o}};return(new a.UserApiV2Client).ns("flows").rpc("edit_approval",n,{subjectUserId:e})}Object.defineProperty(t,"__esModule",{value:!0}),t.getSubmittedApprovalsCount=t.getFileApprovalStatus=t.deleteApprovalThread=t.deleteApproval=t.editApprovalRequest=t.editApprovalResponse=t.resubmitApprovalRequest=t.respondToApprovalRequest=t.createApproval=void 0,t.createApproval=function(e,t,r,o,i){const n={file_id:t,comment:{content:r},status:{".tag":"pending"},approvers:o,requires_all:i};return(new a.UserApiV2Client).ns("flows").rpc("create_approval",n,{subjectUserId:e})},t.respondToApprovalRequest=function(e,t,a,o,i){return r(e,t,a,o?"approved":"rejected","response",i)},t.resubmitApprovalRequest=function(e,t,a,o){return r(e,t,a,"pending","request",o)},t.editApprovalResponse=function(e,t,a,r,i){return o(e,t,a,r?"approved":"rejected",i)},t.editApprovalRequest=function(e,t,a,r){return o(e,t,a,"pending",r)},t.deleteApproval=function(e,t,r){const o={file_id:t,comment_id:r};return(new a.UserApiV2Client).ns("flows").rpc("delete_approval",o,{subjectUserId:e})},t.deleteApprovalThread=function(e,t,r){const o={file_id:t,comment_id:r};return(new a.UserApiV2Client).ns("flows").rpc("delete_approval_thread",o,{subjectUserId:e})},t.getFileApprovalStatus=function(e,t){const r={file_id:t};return(new a.UserApiV2Client).ns("flows").rpc("get_file_status",r,{subjectUserId:e})},t.getSubmittedApprovalsCount=function(e){return(new a.UserApiV2Client).ns("flows").rpc("get_submitted_approvals_count",{},{subjectUserId:e})}})),define("metaserver/static/js/flows/approval/approval_delete_modal",["require","exports","tslib","react","dig-components/modal","dig-components/typography","dig-components/buttons","metaserver/static/js/flows/approval/api","dig-components/form_row","react-intl","metaserver/static/js/flows/logging/approvals_logger"],(function(e,t,a,r,o,i,n,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalDeleteThreadModal=t.ApprovalDeleteCommentModal=void 0,r=a.__importStar(r);const p=({open:e,title:t,body:a,onCancel:s,onDelete:d,error:c,isLoading:p})=>{const{closeButton:m,deleteButton:f,genericError:v}=u();return r.default.createElement(o.Modal,{open:e,onRequestClose:s},r.default.createElement(o.Modal.Header,{hasBottomSpacing:"title-standard"},r.default.createElement(i.Title,null,t)),r.default.createElement(o.Modal.Body,null,r.default.createElement(i.Text,null,a),c&&r.default.createElement(l.FormHelperText,{isInvalid:!0},v)),r.default.createElement(o.Modal.Footer,null,r.default.createElement(n.Button,{variant:"opacity",onClick:s},m),r.default.createElement(n.Button,{variant:"primary",onClick:d,isLoading:p},f)))};p.displayName="ApprovalDeleteModal";t.ApprovalDeleteCommentModal=({userId:e,fileId:t,actor:a,onDeleteSuccess:o,commentId:i})=>{const[n,l]=r.useState(!1),[d,m]=r.useState(!0),[f,v]=r.useState(!1),{getDeleteCommentTitle:g,getDeleteCommentBody:_}=u();r.default.useEffect(()=>{c.PapLogger.logShownRemoveApprovalModal(t,"delete_comment_modal",i)},[]);const y=g(a),b=_(a);return y&&b?r.default.createElement(p,{open:d,onCancel:()=>{c.PapLogger.logRemoveApprovalCancelClick(t,"delete_comment_modal",i),m(!1)},onDelete:()=>{c.PapLogger.logRemoveApprovalConfirmClick(t,"delete_comment_modal",i),l(!1),v(!0),s.deleteApproval(e,t,i).then(()=>{o(),m(!1)}).catch(()=>{l(!0),v(!1)})},title:y,body:b,error:n,isLoading:f}):null},t.ApprovalDeleteCommentModal.displayName="ApprovalDeleteCommentModal";t.ApprovalDeleteThreadModal=({userId:e,fileId:t,threadId:a,onDeleteSuccess:o})=>{const[i,n]=r.useState(!1),[l,d]=r.useState(!0),[m,f]=r.useState(!1),{deleteThreadTitle:v,deleteThreadBody:g}=u();r.default.useEffect(()=>{c.PapLogger.logShownRemoveApprovalModal(t,"delete_approval_modal",a)},[e,t,a]);return r.default.createElement(p,{open:l,onCancel:()=>{c.PapLogger.logRemoveApprovalCancelClick(t,"delete_approval_modal",a),d(!1)},onDelete:()=>{c.PapLogger.logRemoveApprovalConfirmClick(t,"delete_approval_modal",a),n(!1),f(!0),s.deleteApprovalThread(e,t,a).then(()=>{o(),d(!1)}).catch(()=>{n(!0),f(!1)})},title:v,body:g,error:i,isLoading:m})},t.ApprovalDeleteThreadModal.displayName="ApprovalDeleteThreadModal";const u=()=>{const e=d.useIntl();return{getDeleteCommentTitle:t=>"requester"===t?e.formatMessage({id:"l623DN",defaultMessage:"Delete your approval request?"}):"approver"===t?e.formatMessage({id:"a6tb8g",defaultMessage:"Delete your response?"}):null,getDeleteCommentBody:t=>"requester"===t?e.formatMessage({id:"o4wQ1b",defaultMessage:"Your request for approval on this file will be deleted. You’ll be able to start a new approval request."}):"approver"===t?e.formatMessage({id:"lTKaYp",defaultMessage:"Your response to the approval request on this file will be deleted. You’ll be able to submit a new response."}):null,closeButton:e.formatMessage({id:"67AKp5",defaultMessage:"Cancel"}),deleteButton:e.formatMessage({id:"sDOGa0",defaultMessage:"Delete"}),genericError:e.formatMessage({id:"cdCpqV",defaultMessage:"Something went wrong. Please try again later."}),deleteThreadTitle:e.formatMessage({id:"bJ6YI2",defaultMessage:"Remove approval request?"}),deleteThreadBody:e.formatMessage({id:"OtCoJc",defaultMessage:"Your request for approval on this file and all of its responses will be deleted. You can always initiate a new approval request."})}}})),define("metaserver/static/js/flows/approval/approval_io_client",["require","exports","tslib","metaserver/static/js/flows/utils/use_suggestions","metaserver/static/js/modules/core/user_i18n","metaserver/static/js/flows/approval/api","metaserver/static/js/flows/approval/utils","metaserver/static/js/modules/clean/user_survey/user_survey","metaserver/static/js/logging/hive/schemas/web-approvals_feedback","metaserver/static/js/logging/telemetry","metaserver/static/js/flows/logging/approvals_logger"],(function(e,t,a,r,o,i,n,s,l,d,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.approvalIOClient=void 0;const p=new((d=a.__importStar(d)).HiveLogger);t.approvalIOClient=e=>{const t=e=>{s.UserSurvey.trackEvent(e,"browse")};return{useSuggestions:t=>r.useSuggestions(e,t,!1,!0),getInitials:o.getInitials,createApproval(t,a,r,o){const n=r.map(e=>({email:e.email}));return i.createApproval(e,t,a,n,o)},respondToApprovalRequest:(t,a,r,o)=>i.respondToApprovalRequest(e,t,a,r,o),editApprovalResponse:(t,a,r,o)=>i.editApprovalResponse(e,t,a,r,o),showApprovalDeleteCommentModal(t,a,r,o){n.launchApprovalDeleteCommentModal(e,t,a,r,o)},editApprovalRequest:(t,a,r)=>i.editApprovalRequest(e,t,a,r),resubmitApprovalRequest:(t,a,r)=>i.resubmitApprovalRequest(e,t,a,r),showApprovalDeleteThreadModal(t,a,r){n.launchApprovalDeleteThreadModal(e,t,a,r)},triggerSprigSurvey(){return a.__awaiter(this,void 0,void 0,(function*(){const{num_requested_approvals:a}=yield i.getSubmittedApprovalsCount(e);1===a?t("approval_requested_one_time"):5===a?t("approval_requested_five_times"):25===a&&t("approval_requested_twenty_five_times")}))},trackUserSurveyEvent:t,logApprovalsFeedback(e,t){p.log(new l.ApprovalsFeedbackLoggingTableRow({is_feature_helpful:e,feedback:t}))},logger:c.PapLogger}}})),define("metaserver/static/js/logging/hive/schemas/web-approvals_feedback",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ApprovalsFeedbackLoggingTableRow=void 0;t.ApprovalsFeedbackLoggingTableRow=class{constructor(e){this.category="web-approvals_feedback",this.user_id=null,this.is_feature_helpful=e.is_feature_helpful,this.feedback=e.feedback,this.timestamp=Date.now(),Object.seal(this)}}})),define("metaserver/static/js/flows/approval/utils",["require","exports","tslib","react","metaserver/static/js/components/ui/modal","metaserver/static/js/modules/core/i18n","react-intl","metaserver/static/js/flows/approval/approval_delete_modal"],(function(e,t,a,r,o,i,n,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.launchApprovalDeleteThreadModal=t.launchApprovalDeleteCommentModal=void 0,r=a.__importDefault(r),t.launchApprovalDeleteCommentModal=function(e,t,a,l,d){o.Modal.showInstance(r.default.createElement(n.RawIntlProvider,{value:i.intl},r.default.createElement(s.ApprovalDeleteCommentModal,{userId:e,fileId:t,commentId:a,actor:l,onDeleteSuccess:d})))},t.launchApprovalDeleteThreadModal=function(e,t,a,l){o.Modal.showInstance(r.default.createElement(n.RawIntlProvider,{value:i.intl},r.default.createElement(s.ApprovalDeleteThreadModal,{userId:e,fileId:t,threadId:a,onDeleteSuccess:l})))}})),define("metaserver/static/js/flows/logging/approvals_logger",["require","exports","tslib","metaserver/static/js/pap/analytics_client","metaserver/static/js/pap/util"],(function(e,t,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PapLogger=void 0;const i=(()=>{let t;return{getOrLoadPapEvents:()=>a.__awaiter(void 0,void 0,void 0,(function*(){return t||(t=yield new Promise((t,a)=>{e(["metaserver/static/js/flows/logging/approvals_logging_events"],t,a)}).then(a.__importStar)),t}))}})();function n(e,t){let a=void 0;switch(e){case"approved":a=o.getEnumValueForString("APPROVED_APPROVAL_STATUS",t);break;case"rejected":a=o.getEnumValueForString("REJECTED_APPROVAL_STATUS",t);break;case"pending":a=o.getEnumValueForString("PENDING_APPROVAL_STATE",t);break;case"other":a=o.getEnumValueForString("OTHER_APPROVAL_STATE",t)}return a}t.PapLogger={logRequestApprovalClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalButton.create({actionSurface:e,fileId:t,previewsSurface:o?o(a.Select_RequestApprovalButton.PreviewsSurface):void 0}))})),logShownRequestForm:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Shown_RequestApprovalForm.create({actionSurface:t,fileId:e}))})),logFocusApproverTypeahead:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalApproverInput.create({actionSurface:t,fileId:e}))})),logRequestFormCancelClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalFormCancelButton.create({actionSurface:t,fileId:e}))})),logAddApprover:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalApprover.create({actionSurface:t,fileId:e,approverId:o}))})),logSubmitApprovalRequest:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield i.getOrLoadPapEvents();r.logEvent(t.Initiate_RequestApproval.create(e))})),logSubmitApprovalSuccess:(e,t,o,n,s,l,d)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Succeed_RequestApproval.create({actionSurface:t,threadId:d,fileId:e,approvalDetailsLength:o,approvers:n,requiresAll:s,numApprovers:l}))})),logSubmitApprovalFailure:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield i.getOrLoadPapEvents();r.logEvent(t.Fail_RequestApproval.create(e))})),logApproverOptionsClick:(e,t,o="request_approval_form")=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalApproverOption.create({actionSurface:o,fileId:e,requiresAll:t}))})),logRespondClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RespondApprovalButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logShownRespondForm:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Shown_RespondApprovalForm.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logApproveChipClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();o?r.logEvent(a.Select_RespondApprovalApproveButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e})):r.logEvent(a.Select_RespondApprovalRejectButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logRespondFormCancelClick:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield i.getOrLoadPapEvents();r.logEvent(t.Select_RespondApprovalFormCancelButton.create({actionSurface:"respond_approval_form",fileId:e}))})),logSubmitResponseSuccess:(e,t,o,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Succeed_RespondApproval.create({actionSurface:"respond_approval_form",threadId:o,fileId:t,approvalStatus:n(e,a.Succeed_RespondApproval.ApprovalStatus),approvalDetailsLength:s}))})),logResubmitRequestClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_ResubmitApprovalButton.create({actionSurface:"respond_approval_form",threadId:t,fileId:e}))})),logResubmitRequestSuccess:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Succeed_ResubmitRequestApproval.create({actionSurface:"respond_approval_form",fileId:e,threadId:t,approvalDetailsLength:o}))})),logShownRemoveApprovalModal:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Shown_RemoveApprovalModal.create({actionSurface:t,fileId:e,commentId:o}))})),logRemoveApprovalConfirmClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RemoveApprovalConfirmButton.create({actionSurface:t,fileId:e,commentId:o}))})),logRemoveApprovalCancelClick:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RemoveApprovalCancelButton.create({actionSurface:t,fileId:e,commentId:o}))})),logEditApprovalResponseClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RespondApprovalEditButton.create({actionSurface:"respond_approval_form",fileId:e,threadId:t}))})),logEditApprovalRequestClick:(e,t)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Select_RequestApprovalEditButton.create({actionSurface:"request_approval_form",fileId:e,threadId:t}))})),logApprovalResponseResubmitSuccess:(e,t,o,s)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Succeed_ResubmitRespondApproval.create({actionSurface:"respond_approval_form",fileId:e,threadId:t,approvalStatus:n(o,a.Succeed_RespondApproval.ApprovalStatus),approvalDetailsLength:s}))})),logEditApprovalRequestSuccess:(e,t,o)=>a.__awaiter(void 0,void 0,void 0,(function*(){const a=yield i.getOrLoadPapEvents();r.logEvent(a.Succeed_RequestApprovalEdit.create({actionSurface:"request_approval_form",fileId:e,threadId:o,approvalDetailsLength:t}))})),logShownApprovalPostPdfEditingToast:e=>a.__awaiter(void 0,void 0,void 0,(function*(){const t=yield i.getOrLoadPapEvents();r.logEvent(t.Shown_ApprovalPostPdfEditingToast.create({fileId:e}))}))}})),define("metaserver/static/js/flows/utils/use_suggestions",["require","exports","tslib","react","typescript/component_libraries/flows/src/components/contact-typeahead/index","metaserver/static/js/contacts/data_v2","metaserver/static/js/contacts/types","metaserver/static/js/modules/clean/viewer"],(function(e,t,a,r,o,i,n,s){"use strict";function l(e,t,a,r=!1,i=!1){if(!a)return[];const s=new Set;for(const e of t)s.add(o.getContactKey(e));const l=[];for(const t of a)if(t.email&&(t.type===n.default.DBX_ID||t.type===n.default.EMAIL)){if(i&&t.email===e.email)continue;if(r&&(!t.dbx_account_id||!t.dbx_team_id||t.dbx_team_id!==e.team_dbtid))continue;const a={name:t.name,email:t.email,avatarUrl:t.photo_url,dbx_account_id:t.dbx_account_id};s.has(o.getContactKey(a))||l.push(a)}return l}Object.defineProperty(t,"__esModule",{value:!0}),t.useSuggestions=void 0,n=a.__importDefault(n),t.useSuggestions=function(e,t,a=!1,o=!1){const[n,d]=r.useState(""),[c,p]=r.useState([]),u=s.Viewer.get_viewer().get_user_by_id(e),m=new i.ContactsDataSourceV2(u);return r.useEffect(()=>{let e=!1;const r=[];if(!n.length)return void p(r);return m.search(n,e=>{const i=l(u,t,e,a,o);r.push(...i),p(r)},i=>{const n=l(u,t,i,a,o);!e&&n.length>0&&(r.push(...n),p(r))}),()=>{e=!0}},[n,t]),{suggestions:c,onQueryChange:e=>{d(e)}}}})),define("typescript/libraries/comments2/src/components/utils/to_percent",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toPercent=void 0,t.toPercent=function(e){return`${100*e}%`}})),define("typescript/libraries/comments2/src/components/annotation_utils",["require","exports","typescript/libraries/comments2/src/components/utils/to_percent"],(function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVideoAnnotation=t.toRectangleStyle=t.INTERSECTION_DELTA=void 0,t.INTERSECTION_DELTA=.02,t.toRectangleStyle=function({x:e,y:t,width:r,height:o}){return{top:a.toPercent(t),left:a.toPercent(e),width:a.toPercent(r),height:a.toPercent(o)}},t.isVideoAnnotation=function(e){return void 0!==e&&"video"===e.type}})),define("metaserver/static/js/flows/version/async_components",["require","exports","tslib","react","metaserver/static/js/common/rendering"],(function(e,t,a,r,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.AsyncChangeLogSection=void 0;const i=(r=a.__importStar(r)).lazy(()=>a.__awaiter(void 0,void 0,void 0,(function*(){const{ChangeLogSection:t}=yield new Promise((t,a)=>{e(["metaserver/static/js/flows/version/change_log_section"],t,a)}).then(a.__importStar);return{default:t}})));t.AsyncChangeLogSection=e=>r.createElement(o.LazySuspense,{fallback:r.createElement("div",null)},r.createElement(i,Object.assign({},e)))})),define("metaserver/static/js/flows/version/experiments",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isVersioningMVPEnabled=void 0;t.isVersioningMVPEnabled=e=>"MVP"===e}));
//# sourceMappingURL=pkg-folder-overview-common.min.js-vflV2tnFZ.map