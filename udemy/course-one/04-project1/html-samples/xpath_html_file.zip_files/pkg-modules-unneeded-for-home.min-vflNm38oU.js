define("metaserver/static/js/flux/base_store",["require","exports","metaserver/static/js/flux/dispatcher","metaserver/static/js/modules/core/assert"],(function(e,t,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Store=void 0;const i=(function(){let e=!1;const t=[];return s.Dispatcher.dispatch_begin=()=>e=!0,s.Dispatcher.dispatch_end=function(){e=!1;try{return Array.from(t).map(e=>e())}finally{t.length=0}},function(s){return e?Array.from(t).includes(s)?void 0:t.push(s):s()}})();class r{constructor(e){"function"==typeof this._init&&this._init(),this._change_listeners=[],this._dispatcher=e||s.Dispatcher,this.dispatchToken=this._dispatcher.register(this._new_payload_wrapper.bind(this))}destructor(){this._dispatcher.unregister(this.dispatchToken),this.remove_all_change_listeners()}emit_change(){for(const e of this._change_listeners)i(e)}add_change_listener(e){o.assert(!this._change_listeners.includes(e),"adding duplicate change listener not allowed"),this._change_listeners.push(e)}remove_change_listener(e){this._change_listeners=this._change_listeners.filter(t=>t!==e)}remove_all_change_listeners(){this._change_listeners.length=0}_new_payload_wrapper(e){var t,s;(null===(s=null===(t=e)||void 0===t?void 0:t.action)||void 0===s?void 0:s.type)===this.constructor.WIPE_TYPE&&"function"==typeof this._init&&this._init(),this._new_payload(e)}_new_payload(e){throw new Error("Abstract method - must be implemented")}}t.Store=r,r.WIPE_TYPE="WIPE_ALL"})),define("metaserver/static/js/modules/clean/downloads",["require","exports","tslib","metaserver/static/js/api_v2/user_client","metaserver/static/js/modules/clean/filepath/filepath","metaserver/static/js/metrics/index","metaserver/static/js/modules/clean/react/snackbar","metaserver/static/js/modules/core/browser_detection","metaserver/static/js/modules/core/assert","metaserver/static/js/modules/core/html","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/core/notify","metaserver/static/js/modules/core/uri"],(function(e,t,s,o,i,r,n,a,l,d,u,c,p){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.get_zip=t.getZipDownloadUrl=t.showGetZipUrlErrorSnackbar=t.zip_batch_by_ns_id=t.get_blockserver_link=t.get=void 0,i=s.__importStar(i),a=s.__importStar(a);const h=["dl-web.dropbox.com","dl.dropboxusercontent.com"],_=u.intl.formatMessage({id:"L64bdq",defaultMessage:"There was an error downloading your file."});let m=!1,f={};function b({source:e,type:t}){r.getMetricsReporter().createStats({ns:"web_file_actions",name:"download/failed"},{source:e,type:t}).record(1)}t.get=({url:e,error:t,source:s="unknown"})=>{const o=p.URI.parse(e),i=o.getAuthority();(function({source:e}){r.getMetricsReporter().createStats({ns:"web_file_actions",name:"download/attempt"},{source:e}).record(1)})({source:s});const n=h.includes(i)||i.endsWith(".dropboxusercontent.com")||"www.dropbox.com"===i;n||b({source:s,type:"download_non_block_server"}),l.assert(n,"attempt to download from a non-blockserver domain",{exc_extra:{domain:i,url:e}}),m||(m=!0,f={},window.addEventListener("message",y));const d=(function(){let e="";for(let t=1;t<=4;t++)e+=String(Math.random()).split(".")[1];return e})();o.updateQuery({_download_id:d,_notify_domain:window.location.host});return g({downloadUri:o,downloadId:d,error:t,downloadDomain:i,onLoad:()=>{setTimeout(()=>{const e=f[d];null!=e&&(a.chrome&&(c.Notify.error(_),e.error&&(e.error(),b({source:e.source,type:"download_failed"}))),v(d))},100)},source:s}),!1};const g=({downloadUri:e,downloadId:t,error:s,downloadDomain:o,onLoad:i,source:r})=>{const n=document.createElement("iframe");n.setAttribute("src",String(e)),n.style.display="none",i&&n.addEventListener("load",i),f[t]={origin:o,error:s,iframe:n,source:r},document.body.appendChild(n),window.setTimeout(()=>v(t),9e4)};t.get_blockserver_link=function({url:e,ns_id:s,ns_path:o,inside_admin_console:i,legal_hold_export_gid:r,revision_id:n,error:a}){const d=p.URI.parse(e);return d.setScheme("https"),i?(d.updateQuery({dl:"1",inside_admin_console:"true"}),r&&d.updateQuery({legal_hold_export_gid:r})):d.updateQuery({dl:"1"}),null!=s&&(l.assert("string"==typeof o,`Namespace ID was passed with invalid path, got: ${o}`),d.updateQuery({nsid:String(s),path:o})),null!=n&&d.updateQuery({revision_id:n}),l.assert("dl-web.dropbox.com"===d.getAuthority(),`download_blockserver_url expects a blockserver resource, got: ${e}`),t.get({url:d.toString(),error:a,source:"get_blockserver_link"})},t.zip_batch_by_ns_id=function({parent_ns_id:e,parent_ns_path:t,files:s,subject_uid:o,block_hash:r}){const n=new p.URI({scheme:"https",authority:"dl-web.dropbox.com",path:"/zip_batch_by_ns_id",query:{_subject_uid:String(o),parent_ns_id:String(e),parent_ns_path:t||"/"}}).toString(),a=document.createElement("form");a.setAttribute("action",n),a.setAttribute("method","post");for(const e of s){const s=`${t}/${i.filename(e.fq_path)}`,o=document.createElement("input");o.setAttribute("name","ns_paths"),o.setAttribute("value",s),a.appendChild(o)}const l=document.createElement("input");l.setAttribute("name","w"),l.setAttribute("value",r),a.appendChild(l),document.body.appendChild(a),a.submit(),a.remove()};t.showGetZipUrlErrorSnackbar=e=>{let t;t="too_many_files"===e[".tag"]?u.intl.formatMessage({id:"ZvH26K",defaultMessage:"Attempted to zip too many files."}):"too_much_data"===e[".tag"]?u.intl.formatMessage({id:"Qq4R12",defaultMessage:"Attempted to zip too much data."}):"file_not_found"===e[".tag"]?u.intl.formatMessage({id:"XSR4O8",defaultMessage:"File not found."}):"unauthorized_user"===e[".tag"]?u.intl.formatMessage({id:"tUjhJf",defaultMessage:"Unauthorized user."}):"unauthorized_namespace"===e[".tag"]?u.intl.formatMessage({id:"zR9JV2",defaultMessage:"Unauthorized namespace."}):u.intl.formatMessage({id:"ItwtZa",defaultMessage:"Zip download failed."}),n.Snackbar.fail(t,"zip-download-status")};function y(e){const t=p.URI.parse(e.origin);if("https"!==t.getScheme())return;if(!h.includes(t.getAuthority())&&!t.getAuthority().endsWith(".dropboxusercontent.com"))return;let s;try{s=JSON.parse(e.data)}catch(e){return}if(!s||!s.download_id)return;const o=f[s.download_id];if(null!=o&&t.getAuthority()===o.origin&&e.source===o.iframe.contentWindow){if("failed"===s.status){const e=(s.message||_)+'<a target="_blank" rel="noreferrer" href="/help/desktop-web/download-entire-folders">'+u.intl.formatMessage({id:"WYQtmB",defaultMessage:"More info"})+"</a>";c.Notify.error(new d.HTML(e)),o.error&&(o.error(),b({source:o.source,type:"download_failed"}))}v(s.download_id)}}function v(e){const t=f[e];null!=t&&(t.iframe.remove(),delete f[e])}t.getZipDownloadUrl=({block_hash:e,fq_paths:t,parent_path:i,flat_mode:r,subjectUserId:n,root_ns_id:a})=>s.__awaiter(void 0,void 0,void 0,(function*(){try{const s=new o.UserApiV2Client;return{result:yield s.ns("browse_zip_downloads").rpc("get_zip_download_url",{block_hash:e,unnormalized_files:[...t],parent_path:i,flat_mode:r,root_ns_id:a},{subjectUserId:n}),isError:!1}}catch(e){return{isError:!0,error:{".tag":"undefined_error"}}}})),t.get_zip=function({fq_paths:e,subject_uid:o,block_hash:i,parent_path:r,flat_zip_mode:n,source:a="unknown",root_ns_id:l}){return s.__awaiter(this,void 0,void 0,(function*(){""===r&&(r="/");const s=yield t.getZipDownloadUrl({block_hash:i,fq_paths:[...e],parent_path:r,flat_mode:!!n,subjectUserId:o,root_ns_id:l});if(s.isError)t.showGetZipUrlErrorSnackbar(s.error),b({source:a,type:"zip_download_error"});else{const{url:e}=s.result;t.get({url:e,source:a})}}))}})),define("metaserver/static/js/deprecated_ajax/ajax_as_promised_jquery",["require","exports","tslib","metaserver/static/js/deprecated_ajax/ajax_jquery","metaserver/static/js/deprecated_ajax/ajax_jquery"],(function(e,t,s,o,i){"use strict";function r(e){return t=>new Promise((s,o)=>{const r=e(Object.assign(Object.assign({},t),{success:(e,o,i)=>{t.success&&t.success(e,o,i),s(e)},error:(e,i,r)=>{t.error&&t.error(e,i,r),200===e.status?(t.success&&t.success(e.responseText,"success",e),s(e.responseText)):o({jqXHR:e,textStatus:i,errorThrown:r})}}));if(t.signal){const e=()=>{const e=i.getFakeJQXHR();e.readyState=XMLHttpRequest.DONE,e.responseText="Aborted",e.status=500,e.statusText="abort",r.abort(),o({jqXHR:e,textStatus:"aborted",errorThrown:"Aborted"})};t.signal.aborted?e():t.signal.addEventListener("abort",e)}})}Object.defineProperty(t,"__esModule",{value:!0}),t.WebProgressRequest=t.FormWebRequest=t.WebRequestOref=t.WebRequest=t.SilentBackgroundRequest=t.Request=t.BackgroundRequest=void 0,o=s.__importStar(o),t.BackgroundRequest=r(o.BackgroundRequest),t.Request=r(o.Request),t.SilentBackgroundRequest=r(o.SilentBackgroundRequest),t.WebRequest=r(o.WebRequest),t.WebRequestOref=r(o.WebRequestOref),t.FormWebRequest=r(o.FormWebRequest),t.WebProgressRequest=r(o.WebProgressRequest)})),define("metaserver/static/js/avatar/viewer_avatar",["require","exports","tslib","react","metaserver/static/js/avatar/photo_avatar","metaserver/static/js/css/css","metaserver/static/js/modules/core/uri","metaserver/static/js/modules/clean/event_handler"],(function(e,t,s,o,i,r,n,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),o=s.__importDefault(o),r=s.__importStar(r);let l=class extends o.default.Component{constructor(e){super(e),this.state={photoUrl:this.props.photoUrl}}componentDidMount(){r.require_css("/static/css/scooter/scooter-scoped-vflRoCzLn.css"),this.events.on(document,"db:account_photo:photo_set",(e,t)=>{const s=2*this.props.dimension,o=`${s}x${s}`,i=n.URI.parse(t.saved_photo_url).updateQuery({size:o}).toString();this.setState({photoUrl:i})}),this.events.on(document,"db:account_photo:photo_deleted",()=>{this.setState({photoUrl:null})}),!this.hasPhotoAvatar()&&this.props.onLoad&&this.props.onLoad()}hasPhotoAvatar(){return null!=this.state.photoUrl}render(){return this.state.photoUrl?o.default.createElement(i.PhotoAvatar,{alt:this.props.alt,dimension:this.props.dimension,onClick:this.props.onPhotoClick,photo:this.state.photoUrl,optionalClass:this.props.optionalClass,onLoad:this.props.onLoad,onError:this.props.onError,shape:"CIRCLE"}):this.props.defaultAvatar}};l.displayName="ViewerAvatar",l=s.__decorate([a.eventHandler],l),t.default=l})),define("metaserver/static/js/modules/clean/browse_interface",["require","exports","metaserver/static/js/modules/clean/viewer","metaserver/static/js/modules/core/i18n","metaserver/static/js/modules/core/uri","metaserver/static/js/modules/clean/browse_uri_interface","metaserver/static/js/modules/clean/browse_uri_interface"],(function(e,t,s,o,i,r,n){"use strict";function a(e){return s.Viewer.get_viewer().is_paired?s.Viewer.get_root_name(e):o.intl.formatMessage({id:"bObFEu",defaultMessage:"Files"})}Object.defineProperty(t,"__esModule",{value:!0}),t.getFileHistoryUrlForNsPath=t.getFileHistoryUrl=t.get_all_browse_roots=t.get_browse_root_name=t.browse_uri_for_fq_path=t.preview_uri_for_fq_path=t.href_for_file=t.get_browse_root=void 0,Object.defineProperty(t,"get_browse_root",{enumerable:!0,get:function(){return r.get_browse_root}}),Object.defineProperty(t,"href_for_file",{enumerable:!0,get:function(){return r.href_for_file}}),Object.defineProperty(t,"preview_uri_for_fq_path",{enumerable:!0,get:function(){return r.preview_uri_for_fq_path}}),Object.defineProperty(t,"browse_uri_for_fq_path",{enumerable:!0,get:function(){return r.browse_uri_for_fq_path}}),t.get_browse_root_name=a,t.get_all_browse_roots=function(){return s.Viewer.get_viewer().get_users().map(e=>({name:a(e),path:n.get_browse_root(e)}))},t.getFileHistoryUrl=function({fqPath:e,userId:t},s){const o=Object.assign(Object.assign({},null==s?{}:s),{undelete:"1",_subject_uid:String(t)});return e=e.replace(/^[/]/,""),new i.URI({path:`/history/${e}`}).updateQuery(o).toString()},t.getFileHistoryUrlForNsPath=function({nsPath:e,nsId:t,userId:s},o){const r=Object.assign(Object.assign({},null!=o?o:{}),{ns_id:`${t}`,undelete:"1",_subject_uid:String(s)});return e=e.replace(/^[/]/,""),new i.URI({path:`/history/${e}`}).updateQuery(r).toString()}})),define("metaserver/static/js/bolt/bolt_nodeps",["require","exports","tslib","lodash","metaserver/static/js/modules/core/exception"],(function(e,t,s,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThunderClient=t.BoltClient=t.ChannelPayloads=t.Payload=t.SignedChannelState=t.ChannelId=void 0,o=s.__importStar(o),i=s.__importStar(i);class r{constructor(e,t){this.app_id=e,this.unique_id=t}static from_json(e){return new r(e.app_id,e.unique_id)}}t.ChannelId=r;class n{constructor(e,t,s,o){this.app_id=e,this.unique_id=t,this.revision=s,this.token=o}to_json(){var e;return{channel_id:{app_id:this.app_id,unique_id:this.unique_id},revision:null!==(e=this.revision)&&void 0!==e?e:"",token:this.token}}static from_json(e){return new n(e.channel_id.app_id,e.channel_id.unique_id,e.revision,e.token)}}t.SignedChannelState=n;class a{constructor(e,t){this.revision=e,this.payload=t}}t.Payload=a;class l{constructor(e,t){this.channel_state=e,this.payloads=t}}t.ChannelPayloads=l;const d=e=>JSON.stringify(e);class u{constructor(e,t,s,n){this._find_state=e=>this._signed_channel_states[d(e)],this._long_poll=()=>{this._sequence_num++;const e=this._sequence_num,t=new XMLHttpRequest;t.open("POST",this._subscribe_url(),!0),t.setRequestHeader("Content-Type","application/json; charset=utf-8"),Object.keys(this._additional_headers).forEach(e=>{t.setRequestHeader(e,this._additional_headers[e])}),t.timeout=12e4,t.withCredentials=!0,t.responseType="json";const s=()=>this._handle_poll_error(e);t.addEventListener("load",()=>{const{status:s}=t;s>=200&&s<300||304===s?this._handle_poll_success(e,t):this._handle_poll_error(e)}),t.addEventListener("timeout",s),t.addEventListener("error",s),t.addEventListener("abort",s),t.send(JSON.stringify({channel_states:this._signed_channel_states_keys.map(e=>this._signed_channel_states[e])})),this._long_poll_xhr=t},this._must_find_state=e=>{const t=this._find_state(e);if(null==t){const t=`Bolt returned unknown channel id ${e}`;i.reportStack(t)}return t},this._handle_poll_data=(e,t)=>{throw i.reportStack("Method must be implemented."),new Error("Method must be implemented.")},this._handle_poll_success=(e,t)=>{if(e!==this._sequence_num)return;if(this._long_poll_xhr=void 0,!this._started)return;const s=t.response,i=this._handle_poll_data(s,t);if(i.length>0&&o.defer(()=>this._update_callback(i)),null!=s.invalid_channels&&s.invalid_channels.length>0){const e=s.invalid_channels.map(r.from_json);o.defer(()=>this._refresh_callback(e))}else this._backoff_window=1e3,this._timeout_id=window.setTimeout(this._long_poll,0)},this._handle_poll_error=e=>{if(e!==this._sequence_num)return;if(this._long_poll_xhr=void 0,!this._started)return;const t=Math.random()*this._backoff_window;this._backoff_window=Math.min(2*this._backoff_window,3e5),this._timeout_id=window.setTimeout(this._long_poll,t)},this._update_callback=t,this._refresh_callback=s,this._hostname=n,this._signed_channel_states={},this._signed_channel_states_keys=[],this._started=!1,this._sequence_num=0,this._backoff_window=1e3,this._additional_headers={},this.update_states(e)}_compare_revisions(e,t){const s=Math.max(e.length,t.length),o=Array(s-e.length+1).join("0")+e,i=Array(s-t.length+1).join("0")+t;return o<i?-1:o>i?1:0}update_states(e){for(const t of e){const e=t.to_json(),s=this._find_state(e.channel_id);if(null==s){const t=d(e.channel_id);this._signed_channel_states[t]=e,this._signed_channel_states_keys.push(t)}else this._compare_revisions(e.revision,s.revision)>=0&&(s.revision=e.revision,s.token=e.token)}}start(){this._started||(this._started=!0,this._long_poll())}unsubscribe(){this._started=!1,null!=this._long_poll_xhr&&this._long_poll_xhr.abort(),this._long_poll_xhr=void 0,window.clearTimeout(this._timeout_id),this._timeout_id=void 0}_subscribe_url(){return`https://${this._hostname}${this._subscribe_endpoint()}`}_subscribe_endpoint(){throw i.reportStack("Method must be implemented."),new Error("Method must be implemented.")}}t.BoltClient=class extends u{constructor(e,t,s){super(e,t,s,"bolt.dropbox.com"),this._handle_poll_data=(e,t)=>{const s=[];if(null!=e.channel_states)for(const t of e.channel_states){const e=this._must_find_state(t.channel_id);this._compare_revisions(t.revision,e.revision)>0&&(e.revision=t.revision,e.token=t.token,s.push(n.from_json(t)))}return s}}_subscribe_endpoint(){return"/2/notify/subscribe"}};t.ThunderClient=class extends u{constructor(e,t,s){super(e,t,s,"thunder.dropbox.com"),this._handle_poll_data=(e,t)=>{const s=[];this._additional_headers={};const o=t.getResponseHeader("X-Bolt-Session");if(o&&(this._additional_headers["X-Bolt-Session"]=o),null!=e.channel_payloads)for(const t of e.channel_payloads){const e=t.channel_state,o=this._must_find_state(e.channel_id),i=n.from_json(t.channel_state),r=[];for(const e of t.payloads)this._compare_revisions(e.revision,o.revision)>0&&r.push(new a(e.revision,e.payload));r.length>0&&s.push(new l(i,r)),this._compare_revisions(e.revision,o.revision)>0&&(o.revision=e.revision,o.token=e.token)}return s}}unsubscribe(){return delete this._additional_headers["X-Bolt-Session"],super.unsubscribe()}_subscribe_endpoint(){return"/2/payloads/subscribe"}}})),define("metaserver/static/js/modules/clean/event_handler",["require","exports","tslib","jquery"],(function(e,t,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=t.EventHandlerMixin=t.eventHandler=void 0,o=s.__importDefault(o),t.eventHandler=function(e){const s=e.prototype.componentWillMount,o=e.prototype.componentWillUnmount;e.prototype.componentWillMount=function(){t.EventHandlerMixin.componentWillMount.apply(this),s&&"function"==typeof s&&s.apply(this)},e.prototype.componentWillUnmount=function(){o&&"function"==typeof o&&o.apply(this),t.EventHandlerMixin.componentWillUnmount.apply(this)}},t.EventHandlerMixin={componentWillMount(){this.events=new i},componentWillUnmount(){this.events.removeAll()}};class i{on(e,t,s,i,r){"string"!=typeof s&&(r=i,i=s,s=void 0),r&&(i=o.default.proxy(i,r)),this.handlers||(this.handlers=[]),e=o.default(e),s?e.on(t,s,i):e.on(t,i),this.handlers.push({element:e,event:t,selector:s,callback:i})}removeAll(){this.handlers&&(this.handlers.forEach((function(e){e.selector?e.element.off(e.event,e.selector,e.callback):e.element.off(e.event,e.callback)})),this.handlers=null)}}t.EventHandler=i})),define("metaserver/static/js/modules/clean/event_dispatcher",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.EventDispatcher=void 0;t.EventDispatcher=class{constructor(){this.listeners={},this.addListener=(e,t)=>{var s;const o=null!==(s=this.listeners[e])&&void 0!==s?s:[];o.push(t),this.listeners[e]=o},this.removeListener=(e,t)=>{var s;const o=null!==(s=this.listeners[e])&&void 0!==s?s:[],i=o.indexOf(t);i>-1&&o.slice(i,1)},this.trigger=(e,t)=>{var s;for(const o of null!==(s=this.listeners[e])&&void 0!==s?s:[])o(t)}}}})),define("metaserver/static/js/modules/clean/fuzzy",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={simpleFilter:(e,t)=>t.filter(t=>s.test(e,t)),test:(e,t)=>null!==s.match(e,t),match(e,t,s){s=s||{};let o=0;const i=[],r=t.length;let n=0,a=0;const l=s.pre||"",d=s.post||"",u=s.caseSensitive&&t||t.toLowerCase();let c=void 0;e=s.caseSensitive&&e||e.toLowerCase();let p=0;const h=[];let _=0,m=0;for(;p<r;)c=t[p],u[p]===e[o]?(c=l+c+d,m?m+=1:(_=p,m=1),o+=1,a+=1+a):(a=0,m&&(h.push([_,m]),m=0)),n+=a,i[i.length]=c,p++;return m&&h.push([_,m]),o===e.length?{highlighted:h,rendered:i.join(""),score:n}:null},filter(e,t,s={}){const o=this._reduce.bind(this,e,s);return t.reduce(o,[]).sort(this._sort)},_reduce(e,t,o,i,r){let n=i;t.extract&&(n=t.extract(i));const a=s.match(e,n,t);return null!=a&&o.push({string:a.rendered,score:a.score,index:r,original:i}),o},_sort(e,t){const s=t.score-e.score;return s||e.index-t.index}};t.default=s})),define("metaserver/static/js/modules/clean/pagelet_logger",["require","exports","tslib","metaserver/static/js/modules/clean/js_client_stopwatch","metaserver/static/js/modules/clean/web_timing_logger"],(function(e,t,s,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageletLogger=void 0,i=s.__importStar(i);t.PageletLogger=class{constructor(e,t=[],s=!1,i={}){this.pageletName=e,s?(this.performance=window.performance,this.stopwatchName=this.pageletName+"_client_logging",o.JSStopwatch.create_stopwatch_if_not_exist(this.stopwatchName)):this.stopwatchName=void 0,this.ttiComponents=[],t.map(e=>{this.ttiComponents.push({name:e,isReady:!1})}),this.ttiMarked=!1,this.extraColumns=i}componentReady(e){if(this.ttiMarked)return;let t=!1;for(let s=0;s<this.ttiComponents.length;++s)this.ttiComponents[s].name!==e||this.ttiComponents[s].isReady?this.ttiComponents[s].isReady||(t=!0):(this.ttiComponents[s].isReady=!0,o.JSStopwatch.recordTrace(e+"_since_start",{stopwatchName:this.stopwatchName}),console.timeStamp&&console.timeStamp(e+" TTI"));t||(i.mark_time_to_interactive(this.extraColumns),this.ttiMarked=!0)}get ttiLogged(){return this.ttiMarked}}})),define("metaserver/static/js/modules/clean/react/bubble_dropdown_v2",["require","exports","tslib","classnames","react","react-dom","prop-types","lodash","metaserver/static/js/components/ui/css","metaserver/static/js/modules/clean/react/overlay","metaserver/static/js/modules/clean/react/sticky_position"],(function(e,t,s,o,i,r,n,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleDropdown=t.BubbleDropdownContents=t.POSITION_TO_CSS_CLASS_MAP=void 0,o=s.__importDefault(o),i=s.__importDefault(i),r=s.__importStar(r),n=s.__importDefault(n),a=s.__importStar(a),t.POSITION_TO_CSS_CLASS_MAP={[u.StickyPosition.TOP_LEFT]:"top-left",[u.StickyPosition.TOP]:"top",[u.StickyPosition.TOP_RIGHT]:"top-right",[u.StickyPosition.LEFT_TOP]:"left-top",[u.StickyPosition.LEFT]:"left",[u.StickyPosition.LEFT_BOTTOM]:"left-bottom",[u.StickyPosition.RIGHT_TOP]:"right-top",[u.StickyPosition.RIGHT]:"right",[u.StickyPosition.RIGHT_BOTTOM]:"right-bottom",[u.StickyPosition.BOTTOM_LEFT]:"bottom-left",[u.StickyPosition.BOTTOM]:"bottom",[u.StickyPosition.BOTTOM_RIGHT]:"bottom-right",[u.StickyPosition.TOP_ALIGN_LEFT]:"top-align-left",[u.StickyPosition.TOP_ALIGN_RIGHT]:"top-align-right",[u.StickyPosition.LEFT_ALIGN_TOP]:"left-align-top",[u.StickyPosition.LEFT_ALIGN_BOTTOM]:"left-align-bottom",[u.StickyPosition.RIGHT_ALIGN_TOP]:"right-align-top",[u.StickyPosition.RIGHT_ALIGN_BOTTOM]:"right-align-bottom",[u.StickyPosition.BOTTOM_ALIGN_LEFT]:"bottom-align-left",[u.StickyPosition.BOTTOM_ALIGN_RIGHT]:"bottom-align-right"};class c extends i.default.Component{constructor(){super(...arguments),this._getArrowStyleFromPosition=()=>t.POSITION_TO_CSS_CLASS_MAP[this.props.position],this._adjustArrowPosition=(e=!1)=>{if(!this.props.shouldShowArrow)return;const t=r.findDOMNode(this.refs.bubbleArrowContainer);if(t){switch(this.props.position){case u.StickyPosition.TOP_ALIGN_LEFT:case u.StickyPosition.BOTTOM_ALIGN_LEFT:t.style.left=this.props.targetNode.offsetWidth/2+"px";break;case u.StickyPosition.TOP_ALIGN_RIGHT:case u.StickyPosition.BOTTOM_ALIGN_RIGHT:t.style.right=this.props.targetNode.offsetWidth/2+"px";break;case u.StickyPosition.LEFT_ALIGN_TOP:case u.StickyPosition.RIGHT_ALIGN_TOP:t.style.top=this.props.targetNode.offsetHeight/2+"px";break;case u.StickyPosition.LEFT_ALIGN_BOTTOM:case u.StickyPosition.RIGHT_ALIGN_BOTTOM:t.style.bottom=this.props.targetNode.offsetHeight/2+"px"}if((!e||e&&this.props.shouldArrowDecrement)&&(this.props.verticalArrowOffset||this.props.horizontalArrowOffset)){const e=getComputedStyle(t);this._getArrowStyleFromPosition().match(/^(top|bottom)/)&&(t.style.left=String(parseFloat(e.left)-this.props.horizontalArrowOffset)+"px"),this._getArrowStyleFromPosition().match(/^(left|right)/)&&(t.style.top=String(parseFloat(e.top)-this.props.verticalArrowOffset)+"px")}}}}componentDidMount(){return this._adjustArrowPosition()}componentDidUpdate(){return this._adjustArrowPosition(!0)}render(){return i.default.createElement("div",{className:this.props.isMaestroDesign?"maestro":""},i.default.createElement("div",{ref:"dropdown",className:o.default("bubble-dropdown-v2",`bubble-dropdown-v2--${this._getArrowStyleFromPosition()}`,this.props.className),"aria-labelledby":this.props.targetNode.id},this.props.children,this.props.shouldShowArrow?i.default.createElement("div",{ref:"bubbleArrowContainer",className:"bubble-arrow-container"},i.default.createElement("div",{className:"bubble-arrow-border"}),i.default.createElement("div",{className:"bubble-arrow"})):null))}}t.BubbleDropdownContents=c,c.displayName="BubbleDropdownContents",c.propTypes={targetNode:n.default.instanceOf(HTMLElement).isRequired,position:n.default.oneOf([u.StickyPosition.TOP_LEFT,u.StickyPosition.TOP,u.StickyPosition.TOP_RIGHT,u.StickyPosition.LEFT_TOP,u.StickyPosition.LEFT,u.StickyPosition.LEFT_BOTTOM,u.StickyPosition.RIGHT_TOP,u.StickyPosition.RIGHT,u.StickyPosition.RIGHT_BOTTOM,u.StickyPosition.BOTTOM_LEFT,u.StickyPosition.BOTTOM,u.StickyPosition.BOTTOM_RIGHT,u.StickyPosition.TOP_ALIGN_LEFT,u.StickyPosition.TOP_ALIGN_RIGHT,u.StickyPosition.LEFT_ALIGN_TOP,u.StickyPosition.LEFT_ALIGN_BOTTOM,u.StickyPosition.RIGHT_ALIGN_TOP,u.StickyPosition.RIGHT_ALIGN_BOTTOM,u.StickyPosition.BOTTOM_ALIGN_LEFT,u.StickyPosition.BOTTOM_ALIGN_RIGHT]),verticalArrowOffset:n.default.number,horizontalArrowOffset:n.default.number,shouldShowArrow:n.default.bool,shouldArrowDecrement:n.default.bool,className:n.default.string,isMaestroDesign:n.default.bool},c.defaultProps={verticalArrowOffset:0,horizontalArrowOffset:0,shouldShowArrow:!0,shouldArrowDecrement:!0,className:null,isMaestroDesign:!1};class p extends i.default.Component{constructor(){super(...arguments),this.state={isVisible:!1,targetNode:null,shouldAutoFocusDropdownContent:!1},this.hasOnShowNotBeenCalledSinceLastOpened=!1,this.updateTargetNode=()=>{const e=r.findDOMNode(this.refs.bubbleDropdownContainer).childNodes[0];return e&&(e.setAttribute("aria-expanded",this.state.isVisible),e.hasAttribute("id")||e.setAttribute("id",`bubbleDropdownTarget-${a.uniqueId()}`)),this.setState({targetNode:e})},this.showDropdown=()=>{if(!this.props.disabled)return this.setState({isVisible:!0})},this.hideDropdown=()=>{if(!this.props.disabled)return this.setState({isVisible:!1})},this._handleClick=e=>{const t=!(e.clientX>0&&e.clientY>0);return this.setState({shouldAutoFocusDropdownContent:t},this._toggle)},this._toggle=()=>{if(!this.props.disabled)return this.setState({isVisible:!this.state.isVisible})},this._hasShown=()=>{if(this.hasOnShowNotBeenCalledSinceLastOpened)return this.state.targetNode.setAttribute("aria-expanded",!0),this.props.onShowDropdown(),this.hasOnShowNotBeenCalledSinceLastOpened=!1},this._hasHidden=()=>(this.state.targetNode.setAttribute("aria-expanded",!1),this.props.onHideDropdown())}componentDidMount(){return this.updateTargetNode()}UNSAFE_componentWillUpdate(e,t){this.state.isVisible&&!this.props.disabled||!t.isVisible||e.disabled||(this.hasOnShowNotBeenCalledSinceLastOpened=!0)}componentDidUpdate(e,t){if(t.isVisible!==this.state.isVisible&&(this.state.isVisible||this._hasHidden()),r.findDOMNode(this.refs.bubbleDropdownContainer).childNodes[0]!==this.state.targetNode)return this.updateTargetNode()}render(){const{targetNode:e}=this.state;return i.default.createElement("div",{className:"bubble-dropdown-v2-container",onClick:this._handleClick,ref:"bubbleDropdownContainer"},this.props.targetButton,this.state.isVisible&&!this.props.disabled&&e?i.default.createElement(d.PositionedOverlay,{targetNode:e,isTargetPositionFixed:this.props.targetFixed,shouldTrapKeyboardFocus:this.props.shouldTrapKeyboardFocus,shouldAutoFocusOverlayContent:this.state.shouldAutoFocusDropdownContent,position:this.props.position,positionOffset:{horizontal:this.props.horizontalDisplacement,vertical:this.props.verticalDisplacement},onRendered:()=>this._hasShown(),onBlur:()=>this.hideDropdown()},i.default.createElement(c,{ref:"bubbleDropdownContents",targetNode:e,position:this.props.position,verticalArrowOffset:this.props.verticalDisplacement,horizontalArrowOffset:this.props.horizontalDisplacement,shouldShowArrow:this.props.shouldShowArrow,className:this.props.className,shouldArrowDecrement:this.props.shouldArrowDecrement,isMaestroDesign:this.props.isMaestroDesign},this.props.children)):void 0)}}p.displayName="BubbleDropdown",p.propTypes={targetButton(e,t,s){if(null==e.targetButton||"button"!==e.targetButton.type)return new Error("BubbleDropdown's targetButton must be a `<button>`")},position:n.default.oneOf([u.StickyPosition.TOP_LEFT,u.StickyPosition.TOP,u.StickyPosition.TOP_RIGHT,u.StickyPosition.LEFT_TOP,u.StickyPosition.LEFT,u.StickyPosition.LEFT_BOTTOM,u.StickyPosition.RIGHT_TOP,u.StickyPosition.RIGHT,u.StickyPosition.RIGHT_BOTTOM,u.StickyPosition.BOTTOM_LEFT,u.StickyPosition.BOTTOM,u.StickyPosition.BOTTOM_RIGHT,u.StickyPosition.TOP_ALIGN_LEFT,u.StickyPosition.TOP_ALIGN_RIGHT,u.StickyPosition.LEFT_ALIGN_TOP,u.StickyPosition.LEFT_ALIGN_BOTTOM,u.StickyPosition.RIGHT_ALIGN_TOP,u.StickyPosition.RIGHT_ALIGN_BOTTOM,u.StickyPosition.BOTTOM_ALIGN_LEFT,u.StickyPosition.BOTTOM_ALIGN_RIGHT]),targetFixed:n.default.bool,verticalDisplacement:n.default.number,horizontalDisplacement:n.default.number,className:n.default.string,disabled:n.default.bool,shouldShowArrow:n.default.bool,shouldTrapKeyboardFocus:n.default.bool,onShowDropdown:n.default.func,onHideDropdown:n.default.func,shouldArrowDecrement:n.default.bool,isMaestroDesign:n.default.bool},p.defaultProps={targetFixed:!1,verticalDisplacement:0,horizontalDisplacement:0,className:null,disabled:!1,shouldShowArrow:!0,shouldTrapKeyboardFocus:!1,onShowDropdown:a.noop,onHideDropdown:a.noop,shouldArrowDecrement:!0,isMaestroDesign:!1},t.BubbleDropdown=l.requireCssWithComponent(p,["/static/css/components/bubble_dropdown_v2-vflhhYVBe.css"])})),define("metaserver/static/js/modules/clean/react/bubble_menu",["require","exports","tslib","classnames","react","react-dom","prop-types","lodash","jquery","ts-key-enum","metaserver/static/js/modules/clean/react/bubble_dropdown_v2"],(function(e,t,s,o,i,r,n,a,l,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BubbleMenu=t.BubbleMenuItem=void 0,o=s.__importDefault(o),i=s.__importDefault(i),r=s.__importStar(r),n=s.__importDefault(n),a=s.__importStar(a),l=s.__importDefault(l);const c={DEFAULT:1,CHECKBOX:2,RADIO:3};class p extends i.default.Component{constructor(){super(...arguments),this._handleMouseEnter=e=>{if(null!=this.refs.item)return l.default(r.findDOMNode(this.refs.item)).closest(".bubble-menu").removeClass("bubble-menu--keyboard"),this.props.onMouseEnter(e)},this._handleClick=e=>this.props.disabled?(e.preventDefault(),e.stopPropagation()):"#"===this.props.href&&(e.preventDefault(),this.props.onClick(e),this.props.closeOnClick)?this.props.closeFunc():void 0,this._getRole=()=>{switch(this.props.itemType){case c.CHECKBOX:return"menuitemcheckbox";case c.RADIO:return"menuitemradio";default:return"menuitem"}},this._getAriaChecked=()=>{switch(this.props.itemType){case c.CHECKBOX:case c.RADIO:return this.props.checked||!1;default:return null}},this.renderContents=()=>{const e={"bubble-menu-item":!0,"bubble-menu-item--disabled":this.props.disabled,"bubble-menu-item--checked":this.props.checked};return i.default.createElement("a",{ref:"item",role:this._getRole(),className:o.default(e),href:this.props.href,target:this.props.target,onClick:this._handleClick,onMouseEnter:this._handleMouseEnter,onMouseLeave:this.props.onMouseLeave,"aria-disabled":this.props.disabled,"aria-checked":this._getAriaChecked()},this.props.children)}}render(){return i.default.createElement("li",{role:"presentation",className:o.default("bubble-menu-item-wrapper",this.props.className)},this.renderContents())}}t.BubbleMenuItem=p,p.displayName="BubbleMenuItem",p.propTypes={onClick:n.default.func,href:n.default.string,target:n.default.string,disabled:n.default.bool,closeOnClick:n.default.bool,closeFunc:n.default.func,className:n.default.string,onMouseEnter:n.default.func,onMouseLeave:n.default.func,itemType:n.default.oneOf(a.values(c)),checked:n.default.bool},p.defaultProps={onClick:a.noop,href:"#",target:null,disabled:!1,closeOnClick:!0,closeFunc:a.noop,className:null,onMouseEnter:a.noop,onMouseLeave:a.noop,itemType:c.DEFAULT,checked:null},p.TYPES=c;class h extends i.default.Component{constructor(){super(...arguments),this.showMenu=()=>{var e,t;return null===(t=null===(e=this.refs.bubble)||void 0===e?void 0:e.getWrappedComponent())||void 0===t?void 0:t.showDropdown()},this.hideMenu=()=>{var e,t;return null===(t=null===(e=this.refs.bubble)||void 0===e?void 0:e.getWrappedComponent())||void 0===t?void 0:t.hideDropdown()},this._onShowBubbleMenu=()=>{if(null!=this.refs.menu&&null!=this.refs.bubble)return this.$menu=l.default(r.findDOMNode(this.refs.menu)),this.$menuitems=this.$menu.find('*[role="menuitem"],*[role="menuitemcheckbox"],*[role="menuitemradio"]'),this.$menu.addClass("bubble-menu--keyboard"),"function"==typeof this.props.onShowDropdown?this.props.onShowDropdown():void 0},this._onKeyDown=e=>(this.$menu.addClass("bubble-menu--keyboard"),e.key===d.Key.ArrowDown?(this._focusNext(e.target),e.preventDefault(),e.stopPropagation()):e.key===d.Key.ArrowUp?(this._focusPrevious(e.target),e.preventDefault(),e.stopPropagation()):void 0),this._onKeyPress=e=>{this.$menu.addClass("bubble-menu--keyboard");const t=e.key.toLowerCase();return(()=>{var s,o;const i=[];for(let r=0;r<this.$menuitems.length;r++){const n=this.$menuitems[r];if((null===(o=null===(s=n.textContent)||void 0===s?void 0:s[0])||void 0===o?void 0:o.toLowerCase())===t&&r>this.$menuitems.index(e.target)){n.focus(),e.stopPropagation();break}i.push(void 0)}return i})()},this._focusPrevious=e=>{let t=this.$menuitems.index(e);return t=[-1,0].includes(t)?this.$menuitems.length-1:t-1,this.$menuitems.get(t).focus()},this._focusNext=e=>{let t=this.$menuitems.index(e);return t=[-1,this.$menuitems.length-1].includes(t)?0:t+1,this.$menuitems.get(t).focus()}}render(){let e;return this.props.targetButton&&(e=i.default.createElement(_,{ref:"targetButton",childProps:{"aria-haspopup":!0}},this.props.targetButton)),i.default.createElement(u.BubbleDropdown,Object.assign({},a.assignIn({},this.props,{ref:"bubble",shouldTrapKeyboardFocus:!0,onShowDropdown:this._onShowBubbleMenu,targetButton:e})),i.default.createElement("div",null,this.props.headerContent),i.default.createElement("ul",{role:"menu",ref:"menu",className:"bubble-menu",onKeyDown:this._onKeyDown,onKeyPress:this._onKeyPress},Array.from(this.props.items).map((e,t)=>i.default.cloneElement(e,{closeFunc:this.hideMenu,key:null!=e.key?e.key:t}))))}}t.BubbleMenu=h,h.displayName="BubbleMenu",h.propTypes=a.assignIn({},u.BubbleDropdown.propTypes,{headerContent:n.default.element,items:n.default.arrayOf((function(e,t,s){const o=e[t].type;if(![p].includes(o)){const s=(null!=o?o.displayName:void 0)||e[t];return new Error(`Expected menu items to be instances of BubbleMenuItem, not ${s}.`)}return null})).isRequired,onShowDropdown:n.default.func,targetButton(e,t,s){if("button"!==(null!=e.targetButton?e.targetButton.type:void 0))return new Error(`BubbleDropdown's targetButton must be a \`<button>\`, found: ${e[t].type}`)}});class _ extends i.default.Component{render(){return i.default.cloneElement(this.props.children,this.props.childProps)}}_.displayName="BubbleMenuTargetButtonWrapper",_.propTypes={childProps:n.default.object}})),define("metaserver/static/js/modules/clean/react/hidden",["require","exports","tslib","react","prop-types","lodash"],(function(e,t,s,o,i,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HiddenSelect=t.Hidden=void 0,o=s.__importDefault(o),i=s.__importDefault(i),r=s.__importStar(r);class n extends o.default.Component{render(){return o.default.createElement("div",{className:"hidden-option"},this.props.children)}}t.Hidden=n,n.displayName="Hidden";class a extends o.default.Component{render(){return o.default.createElement(n,null,o.default.createElement("select",Object.assign({},r.omit(this.props,"options")),Array.from(this.props.options).map(e=>o.default.createElement("option",{key:e,label:e,value:e}))))}}t.HiddenSelect=a,a.displayName="HiddenSelect",a.propTypes={options:i.default.arrayOf(i.default.any).isRequired,value:i.default.any}})),define("metaserver/static/js/rebrand/elements/rebrand_buttons",["require","exports","tslib","react","classnames","lodash","metaserver/static/js/components/ui/css"],(function(e,t,s,o,i,r,n){"use strict";function a(e="primary",t=!1,s="small",o=null,r=null,n=!1){const a=`button--${s}`;let l="";o&&(l=`${a}--${o}`);const d=`button--${e}`;let u="";return t&&(u=`${d}--disabled`),i.default({"button--with-border":"secondary"===e&&n},"button",d,a,l,r,u)}function l(e){e.preventDefault()}function d(){}Object.defineProperty(t,"__esModule",{value:!0}),t.RebrandButton=t.RebrandButtonElement=t.RebrandButtonAnchor=t.RebrandButtonAnchorElement=void 0,o=s.__importDefault(o),i=s.__importDefault(i),r=s.__importStar(r);class u extends o.default.Component{render(){const{ariaLabel:e,importance:t,disabled:s,size:i,width:r,className:n,withBorder:u,trackingId:c}=this.props,p=a(t,s,i,r,n,u);return o.default.createElement("a",{href:this.props.href,className:p,onClick:s?l:d,"aria-label":e,"aria-disabled":s,"data-trackingid":c,"data-uxa-log":c},this.props.children)}}t.RebrandButtonAnchorElement=u,u.displayName="RebrandButtonAnchorElement",t.RebrandButtonAnchor=n.requireCssWithComponent(u,["/static/css/rebrand/elements/button-vflIddG9V.css"]);class c extends o.default.Component{render(){const e=this.props,{importance:t,disabled:i,size:n,width:l,className:d,onClick:u,type:c,trackingId:p}=e,h=s.__rest(e,["importance","disabled","size","width","className","onClick","type","trackingId"]),_=a(t,i,n,l,d),m=r.pickBy(h,(e,t)=>t.startsWith("data-"));return o.default.createElement("button",Object.assign({className:_,onClick:u,disabled:i,type:c||"button","data-uxa-log":p,"aria-label":this.props.ariaLabel},m),this.props.children)}}t.RebrandButtonElement=c,c.displayName="RebrandButtonElement",t.RebrandButton=n.requireCssWithComponent(c,["/static/css/rebrand/elements/button-vflIddG9V.css"])})),define("metaserver/static/js/modules/clean/react/util",["require","exports","tslib","react"],(function(e,t,s,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setStatePromise=t.replaceSubtree=t.mergeProps=t.getText=void 0,o=s.__importDefault(o);var i=function(e){if("string"==typeof e)return e;if("string"==typeof e.props)return e.props;if(e.props.text)return e.props.text;const t=[];return o.default.Children.forEach(e.props.children,e=>t.push(i(e))),t.join("")};t.getText=i;var r=function(e,t,s){if(t(e))return s(e);{let i=!1;const n=[];return o.default.Children.forEach(e.props.children,e=>{const o=r(e,t,s);if(n.push(o),o!==e)return i=!0}),i?o.default.cloneElement(e,{},n):e}};t.replaceSubtree=r;t.mergeProps=function(...e){const t={},s=[];for(const o of Array.from(e))for(const e of Object.keys(o||{})){const i=o[e];"className"===e?s.push(i):t[e]=i}return null!=s.length&&(t.className=s.join(" ")),t};t.setStatePromise=(e,t)=>new Promise((function(s,o){return e.setState(t,s)}))})),define("metaserver/static/js/modules/core/user_i18n",["require","exports","tslib","metaserver/static/js/modules/constants/page_load"],(function(e,t,s,o){"use strict";function i(){return-1!==["zh","ja","ko"].indexOf(o.USER_LOCALE)}function r(e){const t=[],s=e.length;let o=0;for(;o<s;){const i=e[o];if(i>="\ud800"&&i<="\udb7f"){if(!(o<s-1))break;{const s=i+e[o+1];t.push(s),o+=2}}else t.push(i),o+=1}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.isCjkLocale=t.getShortName=t.getInitials=void 0,o=s.__importStar(o),t.getInitials=function(e){if(!e)return"";const t=(e=e.toUpperCase()).trim().split(" "),s=r(t[0]),o=r(t[t.length-1]);if(t.length>=2)return i()?o[0]+s[0]:s[0]+o[0];const n=r(e);return i()&&!(function(e){for(let t=0;t<e.length;t++)if(e.charCodeAt(t)>=128)return!1;return!0})(e)&&n.length>1?n[0]+n[1]:n[0]},t.getShortName=function(e){if(!e)return"";const t=e.trim().split(" ");if(t.length<2)return e;const s=t[0],o=r(t[t.length-1]);return i()?o[0]+" "+s:s+" "+o[0]},t.isCjkLocale=i})),define("metaserver/static/js/modules/clean/react/tooltip",["require","exports","tslib","react","react-dom","prop-types","lodash"],(function(e,t,s,o,i,r,n){"use strict";let a;Object.defineProperty(t,"__esModule",{value:!0}),t.TooltipPosition=t.Tooltip=void 0,o=s.__importDefault(o),i=s.__importStar(i),r=s.__importDefault(r),n=s.__importStar(n);const l={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3,BOTTOM_RIGHT:4};t.TooltipPosition=l;const d=function(){let e=document.getElementById("tooltip-holder");return e||(e=document.createElement("div"),e.id="tooltip-holder",e.style.zIndex="10000",document.body.insertBefore(e,document.body.firstChild)),e},u=()=>{const e=d();i.unmountComponentAtNode(e),e.parentNode.removeChild(e)},c=function(e){const{top:t,left:s}=e.getBoundingClientRect(),o=t+document.body.scrollTop,i=s+document.body.scrollLeft,{width:r,height:n}=(function(e){if(0!==e.offsetWidth&&0!==e.offsetHeight)return{height:e.offsetHeight,width:e.offsetWidth};const{display:t,position:s,visibility:o}=e.style;e.style.display="block",e.style.position="absolute",e.style.visibility="hidden";const{offsetWidth:i,offsetHeight:r}=e;return e.style.display=t,e.style.position=s,e.style.visibility=o,{height:r,width:i}})(e);return{left_x:i,right_x:i+r,top_y:o,bottom_y:o+n,width:r,height:n}};class p extends o.default.Component{constructor(){super(...arguments),this._centerAndShow=()=>{const e=i.findDOMNode(this.refs.tooltip),t=this.props.targetElementDimensions,s=c(e),o=document.body.scrollTop,r=document.body.scrollLeft;if([l.TOP,l.BOTTOM].includes(this.props.position)){const o=window.innerWidth;let i=t.left_x+t.width/2-s.width/2-r;i<0?i=0:i+s.width>o&&(i=o-s.width-7),e.style.left=`${i}px`}else if([l.LEFT,l.RIGHT].includes(this.props.position)){const i=window.innerHeight;let r=t.top_y+t.height/2-s.height/2-o;r<0?r=0:r+s.height>i&&(r=i-s.height-7),e.style.top=`${r}px`}e.style.display="block"}}render(){const e=this.props.targetElementDimensions,t=window.innerHeight,s=window.innerWidth,i=document.body.scrollTop,r=document.body.scrollLeft,n=(()=>{switch(this.props.position){case l.TOP:return{bottom:t-e.top_y+7+i};case l.BOTTOM:return{top:e.bottom_y+7-i};case l.LEFT:return{right:s-e.left_x+7+r};case l.RIGHT:return{left:e.right_x+7-r};case l.BOTTOM_RIGHT:return{left:e.right_x-7-r,top:e.bottom_y+7-i}}})();return o.default.createElement("div",{className:`tooltip-bubble ${this.props.className||""}`,ref:"tooltip",style:n,onMouseMove:this.props.mouse_move_cb?this.props.mouse_move_cb:void 0,onMouseLeave:this.props.mouse_out_cb?this.props.mouse_out_cb:void 0,onMouseEnter:this.props.mouse_enter_cb?this.props.mouse_enter_cb:void 0},o.default.createElement("div",{className:"tooltip-inner"},this.props.contents))}componentDidMount(){return this._centerAndShow()}componentDidUpdate(){return this._centerAndShow()}}p.displayName="TooltipBubble",p.propTypes={position:r.default.oneOf((()=>{const e=[];for(a in l)e.push(l[a]);return e})()),contents:r.default.oneOfType([r.default.element,r.default.string]),className:r.default.string,mouse_move_cb:r.default.func,mouse_out_cb:r.default.func,mouse_enter_cb:r.default.func,targetElementDimensions:r.default.shape({left_x:r.default.number,right_x:r.default.number,top_y:r.default.number,bottom_y:r.default.number,width:r.default.number,height:r.default.number})};class h extends o.default.Component{constructor(){super(...arguments),this._scrollEventHandler=e=>this._hide(e),this._escapeEventHandler=e=>{"Escape"===e.key&&this._hide(e)},this.state={visible:!1,event_id:n.uniqueId()},this._on_mouse_enter=()=>{this.props.show_delay>0?this._scheduleShow():this._show()},this._on_mouse_leave=()=>{this.props.hide_delay>0?this._scheduleHide(this.props.hide_delay):this._hide()},this._render_tooltip=()=>{u();const e=d(),t=document.getElementById("tooltip-holder");if(!t)return;t.style.position="fixed",t.style.left="0",t.style.right="0",this.props.hide_delay>0&&t.setAttribute("data-event-id",this.state.event_id),this.props.position===l.TOP?(t.style.top="auto",t.style.bottom="0"):(t.style.top="0",t.style.bottom="auto");const s=o.default.createElement(p,{position:this.props.position,contents:this.props.tooltip_contents,className:this.props.tooltip_classname,mouse_move_cb:this.props.interaction_enabled?this._clear_timeout:void 0,mouse_out_cb:this.props.interaction_enabled?this._on_mouse_leave:void 0,mouse_enter_cb:this.props.interaction_enabled?this._on_mouse_enter:void 0,targetElementDimensions:c(i.findDOMNode(this.refs.tooltipTarget))});return i.render(s,e)},this._show=()=>{if(!this.state.visible||this._last_timeout)return this._render_tooltip(),this.setState({visible:!0}),this.props.on_show&&this.props.on_show(),this._clear_timeout()},this._hide=()=>{if(!this.state.visible)return;const e=d();if(this._last_timeout){e.getAttribute("data-event-id")===this.state.event_id&&(u(),this._clear_timeout())}else u();return this.setState({visible:!1})},this._scheduleHide=e=>{if(this.state.visible)return this._last_timeout=setTimeout(this._hide,e)},this._clear_timeout=()=>{if(this._last_timeout)return clearTimeout(this._last_timeout),this._last_timeout=null},this._scheduleShow=()=>(this._clear_timeout(),this._last_timeout=setTimeout(this._show,this.props.show_delay))}render(){return o.default.createElement("div",{className:"tooltip-target",onMouseEnter:this._on_mouse_enter,onFocus:this._show,onMouseLeave:this._on_mouse_leave,onBlur:this._on_mouse_leave,id:this.state.tooltip_id,ref:"tooltipTarget",tabIndex:this.props.is_focusable?0:void 0},this.props.children)}componentDidMount(){document.addEventListener("keydown",this._escapeEventHandler),document.addEventListener("scroll",this._scrollEventHandler)}componentDidUpdate(){if(this.state.visible)return this._render_tooltip()}componentWillUnmount(){document.removeEventListener("keydown",this._escapeEventHandler),document.removeEventListener("scroll",this._scrollEventHandler),u()}}t.Tooltip=h,h.displayName="Tooltip",h.propTypes={position:r.default.oneOf((()=>{const e=[];for(a in l)e.push(l[a]);return e})()),tooltip_contents:r.default.oneOfType([r.default.oneOfType([r.default.element,r.default.string]),r.default.arrayOf(r.default.oneOfType([r.default.element,r.default.string]))]),tooltip_classname:r.default.string,hide_delay:r.default.number,show_delay:r.default.number,interaction_enabled:r.default.bool,is_focusable:r.default.bool,on_show:r.default.func},h.defaultProps={interaction_enabled:!1,hide_delay:0,show_delay:0}})),define("metaserver/static/js/modules/clean/portaled-snackbar",["require","exports","tslib","react","react-dom","styled-components","dig-components/snackbar","dig-components/buttons","metaserver/static/js/modules/core/i18n"],(function(e,t,s,o,i,r,n,a,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PortaledSnackbar=void 0,o=s.__importDefault(o),i=s.__importDefault(i);const d=(r=s.__importDefault(r)).default.div`
  position: fixed;
  width: 100%;
  bottom: 6vh;
  margin: auto;
  z-index: 20;
  display: flex;
  justify-content: center;
`,u=r.default(n.Snackbar)`
  flex-grow: 1;
`,c=document.getElementsByTagName("body")[0];t.PortaledSnackbar=({children:e,close:t,isOpen:s=!0,timeoutInMs:r=5e3})=>i.default.createPortal(o.default.createElement(d,null,o.default.createElement(u,{open:s,timeout:r,onRequestClose:t},o.default.createElement(n.Snackbar.Message,null,e),o.default.createElement(n.Snackbar.Actions,null,o.default.createElement(a.Button,{variant:"transparent",inverse:!0,onClick:t},l.intl.formatMessage({id:"WxV0Sy",defaultMessage:"Dismiss"}))))),c),t.PortaledSnackbar.displayName="PortaledSnackbar"})),define("metaserver/static/js/deprecated_ajax/ajax_form_extract_errors",["require","exports","metaserver/static/js/modules/core/i18n"],(function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.extractErrors=void 0;t.extractErrors=e=>{try{return 0===e.indexOf("err:")&&(e=e.substr(4),JSON.parse(e))}catch(t){return"string"==typeof e?e:s.intl.formatMessage({id:"bLA3rA",defaultMessage:"There was a problem completing this request."})}}}));
//# sourceMappingURL=pkg-modules-unneeded-for-home.min.js-vflRh9wbX.map