define("typescript/component_libraries/deep-integrations/src/api_v2/shared_link",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSharedLinkArgFromPath=t.getSharedLinkMetadata=t.getSharedLinkMetadataByUrl=void 0;t.getSharedLinkMetadataByUrl=(e,t,n)=>{const r={url:e},a=t.ns("sharing").rpc("get_shared_link_metadata",r,{});return n&&n("sharing","get_shared_link_metadata",r,a),a};t.getSharedLinkMetadata=(e,n,r)=>{const a=t.getSharedLinkArgFromPath(e),s=n.ns("sharing").rpc("create_shared_link_with_settings",a,{}).catch(e=>{if((e=>e&&e.error&&"shared_link_already_exists"===e.error[".tag"]&&e.error.shared_link_already_exists&&"metadata"===e.error.shared_link_already_exists[".tag"]&&e.error.shared_link_already_exists.metadata)(e))return e.error.shared_link_already_exists.metadata;throw e});return r&&r("sharing","create_shared_link_with_settings",a,s),s};t.getSharedLinkArgFromPath=e=>({path:e,settings:{access:{".tag":"max"}}})})),define("typescript/component_libraries/deep-integrations/src/link/link_button",["require","exports","tslib","react","classnames"],(function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LinkButton=void 0,r=n.__importStar(r),a=n.__importDefault(a);class s extends r.Component{render(){return r.createElement("button",Object.assign({},this.props,{className:a.default(this.props.className,"int-link-button",`int-link-button--color-${this.props.color}`,{"int-link-button--disabled":this.props.disabled}),role:"link"}),this.props.children)}}t.LinkButton=s,s.defaultProps={color:"sapphire"},s.displayName="LinkButton"})),define("metaserver/static/js/logging/hive/schemas/web-ecosystem_integration_events",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ThirdPartyName=t.EventName=t.EcosystemIntegrationLoggingTableRow=void 0;t.EcosystemIntegrationLoggingTableRow=class{constructor(e){this.category="web-ecosystem_integration_events",this.extra={},this.user_id=null,this.active_user_id=null,this.anon_ip=null,this.authed_user_ids=null,this.country=null,this.identity_gid=null,this.locale_browser_header=null,this.locale_user_selected=null,this.referrer=null,this.ua_browser_name=null,this.ua_browser_version=null,this.ua_dist_name=null,this.ua_dist_version=null,this.ua_os_name=null,this.ua_os_version=null,this.user_agent=null,this.session_id=null,this.team_id=null,this.team_type=null,this.event_name=e.event_name,this.integration_name=e.integration_name,this.extra=e.extra,Object.seal(this)}},(function(e){e.activityTabClicked="activity_feed_viewed",e.cardClicked="activity_link_clicked",e.onboardingCardConnect="activity_onboardingcard_connect",e.onboardingCardDismissed="activity_onboardingcard_dismissed",e.onboardingCardViewed="activity_onboardingcard_viewed",e.onboardingDotViewed="activity_onboardingdot_viewed",e.onboardingDotDismissed="activity_onboardingdot_dismissed"})(t.EventName||(t.EventName={})),(function(e){e.slack="SLACK",e.zoom="ZOOM"})(t.ThirdPartyName||(t.ThirdPartyName={}))})),define("metaserver/static/js/modules/clean/integrations/link_service",["require","exports","tslib","metaserver/static/js/profile_services/profile_services_link","metaserver/static/js/profile_services/profile_services_constants"],(function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.linkService=void 0,a=n.__importDefault(a);const s=new r.ProfileServicesLinkingHandler,i={zoom:"zoom",slack_dropbox:"dropbox_slack",trello:"trello"};t.linkService=function(e,t,o){return n.__awaiter(this,void 0,void 0,(function*(){const n={".tag":t},c=()=>{const t=a.default.from_api_service_type(n),{action:r}=a.default.get_service_data(n,"profile_card_v2");return r?s.auth_service_with_user_promise(t,e,null,r):Promise.reject({reason:"no_service_action"})};if(o&&i[t]){const e=yield s.auth_service_with_user_with_landing_page(n,c);r.ProfileServicesLinkingHandler.show_import_notifications(e)}else{const e=yield c();r.ProfileServicesLinkingHandler.show_import_notifications(e)}}))}})),define("typescript/component_libraries/deep-integrations/src/ttl",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.flattenTTL=t.isTTLExpired=t.toTTL=void 0;t.toTTL=(e,t)=>({value:e,lastUpdateTimestamp:t});t.isTTLExpired=(e,t,n)=>n-e.lastUpdateTimestamp>t;t.flattenTTL=(e,n,r,a)=>t.isTTLExpired(e,n,r)?a:e.value})),define("typescript/component_libraries/deep-integrations/src/async",["require","exports","tslib"],(function(e,t,n){"use strict";function r(e){return"object"==typeof e&&("string"==typeof e.state&&("pending"===e.state||("fulfilled"===e.state&&"value"in e||"rejected"===e.state&&"error"in e)))}Object.defineProperty(t,"__esModule",{value:!0}),t.rejected=t.fulfilled=t.pending=t.applyAndFlatten=t.toAsync=void 0,t.toAsync=function(e){return n.__awaiter(this,void 0,void 0,(function*(){try{return{state:"fulfilled",value:yield e}}catch(e){return{state:"rejected",error:e}}}))},t.applyAndFlatten=function(e,t){if("fulfilled"===e.state){const n=t(e.value);return r(n)?(function e(t){return"fulfilled"===t.state&&r(t.value)?e(t.value):t})(n):{state:"fulfilled",value:n}}return e},t.pending={state:"pending"},t.fulfilled=function(e){return{state:"fulfilled",value:e}},t.rejected=function(e){return{state:"rejected",error:e}}})),define("typescript/component_libraries/deep-integrations/src/data/actions",["require","exports","tslib","typescript/component_libraries/deep-integrations/src/api_v2/shared_link","typescript/component_libraries/deep-integrations/src/async","typescript/component_libraries/deep-integrations/src/data/types","lodash"],(function(e,t,n,r,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearMakeZoomMeetingMessage=t.makeZoomMeeting=t.loadUpcomingCalendarEvents=t.loadCalendarEvents=t.getRangeKey=t.loadCalendarEventsInCommon=t.clearLoadEventsError=t.clearLoadEventsInCommonError=t.clearLastSentMessage=t.clearCanSendMessage=t.canSendMessage=t.sendChatMessage=t.saveInputFocus=t.saveChatMessage=void 0,i=n.__importDefault(i);function o(e){return t=>{t({type:s.Actions.clearLastSentMessage,meta:{userKey:e.account_id}})}}function c(e,t){return e.toString()+"-"+t.toString()}function l(e,t){return(r,a,i)=>n.__awaiter(this,void 0,void 0,(function*(){r({type:s.Actions.clearMakeZoomMeetingMessage,meta:{userKey:t,ical_uid:e.ical_uid}})}))}t.saveChatMessage=function(e,t){return n=>{n({type:s.Actions.saveChatMessage,meta:{userKey:e.account_id},payload:{chatMessage:t}})}},t.saveInputFocus=function(e,t){return n=>{n({type:s.Actions.saveInputFocus,meta:{userKey:e.account_id},payload:{hasInputFocus:t}})}},t.sendChatMessage=function(e,t,i){return(c,l,d)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n,reportError:l}=d();c({type:s.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"pending"}});const u=[i.text],p=(i.attachments||[]).map(e=>"file_share_link"===e.type?r.getSharedLinkMetadata(e.fileId,n).then(e=>e.url):Promise.resolve(null));try{yield Promise.all(p).then(e=>e.filter(e=>null!==e).forEach(e=>u.push(e)))}catch(t){return c({type:s.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"rejected",error:t}}),void l(t,"non-critical",["ProfileCard"],{action:"getSharedLinkMetadata"})}const _={target:e.account_id,message:u.join("\n")};switch(t[".tag"]){case"slack_dropbox":{const t=yield a.toAsync(n.ns("slack").rpc("send_direct_message",_,{}));"rejected"===t.state&&l(t.error,"non-critical",["ProfileCard"],{action:"sendChatMessage_slack"}),"fulfilled"===t.state?(c({type:s.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"fulfilled",value:{message_link:t.value.deep_link}}}),c({type:s.Actions.saveChatMessage,meta:{userKey:e.account_id},payload:{chatMessage:""}}),setTimeout(()=>c(o(e)),3e3)):c({type:s.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:t});break}case"zoom":{const t=yield a.toAsync(n.ns("zoom").rpc("send_direct_message",_,{}));"rejected"===t.state&&l(t.error,"non-critical",["ProfileCard"],{action:"sendChatMessage_zoom"}),"fulfilled"===t.state?(c({type:s.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:{state:"fulfilled",value:{message_link:t.value.conversation_link}}}),c({type:s.Actions.saveChatMessage,meta:{userKey:e.account_id},payload:{chatMessage:""}}),setTimeout(()=>c(o(e)),3e3)):c({type:s.Actions.sendChatMessage,meta:{userKey:e.account_id},payload:t});break}}}))},t.canSendMessage=function(e,t){return(r,i,o)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n}=o(),i={target:e.account_id};r({type:s.Actions.canSendMessage,meta:{userKey:e.account_id,serviceType:t},payload:{state:"pending"}});const{reportError:c}=o();let l;switch(t[".tag"]){case"slack_dropbox":l=yield a.toAsync(n.ns("slack").rpc("can_send_message",i,{}));break;case"zoom":l=yield a.toAsync(n.ns("zoom").rpc("can_send_message",i,{}));break;default:l={state:"rejected",error:new Error("unknown/unsupported service type")}}"rejected"===l.state&&c(l.error,"non-critical",["ProfileCard"],{action:"canSendMessage"}),r({type:s.Actions.canSendMessage,meta:{userKey:e.account_id,serviceType:t},payload:l})}))},t.clearCanSendMessage=function(e,t){return n=>{n({type:s.Actions.clearCanSendMessage,meta:{userKey:e.account_id,serviceType:t}})}},t.clearLastSentMessage=o,t.clearLoadEventsInCommonError=function(e,t){return t=>{t({type:s.Actions.clearLoadEventsInCommonError,meta:{userKey:e.account_id}})}},t.clearLoadEventsError=function(e,t,n,r){const a=c(t,n);return t=>{t({type:s.Actions.clearLoadEventsError,meta:{userKey:e.account_id,rangeKey:a}})}},t.loadCalendarEventsInCommon=function(e,t){return(r,i,o)=>n.__awaiter(this,void 0,void 0,(function*(){const n=i(),c=n&&n.sharedCalendarState[e.account_id];c&&"rejected"!==c.eventSections.state||r({type:s.Actions.loadCalendarEventsInCommon,meta:{userKey:e.account_id,timestamp:t.now()},payload:{state:"pending"}});const{apiV2Client:l,reportError:d}=o(),u={account_ids_or_emails:[e.account_id],range_start_time:Date.now(),range_end_time:Date.now()+864e5},p=yield a.toAsync(l.ns("calendar").rpc("fetch_events_in_common",u,{}));if("rejected"===p.state)d(p.error,"non-critical",["ProfileCard"],{integration_action:"loadCalendarEvents"}),r({type:s.Actions.loadCalendarEventsInCommon,meta:{userKey:e.account_id,timestamp:t.now()},payload:p});else if("fulfilled"===p.state){const n=p.value.event_mapping[e.account_id]||[];r({type:s.Actions.loadCalendarEventsInCommon,meta:{userKey:e.account_id,timestamp:t.now()},payload:{state:"fulfilled",value:n}})}}))},t.getRangeKey=c,t.loadCalendarEvents=function(e,t,r,o,l){const d=c(r,o),u=e.account_id,p={range_start_time:r,range_end_time:o,calendar_id:e.email||u};return(e,r,o)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n,reportError:c}=o(),{fullCalendarState:_}=r();void 0!==_[u]&&void 0!==_[u][d]||e({type:s.Actions.loadCalendarEvents,meta:{userKey:u,rangeKey:d,timestamp:t.now()},payload:{state:"pending"}});const g=yield a.toAsync(n.ns("calendar").rpc("fetch_events",p,{}));if("rejected"===g.state)c(g.error,"non-critical",["FullCalendar"],{integration_action:"loadCalendarEvents"}),e({type:s.Actions.loadCalendarEvents,meta:{userKey:u,rangeKey:d,timestamp:t.now()},payload:g});else if("fulfilled"===g.state){let n=g.value.events;void 0!==l&&(n=n.filter(e=>e.end_time-e.start_time<=l)),n=i.default.sortBy(n,["start_time","end_time"]),e({type:s.Actions.loadCalendarEvents,meta:{userKey:u,rangeKey:d,timestamp:t.now()},payload:{state:"fulfilled",value:n}})}}))},t.loadUpcomingCalendarEvents=function(){return(e,t,r)=>n.__awaiter(this,void 0,void 0,(function*(){const t=r().apiV2Client,n={range_start_time:Date.now(),range_end_time:Date.now()+9e5};e({type:s.Actions.loadUpcomingCalendarEvents,meta:{},payload:{state:"pending"}});try{const r=(yield t.ns("calendar").rpc("fetch_events",n,{})).events;e({type:s.Actions.loadUpcomingCalendarEvents,meta:{},payload:{state:"fulfilled",value:r}})}catch(t){e({type:s.Actions.loadUpcomingCalendarEvents,meta:{},payload:{state:"rejected",error:t}})}}))},t.makeZoomMeeting=function(e,t){return(r,i,o)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n,reportError:i}=o(),c={event_key:e.calendar_event_key};r({type:s.Actions.makeZoomMeeting,meta:{userKey:t,ical_uid:e.ical_uid},payload:{state:"pending"}});const d=yield a.toAsync(n.ns("zoom").rpc("make_zoom_meeting",c,{}));if("rejected"===d.state)i(d.error,"non-critical",["ProfileCard"],{integration_action:"makeZoomMeeting"}),r({type:s.Actions.makeZoomMeeting,meta:{userKey:t,ical_uid:e.ical_uid},payload:d});else if("fulfilled"===d.state){const e=d.value.calendar_event;r({type:s.Actions.makeZoomMeeting,meta:{userKey:t,ical_uid:e.ical_uid},payload:{state:"fulfilled",value:e}}),setTimeout(()=>r(l(e,t)),3e3)}}))},t.clearMakeZoomMeetingMessage=l})),define("typescript/component_libraries/deep-integrations/src/data/api_v2",["require","exports","tslib","lodash","typescript/component_libraries/deep-integrations/src/async","typescript/component_libraries/deep-integrations/src/data/api_v2_types"],(function(e,t,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.apiV2RequestsReducer=t.defaultApiV2Requests=t.trackRequest=t.replaceRequest=t.appendRequest=t.getLatestRequest=t.getLatestRequests=t.serializeArgs=void 0,r=n.__importStar(r);const i=(e,t=[])=>{if(!(e instanceof Object))return t;for(const n in e)e.hasOwnProperty(n)&&(t.push(n),i(e[n],t));return t};t.serializeArgs=(e,t,n)=>{const r={namespace:e,endpointName:t,arg:n},a=i(r).sort();return JSON.stringify(r,a)};t.getLatestRequests=(e,n,r,a)=>((e,t)=>{const n=e[t];return n?n.map(({request:e})=>e):[]})(e,t.serializeArgs(n,r,a));t.getLatestRequest=(e,n,a,s)=>r.last(t.getLatestRequests(e,n,a,s));t.appendRequest=(e,t,n,a)=>{const i=r.uniqueId();return[i,{type:s.ApiV2ActionType.appendRequest,payload:{id:i,namespace:e,endpointName:t,arg:n,request:a}}]};t.replaceRequest=(e,t,n,r,a)=>({type:s.ApiV2ActionType.replaceRequest,payload:{id:e,namespace:t,endpointName:n,arg:r,request:a}});t.trackRequest=(e,n,r,s)=>(i,o,c)=>{const[l,d]=t.appendRequest(e,n,r,a.pending);return i(d),a.toAsync(s).then(a=>{i(t.replaceRequest(l,e,n,r,a))}),s},t.defaultApiV2Requests={};t.apiV2RequestsReducer=(e=t.defaultApiV2Requests,n)=>{switch(n.type){case s.ApiV2ActionType.appendRequest:{const r=t.serializeArgs(n.payload.namespace,n.payload.endpointName,n.payload.arg),a=e[r]||[];return Object.assign(Object.assign({},e),{[r]:[...a.filter(({request:e})=>e.state!==n.payload.request.state),{id:n.payload.id,request:n.payload.request}]})}case s.ApiV2ActionType.replaceRequest:{const a=t.serializeArgs(n.payload.namespace,n.payload.endpointName,n.payload.arg),s=e[a];if(!s)return e;const i=r.findIndex(s,e=>e.id===n.payload.id);if(-1===i)return e;const o=s.slice(0,i),c=s.slice(i+1);return-1!==r.findIndex(c,({request:e})=>e.state===n.payload.request.state)?Object.assign(Object.assign({},e),{[a]:[...o,...c]}):Object.assign(Object.assign({},e),{[a]:[...o.filter(({request:e})=>e.state!==n.payload.request.state),{id:n.payload.id,request:n.payload.request},...c]})}default:return e}}})),define("typescript/component_libraries/deep-integrations/src/data/api_v2_types",["require","exports"],(function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ApiV2ActionType=void 0,(n=t.ApiV2ActionType||(t.ApiV2ActionType={})).appendRequest="@@DeepIntegrations/api_v2/appendRequest",n.replaceRequest="@@DeepIntegrations/api_v2/replaceRequest"})),define("typescript/component_libraries/deep-integrations/src/data/calendar",["require","exports","typescript/component_libraries/deep-integrations/src/data/types","typescript/component_libraries/deep-integrations/src/async","typescript/component_libraries/deep-integrations/src/ttl"],(function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fullCalendarStateReducer=t.defaultFullCalendarState=t.upcomingCalendarStateReducer=t.defaultUpcomingCalendarState=t.sharedCalendarStateReducer=t.defaultSharedCalendarState=void 0,t.defaultSharedCalendarState={},t.sharedCalendarStateReducer=function(e=t.defaultSharedCalendarState,r){switch(r.type){case n.Actions.loadCalendarEventsInCommon:{const{payload:t,meta:s}=r;let i;return i="pending"===t.state?{state:"pending"}:"fulfilled"===t.state?{state:"fulfilled",value:a.toTTL(t.value.map(e=>({calendarEvent:e,makeZoomMeetingState:n.MakeZoomMeetingState.Normal})),s.timestamp)}:{state:"rejected",error:t.error},Object.assign(Object.assign({},e),{[s.userKey]:Object.assign(Object.assign({},e[s.userKey]),{eventSections:i,showLoadCalendarEventsError:"rejected"===t.state})})}case n.Actions.clearLoadEventsInCommonError:{const{meta:t}=r;return Object.assign(Object.assign({},e),{[t.userKey]:Object.assign(Object.assign({},e[t.userKey]),{showLoadCalendarEventsError:!1})})}case n.Actions.makeZoomMeeting:{const{payload:t,meta:a}=r,s=e[a.userKey].eventSections;if(!s||"pending"===s.state||"rejected"===s.state)return e;const i=s.value,o=i.value.findIndex(e=>e.calendarEvent.ical_uid===a.ical_uid);return-1===o?e:("fulfilled"===t.state?i.value[o]={calendarEvent:t.value,makeZoomMeetingState:n.MakeZoomMeetingState.Success}:i.value[o].makeZoomMeetingState="pending"===t.state?n.MakeZoomMeetingState.Pending:n.MakeZoomMeetingState.Error,Object.assign(Object.assign({},e),{[a.userKey]:Object.assign(Object.assign({},e[a.userKey]),{eventSections:{state:"fulfilled",value:i}})}))}case n.Actions.clearMakeZoomMeetingMessage:{const{meta:t}=r,a=e[t.userKey].eventSections;if(a&&"fulfilled"===a.state){const r=a.value,s=r.value.findIndex(e=>e.calendarEvent.ical_uid===t.ical_uid);return-1===s?e:(r.value[s].makeZoomMeetingState=n.MakeZoomMeetingState.Normal,Object.assign(Object.assign({},e),{[t.userKey]:Object.assign(Object.assign({},e[t.userKey]),{eventSections:{state:"fulfilled",value:r}})}))}return e}}return e},t.defaultUpcomingCalendarState={},t.upcomingCalendarStateReducer=function(e=t.defaultUpcomingCalendarState,r){switch(r.type){case n.Actions.loadUpcomingCalendarEvents:{const t=r.payload;return Object.assign(Object.assign({},e),{events:t})}}return e},t.defaultFullCalendarState={},t.fullCalendarStateReducer=function(e=t.defaultFullCalendarState,s){switch(s.type){case n.Actions.loadCalendarEvents:{const{payload:t,meta:n}=s;let i;return i="pending"===t.state?r.pending:"fulfilled"===t.state?r.fulfilled(a.toTTL(t.value,n.timestamp)):r.rejected(t.error),Object.assign(Object.assign({},e),{[n.userKey]:Object.assign(Object.assign({},e[n.userKey]),{[n.rangeKey]:Object.assign(Object.assign({},e[n.userKey]?e[n.userKey][n.rangeKey]:void 0),{calendarEvents:i,showLoadCalendarEventsError:"rejected"===t.state})})})}case n.Actions.clearLoadEventsError:{const{meta:t}=s;return e[t.userKey]&&e[t.userKey][t.rangeKey]?Object.assign(Object.assign({},e),{[t.userKey]:Object.assign(Object.assign({},e[t.userKey]),{[t.rangeKey]:Object.assign(Object.assign({},e[t.userKey][t.rangeKey]),{showLoadCalendarEventsError:!1})})}):e}}return e}})),define("typescript/component_libraries/deep-integrations/src/data/chat",["require","exports","typescript/component_libraries/deep-integrations/src/data/types"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.chatStateReducer=t.defaultChatState=void 0,t.defaultChatState={},t.chatStateReducer=function(e=t.defaultChatState,r){switch(r.type){case n.Actions.saveChatMessage:{const{payload:t,meta:n}=r;return Object.assign(Object.assign({},e),{[n.userKey]:Object.assign(Object.assign({},e[n.userKey]),{rawMessage:t.chatMessage,trimmedMessage:t.chatMessage?t.chatMessage.trim():void 0})})}case n.Actions.saveInputFocus:{const{payload:t,meta:n}=r;return Object.assign(Object.assign({},e),{[n.userKey]:Object.assign(Object.assign({},e[n.userKey]),{hasInputFocus:t.hasInputFocus})})}case n.Actions.sendChatMessage:{const{payload:t,meta:n}=r;return Object.assign(Object.assign({},e),{[n.userKey]:Object.assign(Object.assign({},e[n.userKey]),{lastSendMessageRequest:t})})}case n.Actions.canSendMessage:{const{payload:t,meta:n}=r;return Object.assign(Object.assign({},e),{[n.userKey]:Object.assign(Object.assign({},e[n.userKey]),{canSendMessageRequestMap:Object.assign(Object.assign({},e[n.userKey]?e[n.userKey].canSendMessageRequestMap:{}),{[n.serviceType[".tag"]]:t})})})}case n.Actions.clearLastSentMessage:{const{meta:t}=r;return Object.assign(Object.assign({},e),{[t.userKey]:Object.assign(Object.assign({},e[t.userKey]),{lastSendMessageRequest:void 0})})}case n.Actions.clearCanSendMessage:{const{meta:t}=r;return Object.assign(Object.assign({},e),{[t.userKey]:Object.assign(Object.assign({},e[t.userKey]),{canSendMessageRequestMap:{}})})}default:return e}}})),define("typescript/component_libraries/deep-integrations/src/data/reducer",["require","exports","typescript/component_libraries/deep-integrations/src/data/api_v2","typescript/component_libraries/deep-integrations/src/data/user_settings","typescript/component_libraries/deep-integrations/src/data/present_to_zoom","typescript/component_libraries/deep-integrations/src/data/calendar","typescript/component_libraries/deep-integrations/src/data/chat"],(function(e,t,n,r,a,s,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DeepIntegrationsReducer=t.defaultState=void 0,t.defaultState={apiV2Requests:n.defaultApiV2Requests,chatState:i.defaultChatState,sharedCalendarState:s.defaultSharedCalendarState,upcomingCalendarState:s.defaultUpcomingCalendarState,fullCalendarState:s.defaultFullCalendarState,userSettingsState:r.defaultUserSettingsState,presentToZoomState:a.defaultPresentToZoomState},t.DeepIntegrationsReducer=function(e=t.defaultState,o){const c={apiV2Requests:n.apiV2RequestsReducer(e.apiV2Requests,o),chatState:i.chatStateReducer(e.chatState,o),sharedCalendarState:s.sharedCalendarStateReducer(e.sharedCalendarState,o),upcomingCalendarState:s.upcomingCalendarStateReducer(e.upcomingCalendarState,o),fullCalendarState:s.fullCalendarStateReducer(e.fullCalendarState,o),userSettingsState:r.userSettingsReducer(e.userSettingsState,o),presentToZoomState:a.presentToZoomStateReducer(e.presentToZoomState,o)};let l=!1;for(const t of Object.keys(c))if(c[t]!==e[t]){l=!0;break}return l?c:e}})),define("typescript/component_libraries/deep-integrations/src/data/present_to_zoom",["require","exports","typescript/component_libraries/deep-integrations/src/data/types"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.presentToZoomStateReducer=t.defaultPresentToZoomState=void 0,t.defaultPresentToZoomState={selfPreviewUrl:void 0},t.presentToZoomStateReducer=function(e=t.defaultPresentToZoomState,r){switch(r.type){case n.Actions.generateSelfPreviewLink:{const t=r.payload;return Object.assign(Object.assign({},e),{selfPreviewUrl:t})}}return e}})),define("typescript/component_libraries/deep-integrations/src/data/types",["require","exports"],(function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=t.MakeZoomMeetingState=void 0,(n=t.MakeZoomMeetingState||(t.MakeZoomMeetingState={}))[n.Normal=0]="Normal",n[n.Pending=1]="Pending",n[n.Error=2]="Error",n[n.Success=3]="Success",(r=t.Actions||(t.Actions={})).saveChatMessage="@@DeepIntegrations/saveChatMessage",r.saveInputFocus="@@DeepIntegrations/saveInputFocus",r.sendChatMessage="@@DeepIntegrations/sendChatMessage",r.canSendMessage="@@DeepIntegrations/canSendMessage",r.clearLastSentMessage="@@DeepIntegrations/clearCanSendMessage",r.clearCanSendMessage="@@DeepIntegrations/clearLastSentMessage",r.loadCalendarEvents="@@DeepIntegrations/loadCalendarEvents",r.loadCalendarEventsInCommon="@@DeepIntegrations/loadCalendarEventsInCommon",r.loadUpcomingCalendarEvents="@@DeepIntegrations/loadUpcomingCalendarEvents",r.clearLoadEventsInCommonError="@@DeepIntegrations/clearLoadEventsInCommonError",r.clearLoadEventsError="@@DeepIntegrations/clearLoadEventsError",r.makeZoomMeeting="@@DeepIntegrations/makeZoomMeeting",r.clearMakeZoomMeetingMessage="@@DeepIntegrations/clearMakeZoomMeetingMessage",r.generateSelfPreviewLink="@@DeepIntegrations/generateSelfPreviewLink"})),define("typescript/component_libraries/deep-integrations/src/data/user_settings",["require","exports","tslib","typescript/component_libraries/deep-integrations/src/async","typescript/component_libraries/deep-integrations/src/data/user_settings_types"],(function(e,t,n,r,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.userSettingsReducer=t.defaultUserSettingsState=t.changePreferredServices=t.dismissPrompts=t.loadUserSettings=t.isPromptDismissed=void 0;function s(){return(e,t,s)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:t,reportError:n}=s();e({type:a.UserSettingsActionType.loadUserSettings,payload:{state:"pending"}});const i=yield r.toAsync(t.ns("integrations").rpc("get_user_settings",{},{}));"rejected"===i.state&&n(i.error,"non-critical",[],{integration_action:"loadUserSettings"}),e({type:a.UserSettingsActionType.loadUserSettings,payload:i})}))}t.isPromptDismissed=(e,t)=>{const n=e.userSettingsState.latestUserSettings;return n&&n.dismissed_prompts.filter(e=>e[".tag"]===t).length>0},t.loadUserSettings=s,t.dismissPrompts=function(e){return(t,i,o)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n,reportError:i}=o();t({type:a.UserSettingsActionType.dismissPrompts,meta:{prompts:e},payload:{state:"pending"}});const c=yield r.toAsync(n.ns("integrations").rpc("add_dismiss_prompts",{prompts:e},{}));"rejected"===c.state&&i(c.error,"non-critical",[],{integration_action:"dismissPrompts"}),t({type:a.UserSettingsActionType.dismissPrompts,meta:{prompts:e},payload:c}),t(s())}))},t.changePreferredServices=function(e){return(t,i,o)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n}=o(),i={preferences:e};t({type:a.UserSettingsActionType.changePreferredServices,meta:{preferredServices:e},payload:{state:"pending"}});const{reportError:c}=o(),l=yield r.toAsync(n.ns("integrations").rpc("set_preferred_services",i,{}));"rejected"===l.state&&c(l.error,"non-critical",[],{action:"changeDefaultChatService"}),t({type:a.UserSettingsActionType.changePreferredServices,meta:{preferredServices:e},payload:l}),t(s())}))},t.defaultUserSettingsState={};t.userSettingsReducer=(e=t.defaultUserSettingsState,n)=>{switch(n.type){case a.UserSettingsActionType.loadUserSettings:{const{payload:t}=n;return Object.assign(Object.assign({},e),{userSettings:t,latestUserSettings:"fulfilled"===t.state?t.value:e.latestUserSettings})}case a.UserSettingsActionType.dismissPrompts:{const{payload:t,meta:r}=n,{latestUserSettings:a}=e,s={dismissed_prompts:(a?a.dismissed_prompts:[]).concat(r.prompts),preferred_services:a?a.preferred_services:[]};return Object.assign(Object.assign({},e),{dismissPrompts:t,latestUserSettings:s})}case a.UserSettingsActionType.changePreferredServices:{const{payload:t,meta:r}=n,{latestUserSettings:a}=e;if("pending"!==t.state)return Object.assign(Object.assign({},e),{changePreferredServices:t});const s=(a?a.preferred_services:[]).concat(r.preferredServices),i={};for(const e of s)i[e.permission_type[".tag"]]=e.service_type[".tag"];const o=Object.keys(i).map(e=>({permission_type:{".tag":e},service_type:{".tag":i[e]}})),c={dismissed_prompts:a?a.dismissed_prompts:[],preferred_services:o};return Object.assign(Object.assign({},e),{changePreferredServices:t,latestUserSettings:c})}default:return e}}})),define("typescript/component_libraries/deep-integrations/src/data/user_settings_types",["require","exports"],(function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.UserSettingsActionType=void 0,(n=t.UserSettingsActionType||(t.UserSettingsActionType={})).loadUserSettings="@@DeepIntegrations/loadUserSettings",n.dismissPrompts="@@DeepIntegrations/dismissPrompts",n.changePreferredServices="@@DeepIntegrations/changePreferredServices"})),define("typescript/component_libraries/deep-integrations/src/instrumentation/connect_service_flow_wrapper",["require","exports","tslib","typescript/component_libraries/deep-integrations/src/instrumentation/constants"],(function(e,t,n,r){"use strict";function a(e,t,n,a,s={}){return{event_name:r.InstrEventType.ServiceConnectionFlowStart,service_type:e[".tag"],feature_name:n,extra:Object.assign(Object.assign({},s),{connection_state:t[".tag"],desired_outcome:a})}}function s(e,t,n,a,s={}){return{event_name:r.InstrEventType.ServiceConnectionFlowEnd,service_type:e[".tag"],feature_name:t,extra:Object.assign(Object.assign({},s),{desired_outcome:n,outcome:a,was_successful:`${a===n}`})}}Object.defineProperty(t,"__esModule",{value:!0}),t.connectServiceFlowWrapper=t.buildEndEvent=t.buildStartEvent=void 0,t.buildStartEvent=a,t.buildEndEvent=s,t.connectServiceFlowWrapper=function(e,t,i,o){return function(c,l=o,d={}){return n.__awaiter(this,void 0,void 0,(function*(){const n=i[c];e(a(n.service_type,n.connection_state,l,r.InstrConnectServiceFlowOutcome.Connected,d));try{const a=yield t(c);return e(s(n.service_type,l,r.InstrConnectServiceFlowOutcome.Connected,r.InstrConnectServiceFlowOutcome.Connected,d)),a}catch(t){throw d.error=JSON.stringify(t),e(s(n.service_type,l,r.InstrConnectServiceFlowOutcome.Connected,r.InstrConnectServiceFlowOutcome.Error,d)),t}}))}}})),define("typescript/component_libraries/deep-integrations/src/instrumentation/constants",["require","exports"],(function(e,t){"use strict";var n,r,a,s,i,o,c;Object.defineProperty(t,"__esModule",{value:!0}),t.InstrRenderedFeatureStage=t.InstrConnectServiceFlowOutcome=t.InstrToastType=t.InstrExternalLinkReason=t.InstrActionType=t.InstrEventType=t.InstrFeatureType=void 0,(n=t.InstrFeatureType||(t.InstrFeatureType={})).ConnectedApps="connected_apps",n.ConnectedServices="connected_apps.connected_services",n.ZoomSettings="connected_apps.zoom_settings",n.SlackSettings="connected_apps.slack_settings",n.MultiAccountSettings="connected_apps.multi_account_settings",n.ProfileCard="profile_card",n.CalendarSection="profile_card.calendar_section",n.ChatSection="profile_card.chat_section",n.FileLinkTokenInChatSection="profile_card.chat_section.file_link_token",n.AppStoreLite="app_store_lite",n.SendToSlack="send_to_slack",n.PresentToZoom="present_to_zoom",n.ShareToTrello="share_to_trello",n.ShareToTrelloCardDetails="share_to_trello.card_details",n.SignaturesTabOnShare="bt_signatures_tab_on_share",n.SelfSignEntryPoint="bt_self_sign_entry_point",n.SendForSignatureNaming="bt_send_for_signature_naming",n.TosWithRecipientsInfo="bt_hs_tos_modal_redesign",n.TeamAdminSettings="team_admin_settings",n.TrelloPreview="trello_powerup.file_preview",n.TrelloFileAttachments="trello_powerup.file_attachments",n.TrelloFolderAttachments="trello_powerup.folder_attachments",n.TrelloOAuth="trello_powerup.oauth",n.TrelloSharedLinkFolderEntries="trello_powerup.shared_link_folder_entries",n.TrelloSharedLinkMetadata="trello_powerup.shared_link_metadata",n.TrelloLinkUnfurl="trello_powerup.link_unfurl",n.TrelloActivityFeed="trello_activity_feed",n.ZoomFileViewerExtension="zoom_file_viewer_extension",n.ZoomFileViewerExtensionHomeView="zoom_file_viewer_extension.home_view",n.ZoomFileViewerExtensionCreateMeetingView="zoom_file_viewer_extension.create_meeting_view",n.ZoomFileViewerExtensionMeetingDetailView="zoom_file_viewer_extension.meeting_detail_view",n.ZoomFileViewerExtensionUnlinkedView="zoom_file_viewer_extension.unlinked_view",n.ZoomFileViewerExtensionErrorView="zoom_file_viewer_extension.error_view",n.HelloSignDeepIntegrationTOS="hellosign_deep_integration_tos",n.HelloSignDeepIntegration="hellosign_deep_integration",n.HelloSignDeepIntegrationSafariFixDisabled="hellosign_deep_integration_safari_fix_disabled",n.HelloSignTosExperiment="hellosign_tos_experiment",n.IntegratedTasks="integrated_tasks",(r=t.InstrEventType||(t.InstrEventType={})).UserClick="user_click",r.UserInput="user_input",r.RenderedFeature="rendered_feature",r.ManualRenderedFeature="manual_rendered_feature",r.ServiceConnectionFlowStart="service_connection_flow_start",r.ServiceConnectionFlowEnd="service_connection_flow_end",r.Success="success",r.Retry="retry",r.Failure="failure",r.MakeZoomMeetingComplete="make_zoom_meeting_complete",r.SendMessageComplete="send_message_complete",r.TeamAdminSaveComplete="team_admin_save_complete",r.ReceivedUserSetting="received_user_setting",r.SelectAction="select_action",r.UpdateFile="update_file",r.ActionTaken="action_taken",(a=t.InstrActionType||(t.InstrActionType={})).DismissLastSentMessageNotification="dismiss_last_sent_message_notification",a.OpenChatServiceProviders="open_chat_service_providers",a.ChangeChatService="change_chat_service",a.OpenManageApps="open_manage_apps",a.CloseModal="close_modal",a.DismissPrompt="dismiss_prompt",a.OpenExternalLink="open_external_link",a.MakeZoomMeeting="make_zoom_meeting",a.ConnectService="connect_service",a.ReconnectService="reconnect_service",a.DisconnectService="disconnect_service",a.DisconnectServiceAbort="disconnect_service_abort",a.DisconnectServiceConfirm="disconnect_service_confirm",a.ModifyServiceSettings="modify_service_settings",a.ModifyServiceSettingsAbort="modify_service_settings_abort",a.ModifyServiceSettingsConfirm="modify_service_settings_confirm",a.OpenConnectCalendarDropdown="open_connect_calendar_dropdown",a.DismissToast="dismiss_toast",a.LearnMore="learn_more",a.SendMessage="send_message",a.CancelMessage="cancel_message",a.Search="search",a.ShareLink="share_link",a.UndoShareLink="undo_share_link",a.ErrorTryAgain="error_try_again",a.PresentFile="present_file",a.EnterMeetingId="enter_meeting_id",a.LoadData="load_data",a.TeamAdminUndo="team_admin_undo",a.TeamAdminSave="team_admin_save",a.TeamAdminDisableService="team_admin_disable_service",a.TeamAdminEnableService="team_admin_enable_service",a.CloseFileLinkToken="close_file_link_token",a.PrefetchData="prefetch_data",a.OpenZoomSideBar="open_zoom_side_bar",a.ReopenZoomSideBar="reopen_zoom_side_bar",a.SeeLessMeetings="see_less_meetings",a.SeeAllMeetings="see_all_meetings",a.SeeLessParticipants="see_less_participants",a.SeeAllParticipants="see_all_participants",a.SelectAllUsers="select_all_users",a.ClearAllUsers="clear_all_users",a.AddUser="add_user",a.SelectUserSuggestion="select_user_suggestion",a.PlayRecording="play_recording",a.StartMeeting="start_meeting",a.JointMeeting="join_meeting",a.UpdateMeetingTitle="update_meeting_title",a.CreateMeeting="create_meeting",a.UpdatePmiSetting="update_pmi_setting",a.OpenHelpCenter="open_help_center",a.OpenAccountSetting="open_account_setting",a.AcceptTOS="accept_tos",a.StartFlow="start_flow",a.CancelFlow="cancel_flow",a.ChooseFile="choose_file",a.TryDemo="try_demo",a.Start="start",a.FeatureDisabled="feature_disabled",a.SafariUnsupported="safari_unsupported",a.MSIEUnsupported="msie_unsupported",a.HSHomeOpenActionMenu="hshome_open_action_menu",a.HSHomePreview="hshome_action_preview",a.HSHomeDownload="hshome_action_download",a.HSHomeLocate="hshome_action_locate",a.HSHomeRemind="hshome_action_remind",a.HSHomeCancel="hshome_action_cancel",a.HSHomeActivateRequest="hshome_activate_request",a.HSHomeActivateTabInProgress="hshome_activate_tab_in_progress",a.HSHomeActivateTabCompleted="hshome_activate_tab_completed",a.HSHomeSortByTitle="hshome_sort_by_title",a.HSHomeSortBySigners="hshome_sort_by_signers",a.HSHomeSortByDate="hshome_sort_by_date",a.HSHomeSignNow="hshome_sign_now",a.HSHomeGetInitialSignatureRequests="hshome_get_initial_signature_requests",a.HSHomeGetSignatureRequests="hshome_get_signature_requests",a.HSHomeGetTemplates="hshome_get_templates",a.HSHomeGetTosStatus="hshome_get_tos_status",a.HSHomeLaunchRequestSignature="hshome_launch_request_signature",a.HSHomeLaunchCreateTemplate="hshome_launch_create_template",a.HSHomeLaunchUseTemplate="hshome_launch_use_template",a.HSHomeLaunchEditTemplate="hshome_launch_edit_template",a.HSHomeDeleteTemplate="hshome_delete_template",a.HSHomeSmartSuggestionDisplayed="hshome_smart_suggestion_displayed",a.HSHomeSmartSuggestionClicked="hshome_smart_suggestion_clicked",a.HSHomeGetAccountInfo="hshome_get_account_info",a.HSHomeSearchStart="hshome_search_start",a.ViewTerms="view_terms",a.ViewPrivacyPolicy="view_privacy_policy",a.SharePageSignatureTabPreview="sharepage_signature_tab_action_preview",a.SharePageSignatureTabDownload="sharepage_signature_tab_action_download",a.SharePageSignatureTabRemind="sharepage_signature_tab_action_remind",a.SharePageSignatureTabSign="sharepage_signature_tab_action_sign",a.SharePageSignatureTabGetSignatureRequests="sharepage_signature_tab_get_signature_requests",a.SharePageSignatureTabLaunchRequestSignature="sharepage_signature_tab_launch_request_signature",a.SharePageSignatureTabSortByTitle="sharepage_signature_tab_sort_by_title",a.SharePageSignatureTabSortByDate="sharepage_signature_tab_sort_by_date",a.SharePageSignatureTabSortByStatus="sharepage_signature_tab_sort_by_status",a.AddSigner="add_signer",a.ToggleSelfSign="toggle_self_sign",a.ContinueWithSignersModal="continue_with_signers_modal",a.SetDefaultWorkspace="set_default_workspace",(s=t.InstrExternalLinkReason||(t.InstrExternalLinkReason={})).OpenMoreCalendarEvents="open_more_calendar_events",s.OpenCalendarEvent="open_calendar_event",s.OpenZoomConference="open_zoom_conference_link",s.OpenMailto="open_mailto",s.OpenMessageDeepLink="open_message_deep_link",(i=t.InstrToastType||(t.InstrToastType={})).CalendarError="calendar_error",i.ZoomMakeMeeting="zoom_make_meeting",i.LastSentMessage="last_sent_message",(o=t.InstrConnectServiceFlowOutcome||(t.InstrConnectServiceFlowOutcome={})).Connected="connected",o.Disconnected="disconnected",o.Abort="abort",o.Error="error",(c=t.InstrRenderedFeatureStage||(t.InstrRenderedFeatureStage={})).Mounted="mounted",c.Loaded="loaded",c.Interactive="interactive",c.Updated="updated"})),define("typescript/component_libraries/deep-integrations/src/instrumentation/function_wrapper",["require","exports","typescript/component_libraries/deep-integrations/src/instrumentation/constants"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onClickWrapper=t.functionWrapperProvider=void 0,t.functionWrapperProvider=function(e,t){return function(n,r,a={},s={}){let{featureName:i,serviceType:o,extra:c={}}=a;return function(...a){return s.toExtraDict&&(c=s.toExtraDict(c,...a)),s.toServiceType&&(o=s.toServiceType(...a)||o),e({event_name:n,feature_name:i||t,service_type:o,extra:c}),r?r(...a):void 0}}},t.onClickWrapper=function(e,t,r,a={},s={}){return e(n.InstrEventType.UserClick,r,a,Object.assign(Object.assign({},s),{toExtraDict(e){const n=s.toExtraDict?s.toExtraDict(e):e;return Object.assign(Object.assign({},n),{action:t})}}))}})),define("typescript/component_libraries/deep-integrations/src/instrumentation/common_context",["require","exports","typescript/component_libraries/deep-integrations/src/platform/log_event"],(function(e,t,n){"use strict";function r(e){const t={};if(e.serviceList)for(const n of e.serviceList)t[`${n.service_type[".tag"]}_connection_state`]=n.connection_state[".tag"],t[`${n.service_type[".tag"]}_availability`]=n.service_availability[".tag"];if(e.featureGates)if(e.featureGates instanceof Array)for(const n of e.featureGates)t[`feature_gate_${n.feature}_available`]=String("available"===n.available[".tag"]);else for(const n of Object.keys(e.featureGates))t[`feature_gate_${n}_available`]=String(e.featureGates[n]);if(e.userSettings){for(const n of e.userSettings.dismissed_prompts)t[`is_${n[".tag"]}_prompt_dismissed`]="true";for(const n of e.userSettings.preferred_services)t[`preferred_${n.permission_type[".tag"]}_service`]=n.service_type[".tag"]}return t}Object.defineProperty(t,"__esModule",{value:!0}),t.decorateCommonContext=t.getCommonContextExtra=void 0,t.getCommonContextExtra=r,t.decorateCommonContext=function(e,t){return n.logEventWithExtra(e,r(t))}})),define("typescript/component_libraries/deep-integrations/src/instrumentation/timer",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Timer=void 0;t.Timer=class{constructor(e){this.perfTimer=e,this.startMs=null,this.endMs=null,this.restart()}restart(){this.startMs=this.perfTimer.now(),this.endMs=null}mark(){return this.endMs=this.perfTimer.now(),this.endMs-this.startMs}duration(){return null===this.endMs?-1:this.endMs-this.startMs}}})),define("typescript/component_libraries/deep-integrations/src/instrumentation/instr_button",["require","exports","tslib","react","spectrum/button/index","typescript/component_libraries/deep-integrations/src/instrumentation/function_wrapper","classnames","typescript/component_libraries/deep-integrations/src/link/link_button"],(function(e,t,n,r,a,s,i,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createInstrLinkButtonComponent=t.createInstrButtonComponent=void 0,r=n.__importStar(r),i=n.__importDefault(i),t.createInstrButtonComponent=function(e){return class extends r.Component{render(){const t=this.props,{onClick:o,instrAction:c,instrDetails:l}=t,d=n.__rest(t,["onClick","instrAction","instrDetails"]);return r.createElement(a.Button,Object.assign({},d,{onClick:s.onClickWrapper(e,c,o,l),className:this.props.variant&&"styleless"===this.props.variant?i.default("int-box-shadow-on-focus","int-pointer-cursor",this.props.className):this.props.className}))}}},t.createInstrLinkButtonComponent=function(e){return class extends r.Component{render(){const t=this.props,{onClick:a,instrAction:i,instrDetails:c}=t,l=n.__rest(t,["onClick","instrAction","instrDetails"]);return r.createElement(o.LinkButton,Object.assign({},l,{onClick:s.onClickWrapper(e,i,a,c)}))}}}})),define("typescript/component_libraries/deep-integrations/src/instrumentation/instr_feature_component",["require","exports","tslib","react","typescript/component_libraries/deep-integrations/src/instrumentation/constants","typescript/component_libraries/deep-integrations/src/instrumentation/timer"],(function(e,t,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InstrFeatureComponent=void 0,r=n.__importStar(r);class i extends r.Component{constructor(e){super(e),this.deltaMeasurementFrom="constructed",this.isDoneLoading=!1,this.isInteractive=!1,this.timer=new s.Timer(e.performanceTimer)}componentDidMount(){this.arePropsLoaded(this.props)?this.logRenderedFeature(a.InstrRenderedFeatureStage.Interactive):this.logRenderedFeature(a.InstrRenderedFeatureStage.Mounted)}componentWillReceiveProps(e){this.isDoneLoading||0===this.getAllAsyncProps(e).length||this.arePropsLoaded(e)&&this.logRenderedFeature(a.InstrRenderedFeatureStage.Loaded,e)}componentDidUpdate(e){this.isDoneLoading&&!this.isInteractive&&this.logRenderedFeature(a.InstrRenderedFeatureStage.Interactive)}getAllAsyncProps(e){const t=[];return e.criticalAsyncProps&&t.push(...e.criticalAsyncProps),e.nonCriticalAsyncProps&&t.push(...e.nonCriticalAsyncProps),t}arePropsLoaded(e){return this.getAllAsyncProps(e).reduce((e,t)=>e&&!!t&&"pending"!==t.state,!0)}hadRejectedAsyncProp(e){return this.getAllAsyncProps(e).reduce((e,t)=>t&&"rejected"===t.state||e,!1)}hadCriticalRejectedAsyncProp(e){return!!e.criticalAsyncProps&&e.criticalAsyncProps.reduce((e,t)=>t&&"rejected"===t.state||e,!1)}logRenderedFeature(e,t){const n={};t||(t=this.props);const r=this.hadRejectedAsyncProp(t),s=this.hadCriticalRejectedAsyncProp(t);switch(e){case a.InstrRenderedFeatureStage.Interactive:if(this.isInteractive)return;this.isInteractive=!0,this.isDoneLoading=!0,n.had_rejected_async_prop=String(r),n.was_successful=String(!s);break;case a.InstrRenderedFeatureStage.Loaded:if(this.isDoneLoading)return;this.isDoneLoading=!0,n.had_rejected_async_prop=String(r),n.was_successful=String(!s)}this.props.logEvent({event_name:a.InstrEventType.RenderedFeature,extra:Object.assign(Object.assign({},n),{rendered_feature_stage:e,rendered_feature_delta_ms:String(this.timer.mark()),rendered_feature_delta_from:this.deltaMeasurementFrom})})}render(){return this.props.children}}t.InstrFeatureComponent=i,i.displayName="InstrFeatureComponent"})),define("typescript/component_libraries/deep-integrations/src/platform/log_event",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.withDefaults=t.logEventWithExtra=void 0,t.logEventWithExtra=function(e,n){return t.withDefaults(e,{extra:n})};t.withDefaults=(e,t)=>n=>{e(Object.assign(Object.assign(Object.assign({},t),n),{extra:Object.assign(Object.assign({},t.extra),n.extra)}))}})),define("typescript/component_libraries/deep-integrations/src/platform/performance_timer",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultPerformanceTimer=void 0,t.DefaultPerformanceTimer={now:()=>Date.now()}})),define("metaserver/static/js/modules/clean/integrations/data/actions",["require","exports","tslib","metaserver/static/js/modules/clean/integrations/data/types","typescript/component_libraries/deep-integrations/src/async","metaserver/static/js/modules/clean/integrations/feature_gating"],(function(e,t,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchFeatureAvailability=t.fetchListServices=void 0,t.fetchListServices=function(e){return(t,s,i)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n,reportError:s}=i().deepIntegrationsHandler;t({type:r.Actions.fetchListServices,payload:{state:"pending"}});const o=yield a.toAsync(n.ns("profile_services").rpc("list_services",void 0,{}));e&&e(o),"rejected"===o.state&&s(o.error,"non-critical",[],{integration_action:"listServices"}),t({type:r.Actions.fetchListServices,payload:o})}))},t.fetchFeatureAvailability=function(e){return(t,a,i)=>n.__awaiter(this,void 0,void 0,(function*(){const{apiV2Client:n,reportError:a}=i().deepIntegrationsHandler;try{const a=yield s.getFeatureAvailability(n,e);t({type:r.Actions.fetchFeatureAvailability,payload:a})}catch(e){a(e,"non-critical",[],{integration_action:"featureAvailability"})}}))}})),define("metaserver/static/js/modules/clean/integrations/data/reducers",["require","exports","metaserver/static/js/modules/clean/integrations/data/types"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IntegrationsReducer=t.defaultIntegrationsNamespaceState=void 0,t.defaultIntegrationsNamespaceState={listServices:void 0,latestListServicesResult:void 0},t.IntegrationsReducer=function(e=t.defaultIntegrationsNamespaceState,r){switch(r.type){case n.Actions.fetchListServices:{const{payload:t}=r;return Object.assign(Object.assign({},e),{listServices:t,latestListServicesResult:"fulfilled"===t.state?t.value:e.latestListServicesResult})}case n.Actions.fetchFeatureAvailability:return Object.assign(Object.assign({},e),{featureAvailability:Object.assign(Object.assign({},e.featureAvailability),r.payload)});default:return e}}})),define("metaserver/static/js/modules/clean/integrations/data/selectors",["require","exports","reselect","metaserver/static/js/redux/namespaces","metaserver/static/js/redux/selectors","metaserver/static/js/modules/clean/integrations/feature_gating"],(function(e,t,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHelloSignMLClassificationVariant=t.isHelloSignMLClassificationEnabled=t.isHelloSignDeepIntegrationInFileViewerSidebarEnabled=t.isHelloSignAppActionInFileViewerSidebarEnabled=t.isProfileCardInShareSheetEnabled=t.getFeatureAvailability=t.isSendForSignatureEnabled=t.isConnectServiceLandingPagesEnabled=t.getListServicesInfo=void 0,t.getListServicesInfo=n.createSelector([e=>{const t=a.getStateAtNamespace(e,r.INTEGRATIONS_NAMESPACE_KEY);return{listServices:t.listServices,latestListServicesResult:t.latestListServicesResult}}],e=>e),t.isConnectServiceLandingPagesEnabled=function(e){const t=a.getStateAtNamespace(e,r.INTEGRATIONS_NAMESPACE_KEY).featureAvailability;return void 0===t?null:s.isFeatureAvailable(t,{entry_point:"file_preview_top_bar",feature:"connect_service_landing_pages"})},t.isSendForSignatureEnabled=function(e){var t,n,s;const i=a.getStateAtNamespace(e,r.DEEP_INTEGRATIONS_NAMESPACE_KEY);return!!(null===(s=null===(n=null===(t=null==i?void 0:i.userSettingsState)||void 0===t?void 0:t.latestUserSettings)||void 0===n?void 0:n.hellosign_settings)||void 0===s?void 0:s.send_for_signature_enabled)},t.getFeatureAvailability=n.createSelector([e=>a.getStateAtNamespace(e,r.INTEGRATIONS_NAMESPACE_KEY).featureAvailability||{}],e=>e),t.isProfileCardInShareSheetEnabled=n.createSelector([t.getFeatureAvailability],e=>!!s.isFeatureAvailable(e,{feature:"profile_card_v2",entry_point:"share_sheet"})),t.isHelloSignAppActionInFileViewerSidebarEnabled=n.createSelector([t.getFeatureAvailability],e=>"APP_ACTION"===s.getFeatureVariant(e,{entry_point:"file_preview_side_bar",feature:"hellosign_deep_integration"})),t.isHelloSignDeepIntegrationInFileViewerSidebarEnabled=n.createSelector([t.getFeatureAvailability],e=>{const t=s.getFeatureVariant(e,{entry_point:"file_preview_side_bar",feature:"hellosign_deep_integration"});return"DEEP_INTEGRATION"===t||"DEEP_INTEGRATION_WITH_EXTENSION"===t}),t.isHelloSignMLClassificationEnabled=n.createSelector([t.getFeatureAvailability],e=>!!s.isFeatureAvailable(e,{feature:"hellosign_ml_classification_experiment"})),t.getHelloSignMLClassificationVariant=n.createSelector([t.getFeatureAvailability],e=>s.getFeatureVariant(e,{feature:"hellosign_ml_classification_experiment"}))})),define("metaserver/static/js/modules/clean/integrations/data/store",["require","exports","tslib","metaserver/static/js/redux/store","lodash","typescript/component_libraries/deep-integrations/src/data/reducer","metaserver/static/js/api_v2/default_user_client","metaserver/static/js/redux/namespaces","metaserver/static/js/modules/clean/integrations/data/reducers","metaserver/static/js/modules/clean/integrations/data/actions","metaserver/static/js/modules/clean/viewer","metaserver/static/js/modules/clean/integrations/performance_timer","metaserver/static/js/modules/clean/integrations/log_event","metaserver/static/js/modules/clean/integrations/report_error","metaserver/static/js/redux/selectors","typescript/component_libraries/deep-integrations/src/data/user_settings","metaserver/static/js/modules/clean/active_user"],(function(e,t,n,r,a,s,i,o,c,l,d,u,p,_,g,m,v){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wrapMapDispatchToProps=t.wrapDispatch=t.wrapMapStateToProps=t.isPromptDismissed=t.initStoreForTesting=t.initStoreForIntegration=t.registerReducersForIntegration=void 0,a=n.__importStar(a);const f=[{feature:"connect_service_landing_pages",entry_point:"file_preview_top_bar"},{feature:"profile_card_v2",entry_point:"share_sheet"},{feature:"hellosign_deep_integration",entry_point:"file_preview_side_bar"},{feature:"hellosign_ml_classification_experiment"}];let y;function S(e){const n=p.createIntegrationsActionsLogger(),a=r.getStoreAndRegisterReducers({},{deepIntegrationsHandler:{apiV2Client:new i.DefaultUserApiV2Client(e),performanceTimer:u.WebPerformanceTimer,logEvent:n.logEvent,reportError:_.webReportError}});return a.dispatch(l.fetchListServices()),a.dispatch(l.fetchFeatureAvailability(f)),t.wrapDispatch(a.dispatch)(m.loadUserSettings()),a}t.registerReducersForIntegration=a.once(()=>r.getStoreAndRegisterReducers({[o.DEEP_INTEGRATIONS_NAMESPACE_KEY]:s.DeepIntegrationsReducer,[o.INTEGRATIONS_NAMESPACE_KEY]:c.IntegrationsReducer})),t.initStoreForIntegration=function(e){const n=void 0!==e?e:v.getActiveUserId();if(!n)throw new Error("Expected user ID");const r=t.registerReducersForIntegration();if(n===y)return r;const a=S(d.Viewer.get_viewer().get_user_by_id(n));return y=n,a},t.initStoreForTesting=function(e){return t.registerReducersForIntegration(),S(e.personal_user)};t.isPromptDismissed=(e,t)=>m.isPromptDismissed(g.getStateAtNamespace(e,o.DEEP_INTEGRATIONS_NAMESPACE_KEY),t);t.wrapMapStateToProps=e=>(t,n)=>e(g.getStateAtNamespace(t,o.DEEP_INTEGRATIONS_NAMESPACE_KEY),n);t.wrapDispatch=e=>n=>{if("function"==typeof n){const r=n;return e((e,n,a)=>r(t.wrapDispatch(e),()=>g.getStateAtNamespace(n(),o.DEEP_INTEGRATIONS_NAMESPACE_KEY),()=>a().deepIntegrationsHandler))}return e(n)};t.wrapMapDispatchToProps=e=>(n,r)=>e(t.wrapDispatch(n),r)})),define("metaserver/static/js/modules/clean/integrations/data/types",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actions=void 0,(function(e){e.fetchListServices="@@Integration/FetchListServices",e.fetchFeatureAvailability="@@Integration/FetchFeatureAvailability"})(t.Actions||(t.Actions={}))})),define("metaserver/static/js/modules/clean/integrations/log_event",["require","exports","tslib","lodash","metaserver/static/js/logging/telemetry","metaserver/static/js/logging/hive/schemas/web-ecosystem_integration_events"],(function(e,t,n,r,a,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionsLogger=t.createIntegrationsActionsHiveLogger=t.createIntegrationsActionsLogger=void 0,r=n.__importStar(r),t.createIntegrationsActionsLogger=r.once((function(e){return new i(e)})),t.createIntegrationsActionsHiveLogger=r.memoize(()=>new i(new a.HiveLogger));class i{constructor(e){this.logEvent=e=>{this.actionsLogger.log(new s.EcosystemIntegrationLoggingTableRow({event_name:e.event_name,integration_name:e.service_type,extra:Object.assign(Object.assign({},e.extra),{feature_name:e.feature_name})}))},this.actionsLogger=e||new a.VortexComboLogger}}t.ActionsLogger=i})),define("metaserver/static/js/modules/clean/integrations/performance_timer",["require","exports","metaserver/static/js/perf_tools/web_timing_utils"],(function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebPerformanceTimer=void 0,t.WebPerformanceTimer={now:()=>n.WebTimingUtil.getNow()}})),define("metaserver/static/js/modules/clean/integrations/feature_gating",["require","exports"],(function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFeatureVariant=t.isFeatureAvailable=t.getFeatureAvailability=void 0;t.getFeatureAvailability=(e,t)=>e.ns("integrations").rpc("are_features_available",{features:t},{}).then(e=>{const t={};return e.features.forEach(({feature:e,entry_point:n="default",available:r,variant:a})=>{t[n]=Object.assign(Object.assign({},t[n]),{[e]:{available:"available"===r[".tag"],variant:a}})}),t}),t.isFeatureAvailable=function(e,t){const n=t.entry_point||"default";return e[n]&&e[n][t.feature]&&e[n][t.feature].available||null},t.getFeatureVariant=function(e,t){const n=t.entry_point||"default";return e[n]&&e[n][t.feature]&&e[n][t.feature].variant||null}})),define("metaserver/static/js/modules/clean/integrations/report_error",["require","exports","metaserver/static/js/modules/core/exception","metaserver/static/js/api_v2/error"],(function(e,t,n,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.webReportError=void 0;function a(e){let t="UnknownError";if(e.error){const n=e.error;void 0!==n[".tag"]&&(t=n[".tag"])}const n=e.raw&&e.raw.responseBody?e.raw.responseBody:"Received empty error response body from API";return new Error(t+": "+n)}t.webReportError=(e,t,s=[],i)=>{if(r.isApiError(e))n.reportException({err:a(e),severity:t,tags:[...s,"DeepIntegrations"],exc_extra:i});else{if(!(e instanceof Error))throw new Error("webReportError received something other than an Error");n.reportException({err:e,severity:t,tags:[...s,"DeepIntegrations"],exc_extra:i})}}}));
//# sourceMappingURL=pkg-deep-integrations-common.min.js-vflIFZpni.map